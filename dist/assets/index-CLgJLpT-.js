(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ch(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Qe={},Ns=[],rn=()=>{},dw=()=>!1,ul=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),uh=t=>t.startsWith("onUpdate:"),ot=Object.assign,hh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},fw=Object.prototype.hasOwnProperty,Pe=(t,e)=>fw.call(t,e),le=Array.isArray,Ds=t=>vo(t)==="[object Map]",hl=t=>vo(t)==="[object Set]",ef=t=>vo(t)==="[object Date]",ge=t=>typeof t=="function",at=t=>typeof t=="string",Sr=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",Zm=t=>(ze(t)||ge(t))&&ge(t.then)&&ge(t.catch),eg=Object.prototype.toString,vo=t=>eg.call(t),pw=t=>vo(t).slice(8,-1),tg=t=>vo(t)==="[object Object]",dh=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pi=ch(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},mw=/-(\w)/g,Nn=dl(t=>t.replace(mw,(e,n)=>n?n.toUpperCase():"")),gw=/\B([A-Z])/g,ii=dl(t=>t.replace(gw,"-$1").toLowerCase()),fl=dl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Tc=dl(t=>t?`on${fl(t)}`:""),Rr=(t,e)=>!Object.is(t,e),fa=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ra=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Hi=t=>{const e=parseFloat(t);return isNaN(e)?t:e},_w=t=>{const e=at(t)?Number(t):NaN;return isNaN(e)?t:e};let tf;const ng=()=>tf||(tf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fh(t){if(le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=at(r)?Ew(r):fh(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(at(t)||ze(t))return t}const yw=/;(?![^(]*\))/g,vw=/:([^]+)/,ww=/\/\*[^]*?\*\//g;function Ew(t){const e={};return t.replace(ww,"").split(yw).forEach(n=>{if(n){const r=n.split(vw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Fe(t){let e="";if(at(t))e=t;else if(le(t))for(let n=0;n<t.length;n++){const r=Fe(t[n]);r&&(e+=r+" ")}else if(ze(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const bw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Tw=ch(bw);function rg(t){return!!t||t===""}function Iw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=pl(t[r],e[r]);return n}function pl(t,e){if(t===e)return!0;let n=ef(t),r=ef(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Sr(t),r=Sr(e),n||r)return t===e;if(n=le(t),r=le(e),n||r)return n&&r?Iw(t,e):!1;if(n=ze(t),r=ze(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!pl(t[o],e[o]))return!1}}return String(t)===String(e)}function Aw(t,e){return t.findIndex(n=>pl(n,e))}const Me=t=>at(t)?t:t==null?"":le(t)||ze(t)&&(t.toString===eg||!ge(t.toString))?JSON.stringify(t,sg,2):String(t),sg=(t,e)=>e&&e.__v_isRef?sg(t,e.value):Ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ic(r,i)+" =>"]=s,n),{})}:hl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ic(n))}:Sr(e)?Ic(e):ze(e)&&!le(e)&&!tg(e)?String(e):e,Ic=(t,e="")=>{var n;return Sr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yt;class ig{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Yt,!e&&Yt&&(this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Yt;try{return Yt=this,e()}finally{Yt=n}}}on(){Yt=this}off(){Yt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function og(t){return new ig(t)}function Sw(t,e=Yt){e&&e.active&&e.effects.push(t)}function ag(){return Yt}function Rw(t){Yt&&Yt.cleanups.push(t)}let Jr;class ph{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Sw(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,us();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Cw(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),hs()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=vr,n=Jr;try{return vr=!0,Jr=this,this._runnings++,nf(this),this.fn()}finally{rf(this),this._runnings--,Jr=n,vr=e}}stop(){var e;this.active&&(nf(this),rf(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function Cw(t){return t.value}function nf(t){t._trackId++,t._depsLength=0}function rf(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)lg(t.deps[e],t);t.deps.length=t._depsLength}}function lg(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let vr=!0,ou=0;const cg=[];function us(){cg.push(vr),vr=!1}function hs(){const t=cg.pop();vr=t===void 0?!0:t}function mh(){ou++}function gh(){for(ou--;!ou&&au.length;)au.shift()()}function ug(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&lg(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const au=[];function hg(t,e,n){mh();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&au.push(r.scheduler)))}gh()}const dg=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Ca=new WeakMap,Xr=Symbol(""),lu=Symbol("");function Gt(t,e,n){if(vr&&Jr){let r=Ca.get(t);r||Ca.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=dg(()=>r.delete(n))),ug(Jr,s)}}function Gn(t,e,n,r,s,i){const o=Ca.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&le(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Sr(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":le(t)?dh(n)&&a.push(o.get("length")):(a.push(o.get(Xr)),Ds(t)&&a.push(o.get(lu)));break;case"delete":le(t)||(a.push(o.get(Xr)),Ds(t)&&a.push(o.get(lu)));break;case"set":Ds(t)&&a.push(o.get(Xr));break}mh();for(const l of a)l&&hg(l,4);gh()}function xw(t,e){var n;return(n=Ca.get(t))==null?void 0:n.get(e)}const Pw=ch("__proto__,__v_isRef,__isVue"),fg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sr)),sf=kw();function kw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ce(this);for(let i=0,o=this.length;i<o;i++)Gt(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Ce)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){us(),mh();const r=Ce(this)[e].apply(this,n);return gh(),hs(),r}}),t}function Ow(t){const e=Ce(this);return Gt(e,"has",t),e.hasOwnProperty(t)}class pg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Hw:yg:i?_g:gg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!s){if(o&&Pe(sf,n))return Reflect.get(sf,n,r);if(n==="hasOwnProperty")return Ow}const a=Reflect.get(e,n,r);return(Sr(n)?fg.has(n):Pw(n))||(s||Gt(e,"get",n),i)?a:et(a)?o&&dh(n)?a:a.value:ze(a)?s?vh(a):Dn(a):a}}class mg extends pg{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=qs(i);if(!xa(r)&&!qs(r)&&(i=Ce(i),r=Ce(r)),!le(e)&&et(i)&&!et(r))return l?!1:(i.value=r,!0)}const o=le(e)&&dh(n)?Number(n)<e.length:Pe(e,n),a=Reflect.set(e,n,r,s);return e===Ce(s)&&(o?Rr(r,i)&&Gn(e,"set",n,r):Gn(e,"add",n,r)),a}deleteProperty(e,n){const r=Pe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Gn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Sr(n)||!fg.has(n))&&Gt(e,"has",n),r}ownKeys(e){return Gt(e,"iterate",le(e)?"length":Xr),Reflect.ownKeys(e)}}class Nw extends pg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Dw=new mg,Vw=new Nw,Mw=new mg(!0),_h=t=>t,ml=t=>Reflect.getPrototypeOf(t);function Ho(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ce(t),i=Ce(e);n||(Rr(e,i)&&Gt(s,"get",e),Gt(s,"get",i));const{has:o}=ml(s),a=r?_h:n?Eh:Wi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Wo(t,e=!1){const n=this.__v_raw,r=Ce(n),s=Ce(t);return e||(Rr(t,s)&&Gt(r,"has",t),Gt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Ko(t,e=!1){return t=t.__v_raw,!e&&Gt(Ce(t),"iterate",Xr),Reflect.get(t,"size",t)}function of(t){t=Ce(t);const e=Ce(this);return ml(e).has.call(e,t)||(e.add(t),Gn(e,"add",t,t)),this}function af(t,e){e=Ce(e);const n=Ce(this),{has:r,get:s}=ml(n);let i=r.call(n,t);i||(t=Ce(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Rr(e,o)&&Gn(n,"set",t,e):Gn(n,"add",t,e),this}function lf(t){const e=Ce(this),{has:n,get:r}=ml(e);let s=n.call(e,t);s||(t=Ce(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Gn(e,"delete",t,void 0),i}function cf(){const t=Ce(this),e=t.size!==0,n=t.clear();return e&&Gn(t,"clear",void 0,void 0),n}function Go(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Ce(o),l=e?_h:t?Eh:Wi;return!t&&Gt(a,"iterate",Xr),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Qo(t,e,n){return function(...r){const s=this.__v_raw,i=Ce(s),o=Ds(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?_h:e?Eh:Wi;return!e&&Gt(i,"iterate",l?lu:Xr),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function rr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Lw(){const t={get(i){return Ho(this,i)},get size(){return Ko(this)},has:Wo,add:of,set:af,delete:lf,clear:cf,forEach:Go(!1,!1)},e={get(i){return Ho(this,i,!1,!0)},get size(){return Ko(this)},has:Wo,add:of,set:af,delete:lf,clear:cf,forEach:Go(!1,!0)},n={get(i){return Ho(this,i,!0)},get size(){return Ko(this,!0)},has(i){return Wo.call(this,i,!0)},add:rr("add"),set:rr("set"),delete:rr("delete"),clear:rr("clear"),forEach:Go(!0,!1)},r={get(i){return Ho(this,i,!0,!0)},get size(){return Ko(this,!0)},has(i){return Wo.call(this,i,!0)},add:rr("add"),set:rr("set"),delete:rr("delete"),clear:rr("clear"),forEach:Go(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Qo(i,!1,!1),n[i]=Qo(i,!0,!1),e[i]=Qo(i,!1,!0),r[i]=Qo(i,!0,!0)}),[t,n,e,r]}const[Fw,$w,Uw,jw]=Lw();function yh(t,e){const n=e?t?jw:Uw:t?$w:Fw;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Pe(n,s)&&s in r?n:r,s,i)}const Bw={get:yh(!1,!1)},qw={get:yh(!1,!0)},zw={get:yh(!0,!1)},gg=new WeakMap,_g=new WeakMap,yg=new WeakMap,Hw=new WeakMap;function Ww(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kw(t){return t.__v_skip||!Object.isExtensible(t)?0:Ww(pw(t))}function Dn(t){return qs(t)?t:wh(t,!1,Dw,Bw,gg)}function vg(t){return wh(t,!1,Mw,qw,_g)}function vh(t){return wh(t,!0,Vw,zw,yg)}function wh(t,e,n,r,s){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=Kw(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function wr(t){return qs(t)?wr(t.__v_raw):!!(t&&t.__v_isReactive)}function qs(t){return!!(t&&t.__v_isReadonly)}function xa(t){return!!(t&&t.__v_isShallow)}function wg(t){return wr(t)||qs(t)}function Ce(t){const e=t&&t.__v_raw;return e?Ce(e):t}function gl(t){return Object.isExtensible(t)&&Ra(t,"__v_skip",!0),t}const Wi=t=>ze(t)?Dn(t):t,Eh=t=>ze(t)?vh(t):t;class Eg{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ph(()=>e(this._value),()=>pa(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Ce(this);return(!e._cacheable||e.effect.dirty)&&Rr(e._value,e._value=e.effect.run())&&pa(e,4),bg(e),e.effect._dirtyLevel>=2&&pa(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Gw(t,e,n=!1){let r,s;const i=ge(t);return i?(r=t,s=rn):(r=t.get,s=t.set),new Eg(r,s,i||!s,n)}function bg(t){var e;vr&&Jr&&(t=Ce(t),ug(Jr,(e=t.dep)!=null?e:t.dep=dg(()=>t.dep=void 0,t instanceof Eg?t:void 0)))}function pa(t,e=4,n){t=Ce(t);const r=t.dep;r&&hg(r,e)}function et(t){return!!(t&&t.__v_isRef===!0)}function ye(t){return Ig(t,!1)}function Tg(t){return Ig(t,!0)}function Ig(t,e){return et(t)?t:new Qw(t,e)}class Qw{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ce(e),this._value=n?e:Wi(e)}get value(){return bg(this),this._value}set value(e){const n=this.__v_isShallow||xa(e)||qs(e);e=n?e:Ce(e),Rr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Wi(e),pa(this,4))}}function w(t){return et(t)?t.value:t}function qe(t){return ge(t)?t():w(t)}const Yw={get:(t,e,n)=>w(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return et(s)&&!et(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Ag(t){return wr(t)?t:new Proxy(t,Yw)}function Jw(t){const e=le(t)?new Array(t.length):{};for(const n in t)e[n]=Zw(t,n);return e}class Xw{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return xw(Ce(this._object),this._key)}}function Zw(t,e,n){const r=t[e];return et(r)?r:new Xw(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Er(t,e,n,r){try{return r?t(...r):t()}catch(s){_l(s,e,n)}}function sn(t,e,n,r){if(ge(t)){const i=Er(t,e,n,r);return i&&Zm(i)&&i.catch(o=>{_l(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(sn(t[i],e,n,r));return s}function _l(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Er(l,null,10,[t,o,a]);return}}eE(t,n,s,r)}function eE(t,e,n,r=!0){console.error(t)}let Ki=!1,cu=!1;const kt=[];let En=0;const Vs=[];let ur=null,Br=0;const Sg=Promise.resolve();let bh=null;function Ht(t){const e=bh||Sg;return t?e.then(this?t.bind(this):t):e}function tE(t){let e=En+1,n=kt.length;for(;e<n;){const r=e+n>>>1,s=kt[r],i=Gi(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function Th(t){(!kt.length||!kt.includes(t,Ki&&t.allowRecurse?En+1:En))&&(t.id==null?kt.push(t):kt.splice(tE(t.id),0,t),Rg())}function Rg(){!Ki&&!cu&&(cu=!0,bh=Sg.then(xg))}function nE(t){const e=kt.indexOf(t);e>En&&kt.splice(e,1)}function rE(t){le(t)?Vs.push(...t):(!ur||!ur.includes(t,t.allowRecurse?Br+1:Br))&&Vs.push(t),Rg()}function uf(t,e,n=Ki?En+1:0){for(;n<kt.length;n++){const r=kt[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;kt.splice(n,1),n--,r()}}}function Cg(t){if(Vs.length){const e=[...new Set(Vs)].sort((n,r)=>Gi(n)-Gi(r));if(Vs.length=0,ur){ur.push(...e);return}for(ur=e,Br=0;Br<ur.length;Br++)ur[Br]();ur=null,Br=0}}const Gi=t=>t.id==null?1/0:t.id,sE=(t,e)=>{const n=Gi(t)-Gi(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function xg(t){cu=!1,Ki=!0,kt.sort(sE);try{for(En=0;En<kt.length;En++){const e=kt[En];e&&e.active!==!1&&Er(e,null,14)}}finally{En=0,kt.length=0,Cg(),Ki=!1,bh=null,(kt.length||Vs.length)&&xg()}}function iE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Qe;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||Qe;d&&(s=n.map(f=>at(f)?f.trim():f)),h&&(s=n.map(Hi))}let a,l=r[a=Tc(e)]||r[a=Tc(Nn(e))];!l&&i&&(l=r[a=Tc(ii(e))]),l&&sn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,sn(c,t,6,s)}}function Pg(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!ge(t)){const l=c=>{const u=Pg(c,e,!0);u&&(a=!0,ot(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ze(t)&&r.set(t,null),null):(le(i)?i.forEach(l=>o[l]=null):ot(o,i),ze(t)&&r.set(t,o),o)}function yl(t,e){return!t||!ul(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pe(t,e[0].toLowerCase()+e.slice(1))||Pe(t,ii(e))||Pe(t,e))}let it=null,kg=null;function Pa(t){const e=it;return it=t,kg=t&&t.type.__scopeId||null,e}function Ot(t,e=it,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ef(-1);const i=Pa(e);let o;try{o=t(...s)}finally{Pa(i),r._d&&Ef(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ac(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:_,inheritAttrs:E}=t;let b,A;const P=Pa(t);try{if(n.shapeFlag&4){const q=s||r,R=q;b=wn(u.call(R,q,h,i,f,d,_)),A=l}else{const q=e;b=wn(q.length>1?q(i,{attrs:l,slots:a,emit:c}):q(i,null)),A=e.props?l:oE(l)}}catch(q){Di.length=0,_l(q,t,1),b=Be(Jn)}let M=b;if(A&&E!==!1){const q=Object.keys(A),{shapeFlag:R}=M;q.length&&R&7&&(o&&q.some(uh)&&(A=aE(A,o)),M=ns(M,A))}return n.dirs&&(M=ns(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),b=M,Pa(P),b}const oE=t=>{let e;for(const n in t)(n==="class"||n==="style"||ul(n))&&((e||(e={}))[n]=t[n]);return e},aE=(t,e)=>{const n={};for(const r in t)(!uh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function lE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?hf(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!yl(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?hf(r,o,c):!0:!!o;return!1}function hf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!yl(n,i))return!0}return!1}function cE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Og="components";function Ih(t,e){return hE(Og,t,!0,e)||t}const uE=Symbol.for("v-ndc");function hE(t,e,n=!0,r=!1){const s=it||gt;if(s){const i=s.type;if(t===Og){const a=sb(i,!1);if(a&&(a===e||a===Nn(e)||a===fl(Nn(e))))return i}const o=df(s[t]||i[t],e)||df(s.appContext[t],e);return!o&&r?i:o}}function df(t,e){return t&&(t[e]||t[Nn(e)]||t[fl(Nn(e))])}const dE=t=>t.__isSuspense;function fE(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):rE(t)}const pE=Symbol.for("v-scx"),mE=()=>on(pE);function Ah(t,e){return Sh(t,null,e)}const Yo={};function Sn(t,e,n){return Sh(t,e,n)}function Sh(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Qe){if(e&&i){const I=e;e=(...F)=>{I(...F),R()}}const l=gt,c=I=>r===!0?I:Hr(I,r===!1?1:void 0);let u,h=!1,d=!1;if(et(t)?(u=()=>t.value,h=xa(t)):wr(t)?(u=()=>c(t),h=!0):le(t)?(d=!0,h=t.some(I=>wr(I)||xa(I)),u=()=>t.map(I=>{if(et(I))return I.value;if(wr(I))return c(I);if(ge(I))return Er(I,l,2)})):ge(t)?e?u=()=>Er(t,l,2):u=()=>(f&&f(),sn(t,l,3,[_])):u=rn,e&&r){const I=u;u=()=>Hr(I())}let f,_=I=>{f=M.onStop=()=>{Er(I,l,4),f=M.onStop=void 0}},E;if(Tl)if(_=rn,e?n&&sn(e,l,3,[u(),d?[]:void 0,_]):u(),s==="sync"){const I=mE();E=I.__watcherHandles||(I.__watcherHandles=[])}else return rn;let b=d?new Array(t.length).fill(Yo):Yo;const A=()=>{if(!(!M.active||!M.dirty))if(e){const I=M.run();(r||h||(d?I.some((F,x)=>Rr(F,b[x])):Rr(I,b)))&&(f&&f(),sn(e,l,3,[I,b===Yo?void 0:d&&b[0]===Yo?[]:b,_]),b=I)}else M.run()};A.allowRecurse=!!e;let P;s==="sync"?P=A:s==="post"?P=()=>zt(A,l&&l.suspense):(A.pre=!0,l&&(A.id=l.uid),P=()=>Th(A));const M=new ph(u,rn,P),q=ag(),R=()=>{M.stop(),q&&hh(q.effects,M)};return e?n?A():b=M.run():s==="post"?zt(M.run.bind(M),l&&l.suspense):M.run(),E&&E.push(R),R}function gE(t,e,n){const r=this.proxy,s=at(t)?t.includes(".")?Ng(r,t):()=>r[t]:t.bind(r,r);let i;ge(e)?i=e:(i=e.handler,n=e);const o=Eo(this),a=Sh(s,i.bind(r),n);return o(),a}function Ng(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Hr(t,e,n=0,r){if(!ze(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),et(t))Hr(t.value,e,n,r);else if(le(t))for(let s=0;s<t.length;s++)Hr(t[s],e,n,r);else if(hl(t)||Ds(t))t.forEach(s=>{Hr(s,e,n,r)});else if(tg(t))for(const s in t)Hr(t[s],e,n,r);return t}function ct(t,e){if(it===null)return t;const n=Il(it)||it.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Qe]=e[s];i&&(ge(i)&&(i={mounted:i,updated:i}),i.deep&&Hr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Fr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(us(),sn(l,n,8,[t.el,a,t,e]),hs())}}const Es=Symbol("_leaveCb"),Jo=Symbol("_enterCb");function _E(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return wo(()=>{t.isMounted=!0}),Rh(()=>{t.isUnmounting=!0}),t}const en=[Function,Array],yE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:en,onEnter:en,onAfterEnter:en,onEnterCancelled:en,onBeforeLeave:en,onLeave:en,onAfterLeave:en,onLeaveCancelled:en,onBeforeAppear:en,onAppear:en,onAfterAppear:en,onAppearCancelled:en};function vE(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function uu(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:_,onBeforeAppear:E,onAppear:b,onAfterAppear:A,onAppearCancelled:P}=e,M=String(t.key),q=vE(n,t),R=(x,V)=>{x&&sn(x,r,9,V)},I=(x,V)=>{const $=V[1];R(x,V),le(x)?x.every(Y=>Y.length<=1)&&$():x.length<=1&&$()},F={mode:i,persisted:o,beforeEnter(x){let V=a;if(!n.isMounted)if(s)V=E||a;else return;x[Es]&&x[Es](!0);const $=q[M];$&&As(t,$)&&$.el[Es]&&$.el[Es](),R(V,[x])},enter(x){let V=l,$=c,Y=u;if(!n.isMounted)if(s)V=b||l,$=A||c,Y=P||u;else return;let B=!1;const te=x[Jo]=Ae=>{B||(B=!0,Ae?R(Y,[x]):R($,[x]),F.delayedLeave&&F.delayedLeave(),x[Jo]=void 0)};V?I(V,[x,te]):te()},leave(x,V){const $=String(t.key);if(x[Jo]&&x[Jo](!0),n.isUnmounting)return V();R(h,[x]);let Y=!1;const B=x[Es]=te=>{Y||(Y=!0,V(),te?R(_,[x]):R(f,[x]),x[Es]=void 0,q[$]===t&&delete q[$])};q[$]=t,d?I(d,[x,B]):B()},clone(x){return uu(x,e,n,r)}};return F}function hu(t,e){t.shapeFlag&6&&t.component?hu(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Dg(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===rt?(o.patchFlag&128&&s++,r=r.concat(Dg(o.children,e,a))):(e||o.type!==Jn)&&r.push(a!=null?ns(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function At(t,e){return ge(t)?ot({name:t.name},e,{setup:t}):t}const ki=t=>!!t.type.__asyncLoader,Vg=t=>t.type.__isKeepAlive;function wE(t,e){Mg(t,"a",e)}function EE(t,e){Mg(t,"da",e)}function Mg(t,e,n=gt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(vl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Vg(s.parent.vnode)&&bE(r,e,n,s),s=s.parent}}function bE(t,e,n,r){const s=vl(e,t,r,!0);Fg(()=>{hh(r[e],s)},n)}function vl(t,e,n=gt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;us();const a=Eo(n),l=sn(e,n,t,o);return a(),hs(),l});return r?s.unshift(i):s.push(i),i}}const tr=t=>(e,n=gt)=>(!Tl||t==="sp")&&vl(t,(...r)=>e(...r),n),TE=tr("bm"),wo=tr("m"),IE=tr("bu"),Lg=tr("u"),Rh=tr("bum"),Fg=tr("um"),AE=tr("sp"),SE=tr("rtg"),RE=tr("rtc");function CE(t,e=gt){vl("ec",t,e)}function wl(t,e,n,r){let s;const i=n&&n[r];if(le(t)||at(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(ze(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function $g(t,e,n={},r,s){if(it.isCE||it.parent&&ki(it.parent)&&it.parent.isCE)return e!=="default"&&(n.name=e),Be("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),X();const o=i&&Ug(i(n)),a=ht(rt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Ug(t){return t.some(e=>Oa(e)?!(e.type===Jn||e.type===rt&&!Ug(e.children)):!0)?t:null}const du=t=>t?Zg(t)?Il(t)||t.proxy:du(t.parent):null,Oi=ot(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>du(t.parent),$root:t=>du(t.root),$emit:t=>t.emit,$options:t=>Ch(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Th(t.update)}),$nextTick:t=>t.n||(t.n=Ht.bind(t.proxy)),$watch:t=>gE.bind(t)}),Sc=(t,e)=>t!==Qe&&!t.__isScriptSetup&&Pe(t,e),xE={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Sc(r,e))return o[e]=1,r[e];if(s!==Qe&&Pe(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Pe(c,e))return o[e]=3,i[e];if(n!==Qe&&Pe(n,e))return o[e]=4,n[e];fu&&(o[e]=0)}}const u=Oi[e];let h,d;if(u)return e==="$attrs"&&Gt(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Qe&&Pe(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Pe(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Sc(s,e)?(s[e]=n,!0):r!==Qe&&Pe(r,e)?(r[e]=n,!0):Pe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Qe&&Pe(t,o)||Sc(e,o)||(a=i[0])&&Pe(a,o)||Pe(r,o)||Pe(Oi,o)||Pe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ff(t){return le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let fu=!0;function PE(t){const e=Ch(t),n=t.proxy,r=t.ctx;fu=!1,e.beforeCreate&&pf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:_,activated:E,deactivated:b,beforeDestroy:A,beforeUnmount:P,destroyed:M,unmounted:q,render:R,renderTracked:I,renderTriggered:F,errorCaptured:x,serverPrefetch:V,expose:$,inheritAttrs:Y,components:B,directives:te,filters:Ae}=e;if(c&&kE(c,r,null),o)for(const xe in o){const ve=o[xe];ge(ve)&&(r[xe]=ve.bind(n))}if(s){const xe=s.call(n,n);ze(xe)&&(t.data=Dn(xe))}if(fu=!0,i)for(const xe in i){const ve=i[xe],jt=ge(ve)?ve.bind(n,n):ge(ve.get)?ve.get.bind(n,n):rn,gn=!ge(ve)&&ge(ve.set)?ve.set.bind(n):rn,Qt=Le({get:jt,set:gn});Object.defineProperty(r,xe,{enumerable:!0,configurable:!0,get:()=>Qt.value,set:Lt=>Qt.value=Lt})}if(a)for(const xe in a)jg(a[xe],r,n,xe);if(l){const xe=ge(l)?l.call(n):l;Reflect.ownKeys(xe).forEach(ve=>{Ni(ve,xe[ve])})}u&&pf(u,t,"c");function oe(xe,ve){le(ve)?ve.forEach(jt=>xe(jt.bind(n))):ve&&xe(ve.bind(n))}if(oe(TE,h),oe(wo,d),oe(IE,f),oe(Lg,_),oe(wE,E),oe(EE,b),oe(CE,x),oe(RE,I),oe(SE,F),oe(Rh,P),oe(Fg,q),oe(AE,V),le($))if($.length){const xe=t.exposed||(t.exposed={});$.forEach(ve=>{Object.defineProperty(xe,ve,{get:()=>n[ve],set:jt=>n[ve]=jt})})}else t.exposed||(t.exposed={});R&&t.render===rn&&(t.render=R),Y!=null&&(t.inheritAttrs=Y),B&&(t.components=B),te&&(t.directives=te)}function kE(t,e,n=rn){le(t)&&(t=pu(t));for(const r in t){const s=t[r];let i;ze(s)?"default"in s?i=on(s.from||r,s.default,!0):i=on(s.from||r):i=on(s),et(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function pf(t,e,n){sn(le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function jg(t,e,n,r){const s=r.includes(".")?Ng(n,r):()=>n[r];if(at(t)){const i=e[t];ge(i)&&Sn(s,i)}else if(ge(t))Sn(s,t.bind(n));else if(ze(t))if(le(t))t.forEach(i=>jg(i,e,n,r));else{const i=ge(t.handler)?t.handler.bind(n):e[t.handler];ge(i)&&Sn(s,i,t)}}function Ch(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>ka(l,c,o,!0)),ka(l,e,o)),ze(e)&&i.set(e,l),l}function ka(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ka(t,i,n,!0),s&&s.forEach(o=>ka(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=OE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const OE={data:mf,props:gf,emits:gf,methods:bi,computed:bi,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:bi,directives:bi,watch:DE,provide:mf,inject:NE};function mf(t,e){return e?t?function(){return ot(ge(t)?t.call(this,this):t,ge(e)?e.call(this,this):e)}:e:t}function NE(t,e){return bi(pu(t),pu(e))}function pu(t){if(le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ft(t,e){return t?[...new Set([].concat(t,e))]:e}function bi(t,e){return t?ot(Object.create(null),t,e):e}function gf(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:ot(Object.create(null),ff(t),ff(e??{})):e}function DE(t,e){if(!t)return e;if(!e)return t;const n=ot(Object.create(null),t);for(const r in e)n[r]=Ft(t[r],e[r]);return n}function Bg(){return{app:null,config:{isNativeTag:dw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VE=0;function ME(t,e){return function(r,s=null){ge(r)||(r=ot({},r)),s!=null&&!ze(s)&&(s=null);const i=Bg(),o=new WeakSet;let a=!1;const l=i.app={_uid:VE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ob,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&ge(c.install)?(o.add(c),c.install(l,...u)):ge(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const d=Be(r,s);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Il(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=Ms;Ms=l;try{return c()}finally{Ms=u}}};return l}}let Ms=null;function Ni(t,e){if(gt){let n=gt.provides;const r=gt.parent&&gt.parent.provides;r===n&&(n=gt.provides=Object.create(r)),n[t]=e}}function on(t,e,n=!1){const r=gt||it;if(r||Ms){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ms._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ge(e)?e.call(r&&r.proxy):e}}function LE(){return!!(gt||it||Ms)}function FE(t,e,n,r=!1){const s={},i={};Ra(i,bl,1),t.propsDefaults=Object.create(null),qg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:vg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function $E(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ce(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(yl(t.emitsOptions,d))continue;const f=e[d];if(l)if(Pe(i,d))f!==i[d]&&(i[d]=f,c=!0);else{const _=Nn(d);s[_]=mu(l,a,_,f,t,!1)}else f!==i[d]&&(i[d]=f,c=!0)}}}else{qg(t,e,s,i)&&(c=!0);let u;for(const h in a)(!e||!Pe(e,h)&&((u=ii(h))===h||!Pe(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=mu(l,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Pe(e,h))&&(delete i[h],c=!0)}c&&Gn(t,"set","$attrs")}function qg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Pi(l))continue;const c=e[l];let u;s&&Pe(s,u=Nn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:yl(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Ce(n),c=a||Qe;for(let u=0;u<i.length;u++){const h=i[u];n[h]=mu(s,l,h,c[h],t,!Pe(c,h))}}return o}function mu(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Pe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ge(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=Eo(s);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ii(n))&&(r=!0))}return r}function zg(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!ge(t)){const u=h=>{l=!0;const[d,f]=zg(h,e,!0);ot(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ze(t)&&r.set(t,Ns),Ns;if(le(i))for(let u=0;u<i.length;u++){const h=Nn(i[u]);_f(h)&&(o[h]=Qe)}else if(i)for(const u in i){const h=Nn(u);if(_f(h)){const d=i[u],f=o[h]=le(d)||ge(d)?{type:d}:ot({},d);if(f){const _=wf(Boolean,f.type),E=wf(String,f.type);f[0]=_>-1,f[1]=E<0||_<E,(_>-1||Pe(f,"default"))&&a.push(h)}}}const c=[o,a];return ze(t)&&r.set(t,c),c}function _f(t){return t[0]!=="$"&&!Pi(t)}function yf(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function vf(t,e){return yf(t)===yf(e)}function wf(t,e){return le(e)?e.findIndex(n=>vf(n,t)):ge(e)&&vf(e,t)?0:-1}const Hg=t=>t[0]==="_"||t==="$stable",xh=t=>le(t)?t.map(wn):[wn(t)],UE=(t,e,n)=>{if(e._n)return e;const r=Ot((...s)=>xh(e(...s)),n);return r._c=!1,r},Wg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Hg(s))continue;const i=t[s];if(ge(i))e[s]=UE(s,i,r);else if(i!=null){const o=xh(i);e[s]=()=>o}}},Kg=(t,e)=>{const n=xh(e);t.slots.default=()=>n},jE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ce(e),Ra(e,"_",n)):Wg(e,t.slots={})}else t.slots={},e&&Kg(t,e);Ra(t.slots,bl,1)},BE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Qe;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(ot(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Wg(e,s)),o=e}else e&&(Kg(t,e),o={default:1});if(i)for(const a in s)!Hg(a)&&o[a]==null&&delete s[a]};function gu(t,e,n,r,s=!1){if(le(t)){t.forEach((d,f)=>gu(d,e&&(le(e)?e[f]:e),n,r,s));return}if(ki(r)&&!s)return;const i=r.shapeFlag&4?Il(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Qe?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(at(c)?(u[c]=null,Pe(h,c)&&(h[c]=null)):et(c)&&(c.value=null)),ge(l))Er(l,a,12,[o,u]);else{const d=at(l),f=et(l);if(d||f){const _=()=>{if(t.f){const E=d?Pe(h,l)?h[l]:u[l]:l.value;s?le(E)&&hh(E,i):le(E)?E.includes(i)||E.push(i):d?(u[l]=[i],Pe(h,l)&&(h[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,Pe(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(_.id=-1,zt(_,n)):_()}}}const zt=fE;function qE(t){return zE(t)}function zE(t,e){const n=ng();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=rn,insertStaticContent:_}=t,E=(p,m,T,O=null,C=null,U=null,z=void 0,j=null,H=!!m.dynamicChildren)=>{if(p===m)return;p&&!As(p,m)&&(O=S(p),Lt(p,C,U,!0),p=null),m.patchFlag===-2&&(H=!1,m.dynamicChildren=null);const{type:L,ref:J,shapeFlag:ae}=m;switch(L){case El:b(p,m,T,O);break;case Jn:A(p,m,T,O);break;case Cc:p==null&&P(m,T,O,z);break;case rt:B(p,m,T,O,C,U,z,j,H);break;default:ae&1?R(p,m,T,O,C,U,z,j,H):ae&6?te(p,m,T,O,C,U,z,j,H):(ae&64||ae&128)&&L.process(p,m,T,O,C,U,z,j,H,ne)}J!=null&&C&&gu(J,p&&p.ref,U,m||p,!m)},b=(p,m,T,O)=>{if(p==null)r(m.el=a(m.children),T,O);else{const C=m.el=p.el;m.children!==p.children&&c(C,m.children)}},A=(p,m,T,O)=>{p==null?r(m.el=l(m.children||""),T,O):m.el=p.el},P=(p,m,T,O)=>{[p.el,p.anchor]=_(p.children,m,T,O,p.el,p.anchor)},M=({el:p,anchor:m},T,O)=>{let C;for(;p&&p!==m;)C=d(p),r(p,T,O),p=C;r(m,T,O)},q=({el:p,anchor:m})=>{let T;for(;p&&p!==m;)T=d(p),s(p),p=T;s(m)},R=(p,m,T,O,C,U,z,j,H)=>{m.type==="svg"?z="svg":m.type==="math"&&(z="mathml"),p==null?I(m,T,O,C,U,z,j,H):V(p,m,C,U,z,j,H)},I=(p,m,T,O,C,U,z,j)=>{let H,L;const{props:J,shapeFlag:ae,transition:se,dirs:he}=p;if(H=p.el=o(p.type,U,J&&J.is,J),ae&8?u(H,p.children):ae&16&&x(p.children,H,null,O,C,Rc(p,U),z,j),he&&Fr(p,null,O,"created"),F(H,p,p.scopeId,z,O),J){for(const Ne in J)Ne!=="value"&&!Pi(Ne)&&i(H,Ne,null,J[Ne],U,p.children,O,C,He);"value"in J&&i(H,"value",null,J.value,U),(L=J.onVnodeBeforeMount)&&yn(L,O,p)}he&&Fr(p,null,O,"beforeMount");const we=HE(C,se);we&&se.beforeEnter(H),r(H,m,T),((L=J&&J.onVnodeMounted)||we||he)&&zt(()=>{L&&yn(L,O,p),we&&se.enter(H),he&&Fr(p,null,O,"mounted")},C)},F=(p,m,T,O,C)=>{if(T&&f(p,T),O)for(let U=0;U<O.length;U++)f(p,O[U]);if(C){let U=C.subTree;if(m===U){const z=C.vnode;F(p,z,z.scopeId,z.slotScopeIds,C.parent)}}},x=(p,m,T,O,C,U,z,j,H=0)=>{for(let L=H;L<p.length;L++){const J=p[L]=j?hr(p[L]):wn(p[L]);E(null,J,m,T,O,C,U,z,j)}},V=(p,m,T,O,C,U,z)=>{const j=m.el=p.el;let{patchFlag:H,dynamicChildren:L,dirs:J}=m;H|=p.patchFlag&16;const ae=p.props||Qe,se=m.props||Qe;let he;if(T&&$r(T,!1),(he=se.onVnodeBeforeUpdate)&&yn(he,T,m,p),J&&Fr(m,p,T,"beforeUpdate"),T&&$r(T,!0),L?$(p.dynamicChildren,L,j,T,O,Rc(m,C),U):z||ve(p,m,j,null,T,O,Rc(m,C),U,!1),H>0){if(H&16)Y(j,m,ae,se,T,O,C);else if(H&2&&ae.class!==se.class&&i(j,"class",null,se.class,C),H&4&&i(j,"style",ae.style,se.style,C),H&8){const we=m.dynamicProps;for(let Ne=0;Ne<we.length;Ne++){const y=we[Ne],v=ae[y],k=se[y];(k!==v||y==="value")&&i(j,y,v,k,C,p.children,T,O,He)}}H&1&&p.children!==m.children&&u(j,m.children)}else!z&&L==null&&Y(j,m,ae,se,T,O,C);((he=se.onVnodeUpdated)||J)&&zt(()=>{he&&yn(he,T,m,p),J&&Fr(m,p,T,"updated")},O)},$=(p,m,T,O,C,U,z)=>{for(let j=0;j<m.length;j++){const H=p[j],L=m[j],J=H.el&&(H.type===rt||!As(H,L)||H.shapeFlag&70)?h(H.el):T;E(H,L,J,null,O,C,U,z,!0)}},Y=(p,m,T,O,C,U,z)=>{if(T!==O){if(T!==Qe)for(const j in T)!Pi(j)&&!(j in O)&&i(p,j,T[j],null,z,m.children,C,U,He);for(const j in O){if(Pi(j))continue;const H=O[j],L=T[j];H!==L&&j!=="value"&&i(p,j,L,H,z,m.children,C,U,He)}"value"in O&&i(p,"value",T.value,O.value,z)}},B=(p,m,T,O,C,U,z,j,H)=>{const L=m.el=p?p.el:a(""),J=m.anchor=p?p.anchor:a("");let{patchFlag:ae,dynamicChildren:se,slotScopeIds:he}=m;he&&(j=j?j.concat(he):he),p==null?(r(L,T,O),r(J,T,O),x(m.children||[],T,J,C,U,z,j,H)):ae>0&&ae&64&&se&&p.dynamicChildren?($(p.dynamicChildren,se,T,C,U,z,j),(m.key!=null||C&&m===C.subTree)&&Gg(p,m,!0)):ve(p,m,T,J,C,U,z,j,H)},te=(p,m,T,O,C,U,z,j,H)=>{m.slotScopeIds=j,p==null?m.shapeFlag&512?C.ctx.activate(m,T,O,z,H):Ae(m,T,O,C,U,z,H):je(p,m,H)},Ae=(p,m,T,O,C,U,z)=>{const j=p.component=ZE(p,O,C);if(Vg(p)&&(j.ctx.renderer=ne),eb(j),j.asyncDep){if(C&&C.registerDep(j,oe),!p.el){const H=j.subTree=Be(Jn);A(null,H,m,T)}}else oe(j,p,m,T,C,U,z)},je=(p,m,T)=>{const O=m.component=p.component;if(lE(p,m,T))if(O.asyncDep&&!O.asyncResolved){xe(O,m,T);return}else O.next=m,nE(O.update),O.effect.dirty=!0,O.update();else m.el=p.el,O.vnode=m},oe=(p,m,T,O,C,U,z)=>{const j=()=>{if(p.isMounted){let{next:J,bu:ae,u:se,parent:he,vnode:we}=p;{const K=Qg(p);if(K){J&&(J.el=we.el,xe(p,J,z)),K.asyncDep.then(()=>{p.isUnmounted||j()});return}}let Ne=J,y;$r(p,!1),J?(J.el=we.el,xe(p,J,z)):J=we,ae&&fa(ae),(y=J.props&&J.props.onVnodeBeforeUpdate)&&yn(y,he,J,we),$r(p,!0);const v=Ac(p),k=p.subTree;p.subTree=v,E(k,v,h(k.el),S(k),p,C,U),J.el=v.el,Ne===null&&cE(p,v.el),se&&zt(se,C),(y=J.props&&J.props.onVnodeUpdated)&&zt(()=>yn(y,he,J,we),C)}else{let J;const{el:ae,props:se}=m,{bm:he,m:we,parent:Ne}=p,y=ki(m);if($r(p,!1),he&&fa(he),!y&&(J=se&&se.onVnodeBeforeMount)&&yn(J,Ne,m),$r(p,!0),ae&&We){const v=()=>{p.subTree=Ac(p),We(ae,p.subTree,p,C,null)};y?m.type.__asyncLoader().then(()=>!p.isUnmounted&&v()):v()}else{const v=p.subTree=Ac(p);E(null,v,T,O,p,C,U),m.el=v.el}if(we&&zt(we,C),!y&&(J=se&&se.onVnodeMounted)){const v=m;zt(()=>yn(J,Ne,v),C)}(m.shapeFlag&256||Ne&&ki(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&p.a&&zt(p.a,C),p.isMounted=!0,m=T=O=null}},H=p.effect=new ph(j,rn,()=>Th(L),p.scope),L=p.update=()=>{H.dirty&&H.run()};L.id=p.uid,$r(p,!0),L()},xe=(p,m,T)=>{m.component=p;const O=p.vnode.props;p.vnode=m,p.next=null,$E(p,m.props,O,T),BE(p,m.children,T),us(),uf(p),hs()},ve=(p,m,T,O,C,U,z,j,H=!1)=>{const L=p&&p.children,J=p?p.shapeFlag:0,ae=m.children,{patchFlag:se,shapeFlag:he}=m;if(se>0){if(se&128){gn(L,ae,T,O,C,U,z,j,H);return}else if(se&256){jt(L,ae,T,O,C,U,z,j,H);return}}he&8?(J&16&&He(L,C,U),ae!==L&&u(T,ae)):J&16?he&16?gn(L,ae,T,O,C,U,z,j,H):He(L,C,U,!0):(J&8&&u(T,""),he&16&&x(ae,T,O,C,U,z,j,H))},jt=(p,m,T,O,C,U,z,j,H)=>{p=p||Ns,m=m||Ns;const L=p.length,J=m.length,ae=Math.min(L,J);let se;for(se=0;se<ae;se++){const he=m[se]=H?hr(m[se]):wn(m[se]);E(p[se],he,T,null,C,U,z,j,H)}L>J?He(p,C,U,!0,!1,ae):x(m,T,O,C,U,z,j,H,ae)},gn=(p,m,T,O,C,U,z,j,H)=>{let L=0;const J=m.length;let ae=p.length-1,se=J-1;for(;L<=ae&&L<=se;){const he=p[L],we=m[L]=H?hr(m[L]):wn(m[L]);if(As(he,we))E(he,we,T,null,C,U,z,j,H);else break;L++}for(;L<=ae&&L<=se;){const he=p[ae],we=m[se]=H?hr(m[se]):wn(m[se]);if(As(he,we))E(he,we,T,null,C,U,z,j,H);else break;ae--,se--}if(L>ae){if(L<=se){const he=se+1,we=he<J?m[he].el:O;for(;L<=se;)E(null,m[L]=H?hr(m[L]):wn(m[L]),T,we,C,U,z,j,H),L++}}else if(L>se)for(;L<=ae;)Lt(p[L],C,U,!0),L++;else{const he=L,we=L,Ne=new Map;for(L=we;L<=se;L++){const Se=m[L]=H?hr(m[L]):wn(m[L]);Se.key!=null&&Ne.set(Se.key,L)}let y,v=0;const k=se-we+1;let K=!1,ce=0;const re=new Array(k);for(L=0;L<k;L++)re[L]=0;for(L=he;L<=ae;L++){const Se=p[L];if(v>=k){Lt(Se,C,U,!0);continue}let ke;if(Se.key!=null)ke=Ne.get(Se.key);else for(y=we;y<=se;y++)if(re[y-we]===0&&As(Se,m[y])){ke=y;break}ke===void 0?Lt(Se,C,U,!0):(re[ke-we]=L+1,ke>=ce?ce=ke:K=!0,E(Se,m[ke],T,null,C,U,z,j,H),v++)}const Te=K?WE(re):Ns;for(y=Te.length-1,L=k-1;L>=0;L--){const Se=we+L,ke=m[Se],dt=Se+1<J?m[Se+1].el:O;re[L]===0?E(null,ke,T,dt,C,U,z,j,H):K&&(y<0||L!==Te[y]?Qt(ke,T,dt,2):y--)}}},Qt=(p,m,T,O,C=null)=>{const{el:U,type:z,transition:j,children:H,shapeFlag:L}=p;if(L&6){Qt(p.component.subTree,m,T,O);return}if(L&128){p.suspense.move(m,T,O);return}if(L&64){z.move(p,m,T,ne);return}if(z===rt){r(U,m,T);for(let ae=0;ae<H.length;ae++)Qt(H[ae],m,T,O);r(p.anchor,m,T);return}if(z===Cc){M(p,m,T);return}if(O!==2&&L&1&&j)if(O===0)j.beforeEnter(U),r(U,m,T),zt(()=>j.enter(U),C);else{const{leave:ae,delayLeave:se,afterLeave:he}=j,we=()=>r(U,m,T),Ne=()=>{ae(U,()=>{we(),he&&he()})};se?se(U,we,Ne):Ne()}else r(U,m,T)},Lt=(p,m,T,O=!1,C=!1)=>{const{type:U,props:z,ref:j,children:H,dynamicChildren:L,shapeFlag:J,patchFlag:ae,dirs:se}=p;if(j!=null&&gu(j,null,T,p,!0),J&256){m.ctx.deactivate(p);return}const he=J&1&&se,we=!ki(p);let Ne;if(we&&(Ne=z&&z.onVnodeBeforeUnmount)&&yn(Ne,m,p),J&6)ws(p.component,T,O);else{if(J&128){p.suspense.unmount(T,O);return}he&&Fr(p,null,m,"beforeUnmount"),J&64?p.type.remove(p,m,T,C,ne,O):L&&(U!==rt||ae>0&&ae&64)?He(L,m,T,!1,!0):(U===rt&&ae&384||!C&&J&16)&&He(H,m,T),O&&_n(p)}(we&&(Ne=z&&z.onVnodeUnmounted)||he)&&zt(()=>{Ne&&yn(Ne,m,p),he&&Fr(p,null,m,"unmounted")},T)},_n=p=>{const{type:m,el:T,anchor:O,transition:C}=p;if(m===rt){nr(T,O);return}if(m===Cc){q(p);return}const U=()=>{s(T),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(p.shapeFlag&1&&C&&!C.persisted){const{leave:z,delayLeave:j}=C,H=()=>z(T,U);j?j(p.el,U,H):H()}else U()},nr=(p,m)=>{let T;for(;p!==m;)T=d(p),s(p),p=T;s(m)},ws=(p,m,T)=>{const{bum:O,scope:C,update:U,subTree:z,um:j}=p;O&&fa(O),C.stop(),U&&(U.active=!1,Lt(z,p,m,T)),j&&zt(j,m),zt(()=>{p.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},He=(p,m,T,O=!1,C=!1,U=0)=>{for(let z=U;z<p.length;z++)Lt(p[z],m,T,O,C)},S=p=>p.shapeFlag&6?S(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el);let Z=!1;const W=(p,m,T)=>{p==null?m._vnode&&Lt(m._vnode,null,null,!0):E(m._vnode||null,p,m,null,null,null,T),Z||(Z=!0,uf(),Cg(),Z=!1),m._vnode=p},ne={p:E,um:Lt,m:Qt,r:_n,mt:Ae,mc:x,pc:ve,pbc:$,n:S,o:t};let be,We;return e&&([be,We]=e(ne)),{render:W,hydrate:be,createApp:ME(W,be)}}function Rc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $r({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function HE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Gg(t,e,n=!1){const r=t.children,s=e.children;if(le(r)&&le(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=hr(s[i]),a.el=o.el),n||Gg(o,a)),a.type===El&&(a.el=o.el)}}function WE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Qg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Qg(e)}const KE=t=>t.__isTeleport,rt=Symbol.for("v-fgt"),El=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),Cc=Symbol.for("v-stc"),Di=[];let hn=null;function X(t=!1){Di.push(hn=t?null:[])}function GE(){Di.pop(),hn=Di[Di.length-1]||null}let Qi=1;function Ef(t){Qi+=t}function Yg(t){return t.dynamicChildren=Qi>0?hn||Ns:null,GE(),Qi>0&&hn&&hn.push(t),t}function ue(t,e,n,r,s,i){return Yg(g(t,e,n,r,s,i,!0))}function ht(t,e,n,r,s){return Yg(Be(t,e,n,r,s,!0))}function Oa(t){return t?t.__v_isVNode===!0:!1}function As(t,e){return t.type===e.type&&t.key===e.key}const bl="__vInternal",Jg=({key:t})=>t??null,ma=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||et(t)||ge(t)?{i:it,r:t,k:e,f:!!n}:t:null);function g(t,e=null,n=null,r=0,s=null,i=t===rt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Jg(e),ref:e&&ma(e),scopeId:kg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:it};return a?(Ph(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=at(n)?8:16),Qi>0&&!o&&hn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&hn.push(l),l}const Be=QE;function QE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===uE)&&(t=Jn),Oa(t)){const a=ns(t,e,!0);return n&&Ph(a,n),Qi>0&&!i&&hn&&(a.shapeFlag&6?hn[hn.indexOf(t)]=a:hn.push(a)),a.patchFlag|=-2,a}if(ib(t)&&(t=t.__vccOpts),e){e=YE(e);let{class:a,style:l}=e;a&&!at(a)&&(e.class=Fe(a)),ze(l)&&(wg(l)&&!le(l)&&(l=ot({},l)),e.style=fh(l))}const o=at(t)?1:dE(t)?128:KE(t)?64:ze(t)?4:ge(t)?2:0;return g(t,e,n,r,s,o,i,!0)}function YE(t){return t?wg(t)||bl in t?ot({},t):t:null}function ns(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?Yi(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Jg(a),ref:e&&e.ref?n&&s?le(s)?s.concat(ma(e)):[s,ma(e)]:ma(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==rt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ns(t.ssContent),ssFallback:t.ssFallback&&ns(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Nt(t=" ",e=0){return Be(El,null,t,e)}function Ve(t="",e=!1){return e?(X(),ht(Jn,null,t)):Be(Jn,null,t)}function wn(t){return t==null||typeof t=="boolean"?Be(Jn):le(t)?Be(rt,null,t.slice()):typeof t=="object"?hr(t):Be(El,null,String(t))}function hr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ns(t)}function Ph(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(le(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Ph(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(bl in e)?e._ctx=it:s===3&&it&&(it.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ge(e)?(e={default:e,_ctx:it},n=32):(e=String(e),r&64?(n=16,e=[Nt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Yi(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Fe([e.class,r.class]));else if(s==="style")e.style=fh([e.style,r.style]);else if(ul(s)){const i=e[s],o=r[s];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function yn(t,e,n,r=null){sn(t,e,7,[n,r])}const JE=Bg();let XE=0;function ZE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||JE,i={uid:XE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ig(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zg(r,s),emitsOptions:Pg(r,s),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:r.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=iE.bind(null,i),t.ce&&t.ce(i),i}let gt=null;const Xg=()=>gt||it;let Na,_u;{const t=ng(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Na=e("__VUE_INSTANCE_SETTERS__",n=>gt=n),_u=e("__VUE_SSR_SETTERS__",n=>Tl=n)}const Eo=t=>{const e=gt;return Na(t),t.scope.on(),()=>{t.scope.off(),Na(e)}},bf=()=>{gt&&gt.scope.off(),Na(null)};function Zg(t){return t.vnode.shapeFlag&4}let Tl=!1;function eb(t,e=!1){e&&_u(e);const{props:n,children:r}=t.vnode,s=Zg(t);FE(t,n,s,e),jE(t,r);const i=s?tb(t,e):void 0;return e&&_u(!1),i}function tb(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=gl(new Proxy(t.ctx,xE));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?rb(t):null,i=Eo(t);us();const o=Er(r,t,0,[t.props,s]);if(hs(),i(),Zm(o)){if(o.then(bf,bf),e)return o.then(a=>{Tf(t,a,e)}).catch(a=>{_l(a,t,0)});t.asyncDep=o}else Tf(t,o,e)}else e_(t,e)}function Tf(t,e,n){ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=Ag(e)),e_(t,n)}let If;function e_(t,e,n){const r=t.type;if(!t.render){if(!e&&If&&!r.render){const s=r.template||Ch(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=ot(ot({isCustomElement:i,delimiters:a},o),l);r.render=If(s,c)}}t.render=r.render||rn}{const s=Eo(t);us();try{PE(t)}finally{hs(),s()}}}function nb(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Gt(t,"get","$attrs"),e[n]}}))}function rb(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return nb(t)},slots:t.slots,emit:t.emit,expose:e}}function Il(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ag(gl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Oi)return Oi[n](t)},has(e,n){return n in e||n in Oi}}))}function sb(t,e=!0){return ge(t)?t.displayName||t.name:t.name||e&&t.__name}function ib(t){return ge(t)&&"__vccOpts"in t}const Le=(t,e)=>Gw(t,e,Tl);function t_(t,e,n){const r=arguments.length;return r===2?ze(e)&&!le(e)?Oa(e)?Be(t,null,[e]):Be(t,e):Be(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Oa(n)&&(n=[n]),Be(t,e,n))}const ob="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ab="http://www.w3.org/2000/svg",lb="http://www.w3.org/1998/Math/MathML",dr=typeof document<"u"?document:null,Af=dr&&dr.createElement("template"),cb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?dr.createElementNS(ab,t):e==="mathml"?dr.createElementNS(lb,t):dr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>dr.createTextNode(t),createComment:t=>dr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Af.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=Af.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},sr="transition",gi="animation",zs=Symbol("_vtc"),n_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ub=ot({},yE,n_),Ur=(t,e=[])=>{le(t)?t.forEach(n=>n(...e)):t&&t(...e)},Sf=t=>t?le(t)?t.some(e=>e.length>1):t.length>1:!1;function hb(t){const e={};for(const B in t)B in n_||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,_=db(s),E=_&&_[0],b=_&&_[1],{onBeforeEnter:A,onEnter:P,onEnterCancelled:M,onLeave:q,onLeaveCancelled:R,onBeforeAppear:I=A,onAppear:F=P,onAppearCancelled:x=M}=e,V=(B,te,Ae)=>{ar(B,te?u:a),ar(B,te?c:o),Ae&&Ae()},$=(B,te)=>{B._isLeaving=!1,ar(B,h),ar(B,f),ar(B,d),te&&te()},Y=B=>(te,Ae)=>{const je=B?F:P,oe=()=>V(te,B,Ae);Ur(je,[te,oe]),Rf(()=>{ar(te,B?l:i),qn(te,B?u:a),Sf(je)||Cf(te,r,E,oe)})};return ot(e,{onBeforeEnter(B){Ur(A,[B]),qn(B,i),qn(B,o)},onBeforeAppear(B){Ur(I,[B]),qn(B,l),qn(B,c)},onEnter:Y(!1),onAppear:Y(!0),onLeave(B,te){B._isLeaving=!0;const Ae=()=>$(B,te);qn(B,h),s_(),qn(B,d),Rf(()=>{B._isLeaving&&(ar(B,h),qn(B,f),Sf(q)||Cf(B,r,b,Ae))}),Ur(q,[B,Ae])},onEnterCancelled(B){V(B,!1),Ur(M,[B])},onAppearCancelled(B){V(B,!0),Ur(x,[B])},onLeaveCancelled(B){$(B),Ur(R,[B])}})}function db(t){if(t==null)return null;if(ze(t))return[xc(t.enter),xc(t.leave)];{const e=xc(t);return[e,e]}}function xc(t){return _w(t)}function qn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[zs]||(t[zs]=new Set)).add(e)}function ar(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[zs];n&&(n.delete(e),n.size||(t[zs]=void 0))}function Rf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let fb=0;function Cf(t,e,n,r){const s=t._endId=++fb,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=r_(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),i()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function r_(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),s=r(`${sr}Delay`),i=r(`${sr}Duration`),o=xf(s,i),a=r(`${gi}Delay`),l=r(`${gi}Duration`),c=xf(a,l);let u=null,h=0,d=0;e===sr?o>0&&(u=sr,h=o,d=i.length):e===gi?c>0&&(u=gi,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?sr:gi:null,d=u?u===sr?i.length:l.length:0);const f=u===sr&&/\b(transform|all)(,|$)/.test(r(`${sr}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function xf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Pf(n)+Pf(t[r])))}function Pf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function s_(){return document.body.offsetHeight}function pb(t,e,n){const r=t[zs];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Da=Symbol("_vod"),i_=Symbol("_vsh"),mb={beforeMount(t,{value:e},{transition:n}){t[Da]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):_i(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),_i(t,!0),r.enter(t)):r.leave(t,()=>{_i(t,!1)}):_i(t,e))},beforeUnmount(t,{value:e}){_i(t,e)}};function _i(t,e){t.style.display=e?t[Da]:"none",t[i_]=!e}const gb=Symbol(""),_b=/(^|;)\s*display\s*:/;function yb(t,e,n){const r=t.style,s=at(n);let i=!1;if(n&&!s){if(e)if(at(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ga(r,a,"")}else for(const o in e)n[o]==null&&ga(r,o,"");for(const o in n)o==="display"&&(i=!0),ga(r,o,n[o])}else if(s){if(e!==n){const o=r[gb];o&&(n+=";"+o),r.cssText=n,i=_b.test(n)}}else e&&t.removeAttribute("style");Da in t&&(t[Da]=i?r.display:"",t[i_]&&(r.display="none"))}const kf=/\s*!important$/;function ga(t,e,n){if(le(n))n.forEach(r=>ga(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=vb(t,e);kf.test(n)?t.setProperty(ii(r),n.replace(kf,""),"important"):t[r]=n}}const Of=["Webkit","Moz","ms"],Pc={};function vb(t,e){const n=Pc[e];if(n)return n;let r=Nn(e);if(r!=="filter"&&r in t)return Pc[e]=r;r=fl(r);for(let s=0;s<Of.length;s++){const i=Of[s]+r;if(i in t)return Pc[e]=i}return e}const Nf="http://www.w3.org/1999/xlink";function wb(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Nf,e.slice(6,e.length)):t.setAttributeNS(Nf,e,n);else{const i=Tw(e);n==null||i&&!rg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Eb(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=rg(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function qr(t,e,n,r){t.addEventListener(e,n,r)}function bb(t,e,n,r){t.removeEventListener(e,n,r)}const Df=Symbol("_vei");function Tb(t,e,n,r,s=null){const i=t[Df]||(t[Df]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Ib(e);if(r){const c=i[e]=Rb(r,s);qr(t,a,c,l)}else o&&(bb(t,a,o,l),i[e]=void 0)}}const Vf=/(?:Once|Passive|Capture)$/;function Ib(t){let e;if(Vf.test(t)){e={};let r;for(;r=t.match(Vf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ii(t.slice(2)),e]}let kc=0;const Ab=Promise.resolve(),Sb=()=>kc||(Ab.then(()=>kc=0),kc=Date.now());function Rb(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;sn(Cb(r,n.value),e,5,[r])};return n.value=t,n.attached=Sb(),n}function Cb(t,e){if(le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Mf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xb=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?pb(t,r,c):e==="style"?yb(t,n,r):ul(e)?uh(e)||Tb(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Pb(t,e,r,c))?Eb(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),wb(t,e,r,c))};function Pb(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Mf(e)&&ge(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Mf(e)&&at(n)?!1:e in t}const o_=new WeakMap,a_=new WeakMap,Va=Symbol("_moveCb"),Lf=Symbol("_enterCb"),l_={name:"TransitionGroup",props:ot({},ub,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Xg(),r=_E();let s,i;return Lg(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!Mb(s[0].el,n.vnode.el,o))return;s.forEach(Nb),s.forEach(Db);const a=s.filter(Vb);s_(),a.forEach(l=>{const c=l.el,u=c.style;qn(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=c[Va]=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",h),c[Va]=null,ar(c,o))};c.addEventListener("transitionend",h)})}),()=>{const o=Ce(t),a=hb(o);let l=o.tag||rt;s=i,i=e.default?Dg(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&hu(u,uu(u,a,r,n))}if(s)for(let c=0;c<s.length;c++){const u=s[c];hu(u,uu(u,a,r,n)),o_.set(u,u.el.getBoundingClientRect())}return Be(l,null,i)}}},kb=t=>delete t.mode;l_.props;const Ob=l_;function Nb(t){const e=t.el;e[Va]&&e[Va](),e[Lf]&&e[Lf]()}function Db(t){a_.set(t,t.el.getBoundingClientRect())}function Vb(t){const e=o_.get(t),n=a_.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function Mb(t,e,n){const r=t.cloneNode(),s=t[zs];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=r_(r);return i.removeChild(r),o}const Ma=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?n=>fa(e,n):e};function Lb(t){t.target.composing=!0}function Ff(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ls=Symbol("_assign"),$t={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Ls]=Ma(s);const i=r||s.props&&s.props.type==="number";qr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Hi(a)),t[Ls](a)}),n&&qr(t,"change",()=>{t.value=t.value.trim()}),e||(qr(t,"compositionstart",Lb),qr(t,"compositionend",Ff),qr(t,"change",Ff))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t[Ls]=Ma(i),t.composing)return;const o=s||t.type==="number"?Hi(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},yu={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=hl(e);qr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Hi(La(o)):La(o));t[Ls](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Ht(()=>{t._assigning=!1})}),t[Ls]=Ma(r)},mounted(t,{value:e,modifiers:{number:n}}){$f(t,e,n)},beforeUpdate(t,e,n){t[Ls]=Ma(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||$f(t,e,n)}};function $f(t,e,n){const r=t.multiple,s=le(e);if(!(r&&!s&&!hl(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=La(a);if(r)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?Hi(l):l):a.selected=Aw(e,l)>-1}else a.selected=e.has(l);else if(pl(La(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function La(t){return"_value"in t?t._value:t.value}const Fb=["ctrl","shift","alt","meta"],$b={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Fb.some(n=>t[`${n}Key`]&&!e.includes(n))},c_=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=$b[e[o]];if(a&&a(s,e))return}return t(s,...i)})},Ub=ot({patchProp:xb},cb);let Uf;function jb(){return Uf||(Uf=qE(Ub))}const Bb=(...t)=>{const e=jb().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=zb(r);if(!s)return;const i=e._component;!ge(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,qb(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function qb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zb(t){return at(t)?document.querySelector(t):t}var Hb=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let u_;const Al=t=>u_=t,h_=Symbol();function vu(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vi||(Vi={}));function Wb(){const t=og(!0),e=t.run(()=>ye({}));let n=[],r=[];const s=gl({install(i){Al(s),s._a=i,i.provide(h_,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!Hb?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const d_=()=>{};function jf(t,e,n,r=d_){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&ag()&&Rw(s),s}function bs(t,...e){t.slice().forEach(n=>{n(...e)})}const Kb=t=>t();function wu(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];vu(s)&&vu(r)&&t.hasOwnProperty(n)&&!et(r)&&!wr(r)?t[n]=wu(s,r):t[n]=r}return t}const Gb=Symbol();function Qb(t){return!vu(t)||!t.hasOwnProperty(Gb)}const{assign:lr}=Object;function Yb(t){return!!(et(t)&&t.effect)}function Jb(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Jw(n.state.value[t]);return lr(u,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=gl(Le(()=>{Al(n);const f=n._s.get(t);return o[d].call(f,f)})),h),{}))}return l=f_(t,c,e,n,r,!0),l}function f_(t,e,n={},r,s,i){let o;const a=lr({actions:{}},n),l={deep:!0};let c,u,h=[],d=[],f;const _=r.state.value[t];!i&&!_&&(r.state.value[t]={}),ye({});let E;function b(x){let V;c=u=!1,typeof x=="function"?(x(r.state.value[t]),V={type:Vi.patchFunction,storeId:t,events:f}):(wu(r.state.value[t],x),V={type:Vi.patchObject,payload:x,storeId:t,events:f});const $=E=Symbol();Ht().then(()=>{E===$&&(c=!0)}),u=!0,bs(h,V,r.state.value[t])}const A=i?function(){const{state:V}=n,$=V?V():{};this.$patch(Y=>{lr(Y,$)})}:d_;function P(){o.stop(),h=[],d=[],r._s.delete(t)}function M(x,V){return function(){Al(r);const $=Array.from(arguments),Y=[],B=[];function te(oe){Y.push(oe)}function Ae(oe){B.push(oe)}bs(d,{args:$,name:x,store:R,after:te,onError:Ae});let je;try{je=V.apply(this&&this.$id===t?this:R,$)}catch(oe){throw bs(B,oe),oe}return je instanceof Promise?je.then(oe=>(bs(Y,oe),oe)).catch(oe=>(bs(B,oe),Promise.reject(oe))):(bs(Y,je),je)}}const q={_p:r,$id:t,$onAction:jf.bind(null,d),$patch:b,$reset:A,$subscribe(x,V={}){const $=jf(h,x,V.detached,()=>Y()),Y=o.run(()=>Sn(()=>r.state.value[t],B=>{(V.flush==="sync"?u:c)&&x({storeId:t,type:Vi.direct,events:f},B)},lr({},l,V)));return $},$dispose:P},R=Dn(q);r._s.set(t,R);const F=(r._a&&r._a.runWithContext||Kb)(()=>r._e.run(()=>(o=og()).run(e)));for(const x in F){const V=F[x];if(et(V)&&!Yb(V)||wr(V))i||(_&&Qb(V)&&(et(V)?V.value=_[x]:wu(V,_[x])),r.state.value[t][x]=V);else if(typeof V=="function"){const $=M(x,V);F[x]=$,a.actions[x]=V}}return lr(R,F),lr(Ce(R),F),Object.defineProperty(R,"$state",{get:()=>r.state.value[t],set:x=>{b(V=>{lr(V,x)})}}),r._p.forEach(x=>{lr(R,o.run(()=>x({store:R,app:r._a,pinia:r,options:a})))}),_&&i&&n.hydrate&&n.hydrate(R.$state,_),c=!0,u=!0,R}function ds(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=LE();return a=a||(c?on(h_,null):null),a&&Al(a),a=u_,a._s.has(r)||(i?f_(r,e,s,a):Jb(r,s,a)),a._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ss=typeof document<"u";function Xb(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const De=Object.assign;function Oc(t,e){const n={};for(const r in e){const s=e[r];n[r]=fn(s)?s.map(t):t(s)}return n}const Mi=()=>{},fn=Array.isArray,p_=/#/g,Zb=/&/g,eT=/\//g,tT=/=/g,nT=/\?/g,m_=/\+/g,rT=/%5B/g,sT=/%5D/g,g_=/%5E/g,iT=/%60/g,__=/%7B/g,oT=/%7C/g,y_=/%7D/g,aT=/%20/g;function kh(t){return encodeURI(""+t).replace(oT,"|").replace(rT,"[").replace(sT,"]")}function lT(t){return kh(t).replace(__,"{").replace(y_,"}").replace(g_,"^")}function Eu(t){return kh(t).replace(m_,"%2B").replace(aT,"+").replace(p_,"%23").replace(Zb,"%26").replace(iT,"`").replace(__,"{").replace(y_,"}").replace(g_,"^")}function cT(t){return Eu(t).replace(tT,"%3D")}function uT(t){return kh(t).replace(p_,"%23").replace(nT,"%3F")}function hT(t){return t==null?"":uT(t).replace(eT,"%2F")}function Ji(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const dT=/\/$/,fT=t=>t.replace(dT,"");function Nc(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=_T(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Ji(o)}}function pT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Bf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function mT(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Hs(e.matched[r],n.matched[s])&&v_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Hs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!gT(t[n],e[n]))return!1;return!0}function gT(t,e){return fn(t)?qf(t,e):fn(e)?qf(e,t):t===e}function qf(t,e){return fn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function _T(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var Xi;(function(t){t.pop="pop",t.push="push"})(Xi||(Xi={}));var Li;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Li||(Li={}));function yT(t){if(!t)if(Ss){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),fT(t)}const vT=/^[^#]+#/;function wT(t,e){return t.replace(vT,"#")+e}function ET(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Sl=()=>({left:window.scrollX,top:window.scrollY});function bT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=ET(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function zf(t,e){return(history.state?history.state.position-e:-1)+t}const bu=new Map;function TT(t,e){bu.set(t,e)}function IT(t){const e=bu.get(t);return bu.delete(t),e}let AT=()=>location.protocol+"//"+location.host;function w_(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Bf(l,"")}return Bf(n,t)+r+s}function ST(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const f=w_(t,location),_=n.value,E=e.value;let b=0;if(d){if(n.value=f,e.value=d,o&&o===_){o=null;return}b=E?d.position-E.position:0}else r(f);s.forEach(A=>{A(n.value,_,{delta:b,type:Xi.pop,direction:b?b>0?Li.forward:Li.back:Li.unknown})})};function l(){o=n.value}function c(d){s.push(d);const f=()=>{const _=s.indexOf(d);_>-1&&s.splice(_,1)};return i.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(De({},d.state,{scroll:Sl()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Hf(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Sl():null}}function RT(t){const{history:e,location:n}=window,r={value:w_(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:AT()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=De({},e.state,Hf(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=De({},s.value,e.state,{forward:l,scroll:Sl()});i(u.current,u,!0);const h=De({},Hf(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function CT(t){t=yT(t);const e=RT(t),n=ST(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=De({location:"",base:t,go:r,createHref:wT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function xT(t){return typeof t=="string"||t&&typeof t=="object"}function E_(t){return typeof t=="string"||typeof t=="symbol"}const ir={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},b_=Symbol("");var Wf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Wf||(Wf={}));function Ws(t,e){return De(new Error,{type:t,[b_]:!0},e)}function jn(t,e){return t instanceof Error&&b_ in t&&(e==null||!!(t.type&e))}const Kf="[^/]+?",PT={sensitive:!1,strict:!1,start:!0,end:!0},kT=/[.+*?^${}()[\]/\\]/g;function OT(t,e){const n=De({},PT,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(kT,"\\$&"),f+=40;else if(d.type===1){const{value:_,repeatable:E,optional:b,regexp:A}=d;i.push({name:_,repeatable:E,optional:b});const P=A||Kf;if(P!==Kf){f+=10;try{new RegExp(`(${P})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${_}" (${P}): `+q.message)}}let M=E?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;h||(M=b&&c.length<2?`(?:/${M})`:"/"+M),b&&(M+="?"),s+=M,f+=20,b&&(f+=-8),E&&(f+=-20),P===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",_=i[d-1];h[_.name]=f&&_.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:_,repeatable:E,optional:b}=f,A=_ in c?c[_]:"";if(fn(A)&&!E)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const P=fn(A)?A.join("/"):A;if(!P)if(b)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);u+=P}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function NT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function DT(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=NT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Gf(r))return 1;if(Gf(s))return-1}return s.length-r.length}function Gf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const VT={type:0,value:""},MT=/[a-zA-Z0-9_]/;function LT(t){if(!t)return[[]];if(t==="/")return[[VT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:MT.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function FT(t,e,n){const r=OT(LT(t.path),n),s=De(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function $T(t,e){const n=[],r=new Map;e=Jf({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,h,d){const f=!d,_=UT(u);_.aliasOf=d&&d.record;const E=Jf(e,u),b=[_];if("alias"in u){const M=typeof u.alias=="string"?[u.alias]:u.alias;for(const q of M)b.push(De({},_,{components:d?d.record.components:_.components,path:q,aliasOf:d?d.record:_}))}let A,P;for(const M of b){const{path:q}=M;if(h&&q[0]!=="/"){const R=h.record.path,I=R[R.length-1]==="/"?"":"/";M.path=h.record.path+(q&&I+q)}if(A=FT(M,h,E),d?d.alias.push(A):(P=P||A,P!==A&&P.alias.push(A),f&&u.name&&!Yf(A)&&o(u.name)),_.children){const R=_.children;for(let I=0;I<R.length;I++)i(R[I],A,d&&d.children[I])}d=d||A,(A.record.components&&Object.keys(A.record.components).length||A.record.name||A.record.redirect)&&l(A)}return P?()=>{o(P)}:Mi}function o(u){if(E_(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&DT(u,n[h])>=0&&(u.record.path!==n[h].record.path||!T_(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Yf(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},_,E;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Ws(1,{location:u});E=d.record.name,f=De(Qf(h.params,d.keys.filter(P=>!P.optional).concat(d.parent?d.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),u.params&&Qf(u.params,d.keys.map(P=>P.name))),_=d.stringify(f)}else if(u.path!=null)_=u.path,d=n.find(P=>P.re.test(_)),d&&(f=d.parse(_),E=d.record.name);else{if(d=h.name?r.get(h.name):n.find(P=>P.re.test(h.path)),!d)throw Ws(1,{location:u,currentLocation:h});E=d.record.name,f=De({},h.params,u.params),_=d.stringify(f)}const b=[];let A=d;for(;A;)b.unshift(A.record),A=A.parent;return{name:E,path:_,params:f,matched:b,meta:BT(b)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Qf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function UT(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:jT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function jT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Yf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function BT(t){return t.reduce((e,n)=>De(e,n.meta),{})}function Jf(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function T_(t,e){return e.children.some(n=>n===t||T_(t,n))}function qT(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(m_," "),o=i.indexOf("="),a=Ji(o<0?i:i.slice(0,o)),l=o<0?null:Ji(i.slice(o+1));if(a in e){let c=e[a];fn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Xf(t){let e="";for(let n in t){const r=t[n];if(n=cT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(fn(r)?r.map(i=>i&&Eu(i)):[r&&Eu(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function zT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=fn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const HT=Symbol(""),Zf=Symbol(""),Rl=Symbol(""),I_=Symbol(""),Tu=Symbol("");function yi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Ws(4,{from:n,to:e})):d instanceof Error?l(d):xT(d)?l(Ws(2,{from:e,to:d})):(o&&r.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Dc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(WT(l)){const u=(l.__vccOpts||l)[e];u&&i.push(fr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Xb(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&fr(f,n,r,o,a,s)()}))}}return i}function WT(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ep(t){const e=on(Rl),n=on(I_),r=Le(()=>e.resolve(w(t.to))),s=Le(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Hs.bind(null,u));if(d>-1)return d;const f=tp(l[c-2]);return c>1&&tp(u)===f&&h[h.length-1].path!==f?h.findIndex(Hs.bind(null,l[c-2])):d}),i=Le(()=>s.value>-1&&YT(n.params,r.value.params)),o=Le(()=>s.value>-1&&s.value===n.matched.length-1&&v_(n.params,r.value.params));function a(l={}){return QT(l)?e[w(t.replace)?"replace":"push"](w(t.to)).catch(Mi):Promise.resolve()}return{route:r,href:Le(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const KT=At({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ep,setup(t,{slots:e}){const n=Dn(ep(t)),{options:r}=on(Rl),s=Le(()=>({[np(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[np(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:t_("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),GT=KT;function QT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function YT(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!fn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function tp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const np=(t,e,n)=>t??e??n,JT=At({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=on(Tu),s=Le(()=>t.route||r.value),i=on(Zf,0),o=Le(()=>{let c=w(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Le(()=>s.value.matched[o.value]);Ni(Zf,Le(()=>o.value+1)),Ni(HT,a),Ni(Tu,s);const l=ye();return Sn(()=>[l.value,a.value,t.name],([c,u,h],[d,f,_])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Hs(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return rp(n.default,{Component:d,route:c});const f=h.props[u],_=f?f===!0?c.params:typeof f=="function"?f(c):f:null,b=t_(d,De({},_,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return rp(n.default,{Component:b,route:c})||b}}});function rp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const A_=JT;function XT(t){const e=$T(t.routes,t),n=t.parseQuery||qT,r=t.stringifyQuery||Xf,s=t.history,i=yi(),o=yi(),a=yi(),l=Tg(ir);let c=ir;Ss&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Oc.bind(null,S=>""+S),h=Oc.bind(null,hT),d=Oc.bind(null,Ji);function f(S,Z){let W,ne;return E_(S)?(W=e.getRecordMatcher(S),ne=Z):ne=S,e.addRoute(ne,W)}function _(S){const Z=e.getRecordMatcher(S);Z&&e.removeRoute(Z)}function E(){return e.getRoutes().map(S=>S.record)}function b(S){return!!e.getRecordMatcher(S)}function A(S,Z){if(Z=De({},Z||l.value),typeof S=="string"){const m=Nc(n,S,Z.path),T=e.resolve({path:m.path},Z),O=s.createHref(m.fullPath);return De(m,T,{params:d(T.params),hash:Ji(m.hash),redirectedFrom:void 0,href:O})}let W;if(S.path!=null)W=De({},S,{path:Nc(n,S.path,Z.path).path});else{const m=De({},S.params);for(const T in m)m[T]==null&&delete m[T];W=De({},S,{params:h(m)}),Z.params=h(Z.params)}const ne=e.resolve(W,Z),be=S.hash||"";ne.params=u(d(ne.params));const We=pT(r,De({},S,{hash:lT(be),path:ne.path})),p=s.createHref(We);return De({fullPath:We,hash:be,query:r===Xf?zT(S.query):S.query||{}},ne,{redirectedFrom:void 0,href:p})}function P(S){return typeof S=="string"?Nc(n,S,l.value.path):De({},S)}function M(S,Z){if(c!==S)return Ws(8,{from:Z,to:S})}function q(S){return F(S)}function R(S){return q(De(P(S),{replace:!0}))}function I(S){const Z=S.matched[S.matched.length-1];if(Z&&Z.redirect){const{redirect:W}=Z;let ne=typeof W=="function"?W(S):W;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=P(ne):{path:ne},ne.params={}),De({query:S.query,hash:S.hash,params:ne.path!=null?{}:S.params},ne)}}function F(S,Z){const W=c=A(S),ne=l.value,be=S.state,We=S.force,p=S.replace===!0,m=I(W);if(m)return F(De(P(m),{state:typeof m=="object"?De({},be,m.state):be,force:We,replace:p}),Z||W);const T=W;T.redirectedFrom=Z;let O;return!We&&mT(r,ne,W)&&(O=Ws(16,{to:T,from:ne}),Qt(ne,ne,!0,!1)),(O?Promise.resolve(O):$(T,ne)).catch(C=>jn(C)?jn(C,2)?C:gn(C):ve(C,T,ne)).then(C=>{if(C){if(jn(C,2))return F(De({replace:p},P(C.to),{state:typeof C.to=="object"?De({},be,C.to.state):be,force:We}),Z||T)}else C=B(T,ne,!0,p,be);return Y(T,ne,C),C})}function x(S,Z){const W=M(S,Z);return W?Promise.reject(W):Promise.resolve()}function V(S){const Z=nr.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(S):S()}function $(S,Z){let W;const[ne,be,We]=ZT(S,Z);W=Dc(ne.reverse(),"beforeRouteLeave",S,Z);for(const m of ne)m.leaveGuards.forEach(T=>{W.push(fr(T,S,Z))});const p=x.bind(null,S,Z);return W.push(p),He(W).then(()=>{W=[];for(const m of i.list())W.push(fr(m,S,Z));return W.push(p),He(W)}).then(()=>{W=Dc(be,"beforeRouteUpdate",S,Z);for(const m of be)m.updateGuards.forEach(T=>{W.push(fr(T,S,Z))});return W.push(p),He(W)}).then(()=>{W=[];for(const m of We)if(m.beforeEnter)if(fn(m.beforeEnter))for(const T of m.beforeEnter)W.push(fr(T,S,Z));else W.push(fr(m.beforeEnter,S,Z));return W.push(p),He(W)}).then(()=>(S.matched.forEach(m=>m.enterCallbacks={}),W=Dc(We,"beforeRouteEnter",S,Z,V),W.push(p),He(W))).then(()=>{W=[];for(const m of o.list())W.push(fr(m,S,Z));return W.push(p),He(W)}).catch(m=>jn(m,8)?m:Promise.reject(m))}function Y(S,Z,W){a.list().forEach(ne=>V(()=>ne(S,Z,W)))}function B(S,Z,W,ne,be){const We=M(S,Z);if(We)return We;const p=Z===ir,m=Ss?history.state:{};W&&(ne||p?s.replace(S.fullPath,De({scroll:p&&m&&m.scroll},be)):s.push(S.fullPath,be)),l.value=S,Qt(S,Z,W,p),gn()}let te;function Ae(){te||(te=s.listen((S,Z,W)=>{if(!ws.listening)return;const ne=A(S),be=I(ne);if(be){F(De(be,{replace:!0}),ne).catch(Mi);return}c=ne;const We=l.value;Ss&&TT(zf(We.fullPath,W.delta),Sl()),$(ne,We).catch(p=>jn(p,12)?p:jn(p,2)?(F(p.to,ne).then(m=>{jn(m,20)&&!W.delta&&W.type===Xi.pop&&s.go(-1,!1)}).catch(Mi),Promise.reject()):(W.delta&&s.go(-W.delta,!1),ve(p,ne,We))).then(p=>{p=p||B(ne,We,!1),p&&(W.delta&&!jn(p,8)?s.go(-W.delta,!1):W.type===Xi.pop&&jn(p,20)&&s.go(-1,!1)),Y(ne,We,p)}).catch(Mi)}))}let je=yi(),oe=yi(),xe;function ve(S,Z,W){gn(S);const ne=oe.list();return ne.length?ne.forEach(be=>be(S,Z,W)):console.error(S),Promise.reject(S)}function jt(){return xe&&l.value!==ir?Promise.resolve():new Promise((S,Z)=>{je.add([S,Z])})}function gn(S){return xe||(xe=!S,Ae(),je.list().forEach(([Z,W])=>S?W(S):Z()),je.reset()),S}function Qt(S,Z,W,ne){const{scrollBehavior:be}=t;if(!Ss||!be)return Promise.resolve();const We=!W&&IT(zf(S.fullPath,0))||(ne||!W)&&history.state&&history.state.scroll||null;return Ht().then(()=>be(S,Z,We)).then(p=>p&&bT(p)).catch(p=>ve(p,S,Z))}const Lt=S=>s.go(S);let _n;const nr=new Set,ws={currentRoute:l,listening:!0,addRoute:f,removeRoute:_,hasRoute:b,getRoutes:E,resolve:A,options:t,push:q,replace:R,go:Lt,back:()=>Lt(-1),forward:()=>Lt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:oe.add,isReady:jt,install(S){const Z=this;S.component("RouterLink",GT),S.component("RouterView",A_),S.config.globalProperties.$router=Z,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>w(l)}),Ss&&!_n&&l.value===ir&&(_n=!0,q(s.location).catch(be=>{}));const W={};for(const be in ir)Object.defineProperty(W,be,{get:()=>l.value[be],enumerable:!0});S.provide(Rl,Z),S.provide(I_,vg(W)),S.provide(Tu,l);const ne=S.unmount;nr.add(S),S.unmount=function(){nr.delete(S),nr.size<1&&(c=ir,te&&te(),te=null,l.value=ir,_n=!1,xe=!1),ne()}}};function He(S){return S.reduce((Z,W)=>Z.then(()=>V(W)),Promise.resolve())}return ws}function ZT(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Hs(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Hs(c,l))||s.push(l))}return[n,r,s]}function oi(){return on(Rl)}const S_=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},eI={},tI={class:"loader"};function nI(t,e){return X(),ue("div",tI)}const Cl=S_(eI,[["render",nI]]),rI={class:"w-screen h-screen z-30 fixed top-0 left-0 flex flex-row justify-center items-center"},sI=At({__name:"LoadingView",setup(t){return(e,n)=>(X(),ue("div",rI,[Be(Cl)]))}});var sp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},C_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new oI;const d=i<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aI=function(t){const e=R_(t);return C_.encodeByteArray(e,!0)},Fa=function(t){return aI(t).replace(/\./g,"")},x_=function(t){try{return C_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=()=>lI().__FIREBASE_DEFAULTS__,uI=()=>{if(typeof process>"u"||typeof sp>"u")return;const t=sp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x_(t[1]);return e&&JSON.parse(e)},xl=()=>{try{return cI()||uI()||hI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P_=t=>{var e,n;return(n=(e=xl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dI=t=>{const e=P_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},k_=()=>{var t;return(t=xl())===null||t===void 0?void 0:t.config},O_=t=>{var e;return(e=xl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fa(JSON.stringify(n)),Fa(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function gI(){var t;const e=(t=xl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _I(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vI(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wI(){return!gI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N_(){try{return typeof indexedDB=="object"}catch{return!1}}function EI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="FirebaseError";class Fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bI,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bo.prototype.create)}}class bo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?TI(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Fn(s,a,r)}}function TI(t,e){return t.replace(II,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const II=/\{\$([^}]+)}/g;function AI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ip(i)&&ip(o)){if(!$a(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ip(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ti(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ii(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SI(t,e){const n=new RI(t,e);return n.subscribe.bind(n)}class RI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vc),s.error===void 0&&(s.error=Vc),s.complete===void 0&&(s.complete=Vc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class Cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kI(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(t){return t===jr?void 0:t}function kI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const NI={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},DI=Ie.INFO,VI={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},MI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Oh{constructor(e){this.name=e,this._logLevel=DI,this._logHandler=MI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const LI=(t,e)=>e.some(n=>t instanceof n);let op,ap;function FI(){return op||(op=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $I(){return ap||(ap=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D_=new WeakMap,Iu=new WeakMap,V_=new WeakMap,Mc=new WeakMap,Nh=new WeakMap;function UI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&D_.set(n,t)}).catch(()=>{}),Nh.set(e,t),e}function jI(t){if(Iu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Iu.set(t,e)}let Au={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Iu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BI(t){Au=t(Au)}function qI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lc(this),e,...n);return V_.set(r,e.sort?e.sort():[e]),br(r)}:$I().includes(t)?function(...e){return t.apply(Lc(this),e),br(D_.get(this))}:function(...e){return br(t.apply(Lc(this),e))}}function zI(t){return typeof t=="function"?qI(t):(t instanceof IDBTransaction&&jI(t),LI(t,FI())?new Proxy(t,Au):t)}function br(t){if(t instanceof IDBRequest)return UI(t);if(Mc.has(t))return Mc.get(t);const e=zI(t);return e!==t&&(Mc.set(t,e),Nh.set(e,t)),e}const Lc=t=>Nh.get(t);function HI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=br(o);return r&&o.addEventListener("upgradeneeded",l=>{r(br(o.result),l.oldVersion,l.newVersion,br(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WI=["get","getKey","getAll","getAllKeys","count"],KI=["put","add","delete","clear"],Fc=new Map;function lp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fc.get(e))return Fc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WI.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Fc.set(e,i),i}BI(t=>({...t,get:(e,n,r)=>lp(e,n)||t.get(e,n,r),has:(e,n)=>!!lp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Su="@firebase/app",cp="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Oh("@firebase/app"),YI="@firebase/app-compat",JI="@firebase/analytics-compat",XI="@firebase/analytics",ZI="@firebase/app-check-compat",eA="@firebase/app-check",tA="@firebase/auth",nA="@firebase/auth-compat",rA="@firebase/database",sA="@firebase/database-compat",iA="@firebase/functions",oA="@firebase/functions-compat",aA="@firebase/installations",lA="@firebase/installations-compat",cA="@firebase/messaging",uA="@firebase/messaging-compat",hA="@firebase/performance",dA="@firebase/performance-compat",fA="@firebase/remote-config",pA="@firebase/remote-config-compat",mA="@firebase/storage",gA="@firebase/storage-compat",_A="@firebase/firestore",yA="@firebase/firestore-compat",vA="firebase",wA="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="[DEFAULT]",EA={[Su]:"fire-core",[YI]:"fire-core-compat",[XI]:"fire-analytics",[JI]:"fire-analytics-compat",[eA]:"fire-app-check",[ZI]:"fire-app-check-compat",[tA]:"fire-auth",[nA]:"fire-auth-compat",[rA]:"fire-rtdb",[sA]:"fire-rtdb-compat",[iA]:"fire-fn",[oA]:"fire-fn-compat",[aA]:"fire-iid",[lA]:"fire-iid-compat",[cA]:"fire-fcm",[uA]:"fire-fcm-compat",[hA]:"fire-perf",[dA]:"fire-perf-compat",[fA]:"fire-rc",[pA]:"fire-rc-compat",[mA]:"fire-gcs",[gA]:"fire-gcs-compat",[_A]:"fire-fst",[yA]:"fire-fst-compat","fire-js":"fire-js",[vA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new Map,Cu=new Map;function bA(t,e){try{t.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ss(t){const e=t.name;if(Cu.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;Cu.set(e,t);for(const n of Ua.values())bA(n,t);return!0}function Dh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Tr=new bo("app","Firebase",TA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=wA;function M_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ru,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=k_()),!n)throw Tr.create("no-options");const i=Ua.get(s);if(i){if($a(n,i.options)&&$a(r,i.config))return i;throw Tr.create("duplicate-app",{appName:s})}const o=new OI(s);for(const l of Cu.values())o.addComponent(l);const a=new IA(n,r,o);return Ua.set(s,a),a}function L_(t=Ru){const e=Ua.get(t);if(!e&&t===Ru&&k_())return M_();if(!e)throw Tr.create("no-app",{appName:t});return e}function Rn(t,e,n){var r;let s=(r=EA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(a.join(" "));return}ss(new Cr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",SA=1,Zi="firebase-heartbeat-store";let $c=null;function F_(){return $c||($c=HI(AA,SA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),$c}async function RA(t){try{const n=(await F_()).transaction(Zi),r=await n.objectStore(Zi).get($_(t));return await n.done,r}catch(e){if(e instanceof Fn)rs.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(n.message)}}}async function up(t,e){try{const r=(await F_()).transaction(Zi,"readwrite");await r.objectStore(Zi).put(e,$_(t)),await r.done}catch(n){if(n instanceof Fn)rs.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rs.warn(r.message)}}}function $_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,xA=30*24*60*60*1e3;class PA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=hp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=xA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hp(),{heartbeatsToSend:r,unsentEntries:s}=kA(this._heartbeatsCache.heartbeats),i=Fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function hp(){return new Date().toISOString().substring(0,10)}function kA(t,e=CA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),dp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N_()?EI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return up(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return up(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dp(t){return Fa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){ss(new Cr("platform-logger",e=>new GI(e),"PRIVATE")),ss(new Cr("heartbeat",e=>new PA(e),"PRIVATE")),Rn(Su,cp,t),Rn(Su,cp,"esm2017"),Rn("fire-js","")}NA("");var DA="firebase",VA="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn(DA,VA,"app");function Vh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function U_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MA=U_,j_=new bo("auth","Firebase",U_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new Oh("@firebase/auth");function LA(t,...e){ja.logLevel<=Ie.WARN&&ja.warn(`Auth (${fs}): ${t}`,...e)}function _a(t,...e){ja.logLevel<=Ie.ERROR&&ja.error(`Auth (${fs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw Mh(t,...e)}function Cn(t,...e){return Mh(t,...e)}function B_(t,e,n){const r=Object.assign(Object.assign({},MA()),{[e]:n});return new bo("auth","Firebase",r).create(e,{appName:t.name})}function FA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&an(t,"argument-error"),B_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j_.create(t,...e)}function de(t,e,...n){if(!t)throw Mh(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _a(e),new Error(e)}function Xn(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $A(){return fp()==="http:"||fp()==="https:"}function fp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($A()||_I()||"connection"in navigator)?navigator.onLine:!0}function jA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=mI()||yI()}get(){return UA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Io(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nr(t,e,n,r,s={}){return z_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=To(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),q_.fetch()(H_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function z_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BA),e);try{const s=new HA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xo(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw B_(t,u,c);an(t,u)}}catch(s){if(s instanceof Fn)throw s;an(t,"network-request-failed",{message:String(s)})}}async function Ao(t,e,n,r,s={}){const i=await Nr(t,e,n,r,s);return"mfaPendingCredential"in i&&an(t,"multi-factor-auth-required",{_serverResponse:i}),i}function H_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Lh(t.config,s):`${t.config.apiScheme}://${s}`}function zA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),qA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}function pp(t){return t!==void 0&&t.enterprise!==void 0}class WA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function KA(t,e){return Nr(t,"GET","/v2/recaptchaConfig",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){return Nr(t,"POST","/v1/accounts:delete",e)}async function QA(t,e){return Nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YA(t,e=!1){const n=It(t),r=await n.getIdToken(e),s=Fh(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fi(Uc(s.auth_time)),issuedAtTime:Fi(Uc(s.iat)),expirationTime:Fi(Uc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uc(t){return Number(t)*1e3}function Fh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _a("JWT malformed, contained fewer than 3 sections"),null;try{const s=x_(n);return s?JSON.parse(s):(_a("Failed to decode base64 JWT payload"),null)}catch(s){return _a("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function JA(t){const e=Fh(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fn&&XA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t){var e;const n=t.auth,r=await t.getIdToken(),s=await eo(t,QA(n,{idToken:r}));de(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?nS(i.providerUserInfo):[],a=tS(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new W_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function eS(t){const e=It(t);await Ba(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nS(t){return t.map(e=>{var{providerId:n}=e,r=Vh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e){const n=await z_(t,{},async()=>{const r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=H_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",q_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sS(t,e){return Nr(t,"POST","/v2/accounts:revokeToken",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new to;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Vh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new W_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await eo(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YA(this,e)}reload(){return eS(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ba(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await eo(this,GA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(c=n.createdAt)!==null&&c!==void 0?c:void 0,P=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:q,isAnonymous:R,providerData:I,stsTokenManager:F}=n;de(M&&F,e,"internal-error");const x=to.fromJSON(this.name,F);de(typeof M=="string",e,"internal-error"),or(h,e.name),or(d,e.name),de(typeof q=="boolean",e,"internal-error"),de(typeof R=="boolean",e,"internal-error"),or(f,e.name),or(_,e.name),or(E,e.name),or(b,e.name),or(A,e.name),or(P,e.name);const V=new Zr({uid:M,auth:e,email:d,emailVerified:q,displayName:h,isAnonymous:R,photoURL:_,phoneNumber:f,tenantId:E,stsTokenManager:x,createdAt:A,lastLoginAt:P});return I&&Array.isArray(I)&&(V.providerData=I.map($=>Object.assign({},$))),b&&(V._redirectEventId=b),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new to;s.updateFromServerResponse(n);const i=new Zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ba(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=new Map;function Hn(t){Xn(t instanceof Function,"Expected a class definition");let e=mp.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}K_.type="NONE";const gp=K_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t,e,n){return`firebase:${t}:${e}:${n}`}class Fs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ya(this.userKey,s.apiKey,i),this.fullPersistenceKey=ya("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fs(Hn(gp),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Hn(gp);const o=ya(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Zr._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Fs(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Fs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X_(e))return"Blackberry";if(Z_(e))return"Webos";if($h(e))return"Safari";if((e.includes("chrome/")||Q_(e))&&!e.includes("edge/"))return"Chrome";if(J_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function G_(t=lt()){return/firefox\//i.test(t)}function $h(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q_(t=lt()){return/crios\//i.test(t)}function Y_(t=lt()){return/iemobile/i.test(t)}function J_(t=lt()){return/android/i.test(t)}function X_(t=lt()){return/blackberry/i.test(t)}function Z_(t=lt()){return/webos/i.test(t)}function Pl(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iS(t=lt()){var e;return Pl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oS(){return vI()&&document.documentMode===10}function ey(t=lt()){return Pl(t)||J_(t)||Z_(t)||X_(t)||/windows phone/i.test(t)||Y_(t)}function aS(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e=[]){let n;switch(t){case"Browser":n=_p(lt());break;case"Worker":n=`${_p(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t,e={}){return Nr(t,"GET","/v2/passwordPolicy",Or(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=6;class hS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yp(this),this.idTokenSubscription=new yp(this),this.beforeStateQueue=new lS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ba(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?It(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cS(this),n=new hS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ty(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Dr(t){return It(t)}class yp{constructor(e){this.auth=e,this.observer=null,this.addObserver=SI(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fS(t){kl=t}function ny(t){return kl.loadJS(t)}function pS(){return kl.recaptchaEnterpriseScript}function mS(){return kl.gapiScript}function gS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const _S="recaptcha-enterprise",yS="NO_RECAPTCHA";class vS{constructor(e){this.type=_S,this.auth=Dr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{KA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new WA(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;pp(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(yS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&pp(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pS();l.length!==0&&(l+=a),ny(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function vp(t,e,n,r=!1){const s=new vS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Pu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await vp(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await vp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t,e){const n=Dh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($a(i,e??{}))return s;an(s,"already-initialized")}return n.initialize({options:e})}function ES(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bS(t,e,n){const r=Dr(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=ry(e),{host:o,port:a}=TS(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||IS()}function ry(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TS(t){const e=ry(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:wp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:wp(o)}}}function wp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function AS(t,e){return Nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(t,e){return Ao(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e){return Ao(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}async function CS(t,e){return Ao(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Uh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new no(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new no(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pu(e,n,"signInWithPassword",SS);case"emailLink":return RS(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pu(e,r,"signUpPassword",AS);case"emailLink":return CS(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t,e){return Ao(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="http://localhost";class is extends Uh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Vh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $s(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$s(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$s(e,n)}buildRequest(){const e={requestUri:xS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=To(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kS(t){const e=Ti(Ii(t)).link,n=e?Ti(Ii(e)).deep_link_id:null,r=Ti(Ii(t)).deep_link_id;return(r?Ti(Ii(r)).link:null)||r||n||e||t}class jh{constructor(e){var n,r,s,i,o,a;const l=Ti(Ii(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=PS((s=l.mode)!==null&&s!==void 0?s:null);de(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=kS(e);try{return new jh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.providerId=ai.PROVIDER_ID}static credential(e,n){return no._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jh.parseLink(n);return de(r,"argument-error"),no._fromEmailAndCode(e,r.code,r.tenantId)}}ai.PROVIDER_ID="password";ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Bh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends So{constructor(){super("facebook.com")}static credential(e){return is._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends So{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return is._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bn.credential(n,r)}catch{return null}}}bn.GOOGLE_SIGN_IN_METHOD="google.com";bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends So{constructor(){super("github.com")}static credential(e){return is._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends So{constructor(){super("twitter.com")}static credential(e,n){return is._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e){return Ao(t,"POST","/v1/accounts:signUp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zr._fromIdTokenResponse(e,r,s),o=Ep(r);return new os({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ep(r);return new os({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ep(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qa.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qa(e,n,r,s)}}function sy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qa._fromErrorAndOperation(t,i,e,r):i})}async function NS(t,e,n=!1){const r=await eo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return os._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await eo(t,sy(r,s,e,t),n);de(i.idToken,r,"internal-error");const o=Fh(i.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),os._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&an(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(t,e,n=!1){const r="signIn",s=await sy(t,r,e),i=await os._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function VS(t,e){return iy(Dr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oy(t){const e=Dr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MS(t,e,n){const r=Dr(t),o=await Pu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oy(t),l}),a=await os._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function LS(t,e,n){return VS(It(t),ai.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oy(t),r})}function FS(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function $S(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function US(t){return It(t).signOut()}const za="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){const t=lt();return $h(t)||Pl(t)}const BS=1e3,qS=10;class ly extends ay{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=jS()&&aS(),this.fallbackToPolling=ey(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ly.type="LOCAL";const zS=ly;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy extends ay{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cy.type="SESSION";const uy=cy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ol(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await HS(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ol.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=qh("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function KS(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function GS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YS(){return hy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="firebaseLocalStorageDb",JS=1,Ha="firebaseLocalStorage",fy="fbase_key";class Ro{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nl(t,e){return t.transaction([Ha],e?"readwrite":"readonly").objectStore(Ha)}function XS(){const t=indexedDB.deleteDatabase(dy);return new Ro(t).toPromise()}function ku(){const t=indexedDB.open(dy,JS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ha,{keyPath:fy})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ha)?e(r):(r.close(),await XS(),e(await ku()))})})}async function bp(t,e,n){const r=Nl(t,!0).put({[fy]:e,value:n});return new Ro(r).toPromise()}async function ZS(t,e){const n=Nl(t,!1).get(e),r=await new Ro(n).toPromise();return r===void 0?null:r.value}function Tp(t,e){const n=Nl(t,!0).delete(e);return new Ro(n).toPromise()}const eR=800,tR=3;class py{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ku(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ol._getInstance(YS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GS(),!this.activeServiceWorker)return;this.sender=new WS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ku();return await bp(e,za,"1"),await Tp(e,za),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nl(s,!1).getAll();return new Ro(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}py.type="LOCAL";const nR=py;new Io(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){return e?Hn(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Uh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $s(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $s(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $s(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rR(t){return iy(t.auth,new zh(t),t.bypassAuthState)}function sR(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),DS(n,new zh(t),t.bypassAuthState)}async function iR(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),NS(n,new zh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rR;case"linkViaPopup":case"linkViaRedirect":return iR;case"reauthViaPopup":case"reauthViaRedirect":return sR;default:an(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Io(2e3,1e4);async function _y(t,e,n){const r=Dr(t);FA(t,e,Bh);const s=my(r,n);return new Wr(r,"signInViaPopup",e,s).executeNotNull()}class Wr extends gy{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=qh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oR.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="pendingRedirect",va=new Map;class lR extends gy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=va.get(this.auth._key());if(!e){try{const r=await cR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}va.set(this.auth._key(),e)}return this.bypassAuthState||va.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cR(t,e){const n=dR(e),r=hR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uR(t,e){va.set(t._key(),e)}function hR(t){return Hn(t._redirectPersistence)}function dR(t){return ya(aR,t.config.apiKey,t.name)}async function fR(t,e,n=!1){const r=Dr(t),s=my(r,e),o=await new lR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=10*60*1e3;class mR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yy(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ip(e))}saveEventToCache(e){this.cachedEventUids.add(Ip(e)),this.lastProcessedEventTime=Date.now()}}function Ip(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yy({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yy(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e={}){return Nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vR=/^https?/;async function wR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _R(t);for(const n of e)try{if(ER(n))return}catch{}an(t,"unauthorized-domain")}function ER(t){const e=xu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vR.test(n))return!1;if(yR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Io(3e4,6e4);function Ap(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TR(t){return new Promise((e,n)=>{var r,s,i;function o(){Ap(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ap(),n(Cn(t,"network-request-failed"))},timeout:bR.get()})}if(!((s=(r=xn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=xn().gapi)===null||i===void 0)&&i.load)o();else{const a=gS("iframefcb");return xn()[a]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},ny(`${mS()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw wa=null,e})}let wa=null;function IR(t){return wa=wa||TR(t),wa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new Io(5e3,15e3),SR="__/auth/iframe",RR="emulator/auth/iframe",CR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PR(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lh(e,RR):`https://${t.config.authDomain}/${SR}`,r={apiKey:e.apiKey,appName:t.name,v:fs},s=xR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${To(r).slice(1)}`}async function kR(t){const e=await IR(t),n=xn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:PR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),a=xn().setTimeout(()=>{i(o)},AR.get());function l(){xn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NR=500,DR=600,VR="_blank",MR="http://localhost";class Sp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LR(t,e,n,r=NR,s=DR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},OR),{width:r.toString(),height:s.toString(),top:i,left:o}),c=lt().toLowerCase();n&&(a=Q_(c)?VR:n),G_(c)&&(e=e||MR,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,_])=>`${d}${f}=${_},`,"");if(iS(c)&&a!=="_self")return FR(e||"",a),new Sp(null);const h=window.open(e||"",a,u);de(h,t,"popup-blocked");try{h.focus()}catch{}return new Sp(h)}function FR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="__/auth/handler",UR="emulator/auth/handler",jR=encodeURIComponent("fac");async function Rp(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fs,eventId:s};if(e instanceof Bh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(i||{}))o[u]=h}if(e instanceof So){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${jR}=${encodeURIComponent(l)}`:"";return`${BR(t)}?${To(a).slice(1)}${c}`}function BR({config:t}){return t.emulator?Lh(t,UR):`https://${t.authDomain}/${$R}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="webStorageSupport";class qR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uy,this._completeRedirectFn=fR,this._overrideRedirectResult=uR}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Rp(e,n,r,xu(),s);return LR(e,o,qh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Rp(e,n,r,xu(),s);return KS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kR(e),r=new mR(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jc,{type:jc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[jc];o!==void 0&&n(!!o),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ey()||$h()||Pl()}}const zR=qR;var Cp="@firebase/auth",xp="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KR(t){ss(new Cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ty(t)},c=new dS(r,s,i,l);return ES(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ss(new Cr("auth-internal",e=>{const n=Dr(e.getProvider("auth").getImmediate());return(r=>new HR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(Cp,xp,WR(t)),Rn(Cp,xp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=5*60,QR=O_("authIdTokenMaxAge")||GR;let Pp=null;const YR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QR)return;const s=n==null?void 0:n.token;Pp!==s&&(Pp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JR(t=L_()){const e=Dh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wS(t,{popupRedirectResolver:zR,persistence:[nR,zS,uy]}),r=O_("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const i=YR(r);$S(n,i,()=>i(n.currentUser)),FS(n,o=>i(o))}const s=P_("auth");return s&&bS(n,`http://${s}`),n}function XR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",XR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KR("Browser");var ZR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q,Hh=Hh||{},pe=ZR||self;function Dl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Co(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function eC(t){return Object.prototype.hasOwnProperty.call(t,Bc)&&t[Bc]||(t[Bc]=++tC)}var Bc="closure_uid_"+(1e9*Math.random()>>>0),tC=0;function nC(t,e,n){return t.call.apply(t.bind,arguments)}function rC(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dt=nC:Dt=rC,Dt.apply(null,arguments)}function Zo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function yt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Vr(){this.s=this.s,this.o=this.o}var sC=0;Vr.prototype.s=!1;Vr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),sC!=0)&&eC(this)};Vr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Wh(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function kp(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Dl(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var iC=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};pe.addEventListener("test",n,e),pe.removeEventListener("test",n,e)}catch{}return t}();function ro(t){return/^[\s\xa0]*$/.test(t)}function Vl(){var t=pe.navigator;return t&&(t=t.userAgent)?t:""}function Tn(t){return Vl().indexOf(t)!=-1}function Kh(t){return Kh[" "](t),t}Kh[" "]=function(){};function oC(t,e){var n=XC;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var aC=Tn("Opera"),Ks=Tn("Trident")||Tn("MSIE"),wy=Tn("Edge"),Ou=wy||Ks,Ey=Tn("Gecko")&&!(Vl().toLowerCase().indexOf("webkit")!=-1&&!Tn("Edge"))&&!(Tn("Trident")||Tn("MSIE"))&&!Tn("Edge"),lC=Vl().toLowerCase().indexOf("webkit")!=-1&&!Tn("Edge");function by(){var t=pe.document;return t?t.documentMode:void 0}var Nu;e:{var qc="",zc=function(){var t=Vl();if(Ey)return/rv:([^\);]+)(\)|;)/.exec(t);if(wy)return/Edge\/([\d\.]+)/.exec(t);if(Ks)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(lC)return/WebKit\/(\S+)/.exec(t);if(aC)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zc&&(qc=zc?zc[1]:""),Ks){var Hc=by();if(Hc!=null&&Hc>parseFloat(qc)){Nu=String(Hc);break e}}Nu=qc}var Du;if(pe.document&&Ks){var Op=by();Du=Op||parseInt(Nu,10)||void 0}else Du=void 0;var cC=Du;function so(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ey){e:{try{Kh(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:uC[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&so.$.h.call(this)}}yt(so,Vt);var uC={2:"touch",3:"pen",4:"mouse"};so.prototype.h=function(){so.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xo="closure_listenable_"+(1e6*Math.random()|0),hC=0;function dC(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++hC,this.fa=this.ia=!1}function Ml(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Gh(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function fC(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Ty(t){const e={};for(const n in t)e[n]=t[n];return e}const Np="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Iy(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Np.length;i++)n=Np[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ll(t){this.src=t,this.g={},this.h=0}Ll.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Mu(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new dC(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Vu(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=vy(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ml(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Mu(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Qh="closure_lm_"+(1e6*Math.random()|0),Wc={};function Ay(t,e,n,r,s){if(r&&r.once)return Ry(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Ay(t,e[i],n,r,s);return null}return n=Xh(n),t&&t[xo]?t.O(e,n,Co(r)?!!r.capture:!!r,s):Sy(t,e,n,!1,r,s)}function Sy(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Co(s)?!!s.capture:!!s,a=Jh(t);if(a||(t[Qh]=a=new Ll(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=pC(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)iC||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(xy(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function pC(){function t(n){return e.call(t.src,t.listener,n)}const e=mC;return t}function Ry(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Ry(t,e[i],n,r,s);return null}return n=Xh(n),t&&t[xo]?t.P(e,n,Co(r)?!!r.capture:!!r,s):Sy(t,e,n,!0,r,s)}function Cy(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Cy(t,e[i],n,r,s);else r=Co(r)?!!r.capture:!!r,n=Xh(n),t&&t[xo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Mu(i,n,r,s),-1<n&&(Ml(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Jh(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Mu(e,n,r,s)),(n=-1<t?e[t]:null)&&Yh(n))}function Yh(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[xo])Vu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Jh(e))?(Vu(n,t),n.h==0&&(n.src=null,e[Qh]=null)):Ml(t)}}}function xy(t){return t in Wc?Wc[t]:Wc[t]="on"+t}function mC(t,e){if(t.fa)t=!0;else{e=new so(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Yh(t),t=n.call(r,e)}return t}function Jh(t){return t=t[Qh],t instanceof Ll?t:null}var Kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xh(t){return typeof t=="function"?t:(t[Kc]||(t[Kc]=function(e){return t.handleEvent(e)}),t[Kc])}function _t(){Vr.call(this),this.i=new Ll(this),this.S=this,this.J=null}yt(_t,Vr);_t.prototype[xo]=!0;_t.prototype.removeEventListener=function(t,e,n,r){Cy(this,t,e,n,r)};function bt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var s=e;e=new Vt(r,t),Iy(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=ea(o,r,!0,e)&&s}if(o=e.g=t,s=ea(o,r,!0,e)&&s,s=ea(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=ea(o,r,!1,e)&&s}_t.prototype.N=function(){if(_t.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ml(n[r]);delete t.g[e],t.h--}}this.J=null};_t.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};_t.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ea(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Vu(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Zh=pe.JSON.stringify;class gC{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function _C(){var t=ed;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class yC{constructor(){this.h=this.g=null}add(e,n){const r=Py.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Py=new gC(()=>new vC,t=>t.reset());class vC{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function wC(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function EC(t){pe.setTimeout(()=>{throw t},0)}let io,oo=!1,ed=new yC,ky=()=>{const t=pe.Promise.resolve(void 0);io=()=>{t.then(bC)}};var bC=()=>{for(var t;t=_C();){try{t.h.call(t.g)}catch(n){EC(n)}var e=Py;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}oo=!1};function Fl(t,e){_t.call(this),this.h=t||1,this.g=e||pe,this.j=Dt(this.qb,this),this.l=Date.now()}yt(Fl,_t);Q=Fl.prototype;Q.ga=!1;Q.T=null;Q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bt(this,"tick"),this.ga&&(td(this),this.start()))}};Q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function td(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Q.N=function(){Fl.$.N.call(this),td(this),delete this.g};function nd(t,e,n){if(typeof t=="function")n&&(t=Dt(t,n));else if(t&&typeof t.handleEvent=="function")t=Dt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:pe.setTimeout(t,e||0)}function Oy(t){t.g=nd(()=>{t.g=null,t.i&&(t.i=!1,Oy(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class TC extends Vr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oy(this)}N(){super.N(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ao(t){Vr.call(this),this.h=t,this.g={}}yt(ao,Vr);var Dp=[];function Ny(t,e,n,r){Array.isArray(n)||(n&&(Dp[0]=n.toString()),n=Dp);for(var s=0;s<n.length;s++){var i=Ay(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Dy(t){Gh(t.g,function(e,n){this.g.hasOwnProperty(n)&&Yh(e)},t),t.g={}}ao.prototype.N=function(){ao.$.N.call(this),Dy(this)};ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function $l(){this.g=!0}$l.prototype.Ea=function(){this.g=!1};function IC(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function AC(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ps(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+RC(t,n)+(r?" "+r:"")})}function SC(t,e){t.info(function(){return"TIMEOUT: "+e})}$l.prototype.info=function(){};function RC(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Zh(n)}catch{return e}}var ps={},Vp=null;function Ul(){return Vp=Vp||new _t}ps.Ta="serverreachability";function Vy(t){Vt.call(this,ps.Ta,t)}yt(Vy,Vt);function lo(t){const e=Ul();bt(e,new Vy(e))}ps.STAT_EVENT="statevent";function My(t,e){Vt.call(this,ps.STAT_EVENT,t),this.stat=e}yt(My,Vt);function Ut(t){const e=Ul();bt(e,new My(e,t))}ps.Ua="timingevent";function Ly(t,e){Vt.call(this,ps.Ua,t),this.size=e}yt(Ly,Vt);function Po(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){t()},e)}var jl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rd(){}rd.prototype.h=null;function Mp(t){return t.h||(t.h=t.i())}function $y(){}var ko={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sd(){Vt.call(this,"d")}yt(sd,Vt);function id(){Vt.call(this,"c")}yt(id,Vt);var Lu;function Bl(){}yt(Bl,rd);Bl.prototype.g=function(){return new XMLHttpRequest};Bl.prototype.i=function(){return{}};Lu=new Bl;function Oo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ao(this),this.P=CC,t=Ou?125:void 0,this.V=new Fl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Uy}function Uy(){this.i=null,this.g="",this.h=!1}var CC=45e3,jy={},Fu={};Q=Oo.prototype;Q.setTimeout=function(t){this.P=t};function $u(t,e,n){t.L=1,t.A=zl(Zn(e)),t.u=n,t.S=!0,By(t,null)}function By(t,e){t.G=Date.now(),No(t),t.B=Zn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Yy(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Uy,t.g=_v(t.l,n?e:null,!t.u),0<t.O&&(t.M=new TC(Dt(t.Pa,t,t.g),t.O)),Ny(t.U,t.g,"readystatechange",t.nb),e=t.I?Ty(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),lo(),IC(t.j,t.v,t.B,t.m,t.W,t.u)}Q.nb=function(t){t=t.target;const e=this.M;e&&In(t)==3?e.l():this.Pa(t)};Q.Pa=function(t){try{if(t==this.g)e:{const u=In(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Ou||this.g&&(this.h.h||this.g.ja()||Up(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?lo(3):lo(2)),ql(this);var n=this.g.da();this.ca=n;t:if(qy(this)){var r=Up(this.g);t="";var s=r.length,i=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),$i(this);var o="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,AC(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ro(a)){var c=a;break t}}c=null}if(n=c)Ps(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uu(this,n);else{this.i=!1,this.s=3,Ut(12),Kr(this),$i(this);break e}}this.S?(zy(this,u,o),Ou&&this.i&&u==3&&(Ny(this.U,this.V,"tick",this.mb),this.V.start())):(Ps(this.j,this.m,o,null),Uu(this,o)),u==4&&Kr(this),this.i&&!this.J&&(u==4?fv(this.l,this):(this.i=!1,No(this)))}else QC(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Kr(this),$i(this)}}}catch{}finally{}};function qy(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function zy(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=xC(t,n),s==Fu){e==4&&(t.s=4,Ut(14),r=!1),Ps(t.j,t.m,null,"[Incomplete Response]");break}else if(s==jy){t.s=4,Ut(15),Ps(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ps(t.j,t.m,s,null),Uu(t,s);qy(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Ut(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),hd(e),e.M=!0,Ut(11))):(Ps(t.j,t.m,n,"[Invalid Chunked Response]"),Kr(t),$i(t))}Q.mb=function(){if(this.g){var t=In(this.g),e=this.g.ja();this.o<e.length&&(ql(this),zy(this,t,e),this.i&&t!=4&&No(this))}};function xC(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Fu:(n=Number(e.substring(n,r)),isNaN(n)?jy:(r+=1,r+n>e.length?Fu:(e=e.slice(r,r+n),t.o=r+n,e)))}Q.cancel=function(){this.J=!0,Kr(this)};function No(t){t.Y=Date.now()+t.P,Hy(t,t.P)}function Hy(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Po(Dt(t.lb,t),e)}function ql(t){t.C&&(pe.clearTimeout(t.C),t.C=null)}Q.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(SC(this.j,this.B),this.L!=2&&(lo(),Ut(17)),Kr(this),this.s=2,$i(this)):Hy(this,this.Y-t)};function $i(t){t.l.H==0||t.J||fv(t.l,t)}function Kr(t){ql(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,td(t.V),Dy(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Uu(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||ju(n.i,t))){if(!t.K&&ju(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ga(n),Gl(n);else break e;ud(n),Ut(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Po(Dt(n.ib,n),6e3));if(1>=Zy(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Gr(n,11)}else if((t.K||n.g==t)&&Ga(n),!ro(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=r.i;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(od(i,i.h),i.h=null))}if(r.F){const E=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,Ye(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=gv(r,r.J?r.pa:null,r.Y),o.K){ev(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ql(a),No(a)),r.g=o}else hv(r);0<n.j.length&&Ql(n)}else c[0]!="stop"&&c[0]!="close"||Gr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Gr(n,7):cd(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}lo(4)}catch{}}function PC(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Dl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function kC(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Dl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Wy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Dl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=kC(t),r=PC(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OC(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function es(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof es){this.h=t.h,Wa(this,t.j),this.s=t.s,this.g=t.g,Ka(this,t.m),this.l=t.l;var e=t.i,n=new co;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Lp(this,n),this.o=t.o}else t&&(e=String(t).match(Ky))?(this.h=!1,Wa(this,e[1]||"",!0),this.s=Ai(e[2]||""),this.g=Ai(e[3]||"",!0),Ka(this,e[4]),this.l=Ai(e[5]||"",!0),Lp(this,e[6]||"",!0),this.o=Ai(e[7]||"")):(this.h=!1,this.i=new co(null,this.h))}es.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Si(e,Fp,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Si(e,Fp,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Si(n,n.charAt(0)=="/"?VC:DC,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Si(n,LC)),t.join("")};function Zn(t){return new es(t)}function Wa(t,e,n){t.j=n?Ai(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ka(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Lp(t,e,n){e instanceof co?(t.i=e,FC(t.i,t.h)):(n||(e=Si(e,MC)),t.i=new co(e,t.h))}function Ye(t,e,n){t.i.set(e,n)}function zl(t){return Ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ai(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Si(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,NC),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function NC(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Fp=/[#\/\?@]/g,DC=/[#\?:]/g,VC=/[#\?]/g,MC=/[#\?@]/g,LC=/#/g;function co(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Mr(t){t.g||(t.g=new Map,t.h=0,t.i&&OC(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Q=co.prototype;Q.add=function(t,e){Mr(this),this.i=null,t=li(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Gy(t,e){Mr(t),e=li(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Qy(t,e){return Mr(t),e=li(t,e),t.g.has(e)}Q.forEach=function(t,e){Mr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};Q.ta=function(){Mr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};Q.Z=function(t){Mr(this);let e=[];if(typeof t=="string")Qy(this,t)&&(e=e.concat(this.g.get(li(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Q.set=function(t,e){return Mr(this),this.i=null,t=li(this,t),Qy(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Yy(t,e,n){Gy(t,e),0<n.length&&(t.i=null,t.g.set(li(t,e),Wh(n)),t.h+=n.length)}Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function li(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function FC(t,e){e&&!t.j&&(Mr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Gy(this,r),Yy(this,s,n))},t)),t.j=e}var $C=class{constructor(t,e){this.g=t,this.map=e}};function Jy(t){this.l=t||UC,pe.PerformanceNavigationTiming?(t=pe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(pe.g&&pe.g.Ka&&pe.g.Ka()&&pe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var UC=10;function Xy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Zy(t){return t.h?1:t.g?t.g.size:0}function ju(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function od(t,e){t.g?t.g.add(e):t.h=e}function ev(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Jy.prototype.cancel=function(){if(this.i=tv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function tv(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Wh(t.i)}var jC=class{stringify(t){return pe.JSON.stringify(t,void 0)}parse(t){return pe.JSON.parse(t,void 0)}};function BC(){this.g=new jC}function qC(t,e,n){const r=n||"";try{Wy(t,function(s,i){let o=s;Co(s)&&(o=Zh(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function zC(t,e){const n=new $l;if(pe.Image){const r=new Image;r.onload=Zo(ta,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zo(ta,n,r,"TestLoadImage: error",!1,e),r.onabort=Zo(ta,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zo(ta,n,r,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ta(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Hl(t){this.l=t.ec||null,this.j=t.ob||!1}yt(Hl,rd);Hl.prototype.g=function(){return new Wl(this.l,this.j)};Hl.prototype.i=function(t){return function(){return t}}({});function Wl(t,e){_t.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ad,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yt(Wl,_t);var ad=0;Q=Wl.prototype;Q.open=function(t,e){if(this.readyState!=ad)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uo(this)};Q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||pe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=ad};Q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nv(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function nv(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Do(this):uo(this),this.readyState==3&&nv(this)}};Q.Za=function(t){this.g&&(this.response=this.responseText=t,Do(this))};Q.Ya=function(t){this.g&&(this.response=t,Do(this))};Q.ka=function(){this.g&&Do(this)};function Do(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uo(t)}Q.setRequestHeader=function(t,e){this.v.append(t,e)};Q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function uo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var HC=pe.JSON.parse;function Ze(t){_t.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=rv,this.L=this.M=!1}yt(Ze,_t);var rv="",WC=/^https?$/i,KC=["POST","PUT"];Q=Ze.prototype;Q.Oa=function(t){this.M=t};Q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lu.g(),this.C=this.u?Mp(this.u):Mp(Lu),this.g.onreadystatechange=Dt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){$p(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=pe.FormData&&t instanceof pe.FormData,!(0<=vy(KC,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ov(this),0<this.B&&((this.L=GC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.ua,this)):this.A=nd(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){$p(this,i)}};function GC(t){return Ks&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Q.ua=function(){typeof Hh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bt(this,"timeout"),this.abort(8))};function $p(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,sv(t),Kl(t)}function sv(t){t.F||(t.F=!0,bt(t,"complete"),bt(t,"error"))}Q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bt(this,"complete"),bt(this,"abort"),Kl(this))};Q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kl(this,!0)),Ze.$.N.call(this)};Q.La=function(){this.s||(this.G||this.v||this.l?iv(this):this.kb())};Q.kb=function(){iv(this)};function iv(t){if(t.h&&typeof Hh<"u"&&(!t.C[1]||In(t)!=4||t.da()!=2)){if(t.v&&In(t)==4)nd(t.La,0,t);else if(bt(t,"readystatechange"),In(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(Ky)[1]||null;!s&&pe.self&&pe.self.location&&(s=pe.self.location.protocol.slice(0,-1)),r=!WC.test(s?s.toLowerCase():"")}n=r}if(n)bt(t,"complete"),bt(t,"success");else{t.m=6;try{var i=2<In(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",sv(t)}}finally{Kl(t)}}}}function Kl(t,e){if(t.g){ov(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||bt(t,"ready");try{n.onreadystatechange=r}catch{}}}function ov(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(pe.clearTimeout(t.A),t.A=null)}Q.isActive=function(){return!!this.g};function In(t){return t.g?t.g.readyState:0}Q.da=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}};Q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),HC(e)}};function Up(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case rv:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function QC(t){const e={};t=(t.g&&2<=In(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ro(t[r]))continue;var n=wC(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}fC(e,function(r){return r.join(", ")})}Q.Ia=function(){return this.m};Q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function av(t){let e="";return Gh(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function ld(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=av(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ye(t,e,n))}function vi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function lv(t){this.Ga=0,this.j=[],this.l=new $l,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vi("baseRetryDelayMs",5e3,t),this.hb=vi("retryDelaySeedMs",1e4,t),this.eb=vi("forwardChannelMaxRetries",2,t),this.xa=vi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Jy(t&&t.concurrentRequestLimit),this.Ja=new BC,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Q=lv.prototype;Q.ra=8;Q.H=1;function cd(t){if(cv(t),t.H==3){var e=t.W++,n=Zn(t.I);if(Ye(n,"SID",t.K),Ye(n,"RID",e),Ye(n,"TYPE","terminate"),Vo(t,n),e=new Oo(t,t.l,e),e.L=2,e.A=zl(Zn(n)),n=!1,pe.navigator&&pe.navigator.sendBeacon)try{n=pe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&pe.Image&&(new Image().src=e.A,n=!0),n||(e.g=_v(e.l,null),e.g.ha(e.A)),e.G=Date.now(),No(e)}mv(t)}function Gl(t){t.g&&(hd(t),t.g.cancel(),t.g=null)}function cv(t){Gl(t),t.u&&(pe.clearTimeout(t.u),t.u=null),Ga(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&pe.clearTimeout(t.m),t.m=null)}function Ql(t){if(!Xy(t.i)&&!t.m){t.m=!0;var e=t.Na;io||ky(),oo||(io(),oo=!0),ed.add(e,t),t.C=0}}function YC(t,e){return Zy(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Po(Dt(t.Na,t,e),pv(t,t.C)),t.C++,!0)}Q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Oo(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Ty(i),Iy(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=uv(this,s,e),n=Zn(this.I),Ye(n,"RID",t),Ye(n,"CVER",22),this.F&&Ye(n,"X-HTTP-Session-Id",this.F),Vo(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(av(i)))+"&"+e:this.o&&ld(n,this.o,i)),od(this.i,s),this.bb&&Ye(n,"TYPE","init"),this.P?(Ye(n,"$req",e),Ye(n,"SID","null"),s.aa=!0,$u(s,n,null)):$u(s,n,e),this.H=2}}else this.H==3&&(t?jp(this,t):this.j.length==0||Xy(this.i)||jp(this))};function jp(t,e){var n;e?n=e.m:n=t.W++;const r=Zn(t.I);Ye(r,"SID",t.K),Ye(r,"RID",n),Ye(r,"AID",t.V),Vo(t,r),t.o&&t.s&&ld(r,t.o,t.s),n=new Oo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=uv(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),od(t.i,n),$u(n,r,e)}function Vo(t,e){t.na&&Gh(t.na,function(n,r){Ye(e,r,n)}),t.h&&Wy({},function(n,r){Ye(e,r,n)})}function uv(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{qC(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function hv(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;io||ky(),oo||(io(),oo=!0),ed.add(e,t),t.A=0}}function ud(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Po(Dt(t.Ma,t),pv(t,t.A)),t.A++,!0)}Q.Ma=function(){if(this.u=null,dv(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Po(Dt(this.jb,this),t)}};Q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ut(10),Gl(this),dv(this))};function hd(t){t.B!=null&&(pe.clearTimeout(t.B),t.B=null)}function dv(t){t.g=new Oo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Zn(t.wa);Ye(e,"RID","rpc"),Ye(e,"SID",t.K),Ye(e,"AID",t.V),Ye(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ye(e,"TO",t.qa),Ye(e,"TYPE","xmlhttp"),Vo(t,e),t.o&&t.s&&ld(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=zl(Zn(e)),n.u=null,n.S=!0,By(n,t)}Q.ib=function(){this.v!=null&&(this.v=null,Gl(this),ud(this),Ut(19))};function Ga(t){t.v!=null&&(pe.clearTimeout(t.v),t.v=null)}function fv(t,e){var n=null;if(t.g==e){Ga(t),hd(t),t.g=null;var r=2}else if(ju(t.i,e))n=e.F,ev(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=Ul(),bt(r,new Ly(r,n)),Ql(t)}else hv(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&YC(t,e)||r==2&&ud(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Gr(t,5);break;case 4:Gr(t,10);break;case 3:Gr(t,6);break;default:Gr(t,2)}}}function pv(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Gr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Dt(t.pb,t);n||(n=new es("//www.google.com/images/cleardot.gif"),pe.location&&pe.location.protocol=="http"||Wa(n,"https"),zl(n)),zC(n.toString(),r)}else Ut(2);t.H=0,t.h&&t.h.za(e),mv(t),cv(t)}Q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ut(2)):(this.l.info("Failed to ping google.com"),Ut(1))};function mv(t){if(t.H=0,t.ma=[],t.h){const e=tv(t.i);(e.length!=0||t.j.length!=0)&&(kp(t.ma,e),kp(t.ma,t.j),t.i.i.length=0,Wh(t.j),t.j.length=0),t.h.ya()}}function gv(t,e,n){var r=n instanceof es?Zn(n):new es(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ka(r,r.m);else{var s=pe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new es(null);r&&Wa(i,r),e&&(i.g=e),s&&Ka(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ye(r,n,e),Ye(r,"VER",t.ra),Vo(t,r),r}function _v(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ze(new Hl({ob:n})):new Ze(t.va),e.Oa(t.J),e}Q.isActive=function(){return!!this.h&&this.h.isActive(this)};function yv(){}Q=yv.prototype;Q.Ba=function(){};Q.Aa=function(){};Q.za=function(){};Q.ya=function(){};Q.isActive=function(){return!0};Q.Va=function(){};function Qa(){if(Ks&&!(10<=Number(cC)))throw Error("Environmental error: no available transport.")}Qa.prototype.g=function(t,e){return new Zt(t,e)};function Zt(t,e){_t.call(this),this.g=new lv(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ro(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ro(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ci(this)}yt(Zt,_t);Zt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ut(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=gv(t,null,t.Y),Ql(t)};Zt.prototype.close=function(){cd(this.g)};Zt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Zh(t),t=n);e.j.push(new $C(e.fb++,t)),e.H==3&&Ql(e)};Zt.prototype.N=function(){this.g.h=null,delete this.j,cd(this.g),delete this.g,Zt.$.N.call(this)};function vv(t){sd.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}yt(vv,sd);function wv(){id.call(this),this.status=1}yt(wv,id);function ci(t){this.g=t}yt(ci,yv);ci.prototype.Ba=function(){bt(this.g,"a")};ci.prototype.Aa=function(t){bt(this.g,new vv(t))};ci.prototype.za=function(t){bt(this.g,new wv)};ci.prototype.ya=function(){bt(this.g,"b")};function JC(){this.blockSize=-1}function pn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}yt(pn,JC);pn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Gc(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}pn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Gc(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Gc(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Gc(this,r),s=0;break}}this.h=s,this.i+=e};pn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ue(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var XC={};function dd(t){return-128<=t&&128>t?oC(t,function(e){return new Ue([e|0],0>e?-1:0)}):new Ue([t|0],0>t?-1:0)}function An(t){if(isNaN(t)||!isFinite(t))return Us;if(0>t)return wt(An(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Bu;return new Ue(e,0)}function Ev(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return wt(Ev(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=An(Math.pow(e,8)),r=Us,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=An(Math.pow(e,i)),r=r.R(i).add(An(o))):(r=r.R(n),r=r.add(An(o)))}return r}var Bu=4294967296,Us=dd(0),qu=dd(1),Bp=dd(16777216);Q=Ue.prototype;Q.ea=function(){if(nn(this))return-wt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Bu+r)*e,e*=Bu}return t};Q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Wn(this))return"0";if(nn(this))return"-"+wt(this).toString(t);for(var e=An(Math.pow(t,6)),n=this,r="";;){var s=Ja(n,e).g;n=Ya(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Wn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};Q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Wn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function nn(t){return t.h==-1}Q.X=function(t){return t=Ya(this,t),nn(t)?-1:Wn(t)?0:1};function wt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ue(n,~t.h).add(qu)}Q.abs=function(){return nn(this)?wt(this):this};Q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ue(n,n[n.length-1]&-2147483648?-1:0)};function Ya(t,e){return t.add(wt(e))}Q.R=function(t){if(Wn(this)||Wn(t))return Us;if(nn(this))return nn(t)?wt(this).R(wt(t)):wt(wt(this).R(t));if(nn(t))return wt(this.R(wt(t)));if(0>this.X(Bp)&&0>t.X(Bp))return An(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,na(n,2*r+2*s),n[2*r+2*s+1]+=i*l,na(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,na(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,na(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ue(n,0)};function na(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function wi(t,e){this.g=t,this.h=e}function Ja(t,e){if(Wn(e))throw Error("division by zero");if(Wn(t))return new wi(Us,Us);if(nn(t))return e=Ja(wt(t),e),new wi(wt(e.g),wt(e.h));if(nn(e))return e=Ja(t,wt(e)),new wi(wt(e.g),e.h);if(30<t.g.length){if(nn(t)||nn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=qu,r=e;0>=r.X(t);)n=qp(n),r=qp(r);var s=Ts(n,1),i=Ts(r,1);for(r=Ts(r,2),n=Ts(n,2);!Wn(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Ts(r,1),n=Ts(n,1)}return e=Ya(t,s.R(e)),new wi(s,e)}for(s=Us;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=An(n),o=i.R(e);nn(o)||0<o.X(t);)n-=r,i=An(n),o=i.R(e);Wn(i)&&(i=qu),s=s.add(i),t=Ya(t,o)}return new wi(s,t)}Q.gb=function(t){return Ja(this,t).h};Q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ue(n,this.h&t.h)};Q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ue(n,this.h|t.h)};Q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ue(n,this.h^t.h)};function qp(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ue(n,t.h)}function Ts(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ue(s,t.h)}Qa.prototype.createWebChannel=Qa.prototype.g;Zt.prototype.send=Zt.prototype.u;Zt.prototype.open=Zt.prototype.m;Zt.prototype.close=Zt.prototype.close;jl.NO_ERROR=0;jl.TIMEOUT=8;jl.HTTP_ERROR=6;Fy.COMPLETE="complete";$y.EventType=ko;ko.OPEN="a";ko.CLOSE="b";ko.ERROR="c";ko.MESSAGE="d";_t.prototype.listen=_t.prototype.O;Ze.prototype.listenOnce=Ze.prototype.P;Ze.prototype.getLastError=Ze.prototype.Sa;Ze.prototype.getLastErrorCode=Ze.prototype.Ia;Ze.prototype.getStatus=Ze.prototype.da;Ze.prototype.getResponseJson=Ze.prototype.Wa;Ze.prototype.getResponseText=Ze.prototype.ja;Ze.prototype.send=Ze.prototype.ha;Ze.prototype.setWithCredentials=Ze.prototype.Oa;pn.prototype.digest=pn.prototype.l;pn.prototype.reset=pn.prototype.reset;pn.prototype.update=pn.prototype.j;Ue.prototype.add=Ue.prototype.add;Ue.prototype.multiply=Ue.prototype.R;Ue.prototype.modulo=Ue.prototype.gb;Ue.prototype.compare=Ue.prototype.X;Ue.prototype.toNumber=Ue.prototype.ea;Ue.prototype.toString=Ue.prototype.toString;Ue.prototype.getBits=Ue.prototype.D;Ue.fromNumber=An;Ue.fromString=Ev;var ZC=function(){return new Qa},e1=function(){return Ul()},Qc=jl,t1=Fy,n1=ps,zp={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ra=$y,r1=Ze,s1=pn,js=Ue;const Hp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Oh("@firebase/firestore");function Ei(){return as.logLevel}function G(t,...e){if(as.logLevel<=Ie.DEBUG){const n=e.map(fd);as.debug(`Firestore (${ui}): ${t}`,...n)}}function Vn(t,...e){if(as.logLevel<=Ie.ERROR){const n=e.map(fd);as.error(`Firestore (${ui}): ${t}`,...n)}}function Gs(t,...e){if(as.logLevel<=Ie.WARN){const n=e.map(fd);as.warn(`Firestore (${ui}): ${t}`,...n)}}function fd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: `+t;throw Vn(e),new Error(e)}function Ke(t,e){t||fe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class o1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a1{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Ct(e)}}class l1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class c1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new l1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string"),this.R=n.token,new u1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=d1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function Qs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new ut(0,0))}static max(){return new me(new ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ho.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ho?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends ho{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const f1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends ho{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return f1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ee(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Je.fromString(e))}static fromName(e){return new ie(Je.fromString(e).popFirst(5))}static empty(){return new ie(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Je(e.slice()))}}function p1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new xr(s,ie.empty(),e)}function m1(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(me.min(),ie.empty(),-1)}static max(){return new xr(me.max(),ie.empty(),-1)}}function g1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==_1)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(s=>s?D.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new D((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new D((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Qn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ui(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=md(r.target.error);this.V.reject(new Ui(e,s))}}static open(e,n,r,s){try{return new pd(n,e.transaction(s,r))}catch(i){throw new Ui(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new w1(n)}}class Qr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Qr.S(lt())===12.2&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),zr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!N_())return!1;if(Qr.C())return!0;const e=lt(),n=Qr.S(e),r=0<n&&n<10,s=Qr.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ui(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ee(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ee(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ui(e,o))},s.onupgradeneeded=i=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=pd.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),D.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class v1{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return zr(this.k.delete())}}class Ui extends ee{constructor(e,n){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Lo(t){return t.name==="IndexedDbTransactionError"}class w1{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zr(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),zr(this.store.add(e))}get(e){return zr(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),zr(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),zr(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new D((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new D((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new D((r,s)=>{n.onerror=i=>{const o=md(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new D((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new v1(a),c=n(a.primaryKey,a.value,l);if(c instanceof D){const u=c.catch(h=>(l.done(),D.reject(h)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>D.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zr(t){return new D((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=md(r.target.error);n(s)}})}let Wp=!1;function md(t){const e=Qr.S(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wp||(Wp=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}gd._e=-1;function Yl(t){return t==null}function Xa(t){return t===0&&1/t==-1/0}function E1(t){return typeof t=="number"&&Number.isInteger(t)&&!Xa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Iv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sa(this.root,e,this.comparator,!0)}}class sa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??vt.RED,this.left=s??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gp(this.data.getIterator())}getIteratorFrom(e){return new Gp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class Gp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new Tt(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Av("Invalid base64 string: "+i):i}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const b1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ke(!!t),typeof t=="string"){let e=0;const n=b1.exec(t);if(Ke(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yd(t){const e=t.mapValue.fields.__previous_value__;return _d(e)?yd(e):e}function fo(t){const e=Pr(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_d(t)?4:I1(t)?9007199254740991:10:fe()}function Mn(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Pr(s.timestampValue),a=Pr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ls(s.bytesValue).isEqual(ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Xa(o)===Xa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qs(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Kp(o)!==Kp(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mn(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function mo(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=cs(t),r=cs(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Qp(t.timestampValue,e.timestampValue);case 4:return Qp(fo(t),fo(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ls(i),l=ls(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Oe(a[c],l[c]);if(u!==0)return u}return Oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Oe(nt(i.latitude),nt(o.latitude));return a!==0?a:Oe(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Ys(a[c],l[c]);if(u)return u}return Oe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ia.mapValue&&o===ia.mapValue)return 0;if(i===ia.mapValue)return 1;if(o===ia.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Oe(l[h],u[h]);if(d!==0)return d;const f=Ys(a[l[h]],c[u[h]]);if(f!==0)return f}return Oe(l.length,u.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Qp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=Pr(t),r=Pr(e),s=Oe(n.seconds,r.seconds);return s!==0?s:Oe(n.nanos,r.nanos)}function Js(t){return zu(t)}function zu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=zu(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${zu(n.fields[o])}`;return s+"}"}(t.mapValue):fe()}function Yp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hu(t){return!!t&&"integerValue"in t}function vd(t){return!!t&&"arrayValue"in t}function Jp(t){return!!t&&"nullValue"in t}function Xp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ea(t){return!!t&&"mapValue"in t}function ji(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ji(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ji(t.arrayValue.values[n]);return e}return Object.assign({},t)}function I1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ea(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ji(n)}setAll(e){let n=Et.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ji(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ea(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ea(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ms(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Kt(ji(this.value))}}function Sv(t){const e=[];return ms(t.fields,(n,r)=>{const s=new Et([n]);if(Ea(r)){const i=Sv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pt(e,0,me.min(),me.min(),me.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,s){return new Pt(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new Pt(e,2,n,me.min(),me.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,me.min(),me.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.position=e,this.inclusive=n}}function Zp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Ys(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function em(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n="asc"){this.field=e,this.dir=n}}function A1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{}class st extends Rv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new R1(e,n,r):n==="array-contains"?new P1(e,r):n==="in"?new k1(e,r):n==="not-in"?new O1(e,r):n==="array-contains-any"?new N1(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C1(e,r):new x1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ys(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends Rv{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new mn(e,n)}matches(e){return Cv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Cv(t){return t.op==="and"}function xv(t){return S1(t)&&Cv(t)}function S1(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function Wu(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Js(t.value);if(xv(t))return t.filters.map(e=>Wu(e)).join(",");{const e=t.filters.map(n=>Wu(n)).join(",");return`${t.op}(${e})`}}function Pv(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)}(t,e):t instanceof mn?function(r,s){return s instanceof mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Pv(o,s.filters[a]),!0):!1}(t,e):void fe()}function kv(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Js(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(kv).join(" ,")+"}"}(t):"Filter"}class R1 extends st{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class C1 extends st{constructor(e,n){super(e,"in",n),this.keys=Ov("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class x1 extends st{constructor(e,n){super(e,"not-in",n),this.keys=Ov("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ov(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class P1 extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vd(n)&&mo(n.arrayValue,this.value)}}class k1 extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class O1 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mo(this.value.arrayValue,n)}}class N1 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function tm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new D1(t,e,n,r,s,i,o)}function wd(t){const e=_e(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wu(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Js(r)).join(",")),e.ce=n}return e.ce}function Ed(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!em(t.startAt,e.startAt)&&em(t.endAt,e.endAt)}function Ku(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function V1(t,e,n,r,s,i,o,a){return new Fo(t,e,n,r,s,i,o,a)}function Nv(t){return new Fo(t)}function nm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dv(t){return t.collectionGroup!==null}function Bi(t){const e=_e(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tt(Et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new el(i,r))}),n.has(Et.keyField().canonicalString())||e.le.push(new el(Et.keyField(),r))}return e.le}function Pn(t){const e=_e(t);return e.he||(e.he=M1(e,Bi(t))),e.he}function M1(t,e){if(t.limitType==="F")return tm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new el(s.field,i)});const n=t.endAt?new Za(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Za(t.startAt.position,t.startAt.inclusive):null;return tm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gu(t,e){const n=t.filters.concat([e]);return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qu(t,e,n){return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jl(t,e){return Ed(Pn(t),Pn(e))&&t.limitType===e.limitType}function Vv(t){return`${wd(Pn(t))}|lt:${t.limitType}`}function Rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>kv(s)).join(", ")}]`),Yl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Js(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Js(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function Xl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Zp(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Bi(r),s)||r.endAt&&!function(o,a,l){const c=Zp(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Bi(r),s))}(t,e)}function L1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Mv(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=F1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function F1(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ys(l,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Iv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Xe(ie.comparator);function er(){return $1}const Lv=new Xe(ie.comparator);function Ri(...t){let e=Lv;for(const n of t)e=e.insert(n.key,n);return e}function Fv(t){let e=Lv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return qi()}function $v(){return qi()}function qi(){return new hi(t=>t.toString(),(t,e)=>t.isEqual(e))}const U1=new Xe(ie.comparator),j1=new Tt(ie.comparator);function Ee(...t){let e=j1;for(const n of t)e=e.add(n);return e}const B1=new Tt(Oe);function q1(){return B1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xa(e)?"-0":e}}function jv(t){return{integerValue:""+t}}function z1(t,e){return E1(e)?jv(e):Uv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this._=void 0}}function H1(t,e,n){return t instanceof tl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_d(i)&&(i=yd(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof go?qv(t,e):t instanceof _o?zv(t,e):function(s,i){const o=Bv(s,i),a=rm(o)+rm(s.Ie);return Hu(o)&&Hu(s.Ie)?jv(a):Uv(s.serializer,a)}(t,e)}function W1(t,e,n){return t instanceof go?qv(t,e):t instanceof _o?zv(t,e):n}function Bv(t,e){return t instanceof nl?function(r){return Hu(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tl extends Zl{}class go extends Zl{constructor(e){super(),this.elements=e}}function qv(t,e){const n=Hv(e);for(const r of t.elements)n.some(s=>Mn(s,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends Zl{constructor(e){super(),this.elements=e}}function zv(t,e){let n=Hv(e);for(const r of t.elements)n=n.filter(s=>!Mn(s,r));return{arrayValue:{values:n}}}class nl extends Zl{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function rm(t){return nt(t.integerValue||t.doubleValue)}function Hv(t){return vd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function K1(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof go&&s instanceof go||r instanceof _o&&s instanceof _o?Qs(r.elements,s.elements,Mn):r instanceof nl&&s instanceof nl?Mn(r.Ie,s.Ie):r instanceof tl&&s instanceof tl}(t.transform,e.transform)}class G1{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ba(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ec{}function Wv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gv(t.key,kn.none()):new $o(t.key,t.data,kn.none());{const n=t.data,r=Kt.empty();let s=new Tt(Et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Lr(t.key,r,new Jt(s.toArray()),kn.none())}}function Q1(t,e,n){t instanceof $o?function(s,i,o){const a=s.value.clone(),l=im(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(s,i,o){if(!ba(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=im(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Kv(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zi(t,e,n,r){return t instanceof $o?function(i,o,a,l){if(!ba(i.precondition,o))return a;const c=i.value.clone(),u=om(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(i,o,a,l){if(!ba(i.precondition,o))return a;const c=om(i.fieldTransforms,l,o),u=o.data;return u.setAll(Kv(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return ba(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Y1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Bv(r.transform,s||null);i!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,i))}return n||null}function sm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qs(r,s,(i,o)=>K1(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $o extends ec{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Lr extends ec{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function im(t,e,n){const r=new Map;Ke(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,W1(o,a,n[s]))}return r}function om(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,H1(i,o,e))}return r}class Gv extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J1 extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Q1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$v();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Wv(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,r)=>sm(n,r))&&Qs(this.baseMutations,e.baseMutations,(n,r)=>sm(n,r))}}class bd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ke(e.mutations.length===r.length);let s=function(){return U1}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new bd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Re;function tx(t){switch(t){default:return fe();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function Qv(t){if(t===void 0)return Vn("GRPC error has no .code"),N.UNKNOWN;switch(t){case tt.OK:return N.OK;case tt.CANCELLED:return N.CANCELLED;case tt.UNKNOWN:return N.UNKNOWN;case tt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case tt.INTERNAL:return N.INTERNAL;case tt.UNAVAILABLE:return N.UNAVAILABLE;case tt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case tt.NOT_FOUND:return N.NOT_FOUND;case tt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case tt.ABORTED:return N.ABORTED;case tt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case tt.DATA_LOSS:return N.DATA_LOSS;default:return fe()}}(Re=tt||(tt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new js([4294967295,4294967295],0);function am(t){const e=nx().encode(t),n=new s1;return n.update(e),new Uint8Array(n.digest())}function lm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new js([n,r],0),new js([s,i],0)]}class Td{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ci(`Invalid padding: ${n}`);if(r<0)throw new Ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=js.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(js.fromNumber(r)));return s.compare(rx)===1&&(s=new js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=am(e),[r,s]=lm(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Td(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=am(e),[r,s]=lm(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tc(me.min(),s,new Xe(Oe),er(),Ee())}}class Uo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uo(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class Yv{constructor(e,n){this.targetId=e,this.fe=n}}class Jv{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cm{constructor(){this.ge=0,this.pe=hm(),this.ye=Mt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe()}}),new Uo(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=hm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ke(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class sx{constructor(e){this.Be=e,this.ke=new Map,this.qe=er(),this.Qe=um(),this.Ke=new Xe(Oe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Ku(i))if(r===0){const o=new ie(i.path);this.We(n,o,Pt.newNoDocument(o,me.min()))}else Ke(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ls(r).toUint8Array()}catch(l){if(l instanceof Av)return Gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Td(o,s,i)}catch(l){return Gs(l instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Ku(a.target)){const l=new ie(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Pt.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=Ee();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new tc(e,n,this.Ke,this.qe,r);return this.qe=er(),this.Qe=um(),this.Ke=new Xe(Oe),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new cm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Tt(Oe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new cm),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function um(){return new Xe(ie.comparator)}function hm(){return new Xe(ie.comparator)}const ix={asc:"ASCENDING",desc:"DESCENDING"},ox={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ax={and:"AND",or:"OR"};class lx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yu(t,e){return t.useProto3Json||Yl(e)?e:{value:e}}function rl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cx(t,e){return rl(t,e.toTimestamp())}function On(t){return Ke(!!t),me.fromTimestamp(function(n){const r=Pr(n);return new ut(r.seconds,r.nanos)}(t))}function Id(t,e){return Ju(t,e).canonicalString()}function Ju(t,e){const n=function(s){return new Je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zv(t){const e=Je.fromString(t);return Ke(s0(e)),e}function Xu(t,e){return Id(t.databaseId,e.path)}function Yc(t,e){const n=Zv(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(t0(n))}function e0(t,e){return Id(t.databaseId,e)}function ux(t){const e=Zv(t);return e.length===4?Je.emptyPath():t0(e)}function Zu(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function t0(t){return Ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dm(t,e,n){return{name:Xu(t,e),fields:n.value.mapValue.fields}}function hx(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Ke(u===void 0||typeof u=="string"),Mt.fromBase64String(u||"")):(Ke(u===void 0||u instanceof Uint8Array),Mt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?N.UNKNOWN:Qv(c.code);return new ee(u,c.message||"")}(o);n=new Jv(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yc(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):me.min(),a=new Kt({mapValue:{fields:r.document.fields}}),l=Pt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ta(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yc(t,r.document),i=r.readTime?On(r.readTime):me.min(),o=Pt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ta([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yc(t,r.document),i=r.removedTargetIds||[];n=new Ta([],i,s,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ex(s,i),a=r.targetId;n=new Yv(a,o)}}return n}function dx(t,e){let n;if(e instanceof $o)n={update:dm(t,e.key,e.value)};else if(e instanceof Gv)n={delete:Xu(t,e.key)};else if(e instanceof Lr)n={update:dm(t,e.key,e.data),updateMask:Ex(e.fieldMask)};else{if(!(e instanceof J1))return fe();n={verify:Xu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:cx(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe()}(t,e.precondition)),n}function fx(t,e){return t&&t.length>0?(Ke(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(me.min())&&(o=On(i)),new G1(o,s.transformResults||[])}(n,e))):[]}function px(t,e){return{documents:[e0(t,e.path)]}}function mx(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=e0(t,s);const i=function(c){if(c.length!==0)return r0(mn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Cs(d.field),direction:yx(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yu(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function gx(t){let e=ux(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ke(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const d=n0(h);return d instanceof mn&&xv(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(_){return new el(xs(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Yl(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Za(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Za(f,d)}(n.endAt)),V1(e,s,o,i,a,"F",l,c)}function _x(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function n0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xs(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xs(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return st.create(xs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>n0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function yx(t){return ix[t]}function vx(t){return ox[t]}function wx(t){return ax[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function xs(t){return Et.fromServerFormat(t.fieldPath)}function r0(t){return t instanceof st?function(n){if(n.op==="=="){if(Xp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(Jp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(Jp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:vx(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(s=>r0(s));return r.length===1?r[0]:{compositeFilter:{op:wx(n.op),filters:r}}}(t):fe()}function Ex(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function s0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,s,i=me.min(),o=me.min(),a=Mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.ct=e}}function Tx(t){const e=gx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this._n=new Ax}addToCollectionParentIndex(e,n){return this._n.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(xr.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class Ax{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Tt(Je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Tt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Xs(0)}static Ln(){return new Xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.changes=new hi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&zi(r.mutation,s,Jt.empty(),ut.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ri();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=er();const o=qi(),a=function(){return qi()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Lr)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),zi(u.mutation,c,u.mutation.getFieldMask(),ut.now())):o.set(c.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new Rx(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qi();let s=new Xe((o,a)=>o-a),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Jt.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||Ee()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=$v();u.forEach(d=>{if(!i.has(d)){const f=Wv(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):D.resolve(Yr());let a=-1,l=i;return o.next(c=>D.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?D.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ee())).next(u=>({batchId:a,changes:Fv(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Ri();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ri();return this.indexManager.getCollectionParents(e,i).next(a=>D.forEach(a,l=>{const c=function(h,d){return new Fo(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Pt.newInvalidDocument(u)))});let a=Ri();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&zi(u.mutation,c,Jt.empty(),ut.now()),Xl(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return D.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:Tx(s.bundledQuery),readTime:On(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.overlays=new Xe(ie.comparator),this.hr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return D.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Yr(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Yr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return D.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z1(n,r));let i=this.hr.get(n);i===void 0&&(i=Ee(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){this.Pr=new Tt(pt.Ir),this.Tr=new Tt(pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new pt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ie(new Je([])),r=new pt(n,e),s=new pt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ie(new Je([])),r=new pt(n,e),s=new pt(n,e+1);let i=Ee();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new pt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ie.comparator(e.key,n.key)||Oe(e.pr,n.pr)}static Er(e,n){return Oe(e.pr,n.pr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Tt(pt.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new X1(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new pt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(Oe);return n.forEach(s=>{const i=new pt(s,0),o=new pt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new pt(new ie(i),0);let a=new Tt(Oe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ke(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(n.mutations,s=>{const i=new pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new pt(n,0),s=this.wr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.vr=e,this.docs=function(){return new Xe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Pt.newInvalidDocument(s))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=er();const o=n.path,a=new ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||g1(m1(u),r)<=0||(s.has(u.key)||Xl(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe()}Fr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Nx(this)}getSize(e){return D.resolve(this.size)}}class Nx extends Sx{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.persistence=e,this.Mr=new hi(n=>wd(n),Ed),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ad,this.targetCount=0,this.Lr=Xs.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),D.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Xs(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.qn(n),D.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),D.waitFor(i).next(()=>s)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),D.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.Br={},this.overlays={},this.kr=new gd(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Dx(this),this.indexManager=new Ix,this.remoteDocumentCache=function(s){return new Ox(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new bx(n),this.$r=new xx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Px,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new kx(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new Mx(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return D.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Mx extends y1{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.zr=new Ad,this.jr=null}static Hr(e){return new Sd(e)}get Jr(){if(this.jr)return this.jr;throw fe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),D.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{const s=ie.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,me.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return D.or([()=>D.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return wI()?8:Qr.v(lt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Lx;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Ei()<=Ie.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),D.resolve()):(Ei()<=Ie.DEBUG&&G("QueryEngine","Query:",Rs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Ei()<=Ie.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):D.resolve())}ji(e,n){if(nm(n))return D.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qu(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ee(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Qu(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return nm(n)||s.isEqual(me.min())?D.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?D.resolve(null):(Ei()<=Ie.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rs(n)),this.es(e,o,n,p1(s,-1)).next(a=>a))})}Zi(e,n){let r=new Tt(Mv(e));return n.forEach((s,i)=>{Xl(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Ei()<=Ie.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.zi.getDocumentsMatchingQuery(e,n,xr.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new Xe(Oe),this.rs=new hi(i=>wd(i),Ed),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cx(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Ux(t,e,n,r){return new $x(t,e,n,r)}async function i0(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ee();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function jx(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=D.resolve();return d.forEach(_=>{f=f.next(()=>u.getEntry(l,_)).next(E=>{const b=c.docVersions.get(_);Ke(b!==null),E.version.compareTo(b)<0&&(h.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),u.addEntry(E)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function o0(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Bx(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Mt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),s=s.insert(h,f),function(E,b,A){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(i,f))});let l=er(),c=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(qx(i,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(me.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return D.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function qx(t,e,n){let r=Ee(),s=Ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=er();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function zx(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hx(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,D.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new _r(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function eh(t,e,n){const r=_e(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Lo(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function fm(t,e,n){const r=_e(t);let s=me.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=_e(l),d=h.rs.get(u);return d!==void 0?D.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,Pn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:me.min(),n?i:Ee())).next(a=>(Wx(r,L1(e),a),{documents:a,hs:i})))}function Wx(t,e,n){let r=t.ss.get(e)||me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class pm{constructor(){this.activeTargetIds=q1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kx{constructor(){this.no=new pm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new pm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa=null;function Jc(){return oa===null?oa=function(){return 268435456+Math.round(2147483648*Math.random())}():oa++,"0x"+oa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class Jx extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Jc(),l=this.bo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(G("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Gs("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ui}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=Qx[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=Jc();return new Promise((o,a)=>{const l=new r1;l.setWithCredentials(!0),l.listenOnce(t1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qc.NO_ERROR:const u=l.getResponseJson();G(Rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Qc.TIMEOUT:G(Rt,`RPC '${e}' ${i} timed out`),a(new ee(N.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const h=l.getStatus();if(G(Rt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const _=function(b){const A=b.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(A)>=0?A:N.UNKNOWN}(f.status);a(new ee(_,f.message))}else a(new ee(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(N.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{G(Rt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);G(Rt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=Jc(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ZC(),a=e1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");G(Rt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const _=new Yx({lo:b=>{f?G(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(d||(G(Rt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),G(Rt,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},ho:()=>h.close()}),E=(b,A,P)=>{b.listen(A,M=>{try{P(M)}catch(q){setTimeout(()=>{throw q},0)}})};return E(h,ra.EventType.OPEN,()=>{f||G(Rt,`RPC '${e}' stream ${s} transport opened.`)}),E(h,ra.EventType.CLOSE,()=>{f||(f=!0,G(Rt,`RPC '${e}' stream ${s} transport closed`),_.Vo())}),E(h,ra.EventType.ERROR,b=>{f||(f=!0,Gs(Rt,`RPC '${e}' stream ${s} transport errored:`,b),_.Vo(new ee(N.UNAVAILABLE,"The operation could not be completed")))}),E(h,ra.EventType.MESSAGE,b=>{var A;if(!f){const P=b.data[0];Ke(!!P);const M=P,q=M.error||((A=M[0])===null||A===void 0?void 0:A.error);if(q){G(Rt,`RPC '${e}' stream ${s} received error:`,q);const R=q.status;let I=function(V){const $=tt[V];if($!==void 0)return Qv($)}(R),F=q.message;I===void 0&&(I=N.INTERNAL,F="Unknown error status: "+R+" with message "+q.message),f=!0,_.Vo(new ee(I,F)),h.close()}else G(Rt,`RPC '${e}' stream ${s} received:`,P),_.mo(P)}}),E(a,n1.STAT_EVENT,b=>{b.stat===zp.PROXY?G(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===zp.NOPROXY&&G(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}}function Xc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return new lx(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new a0(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new ee(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xx extends l0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=hx(this.serializer,e),r=function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?On(o.readTime):me.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Zu(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ku(l)?{documents:px(i,l)}:{query:mx(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Xv(i,o.resumeToken);const c=Yu(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=rl(i,o.snapshotVersion.toTimestamp());const c=Yu(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_x(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Zu(this.serializer),n.removeTarget=e,this.t_(n)}}class Zx extends l0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=fx(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.T_(r,n)}return Ke(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Zu(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dx(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new ee(N.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Ju(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(N.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Ju(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(N.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class tP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Vn(n),this.g_=!1):G("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{gs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=_e(l);c.v_.add(4),await jo(c),c.x_.set("Unknown"),c.v_.delete(4),await rc(c)}(this))})}),this.x_=new tP(r,s)}}async function rc(t){if(gs(t))for(const e of t.F_)await e(!0)}async function jo(t){for(const e of t.F_)await e(!1)}function c0(t,e){const n=_e(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),kd(n)?Pd(n):di(n).Jo()&&xd(n,e))}function Cd(t,e){const n=_e(t),r=di(n);n.C_.delete(e),r.Jo()&&u0(n,e),n.C_.size===0&&(r.Jo()?r.Xo():gs(n)&&n.x_.set("Unknown"))}function xd(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}di(t).c_(e)}function u0(t,e){t.O_.Oe(e),di(t).l_(e)}function Pd(t){t.O_=new sx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),di(t).start(),t.x_.p_()}function kd(t){return gs(t)&&!di(t).Ho()&&t.C_.size>0}function gs(t){return _e(t).v_.size===0}function h0(t){t.O_=void 0}async function rP(t){t.C_.forEach((e,n)=>{xd(t,e)})}async function sP(t,e){h0(t),kd(t)?(t.x_.S_(e),Pd(t)):t.x_.set("Unknown")}async function iP(t,e,n){if(t.x_.set("Online"),e instanceof Jv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sl(t,r)}else if(e instanceof Ta?t.O_.$e(e):e instanceof Yv?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(me.min()))try{const r=await o0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(Mt.EMPTY_BYTE_STRING,u.snapshotVersion)),u0(i,l);const h=new _r(u.target,l,c,u.sequenceNumber);xd(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await sl(t,r)}}async function sl(t,e,n){if(!Lo(e))throw e;t.v_.add(1),await jo(t),t.x_.set("Offline"),n||(n=()=>o0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await rc(t)})}function d0(t,e){return e().catch(n=>sl(t,n,e))}async function sc(t){const e=_e(t),n=kr(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;oP(e);)try{const s=await zx(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,aP(e,s)}catch(s){await sl(e,s)}f0(e)&&p0(e)}function oP(t){return gs(t)&&t.D_.length<10}function aP(t,e){t.D_.push(e);const n=kr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function f0(t){return gs(t)&&!kr(t).Ho()&&t.D_.length>0}function p0(t){kr(t).start()}async function lP(t){kr(t).d_()}async function cP(t){const e=kr(t);for(const n of t.D_)e.I_(n.mutations)}async function uP(t,e,n){const r=t.D_.shift(),s=bd.from(r,e,n);await d0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sc(t)}async function hP(t,e){e&&kr(t).P_&&await async function(r,s){if(function(o){return tx(o)&&o!==N.ABORTED}(s.code)){const i=r.D_.shift();kr(r).Zo(),await d0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await sc(r)}}(t,e),f0(t)&&p0(t)}async function gm(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=gs(n);n.v_.add(3),await jo(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await rc(n)}async function dP(t,e){const n=_e(t);e?(n.v_.delete(2),await rc(n)):e||(n.v_.add(2),await jo(n),n.x_.set("Unknown"))}function di(t){return t.N_||(t.N_=function(n,r,s){const i=_e(n);return i.R_(),new Xx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:rP.bind(null,t),To:sP.bind(null,t),u_:iP.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),kd(t)?Pd(t):t.x_.set("Unknown")):(await t.N_.stop(),h0(t))})),t.N_}function kr(t){return t.L_||(t.L_=function(n,r,s){const i=_e(n);return i.R_(),new Zx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:lP.bind(null,t),To:hP.bind(null,t),E_:cP.bind(null,t),T_:uP.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await sc(t)):(await t.L_.stop(),t.D_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Od(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),Lo(t))return new ee(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Ri(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Bs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.B_=new Xe(ie.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):fe():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zs{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zs(e,n,Bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class pP{constructor(){this.queries=new hi(e=>Vv(e),Jl),this.onlineState="Unknown",this.W_=new Set}}async function mP(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new fP,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Nd(o,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&Dd(n)}async function gP(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _P(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&Dd(n)}function yP(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function Dd(t){t.W_.forEach(e=>{e.next()})}var th,ym;(ym=th||(th={})).j_="default",ym.Cache="cache";class vP{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.key=e}}class g0{constructor(e){this.key=e}}class wP{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ee(),this.mutatedKeys=Ee(),this.ha=Mv(e),this.Pa=new Bs(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new _m,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=Xl(this.query,h)?h:null,_=!!d&&this.mutatedKeys.has(d.key),E=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;d&&f?d.data.isEqual(f.data)?_!==E&&(r.track({type:3,doc:f}),b=!0):this.da(d,f)||(r.track({type:2,doc:f}),b=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),b=!0):d&&!f&&(r.track({type:1,doc:d}),b=!0,(l||c)&&(a=!0)),b&&(f?(o=o.add(f),i=E?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,_){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return E(f)-E(_)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Zs(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new _m,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ee(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new g0(r))}),this.la.forEach(r=>{e.has(r)||n.push(new m0(r))}),n}fa(e){this.ua=e.hs,this.la=Ee();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Zs.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class EP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bP{constructor(e){this.key=e,this.pa=!1}}class TP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new hi(a=>Vv(a),Jl),this.Sa=new Map,this.ba=new Set,this.Da=new Xe(ie.comparator),this.Ca=new Map,this.va=new Ad,this.Fa={},this.Ma=new Map,this.xa=Xs.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function IP(t,e,n=!0){const r=b0(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await _0(r,e,n,!0),s}async function AP(t,e){const n=b0(t);await _0(n,e,!0,!1)}async function _0(t,e,n,r){const s=await Hx(t.localStore,Pn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await SP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&c0(t.remoteStore,s),a}async function SP(t,e,n,r,s){t.Na=(h,d,f)=>async function(E,b,A,P){let M=b.view.Ta(A);M.Xi&&(M=await fm(E.localStore,b.query,!1).then(({documents:F})=>b.view.Ta(F,M)));const q=P&&P.targetChanges.get(b.targetId),R=P&&P.targetMismatches.get(b.targetId)!=null,I=b.view.applyChanges(M,E.isPrimaryClient,q,R);return wm(E,b.targetId,I.Va),I.snapshot}(t,h,d,f);const i=await fm(t.localStore,e,!0),o=new wP(e,i.hs),a=o.Ta(i.documents),l=Uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);wm(t,n,c.Va);const u=new EP(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function RP(t,e,n){const r=_e(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!Jl(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await eh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Cd(r.remoteStore,s.targetId),nh(r,s.targetId)}).catch(Mo)):(nh(r,s.targetId),await eh(r.localStore,s.targetId,!0))}async function CP(t,e){const n=_e(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cd(n.remoteStore,r.targetId))}async function xP(t,e,n){const r=MP(t);try{const s=await function(o,a){const l=_e(o),c=ut.now(),u=a.reduce((f,_)=>f.add(_.key),Ee());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=er(),E=Ee();return l.os.getEntries(f,u).next(b=>{_=b,_.forEach((A,P)=>{P.isValidDocument()||(E=E.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,_)).next(b=>{h=b;const A=[];for(const P of a){const M=Y1(P,h.get(P.key).overlayedDocument);M!=null&&A.push(new Lr(P.key,M,Sv(M.value.mapValue),kn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,A,a)}).next(b=>{d=b;const A=b.applyToLocalDocumentSet(h,E);return l.documentOverlayCache.saveOverlays(f,b.batchId,A)})}).then(()=>({batchId:d.batchId,changes:Fv(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Xe(Oe)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Bo(r,s.changes),await sc(r.remoteStore)}catch(s){const i=Nd(s,"Failed to persist write");n.reject(i)}}async function y0(t,e){const n=_e(t);try{const r=await Bx(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?Ke(o.pa):s.removedDocuments.size>0&&(Ke(o.pa),o.pa=!1))}),await Bo(n,r,e)}catch(r){await Mo(r)}}function vm(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&Dd(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PP(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new Xe(ie.comparator);o=o.insert(i,Pt.newNoDocument(i,me.min()));const a=Ee().add(i),l=new tc(me.min(),new Map,new Xe(Oe),o,a);await y0(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),Vd(r)}else await eh(r.localStore,e,!1).then(()=>nh(r,e,n)).catch(Mo)}async function kP(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await jx(n.localStore,e);w0(n,r,null),v0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bo(n,s)}catch(s){await Mo(s)}}async function OP(t,e,n){const r=_e(t);try{const s=await function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ke(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);w0(r,e,n),v0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bo(r,s)}catch(s){await Mo(s)}}function v0(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function w0(t,e,n){const r=_e(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||E0(t,r)})}function E0(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(Cd(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Vd(t))}function wm(t,e,n){for(const r of n)r instanceof m0?(t.va.addReference(r.key,e),NP(t,r)):r instanceof g0?(G("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||E0(t,r.key)):fe()}function NP(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(G("SyncEngine","New document in limbo: "+n),t.ba.add(r),Vd(t))}function Vd(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new ie(Je.fromString(e)),r=t.xa.next();t.Ca.set(r,new bP(n)),t.Da=t.Da.insert(n,r),c0(t.remoteStore,new _r(Pn(Nv(n.path)),r,"TargetPurposeLimboResolution",gd._e))}}async function Bo(t,e,n){const r=_e(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=Rd.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const u=_e(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>D.forEach(c,d=>D.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>D.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Lo(h))throw h;G("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),_=f.snapshotVersion,E=f.withLastLimboFreeSnapshotVersion(_);u.ns=u.ns.insert(d,E)}}}(r.localStore,i))}async function DP(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await i0(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new ee(N.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bo(n,r.us)}}function VP(t,e){const n=_e(t),r=n.Ca.get(e);if(r&&r.pa)return Ee().add(r.key);{let s=Ee();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function b0(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.ya.u_=_P.bind(null,e.eventManager),e.ya.La=yP.bind(null,e.eventManager),e}function MP(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OP.bind(null,e),e}class Em{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=nc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Ux(this.persistence,new Fx,e.initialUser,this.serializer)}createPersistence(e){return new Vx(Sd.Hr,this.serializer)}createSharedClientState(e){return new Kx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class LP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DP.bind(null,this.syncEngine),await dP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pP}()}createDatastore(e){const n=nc(e.databaseInfo.databaseId),r=function(i){return new Jx(i)}(e.databaseInfo);return function(i,o,a,l){return new eP(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new nP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vm(this.syncEngine,n,0),function(){return mm.D()?new mm:new Gx}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new TP(s,i,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=_e(r);G("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await jo(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=Tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{G("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(G("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await i0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jP(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>gm(e.remoteStore,s)),t._onlineComponents=e}function UP(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function jP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!UP(n))throw n;Gs("Error using user provided cache. Falling back to memory cache: "+n),await Zc(t,new Em)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Zc(t,new Em);return t._offlineComponents}async function T0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await bm(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await bm(t,new LP))),t._onlineComponents}function BP(t){return T0(t).then(e=>e.syncEngine)}async function qP(t){const e=await T0(t),n=e.eventManager;return n.onListen=IP.bind(null,e.syncEngine),n.onUnlisten=RP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CP.bind(null,e.syncEngine),n}function zP(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new FP({next:d=>{o.enqueueAndForget(()=>gP(i,h)),d.fromCache&&l.source==="server"?c.reject(new ee(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new vP(a,u,{includeMetadataChanges:!0,ta:!0});return mP(i,h)}(await qP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t,e,n){if(!n)throw new ee(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HP(t,e,n,r){if(e===!0&&r===!0)throw new ee(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Im(t){if(!ie.isDocumentKey(t))throw new ee(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Am(t){if(ie.isDocumentKey(t))throw new ee(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ic(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ic(t);throw new ee(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ee(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ee(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ee(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ee(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ee(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i1;switch(r.type){case"firstParty":return new c1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tm.get(n);r&&(G("ComponentProvider","Removing Datastore"),Tm.delete(n),r.terminate())}(this),Promise.resolve()}}function WP(t,e,n,r={}){var s;const i=(t=ei(t,oc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ct.MOCK_USER;else{a=pI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ee(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ct(c)}t._authCredentials=new o1(new bv(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class Ir extends fi{constructor(e,n,r){super(e,n,Nv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ie(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function Rm(t,e,...n){if(t=It(t),A0("collection","path",e),t instanceof oc){const r=Je.fromString(e,...n);return Am(r),new Ir(t,null,r)}{if(!(t instanceof Xt||t instanceof Ir))throw new ee(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return Am(r),new Ir(t.firestore,null,r)}}function S0(t,e,...n){if(t=It(t),arguments.length===1&&(e=Tv.newId()),A0("doc","path",e),t instanceof oc){const r=Je.fromString(e,...n);return Im(r),new Xt(t,null,new ie(r))}{if(!(t instanceof Xt||t instanceof Ir))throw new ee(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return Im(r),new Xt(t.firestore,t instanceof Ir?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new a0(this,"async_queue_retry"),this.cu=()=>{const n=Xc();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Xc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=Xc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Qn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Lo(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=Od.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&fe()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}class ac extends oc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new KP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||C0(this),this._firestoreClient.terminate()}}function GP(t,e){const n=typeof t=="object"?t:L_(),r=typeof t=="string"?t:e||"(default)",s=Dh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dI("firestore");i&&WP(s,...i)}return s}function R0(t){return t._firestoreClient||C0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function C0(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new T1(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,I0(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new $P(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(Mt.fromBase64String(e))}catch(n){throw new ee(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ti(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^__.*__$/;class YP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new $o(e,this.data,n,this.fieldTransforms)}}class x0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function P0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Fd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Fd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return il(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(P0(this.Vu)&&QP.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class JP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nc(e)}Cu(e,n,r,s=!1){return new Fd({Vu:e,methodName:n,Du:r,path:Et.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),n=nc(t._databaseId);return new JP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XP(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);Ud("Data must be an object, but it was:",o,r);const a=k0(r,o);let l,c;if(i.merge)l=new Jt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=rh(e,h,n);if(!o.contains(d))throw new ee(N.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);N0(u,d)||u.push(d)}l=new Jt(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new YP(new Kt(a),l,c)}class cc extends Md{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cc}}function ZP(t,e,n,r){const s=t.Cu(1,e,n);Ud("Data must be an object, but it was:",s,r);const i=[],o=Kt.empty();ms(r,(l,c)=>{const u=jd(e,l,n);c=It(c);const h=s.yu(u);if(c instanceof cc)i.push(u);else{const d=qo(c,h);d!=null&&(i.push(u),o.set(u,d))}});const a=new Jt(i);return new x0(o,a,s.fieldTransforms)}function ek(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[rh(e,r,n)],l=[s];if(i.length%2!=0)throw new ee(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(rh(e,i[d])),l.push(i[d+1]);const c=[],u=Kt.empty();for(let d=a.length-1;d>=0;--d)if(!N0(c,a[d])){const f=a[d];let _=l[d];_=It(_);const E=o.yu(f);if(_ instanceof cc)c.push(f);else{const b=qo(_,E);b!=null&&(c.push(f),u.set(f,b))}}const h=new Jt(c);return new x0(u,h,o.fieldTransforms)}function tk(t,e,n,r=!1){return qo(n,t.Cu(r?4:3,e))}function qo(t,e){if(O0(t=It(t)))return Ud("Unsupported field value:",e,t),k0(t,e);if(t instanceof Md)return function(r,s){if(!P0(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=qo(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ut.fromDate(r);return{timestampValue:rl(s.serializer,i)}}if(r instanceof ut){const i=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rl(s.serializer,i)}}if(r instanceof Ld)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ti)return{bytesValue:Xv(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Id(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${ic(r)}`)}(t,e)}function k0(t,e){const n={};return Iv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,(r,s)=>{const i=qo(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function O0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof Ld||t instanceof ti||t instanceof Xt||t instanceof Md)}function Ud(t,e,n){if(!O0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ic(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function rh(t,e,n){if((e=It(e))instanceof lc)return e._internalPath;if(typeof e=="string")return jd(t,e);throw il("Field path arguments must be of type string or ",t,!1,void 0,n)}const nk=new RegExp("[~\\*/\\[\\]]");function jd(t,e,n){if(e.search(nk)>=0)throw il(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lc(...e.split("."))._internalPath}catch{throw il(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function il(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee(N.INVALID_ARGUMENT,a+t+l)}function N0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rk extends D0{data(){return super.data()}}function Bd(t,e){return typeof e=="string"?jd(t,e):e instanceof lc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qd{}class ik extends qd{}function ok(t,e,...n){let r=[];e instanceof qd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof zd).length,a=i.filter(l=>l instanceof uc).length;if(o>1||o>0&&a>0)throw new ee(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uc extends ik{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uc(e,n,r)}_apply(e){const n=this._parse(e);return V0(e._query,n),new fi(e.firestore,e.converter,Gu(e._query,n))}_parse(e){const n=$d(e.firestore);return function(i,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ee(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){xm(h,u);const f=[];for(const _ of h)f.push(Cm(l,i,_));d={arrayValue:{values:f}}}else d=Cm(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||xm(h,u),d=tk(a,o,h,u==="in"||u==="not-in");return st.create(c,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ak(t,e,n){const r=e,s=Bd("where",t);return uc._create(s,r,n)}class zd extends qd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)V0(o,l),o=Gu(o,l)}(e._query,n),new fi(e.firestore,e.converter,Gu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Cm(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new ee(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dv(e)&&n.indexOf("/")!==-1)throw new ee(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Je.fromString(n));if(!ie.isDocumentKey(r))throw new ee(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yp(t,new ie(r))}if(n instanceof Xt)return Yp(t,n._key);throw new ee(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ic(n)}.`)}function xm(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V0(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lk{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ms(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Ld(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);Ke(s0(r));const s=new po(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uk extends D0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ia extends uk{data(e={}){return super.data(e)}}class hk{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ia(this._firestore,this._userDataWriter,r.key,r,new aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ia(s._firestore,s._userDataWriter,a.doc.key,a.doc,new aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ia(s._firestore,s._userDataWriter,a.doc.key,a.doc,new aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:dk(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}class fk extends lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function pk(t){t=ei(t,fi);const e=ei(t.firestore,ac),n=R0(e),r=new fk(e);return sk(t._query),zP(n,t._query).then(s=>new hk(e,r,t,s))}function mk(t,e,n,...r){t=ei(t,Xt);const s=ei(t.firestore,ac),i=$d(s);let o;return o=typeof(e=It(e))=="string"||e instanceof lc?ek(i,"updateDoc",t._key,e,n,r):ZP(i,"updateDoc",t._key,e),M0(s,[o.toMutation(t._key,kn.exists(!0))])}function gk(t,e){const n=ei(t.firestore,ac),r=S0(t),s=ck(t.converter,e);return M0(n,[XP($d(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function M0(t,e){return function(r,s){const i=new Qn;return r.asyncQueue.enqueueAndForget(async()=>xP(await BP(r),s,i)),i.promise}(R0(t),e)}(function(e,n=!0){(function(s){ui=s})(fs),ss(new Cr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ac(new a1(r.getProvider("auth-internal")),new h1(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Rn(Hp,"4.5.0",e),Rn(Hp,"4.5.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="firebasestorage.googleapis.com",_k="storageBucket",yk=2*60*1e3,vk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Fn{constructor(e,n,r=0){super(eu(e),`Firebase Storage: ${n} (${eu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ln||(Ln={}));function eu(t){return"storage/"+t}function wk(){const t="An unknown error occurred, please check the error payload for server response.";return new $n(Ln.UNKNOWN,t)}function Ek(){return new $n(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bk(){return new $n(Ln.CANCELED,"User canceled the upload/download.")}function Tk(t){return new $n(Ln.INVALID_URL,"Invalid URL '"+t+"'.")}function Ik(t){return new $n(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Pm(t){return new $n(Ln.INVALID_ARGUMENT,t)}function F0(){return new $n(Ln.APP_DELETED,"The Firebase app was deleted.")}function Ak(t){return new $n(Ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(r.path==="")return r;throw Ik(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(q){q.path_=decodeURIComponent(q.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${s}/o${d}`,"i"),_={bucket:1,path:3},E=n===L0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",A=new RegExp(`^https?://${E}/${s}/${b}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:f,indices:_,postModify:c},{regex:A,indices:{bucket:1,path:2},postModify:c}];for(let q=0;q<M.length;q++){const R=M[q],I=R.regex.exec(e);if(I){const F=I[R.indices.bucket];let x=I[R.indices.path];x||(x=""),r=new dn(F,x),R.postModify(r);break}}if(r==null)throw Tk(e);return r}}class Sk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(f,l())},b)}function d(){i&&clearTimeout(i)}function f(b,...A){if(c){d();return}if(b){d(),u.call(null,b,...A);return}if(l()||o){d(),u.call(null,b,...A);return}r<64&&(r*=2);let M;a===1?(a=2,M=0):M=(r+Math.random())*1e3,h(M)}let _=!1;function E(b){_||(_=!0,d(),!c&&(s!==null?(b||(a=2),clearTimeout(s),h(0)):b||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function Ck(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){return t!==void 0}function km(t,e,n,r){if(r<e)throw Pm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Pm(`Invalid value for '${t}'. Expected ${n} or less.`)}function Pk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ol;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ol||(ol={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n,r,s,i,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,_)=>{this.resolve_=f,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new la(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ol.NO_ERROR,l=i.getStatus();if(!a||kk(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===ol.ABORT;r(!1,new la(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new la(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());xk(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=wk();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?F0():bk();o(l)}else{const l=Ek();o(l)}};this.canceled_?n(!1,new la(!1,null,!0)):this.backoffId_=Rk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ck(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class la{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Nk(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Dk(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Vk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Mk(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Lk(t,e,n,r,s,i,o=!0){const a=Pk(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Vk(c,e),Nk(c,n),Dk(c,i),Mk(c,r),new Ok(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $k(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uk=class sh{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sh(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $k(this._location.path)}get storage(){return this._service}get parent(){const e=Fk(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new sh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Ak(e)}};function Om(t,e){const n=e==null?void 0:e[_k];return n==null?null:dn.makeFromBucketSpec(n,t)}class jk{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=L0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yk,this._maxUploadRetryTime=vk,this._requests=new Set,s!=null?this._bucket=dn.makeFromBucketSpec(s,this._host):this._bucket=Om(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=Om(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){km("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){km("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Uk(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Sk(F0());{const o=Lk(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Nm="@firebase/storage",Dm="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="storage";function qk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new jk(n,r,s,e,fs)}function zk(){ss(new Cr(Bk,qk,"PUBLIC").setMultipleInstances(!0)),Rn(Nm,Dm,""),Rn(Nm,Dm,"esm2017")}zk();const Hk={apiKey:"AIzaSyD7n8E7b0wtFEwSBS8oa5wVwshLXkOyvNY",authDomain:"todoautos.firebaseapp.com",projectId:"todoautos",storageBucket:"todoautos.appspot.com",messagingSenderId:"627443339943",appId:"1:627443339943:web:113de9723a94056e54c182",measurementId:"G-TXE1ZH392N"},$0=M_(Hk),ni=JR($0),tu=GP($0);/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function un(t){return typeof t=="function"}function ks(t){return t==null}const ri=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function Hd(t){return Number(t)>=0}function Wk(t){return typeof t=="object"&&t!==null}function Kk(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function Vm(t){if(!Wk(t)||Kk(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function yo(t,e){return Object.keys(e).forEach(n=>{if(Vm(e[n])&&Vm(t[n])){t[n]||(t[n]={}),yo(t[n],e[n]);return}t[n]=e[n]}),t}function ca(t){const e=t.split(".");if(!e.length)return"";let n=String(e[0]);for(let r=1;r<e.length;r++){if(Hd(e[r])){n+=`[${e[r]}]`;continue}n+=`.${e[r]}`}return n}const Gk={};function Qk(t){return Gk[t]}function Mm(t,e,n){typeof n.value=="object"&&(n.value=$e(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function $e(t){if(typeof t!="object")return t;var e=0,n,r,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add($e(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,a){s.set($e(a),$e(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor($e(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)Mm(s,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(s,n=r[e])&&s[n]===t[n]||Mm(s,n,Object.getOwnPropertyDescriptor(t,n))}return s||t}const U0=Symbol("vee-validate-form"),Yk=typeof window<"u";function Jk(t){return un(t)&&!!t.__locatorRef}function yr(t){return!!t&&un(t.parse)&&t.__type==="VVTypedSchema"}function j0(t){return!!t&&un(t.validate)}function Xk(t){return t==="checkbox"||t==="radio"}function Zk(t){return ri(t)||Array.isArray(t)}function eO(t){return Array.isArray(t)?t.length===0:ri(t)&&Object.keys(t).length===0}function zo(t){return/^\[.+\]$/i.test(t)}function tO(t){return B0(t)&&t.multiple}function B0(t){return t.tagName==="SELECT"}function nO(t){return q0(t)&&t.target&&"submit"in t.target}function q0(t){return t?!!(typeof Event<"u"&&un(Event)&&t instanceof Event||t&&t.srcElement):!1}function Ar(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Ar(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;for(r of t.entries())if(!Ar(r[1],e.get(r[0])))return!1;return!0}if(Lm(t)&&Lm(e))return!(t.size!==e.size||t.name!==e.name||t.lastModified!==e.lastModified||t.type!==e.type);if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();for(s=Object.keys(t),n=s.length,r=n;r--!==0;){var i=s[r];if(!Ar(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Lm(t){return Yk?t instanceof File:!1}function hc(t){return zo(t)?t.replace(/\[|\]/gi,""):t}function mt(t,e,n){return t?zo(e)?t[hc(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>Zk(s)&&i in s?s[i]:n,t):n}function xt(t,e,n){if(zo(e)){t[hc(e)]=n;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<r.length;i++){if(i===r.length-1){s[r[i]]=n;return}(!(r[i]in s)||ks(s[r[i]]))&&(s[r[i]]=Hd(r[i+1])?[]:{}),s=s[r[i]]}}function nu(t,e){if(Array.isArray(t)&&Hd(e)){t.splice(Number(e),1);return}ri(t)&&delete t[e]}function Fm(t,e){if(zo(e)){delete t[hc(e)];return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=t;for(let i=0;i<n.length;i++){if(i===n.length-1){nu(r,n[i]);break}if(!(n[i]in r)||ks(r[n[i]]))break;r=r[n[i]]}const s=n.map((i,o)=>mt(t,n.slice(0,o).join(".")));for(let i=s.length-1;i>=0;i--)if(eO(s[i])){if(i===0){nu(t,n[0]);continue}nu(s[i-1],n[i-1])}}function tn(t){return Object.keys(t)}function rO(t,e=void 0){const n=Xg();return(n==null?void 0:n.provides[t])||on(t,e)}function $m(t,e=0){let n=null,r=[];return function(...s){return n&&clearTimeout(n),n=setTimeout(()=>{const i=t(...s);r.forEach(o=>o(i)),r=[]},e),new Promise(i=>r.push(i))}}function sO(t,e){let n;return async function(...s){const i=t(...s);n=i;const o=await i;return i!==n?o:(n=void 0,e(o,s))}}function iO({get:t,set:e}){const n=ye($e(t()));return Sn(t,r=>{Ar(r,n.value)||(n.value=$e(r))},{deep:!0}),Sn(n,r=>{Ar(r,t())||e($e(r))},{deep:!0}),n}function Um(t){return Array.isArray(t)?t:t?[t]:[]}function ua(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function oO(t){let e=null,n=[];return function(...r){const s=Ht(()=>{if(e!==s)return;const i=t(...r);n.forEach(o=>o(i)),n=[],e=null});return e=s,new Promise(i=>n.push(i))}}function ru(t){if(z0(t))return t._value}function z0(t){return"_value"in t}function aO(t){return t.type==="number"||t.type==="range"?Number.isNaN(t.valueAsNumber)?t.value:t.valueAsNumber:t.value}function jm(t){if(!q0(t))return t;const e=t.target;if(Xk(e.type)&&z0(e))return ru(e);if(e.type==="file"&&e.files){const n=Array.from(e.files);return e.multiple?n:n[0]}if(tO(e))return Array.from(e.options).filter(n=>n.selected&&!n.disabled).map(ru);if(B0(e)){const n=Array.from(e.options).find(r=>r.selected);return n?ru(n):e.value}return aO(e)}function lO(t){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t?ri(t)&&t._$$isNormalized?t:ri(t)?Object.keys(t).reduce((n,r)=>{const s=cO(t[r]);return t[r]!==!1&&(n[r]=Bm(s)),n},e):typeof t!="string"?e:t.split("|").reduce((n,r)=>{const s=uO(r);return s.name&&(n[s.name]=Bm(s.params)),n},e):e}function cO(t){return t===!0?[]:Array.isArray(t)||ri(t)?t:[t]}function Bm(t){const e=n=>typeof n=="string"&&n[0]==="@"?hO(n.slice(1)):n;return Array.isArray(t)?t.map(e):t instanceof RegExp?[t]:Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{})}const uO=t=>{let e=[];const n=t.split(":")[0];return t.includes(":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}};function hO(t){const e=n=>mt(n,t)||n[t];return e.__locatorRef=t,e}const dO={generateMessage:({field:t})=>`${t} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let fO=Object.assign({},dO);const xi=()=>fO;async function pO(t,e,n={}){const r=n==null?void 0:n.bails,s={name:(n==null?void 0:n.name)||"{field}",rules:e,label:n==null?void 0:n.label,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await mO(s,t)).errors;return{errors:o,valid:!o.length}}async function mO(t,e){if(yr(t.rules)||j0(t.rules))return _O(e,t.rules);if(un(t.rules)||Array.isArray(t.rules)){const o={field:t.label||t.name,name:t.name,label:t.label,form:t.formData,value:e},a=Array.isArray(t.rules)?t.rules:[t.rules],l=a.length,c=[];for(let u=0;u<l;u++){const h=a[u],d=await h(e,o);if(!(typeof d!="string"&&!Array.isArray(d)&&d)){if(Array.isArray(d))c.push(...d);else{const _=typeof d=="string"?d:W0(o);c.push(_)}if(t.bails)return{errors:c}}}return{errors:c}}const n=Object.assign(Object.assign({},t),{rules:lO(t.rules)}),r=[],s=Object.keys(n.rules),i=s.length;for(let o=0;o<i;o++){const a=s[o],l=await yO(n,e,{name:a,params:n.rules[a]});if(l.error&&(r.push(l.error),t.bails))return{errors:r}}return{errors:r}}function gO(t){return!!t&&t.name==="ValidationError"}function H0(t){return{__type:"VVTypedSchema",async parse(n){var r;try{return{output:await t.validate(n,{abortEarly:!1}),errors:[]}}catch(s){if(!gO(s))throw s;if(!(!((r=s.inner)===null||r===void 0)&&r.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const i=s.inner.reduce((o,a)=>{const l=a.path||"";return o[l]||(o[l]={errors:[],path:l}),o[l].errors.push(...a.errors),o},{});return{errors:Object.values(i)}}}}}async function _O(t,e){const r=await(yr(e)?e:H0(e)).parse(t),s=[];for(const i of r.errors)i.errors.length&&s.push(...i.errors);return{errors:s}}async function yO(t,e,n){const r=Qk(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=vO(n.params,t.formData),i={field:t.label||t.name,name:t.name,label:t.label,value:e,form:t.formData,rule:Object.assign(Object.assign({},n),{params:s})},o=await r(e,s,i);return typeof o=="string"?{error:o}:{error:o?void 0:W0(i)}}function W0(t){const e=xi().generateMessage;return e?e(t):"Field is invalid"}function vO(t,e){const n=r=>Jk(r)?r(e):r;return Array.isArray(t)?t.map(n):Object.keys(t).reduce((r,s)=>(r[s]=n(t[s]),r),{})}async function wO(t,e){const r=await(yr(t)?t:H0(t)).parse($e(e)),s={},i={};for(const o of r.errors){const a=o.errors,l=(o.path||"").replace(/\["(\d+)"\]/g,(c,u)=>`[${u}]`);s[l]={valid:!a.length,errors:a},a.length&&(i[l]=a[0])}return{valid:!r.errors.length,results:s,errors:i,values:r.value}}async function EO(t,e,n){const s=tn(t).map(async c=>{var u,h,d;const f=(u=n==null?void 0:n.names)===null||u===void 0?void 0:u[c],_=await pO(mt(e,c),t[c],{name:(f==null?void 0:f.name)||c,label:f==null?void 0:f.label,values:e,bails:(d=(h=n==null?void 0:n.bailsMap)===null||h===void 0?void 0:h[c])!==null&&d!==void 0?d:!0});return Object.assign(Object.assign({},_),{path:c})});let i=!0;const o=await Promise.all(s),a={},l={};for(const c of o)a[c.path]={valid:c.valid,errors:c.errors},c.valid||(i=!1,l[c.path]=c.errors[0]);return{valid:i,results:a,errors:l}}let bO=0;const ha=["bails","fieldsCount","id","multiple","type","validate"];function K0(t){const e=Object.assign({},qe((t==null?void 0:t.initialValues)||{})),n=w(t==null?void 0:t.validationSchema);return n&&yr(n)&&un(n.cast)?$e(n.cast(e)||{}):$e(e)}function dc(t){var e;const n=bO++;let r=0;const s=ye(!1),i=ye(!1),o=ye(0),a=[],l=Dn(K0(t)),c=ye([]),u=ye({}),h=ye({}),d=oO(()=>{h.value=c.value.reduce((y,v)=>(y[ca(qe(v.path))]=v,y),{})});function f(y,v){const k=oe(y);if(!k){typeof y=="string"&&(u.value[ca(y)]=Um(v));return}if(typeof y=="string"){const K=ca(y);u.value[K]&&delete u.value[K]}k.errors=Um(v),k.valid=!k.errors.length}function _(y){tn(y).forEach(v=>{f(v,y[v])})}t!=null&&t.initialErrors&&_(t.initialErrors);const E=Le(()=>{const y=c.value.reduce((v,k)=>(k.errors.length&&(v[k.path]=k.errors),v),{});return Object.assign(Object.assign({},u.value),y)}),b=Le(()=>tn(E.value).reduce((y,v)=>{const k=E.value[v];return k!=null&&k.length&&(y[v]=k[0]),y},{})),A=Le(()=>c.value.reduce((y,v)=>(y[v.path]={name:v.path||"",label:v.label||""},y),{})),P=Le(()=>c.value.reduce((y,v)=>{var k;return y[v.path]=(k=v.bails)!==null&&k!==void 0?k:!0,y},{})),M=Object.assign({},(t==null?void 0:t.initialErrors)||{}),q=(e=t==null?void 0:t.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:R,originalInitialValues:I,setInitialValues:F}=IO(c,l,t),x=TO(c,l,I,b),V=Le(()=>c.value.reduce((y,v)=>{const k=mt(l,v.path);return xt(y,v.path,k),y},{})),$=t==null?void 0:t.validationSchema;function Y(y,v){var k,K;const ce=Le(()=>mt(R.value,qe(y))),re=h.value[qe(y)],Te=(v==null?void 0:v.type)==="checkbox"||(v==null?void 0:v.type)==="radio";if(re&&Te){re.multiple=!0;const cn=r++;return Array.isArray(re.id)?re.id.push(cn):re.id=[re.id,cn],re.fieldsCount++,re.__flags.pendingUnmount[cn]=!1,re}const Se=Le(()=>mt(l,qe(y))),ke=qe(y),dt=ve.findIndex(cn=>cn===ke);dt!==-1&&ve.splice(dt,1);const Ge=Le(()=>{var cn,mi,wc,Zd,Ec,bc;return yr($)?(wc=(mi=(cn=$).describe)===null||mi===void 0?void 0:mi.call(cn,qe(y)).required)!==null&&wc!==void 0?wc:!1:yr(v==null?void 0:v.schema)&&(bc=(Ec=(Zd=v==null?void 0:v.schema).describe)===null||Ec===void 0?void 0:Ec.call(Zd).required)!==null&&bc!==void 0?bc:!1}),St=r++,Bt=Dn({id:St,path:y,touched:!1,pending:!1,valid:!0,validated:!!(!((k=M[ke])===null||k===void 0)&&k.length),required:Ge,initialValue:ce,errors:Tg([]),bails:(K=v==null?void 0:v.bails)!==null&&K!==void 0?K:!1,label:v==null?void 0:v.label,type:(v==null?void 0:v.type)||"default",value:Se,multiple:!1,__flags:{pendingUnmount:{[St]:!1},pendingReset:!1},fieldsCount:1,validate:v==null?void 0:v.validate,dirty:Le(()=>!Ar(w(Se),w(ce)))});return c.value.push(Bt),h.value[ke]=Bt,d(),b.value[ke]&&!M[ke]&&Ht(()=>{z(ke,{mode:"silent"})}),et(y)&&Sn(y,cn=>{d();const mi=$e(Se.value);h.value[cn]=Bt,Ht(()=>{xt(l,cn,mi)})}),Bt}const B=$m(J,5),te=$m(J,5),Ae=sO(async y=>await(y==="silent"?B():te()),(y,[v])=>{const k=tn(He.errorBag.value),ce=[...new Set([...tn(y.results),...c.value.map(re=>re.path),...k])].sort().reduce((re,Te)=>{var Se;const ke=Te,dt=oe(ke)||xe(ke),Ge=((Se=y.results[ke])===null||Se===void 0?void 0:Se.errors)||[],St=qe(dt==null?void 0:dt.path)||ke,Bt=AO({errors:Ge,valid:!Ge.length},re.results[St]);return re.results[St]=Bt,Bt.valid||(re.errors[St]=Bt.errors[0]),dt&&u.value[St]&&delete u.value[St],dt?(dt.valid=Bt.valid,v==="silent"||v==="validated-only"&&!dt.validated||f(dt,Bt.errors),re):(f(St,Ge),re)},{valid:y.valid,results:{},errors:{}});return y.values&&(ce.values=y.values),tn(ce.results).forEach(re=>{var Te;const Se=oe(re);Se&&v!=="silent"&&(v==="validated-only"&&!Se.validated||f(Se,(Te=ce.results[re])===null||Te===void 0?void 0:Te.errors))}),ce});function je(y){c.value.forEach(y)}function oe(y){const v=typeof y=="string"?ca(y):y;return typeof v=="string"?h.value[v]:v}function xe(y){return c.value.filter(k=>y.startsWith(k.path)).reduce((k,K)=>k?K.path.length>k.path.length?K:k:K,void 0)}let ve=[],jt;function gn(y){return ve.push(y),jt||(jt=Ht(()=>{[...ve].sort().reverse().forEach(k=>{Fm(l,k)}),ve=[],jt=null})),jt}function Qt(y){return function(k,K){return function(re){return re instanceof Event&&(re.preventDefault(),re.stopPropagation()),je(Te=>Te.touched=!0),s.value=!0,o.value++,U().then(Te=>{const Se=$e(l);if(Te.valid&&typeof k=="function"){const ke=$e(V.value);let dt=y?ke:Se;return Te.values&&(dt=Te.values),k(dt,{evt:re,controlledValues:ke,setErrors:_,setFieldError:f,setTouched:T,setFieldTouched:be,setValues:W,setFieldValue:S,resetForm:C,resetField:O})}!Te.valid&&typeof K=="function"&&K({values:Se,evt:re,errors:Te.errors,results:Te.results})}).then(Te=>(s.value=!1,Te),Te=>{throw s.value=!1,Te})}}}const _n=Qt(!1);_n.withControlled=Qt(!0);function nr(y,v){const k=c.value.findIndex(ce=>ce.path===y&&(Array.isArray(ce.id)?ce.id.includes(v):ce.id===v)),K=c.value[k];if(!(k===-1||!K)){if(Ht(()=>{z(y,{mode:"silent",warn:!1})}),K.multiple&&K.fieldsCount&&K.fieldsCount--,Array.isArray(K.id)){const ce=K.id.indexOf(v);ce>=0&&K.id.splice(ce,1),delete K.__flags.pendingUnmount[v]}(!K.multiple||K.fieldsCount<=0)&&(c.value.splice(k,1),j(y),d(),delete h.value[y])}}function ws(y){tn(h.value).forEach(v=>{v.startsWith(y)&&delete h.value[v]}),c.value=c.value.filter(v=>!v.path.startsWith(y)),Ht(()=>{d()})}const He={formId:n,values:l,controlledValues:V,errorBag:E,errors:b,schema:$,submitCount:o,meta:x,isSubmitting:s,isValidating:i,fieldArrays:a,keepValuesOnUnmount:q,validateSchema:w($)?Ae:void 0,validate:U,setFieldError:f,validateField:z,setFieldValue:S,setValues:W,setErrors:_,setFieldTouched:be,setTouched:T,resetForm:C,resetField:O,handleSubmit:_n,useFieldModel:he,defineInputBinds:we,defineComponentBinds:Ne,defineField:se,stageInitialValue:H,unsetInitialValue:j,setFieldInitialValue:L,createPathState:Y,getPathState:oe,unsetPathValue:gn,removePathState:nr,initialValues:R,getAllPathStates:()=>c.value,destroyPath:ws,isFieldTouched:We,isFieldDirty:p,isFieldValid:m};function S(y,v,k=!0){const K=$e(v),ce=typeof y=="string"?y:y.path;oe(ce)||Y(ce),xt(l,ce,K),k&&z(ce)}function Z(y,v=!0){tn(l).forEach(k=>{delete l[k]}),tn(y).forEach(k=>{S(k,y[k],!1)}),v&&U()}function W(y,v=!0){yo(l,y),a.forEach(k=>k&&k.reset()),v&&U()}function ne(y,v){const k=oe(qe(y))||Y(y);return Le({get(){return k.value},set(K){var ce;const re=qe(y);S(re,K,(ce=qe(v))!==null&&ce!==void 0?ce:!1)}})}function be(y,v){const k=oe(y);k&&(k.touched=v)}function We(y){const v=oe(y);return v?v.touched:c.value.filter(k=>k.path.startsWith(y)).some(k=>k.touched)}function p(y){const v=oe(y);return v?v.dirty:c.value.filter(k=>k.path.startsWith(y)).some(k=>k.dirty)}function m(y){const v=oe(y);return v?v.valid:c.value.filter(k=>k.path.startsWith(y)).every(k=>k.valid)}function T(y){if(typeof y=="boolean"){je(v=>{v.touched=y});return}tn(y).forEach(v=>{be(v,!!y[v])})}function O(y,v){var k;const K=v&&"value"in v?v.value:mt(R.value,y),ce=oe(y);ce&&(ce.__flags.pendingReset=!0),L(y,$e(K),!0),S(y,K,!1),be(y,(k=v==null?void 0:v.touched)!==null&&k!==void 0?k:!1),f(y,(v==null?void 0:v.errors)||[]),Ht(()=>{ce&&(ce.__flags.pendingReset=!1)})}function C(y,v){let k=$e(y!=null&&y.values?y.values:I.value);k=v!=null&&v.force?k:yo(I.value,k),k=yr($)&&un($.cast)?$.cast(k):k,F(k),je(K=>{var ce;K.__flags.pendingReset=!0,K.validated=!1,K.touched=((ce=y==null?void 0:y.touched)===null||ce===void 0?void 0:ce[K.path])||!1,S(K.path,mt(k,K.path),!1),f(K.path,void 0)}),v!=null&&v.force?Z(k,!1):W(k,!1),_((y==null?void 0:y.errors)||{}),o.value=(y==null?void 0:y.submitCount)||0,Ht(()=>{U({mode:"silent"}),je(K=>{K.__flags.pendingReset=!1})})}async function U(y){const v=(y==null?void 0:y.mode)||"force";if(v==="force"&&je(re=>re.validated=!0),He.validateSchema)return He.validateSchema(v);i.value=!0;const k=await Promise.all(c.value.map(re=>re.validate?re.validate(y).then(Te=>({key:re.path,valid:Te.valid,errors:Te.errors})):Promise.resolve({key:re.path,valid:!0,errors:[]})));i.value=!1;const K={},ce={};for(const re of k)K[re.key]={valid:re.valid,errors:re.errors},re.errors.length&&(ce[re.key]=re.errors[0]);return{valid:k.every(re=>re.valid),results:K,errors:ce}}async function z(y,v){var k;const K=oe(y);if(K&&(v==null?void 0:v.mode)!=="silent"&&(K.validated=!0),$){const{results:ce}=await Ae((v==null?void 0:v.mode)||"validated-only");return ce[y]||{errors:[],valid:!0}}return K!=null&&K.validate?K.validate(v):(!K&&(k=v==null?void 0:v.warn),Promise.resolve({errors:[],valid:!0}))}function j(y){Fm(R.value,y)}function H(y,v,k=!1){L(y,v),xt(l,y,v),k&&!(t!=null&&t.initialValues)&&xt(I.value,y,$e(v))}function L(y,v,k=!1){xt(R.value,y,$e(v)),k&&xt(I.value,y,$e(v))}async function J(){const y=w($);if(!y)return{valid:!0,results:{},errors:{}};i.value=!0;const v=j0(y)||yr(y)?await wO(y,l):await EO(y,l,{names:A.value,bailsMap:P.value});return i.value=!1,v}const ae=_n((y,{evt:v})=>{nO(v)&&v.target.submit()});wo(()=>{if(t!=null&&t.initialErrors&&_(t.initialErrors),t!=null&&t.initialTouched&&T(t.initialTouched),t!=null&&t.validateOnMount){U();return}He.validateSchema&&He.validateSchema("silent")}),et($)&&Sn($,()=>{var y;(y=He.validateSchema)===null||y===void 0||y.call(He,"validated-only")}),Ni(U0,He);function se(y,v){const k=un(v)||v==null?void 0:v.label,K=oe(qe(y))||Y(y,{label:k}),ce=()=>un(v)?v(ua(K,ha)):v||{};function re(){var Ge;K.touched=!0,((Ge=ce().validateOnBlur)!==null&&Ge!==void 0?Ge:xi().validateOnBlur)&&z(K.path)}function Te(){var Ge;((Ge=ce().validateOnInput)!==null&&Ge!==void 0?Ge:xi().validateOnInput)&&Ht(()=>{z(K.path)})}function Se(){var Ge;((Ge=ce().validateOnChange)!==null&&Ge!==void 0?Ge:xi().validateOnChange)&&Ht(()=>{z(K.path)})}const ke=Le(()=>{const Ge={onChange:Se,onInput:Te,onBlur:re};return un(v)?Object.assign(Object.assign({},Ge),v(ua(K,ha)).props||{}):v!=null&&v.props?Object.assign(Object.assign({},Ge),v.props(ua(K,ha))):Ge});return[ne(y,()=>{var Ge,St,Bt;return(Bt=(Ge=ce().validateOnModelUpdate)!==null&&Ge!==void 0?Ge:(St=xi())===null||St===void 0?void 0:St.validateOnModelUpdate)!==null&&Bt!==void 0?Bt:!0}),ke]}function he(y){return Array.isArray(y)?y.map(v=>ne(v,!0)):ne(y)}function we(y,v){const[k,K]=se(y,v);function ce(){K.value.onBlur()}function re(Se){const ke=jm(Se);S(qe(y),ke,!1),K.value.onInput()}function Te(Se){const ke=jm(Se);S(qe(y),ke,!1),K.value.onChange()}return Le(()=>Object.assign(Object.assign({},K.value),{onBlur:ce,onInput:re,onChange:Te,value:k.value}))}function Ne(y,v){const[k,K]=se(y,v),ce=oe(qe(y));function re(Te){k.value=Te}return Le(()=>{const Te=un(v)?v(ua(ce,ha)):v||{};return Object.assign({[Te.model||"modelValue"]:k.value,[`onUpdate:${Te.model||"modelValue"}`]:re},K.value)})}return Object.assign(Object.assign({},He),{values:vh(l),handleReset:()=>C(),submitForm:ae})}function TO(t,e,n,r){const s={touched:"some",pending:"some",valid:"every"},i=Le(()=>!Ar(e,w(n)));function o(){const l=t.value;return tn(s).reduce((c,u)=>{const h=s[u];return c[u]=l[h](d=>d[u]),c},{})}const a=Dn(o());return Ah(()=>{const l=o();a.touched=l.touched,a.valid=l.valid,a.pending=l.pending}),Le(()=>Object.assign(Object.assign({initialValues:w(n)},a),{valid:a.valid&&!tn(r.value).length,dirty:i.value}))}function IO(t,e,n){const r=K0(n),s=ye(r),i=ye($e(r));function o(a,l=!1){s.value=yo($e(s.value)||{},$e(a)),i.value=yo($e(i.value)||{},$e(a)),l&&t.value.forEach(c=>{if(c.touched)return;const h=mt(s.value,c.path);xt(e,c.path,$e(h))})}return{initialValues:s,originalInitialValues:i,setInitialValues:o}}function AO(t,e){return e?{valid:t.valid&&e.valid,errors:[...t.errors,...e.errors]}:t}function SO(t){const e=rO(U0,void 0),n=ye([]),r=()=>{},s={fields:n,remove:r,push:r,swap:r,insert:r,update:r,replace:r,prepend:r,move:r};if(!e||!w(t))return s;const i=e.fieldArrays.find(R=>w(R.path)===w(t));if(i)return i;let o=0;function a(){return mt(e==null?void 0:e.values,qe(t),[])||[]}function l(){const R=a();Array.isArray(R)&&(n.value=R.map((I,F)=>u(I,F,n.value)),c())}l();function c(){const R=n.value.length;for(let I=0;I<R;I++){const F=n.value[I];F.isFirst=I===0,F.isLast=I===R-1}}function u(R,I,F){if(F&&!ks(I)&&F[I])return F[I];const x=o++;return{key:x,value:iO({get(){const $=mt(e==null?void 0:e.values,qe(t),[])||[],Y=n.value.findIndex(B=>B.key===x);return Y===-1?R:$[Y]},set($){const Y=n.value.findIndex(B=>B.key===x);Y!==-1&&A(Y,$)}}),isFirst:!1,isLast:!1}}function h(){c(),e==null||e.validate({mode:"silent"})}function d(R){const I=qe(t),F=mt(e==null?void 0:e.values,I);if(!F||!Array.isArray(F))return;const x=[...F];x.splice(R,1);const V=I+`[${R}]`;e.destroyPath(V),e.unsetInitialValue(V),xt(e.values,I,x),n.value.splice(R,1),h()}function f(R){const I=$e(R),F=qe(t),x=mt(e==null?void 0:e.values,F),V=ks(x)?[]:x;if(!Array.isArray(V))return;const $=[...V];$.push(I),e.stageInitialValue(F+`[${$.length-1}]`,I),xt(e.values,F,$),n.value.push(u(I)),h()}function _(R,I){const F=qe(t),x=mt(e==null?void 0:e.values,F);if(!Array.isArray(x)||!(R in x)||!(I in x))return;const V=[...x],$=[...n.value],Y=V[R];V[R]=V[I],V[I]=Y;const B=$[R];$[R]=$[I],$[I]=B,xt(e.values,F,V),n.value=$,c()}function E(R,I){const F=$e(I),x=qe(t),V=mt(e==null?void 0:e.values,x);if(!Array.isArray(V)||V.length<R)return;const $=[...V],Y=[...n.value];$.splice(R,0,F),Y.splice(R,0,u(F)),xt(e.values,x,$),n.value=Y,h()}function b(R){const I=qe(t);e.stageInitialValue(I,R),xt(e.values,I,R),l(),h()}function A(R,I){const F=qe(t),x=mt(e==null?void 0:e.values,F);!Array.isArray(x)||x.length-1<R||(xt(e.values,`${F}[${R}]`,I),e==null||e.validate({mode:"validated-only"}))}function P(R){const I=$e(R),F=qe(t),x=mt(e==null?void 0:e.values,F),V=ks(x)?[]:x;if(!Array.isArray(V))return;const $=[I,...V];xt(e.values,F,$),e.stageInitialValue(F+"[0]",I),n.value.unshift(u(I)),h()}function M(R,I){const F=qe(t),x=mt(e==null?void 0:e.values,F),V=ks(x)?[]:[...x];if(!Array.isArray(x)||!(R in x)||!(I in x))return;const $=[...n.value],Y=$[R];$.splice(R,1),$.splice(I,0,Y);const B=V[R];V.splice(R,1),V.splice(I,0,B),xt(e.values,F,V),n.value=$,h()}const q={fields:n,remove:d,push:f,swap:_,insert:E,update:A,replace:b,prepend:P,move:M};return e.fieldArrays.push(Object.assign({path:t,reset:l},q)),Rh(()=>{const R=e.fieldArrays.findIndex(I=>qe(I.path)===qe(t));R>=0&&e.fieldArrays.splice(R,1)}),Sn(a,R=>{const I=n.value.map(F=>F.value);Ar(R,I)||l()}),q}/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const al=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function RO(t){return Number(t)>=0}function CO(t){return typeof t=="object"&&t!==null}function xO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function qm(t){if(!CO(t)||xO(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function G0(t,e){return Object.keys(e).forEach(n=>{if(qm(e[n])&&qm(t[n])){t[n]||(t[n]={}),G0(t[n],e[n]);return}t[n]=e[n]}),t}function fc(t,e={abortEarly:!1}){return{__type:"VVTypedSchema",async parse(r){var s;try{return{value:await t.validate(r,Object.assign({},e)),errors:[]}}catch(i){const o=i;if(o.name!=="ValidationError")throw i;if(!(!((s=o.inner)===null||s===void 0)&&s.length)&&o.errors.length)return{errors:[{path:o.path,errors:o.errors}]};const a=o.inner.reduce((l,c)=>{const u=c.path||"";return l[u]||(l[u]={errors:[],path:u}),l[u].errors.push(...c.errors),l},{});return{errors:Object.values(a)}}},cast(r){try{return t.cast(r)}catch{const i=t.getDefault();return al(i)&&al(r)?G0(i,r):r}},describe(r){if(!r)return zm(t.spec);const s=PO(r,t);return s?zm(s):{required:!1,exists:!1}}}}function zm(t){return{required:!t.optional,exists:!0}}function PO(t,e){if(!Hm(e))return null;if(zo(t)){const s=e.fields[hc(t)];return(s==null?void 0:s.spec)||null}const n=(t||"").split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let s=0;s<n.length;s++){const i=n[s];if(Hm(r)&&i in r.fields?r=r.fields[i]:RO(i)&&kO(r)&&(r=r.innerType),s===n.length-1)return r.spec}return null}function Hm(t){return al(t)&&t.type==="object"}function kO(t){return al(t)&&t.type==="array"}function OO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _s(t){this._maxSize=t,this.clear()}_s.prototype.clear=function(){this._size=0,this._values=Object.create(null)};_s.prototype.get=function(t){return this._values[t]};_s.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var NO=/[^.^\]^[]+|(?=\[\]|\.\.)/g,Q0=/^\d+$/,DO=/^\d/,VO=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,MO=/^\s*(['"]?)(.*?)(\1)\s*$/,Wd=512,Wm=new _s(Wd),Km=new _s(Wd),Gm=new _s(Wd),ts={Cache:_s,split:ih,normalizePath:su,setter:function(t){var e=su(t);return Km.get(t)||Km.set(t,function(r,s){for(var i=0,o=e.length,a=r;i<o-1;){var l=e[i];if(l==="__proto__"||l==="constructor"||l==="prototype")return r;a=a[e[i++]]}a[e[i]]=s})},getter:function(t,e){var n=su(t);return Gm.get(t)||Gm.set(t,function(s){for(var i=0,o=n.length;i<o;)if(s!=null||!e)s=s[n[i++]];else return;return s})},join:function(t){return t.reduce(function(e,n){return e+(Kd(n)||Q0.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){LO(Array.isArray(t)?t:ih(t),e,n)}};function su(t){return Wm.get(t)||Wm.set(t,ih(t).map(function(e){return e.replace(MO,"$2")}))}function ih(t){return t.match(NO)||[""]}function LO(t,e,n){var r=t.length,s,i,o,a;for(i=0;i<r;i++)s=t[i],s&&(UO(s)&&(s='"'+s+'"'),a=Kd(s),o=!a&&/^\d+$/.test(s),e.call(n,s,a,o,i,t))}function Kd(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function FO(t){return t.match(DO)&&!t.match(Q0)}function $O(t){return VO.test(t)}function UO(t){return!Kd(t)&&(FO(t)||$O(t))}const jO=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,pc=t=>t.match(jO)||[],mc=t=>t[0].toUpperCase()+t.slice(1),Gd=(t,e)=>pc(t).join(e).toLowerCase(),Y0=t=>pc(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),BO=t=>mc(Y0(t)),qO=t=>Gd(t,"_"),zO=t=>Gd(t,"-"),HO=t=>mc(Gd(t," ")),WO=t=>pc(t).map(mc).join(" ");var iu={words:pc,upperFirst:mc,camelCase:Y0,pascalCase:BO,snakeCase:qO,kebabCase:zO,sentenceCase:HO,titleCase:WO},Qd={exports:{}};Qd.exports=function(t){return J0(KO(t),t)};Qd.exports.array=J0;function J0(t,e){var n=t.length,r=new Array(n),s={},i=n,o=GO(e),a=QO(t);for(e.forEach(function(c){if(!a.has(c[0])||!a.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||l(t[i],i,new Set);return r;function l(c,u,h){if(h.has(c)){var d;try{d=", node was:"+JSON.stringify(c)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!a.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!s[u]){s[u]=!0;var f=o.get(c)||new Set;if(f=Array.from(f),u=f.length){h.add(c);do{var _=f[--u];l(_,a.get(_),h)}while(u);h.delete(c)}r[--n]=c}}}function KO(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var s=t[n];e.add(s[0]),e.add(s[1])}return Array.from(e)}function GO(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var s=t[n];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}function QO(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}var YO=Qd.exports;const JO=OO(YO),XO=Object.prototype.toString,ZO=Error.prototype.toString,eN=RegExp.prototype.toString,tN=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",nN=/^Symbol\((.*)\)(.*)$/;function rN(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function Qm(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return rN(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return tN.call(t).replace(nN,"Symbol($1)");const r=XO.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+ZO.call(t)+"]":r==="RegExp"?eN.call(t):null}function Yn(t,e){let n=Qm(t,e);return n!==null?n:JSON.stringify(t,function(r,s){let i=Qm(this[r],e);return i!==null?i:s},2)}function X0(t){return t==null?[]:[].concat(t)}let Z0,ew,tw,sN=/\$\{\s*(\w+)\s*\}/g;Z0=Symbol.toStringTag;class Ym{constructor(e,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Z0]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],X0(e).forEach(i=>{if(Wt.isError(i)){this.errors.push(...i.errors);const o=i.inner.length?i.inner:[i];this.inner.push(...o)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}ew=Symbol.hasInstance;tw=Symbol.toStringTag;class Wt extends Error{static formatError(e,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof e=="string"?e.replace(sN,(s,i)=>Yn(n[i])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,s,i){const o=new Ym(e,n,r,s);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[tw]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Wt)}static[ew](e){return Ym[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let vn={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Yn(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Yn(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${Yn(n,!0)}\``+s}},qt={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},cr={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},oh={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},iN={isValue:"${path} field must be ${value}"},ah={noUnknown:"${path} field has unspecified keys: ${unknown}"},Aa={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},oN={notType:t=>{const{path:e,value:n,spec:r}=t,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Yn(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Yn(n,!0)}\``}return Wt.formatError(vn.notType,t)}};Object.assign(Object.create(null),{mixed:vn,string:qt,number:cr,date:oh,object:ah,array:Aa,boolean:iN,tuple:oN});const gc=t=>t&&t.__isYupSchema__;class ll{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:i}=n,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);return new ll(e,(a,l)=>{var c;let u=o(...a)?s:i;return(c=u==null?void 0:u(l))!=null?c:l})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(i=>i.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,e,n);if(s===void 0||s===e)return e;if(!gc(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const da={context:"$",value:"."};class ys{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===da.context,this.isValue=this.key[0]===da.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?da.context:this.isValue?da.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&ts.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let s=this.isContext?r:this.isValue?e:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}ys.prototype.__isYupRef=!0;const Kn=t=>t==null;function Is(t){function e({value:n,path:r="",options:s,originalValue:i,schema:o},a,l){const{name:c,test:u,params:h,message:d,skipAbsent:f}=t;let{parent:_,context:E,abortEarly:b=o.spec.abortEarly,disableStackTrace:A=o.spec.disableStackTrace}=s;function P(Y){return ys.isRef(Y)?Y.getValue(n,_,E):Y}function M(Y={}){const B=Object.assign({value:n,originalValue:i,label:o.spec.label,path:Y.path||r,spec:o.spec,disableStackTrace:Y.disableStackTrace||A},h,Y.params);for(const Ae of Object.keys(B))B[Ae]=P(B[Ae]);const te=new Wt(Wt.formatError(Y.message||d,B),n,B.path,Y.type||c,B.disableStackTrace);return te.params=B,te}const q=b?a:l;let R={path:r,parent:_,type:c,from:s.from,createError:M,resolve:P,options:s,originalValue:i,schema:o};const I=Y=>{Wt.isError(Y)?q(Y):Y?l(null):q(M())},F=Y=>{Wt.isError(Y)?q(Y):a(Y)};if(f&&Kn(n))return I(!0);let V;try{var $;if(V=u.call(R,n,R),typeof(($=V)==null?void 0:$.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${R.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(V).then(I,F)}}catch(Y){F(Y);return}I(V)}return e.OPTIONS=t,e}function aN(t,e,n,r=n){let s,i,o;return e?(ts.forEach(e,(a,l,c)=>{let u=l?a.slice(1,a.length-1):a;t=t.resolve({context:r,parent:s,value:n});let h=t.type==="tuple",d=c?parseInt(u,10):0;if(t.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&d>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[d],t=h?t.spec.types[d]:t.innerType}if(!c){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t.type}")`);s=n,n=n&&n[u],t=t.fields[u]}i=u,o=l?"["+a+"]":"."+a}),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class cl extends Set{describe(){const e=[];for(const n of this.values())e.push(ys.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new cl(this.values())}merge(e,n){const r=this.clone();return e.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function Os(t,e=new Map){if(gc(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=Os(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,s]of t.entries())n.set(r,Os(s,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(Os(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,s]of Object.entries(t))n[r]=Os(s,e)}else throw Error(`Unable to clone ${t}`);return n}class ln{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new cl,this._blacklist=new cl,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(vn.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Os(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(i=>{e.tests.forEach(o=>{i.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,i)=>i.resolve(s,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,s,i;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),s=n.assert==="ignore-optionality",i=r._cast(e,n);if(n.assert!==!1&&!r.isType(i)){if(s&&Kn(i))return i;let o=Yn(e),a=Yn(i);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return i}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,s){let{path:i,originalValue:o=e,strict:a=this.spec.strict}=n,l=e;a||(l=this._cast(l,Object.assign({assert:!1},n)));let c=[];for(let u of Object.values(this.internalTests))u&&c.push(u);this.runTests({path:i,value:l,originalValue:o,options:n,tests:c},r,u=>{if(u.length)return s(u,l);this.runTests({path:i,value:l,originalValue:o,options:n,tests:this.tests},r,s)})}runTests(e,n,r){let s=!1,{tests:i,value:o,originalValue:a,path:l,options:c}=e,u=E=>{s||(s=!0,n(E,o))},h=E=>{s||(s=!0,r(E,o))},d=i.length,f=[];if(!d)return h([]);let _={value:o,originalValue:a,path:l,options:c,schema:this};for(let E=0;E<i.length;E++){const b=i[E];b(_,u,function(P){P&&(Array.isArray(P)?f.push(...P):f.push(P)),--d<=0&&h(f)})}}asNestedTest({key:e,index:n,parent:r,parentPath:s,originalParent:i,options:o}){const a=e??n;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let c=r[a];const u=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:i[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${s||""}[${l?a:`"${a}"`}]`:(s?`${s}.`:"")+e});return(h,d,f)=>this.resolve(u)._validate(c,u,d,f)}validate(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((o,a)=>s._validate(e,n,(l,c)=>{Wt.isError(l)&&(l.value=c),a(l)},(l,c)=>{l.length?a(new Wt(l,c,void 0,void 0,i)):o(c)}))}validateSync(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i,o=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},n,{sync:!0}),(a,l)=>{throw Wt.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new Wt(a,e,void 0,void 0,o);i=l}),i}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(Wt.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(Wt.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):Os(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=Is({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=Is({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=vn.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=vn.notNull){return this.nullability(!1,e)}required(e=vn.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=vn.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=Is(n),i=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(i||o.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),s=X0(e).map(i=>new ys(i));return s.forEach(i=>{i.isSibling&&r.deps.push(i.key)}),r.conditions.push(typeof n=="function"?new ll(s,n):ll.fromOptions(s,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=Is({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=vn.oneOf){let r=this.clone();return e.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=Is({message:n,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,o=i.resolveAll(this.resolve);return o.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:o}})}}),r}notOneOf(e,n=vn.notOneOf){let r=this.clone();return e.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=Is({message:n,name:"notOneOf",test(s){let i=this.schema._blacklist,o=i.resolveAll(this.resolve);return o.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:i,nullable:o}=n.spec;return{meta:s,label:r,optional:i,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,c,u)=>u.findIndex(h=>h.name===l.name)===c)}}}ln.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])ln.prototype[`${t}At`]=function(e,n,r={}){const{parent:s,parentPath:i,schema:o}=aN(this,e,n,r.context);return o[t](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const t of["equals","is"])ln.prototype[t]=ln.prototype.oneOf;for(const t of["not","nope"])ln.prototype[t]=ln.prototype.notOneOf;const lN=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function cN(t){const e=lh(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function lh(t){var e,n;const r=lN.exec(t);return r?{year:Bn(r[1]),month:Bn(r[2],1)-1,day:Bn(r[3],1),hour:Bn(r[4]),minute:Bn(r[5]),second:Bn(r[6]),millisecond:r[7]?Bn(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Bn(r[10]),minuteOffset:Bn(r[11])}:null}function Bn(t,e=0){return Number(t)||e}let uN=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hN=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,dN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,fN="^\\d{4}-\\d{2}-\\d{2}",pN="\\d{2}:\\d{2}:\\d{2}",mN="(([+-]\\d{2}(:?\\d{2})?)|Z)",gN=new RegExp(`${fN}T${pN}(\\.\\d+)?${mN}$`),_N=t=>Kn(t)||t===t.trim(),yN={}.toString();function ft(){return new nw}class nw extends ln{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===yN?e:s})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||vn.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=qt.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=qt.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=qt.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,s,i;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:i}=n:s=n),this.test({name:i||"matches",message:s||qt.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=qt.email){return this.matches(uN,{name:"email",message:e,excludeEmptyString:!0})}url(e=qt.url){return this.matches(hN,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=qt.uuid){return this.matches(dN,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,s;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=e:n=e),this.matches(gN,{name:"datetime",message:n||qt.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||qt.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:i=>{if(!i||r)return!0;const o=lh(i);return o?!!o.z:!1}}).test({name:"datetime_precision",message:n||qt.datetime_precision,params:{precision:s},skipAbsent:!0,test:i=>{if(!i||s==null)return!0;const o=lh(i);return o?o.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=qt.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:_N})}lowercase(e=qt.lowercase){return this.transform(n=>Kn(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Kn(n)||n===n.toLowerCase()})}uppercase(e=qt.uppercase){return this.transform(n=>Kn(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Kn(n)||n===n.toUpperCase()})}}ft.prototype=nw.prototype;let vN=t=>t!=+t;function rw(){return new sw}class sw extends ln{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!vN(e)}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce)return e;let s=e;if(typeof s=="string"){if(s=s.replace(/\s/g,""),s==="")return NaN;s=+s}return r.isType(s)||s===null?s:parseFloat(s)})})}min(e,n=cr.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,n=cr.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,n=cr.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,n=cr.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=cr.positive){return this.moreThan(0,e)}negative(e=cr.negative){return this.lessThan(0,e)}integer(e=cr.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(e=>Kn(e)?e:e|0)}round(e){var n;let r=["ceil","floor","round","trunc"];if(e=((n=e)==null?void 0:n.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(s=>Kn(s)?s:Math[e](s))}}rw.prototype=sw.prototype;let wN=new Date(""),EN=t=>Object.prototype.toString.call(t)==="[object Date]";class _c extends ln{constructor(){super({type:"date",check(e){return EN(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=cN(e),isNaN(e)?_c.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(ys.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,n=oh.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(e,n=oh.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}_c.INVALID_DATE=wN;_c.prototype;function bN(t,e=[]){let n=[],r=new Set,s=new Set(e.map(([o,a])=>`${o}-${a}`));function i(o,a){let l=ts.split(o)[0];r.add(l),s.has(`${a}-${l}`)||n.push([a,l])}for(const o of Object.keys(t)){let a=t[o];r.add(o),ys.isRef(a)&&a.isSibling?i(a.path,o):gc(a)&&"deps"in a&&a.deps.forEach(l=>i(l,o))}return JO.array(Array.from(r),n).reverse()}function Jm(t,e){let n=1/0;return t.some((r,s)=>{var i;if((i=e.path)!=null&&i.includes(r))return n=s,!0}),n}function iw(t){return(e,n)=>Jm(t,e)-Jm(t,n)}const ow=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function Sa(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=Sa(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=Sa(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Sa)}):"optional"in t?t.optional():t}const TN=(t,e)=>{const n=[...ts.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),s=ts.getter(ts.join(n),!0)(t);return!!(s&&r in s)};let Xm=t=>Object.prototype.toString.call(t)==="[object Object]";function IN(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const AN=iw([]);function si(t){return new aw(t)}class aw extends ln{constructor(e){super({type:"object",check(n){return Xm(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=AN,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let s=super._cast(e,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let i=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(s).filter(h=>!this._nodes.includes(h))),l={},c=Object.assign({},n,{parent:l,__validating:n.__validating||!1}),u=!1;for(const h of a){let d=i[h],f=h in s;if(d){let _,E=s[h];c.path=(n.path?`${n.path}.`:"")+h,d=d.resolve({value:E,context:n.context,parent:l});let b=d instanceof ln?d.spec:void 0,A=b==null?void 0:b.strict;if(b!=null&&b.strip){u=u||h in s;continue}_=!n.__validating||!A?d.cast(s[h],c):s[h],_!==void 0&&(l[h]=_)}else f&&!o&&(l[h]=s[h]);(f!==h in l||l[h]!==s[h])&&(u=!0)}return u?l:s}_validate(e,n={},r,s){let{from:i=[],originalValue:o=e,recursive:a=this.spec.recursive}=n;n.from=[{schema:this,value:o},...i],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(l,c)=>{if(!a||!Xm(c)){s(l,c);return}o=o||c;let u=[];for(let h of this._nodes){let d=this.fields[h];!d||ys.isRef(d)||u.push(d.asNestedTest({options:n,key:h,parent:c,parentPath:n.path,originalParent:o}))}this.runTests({tests:u,value:c,originalValue:o,options:n},r,h=>{s(h.sort(this._sortErrors).concat(l),c)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[s,i]of Object.entries(this.fields)){const o=r[s];r[s]=o===void 0?i:o}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const i=this.fields[r];let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=i&&"getDefault"in i?i.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=bN(e,n),r._sortErrors=iw(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Sa(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>e.includes(r)&&e.includes(s)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let s=ts.getter(e,!0);return this.transform(i=>{if(!i)return i;let o=i;return TN(i,e)&&(o=Object.assign({},i),r||delete o[e],o[n]=s(i)),o})}json(){return this.transform(ow)}noUnknown(e=!0,n=ah.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const i=IN(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=ah.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[e(s)]=n[s];return r})}camelCase(){return this.transformKeys(iu.camelCase)}snakeCase(){return this.transformKeys(iu.snakeCase)}constantCase(){return this.transformKeys(e=>iu.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[i,o]of Object.entries(n.fields)){var s;let a=e;(s=a)!=null&&s.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[i]})),r.fields[i]=o.describe(a)}return r}}si.prototype=aw.prototype;function lw(t){return new cw(t)}class cw extends ln{constructor(e){super({type:"array",spec:{types:e},check(n){return Array.isArray(n)}}),this.innerType=void 0,this.innerType=e}_cast(e,n){const r=super._cast(e,n);if(!this._typeCheck(r)||!this.innerType)return r;let s=!1;const i=r.map((o,a)=>{const l=this.innerType.cast(o,Object.assign({},n,{path:`${n.path||""}[${a}]`}));return l!==o&&(s=!0),l});return s?i:r}_validate(e,n={},r,s){var i;let o=this.innerType,a=(i=n.recursive)!=null?i:this.spec.recursive;n.originalValue!=null&&n.originalValue,super._validate(e,n,r,(l,c)=>{var u;if(!a||!o||!this._typeCheck(c)){s(l,c);return}let h=new Array(c.length);for(let f=0;f<c.length;f++){var d;h[f]=o.asNestedTest({options:n,index:f,parent:c,parentPath:n.path,originalParent:(d=n.originalValue)!=null?d:e})}this.runTests({value:c,tests:h,originalValue:(u=n.originalValue)!=null?u:e,options:n},r,f=>s(f.concat(l),c))})}clone(e){const n=super.clone(e);return n.innerType=this.innerType,n}json(){return this.transform(ow)}concat(e){let n=super.concat(e);return n.innerType=this.innerType,e.innerType&&(n.innerType=n.innerType?n.innerType.concat(e.innerType):e.innerType),n}of(e){let n=this.clone();if(!gc(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Yn(e));return n.innerType=e,n.spec=Object.assign({},n.spec,{types:e}),n}length(e,n=Aa.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n){return n=n||Aa.min,this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n){return n=n||Aa.max,this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,n)=>this._typeCheck(e)?e:n==null?[]:[].concat(n))}compact(e){let n=e?(r,s,i)=>!e(r,s,i):r=>!!r;return this.transform(r=>r!=null?r.filter(n):r)}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);if(n.innerType){var s;let i=e;(s=i)!=null&&s.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),r.innerType=n.innerType.describe(i)}return r}}lw.prototype=cw.prototype;function SN(t){return t.replace(/\[(\d+)\]/g,".$1")}function RN(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))if(n.includes("[")&&n.includes("]")){const r=SN(n);e[r]=t[n]}else e[n]=t[n];return e}const CN=fc(si().shape({firstName:ft().required("El nombre es obligatorio"),lastName:ft().required("El apellido es obligatorio"),phone:ft().matches(/^\d{6,10}$/,"El número de teléfono debe tener 10 dígitos").required("El teléfono es obligatorio"),cars:lw().of(si().shape({brand:ft().required("La marca del automóvil es obligatoria"),model:ft().required("El modelo del automóvil es obligatorio"),year:rw().typeError("El año del automóvil es obligatorio").required("El año del automóvil es obligatorio").min(1900,"El año debe ser mayor a 1900").max(new Date().getFullYear(),"El año no puede ser mayor al actual"),mileage:ft().required("El kilometraje es obligatorio"),fuelType:ft().required("El tipo de combustible es obligatorio"),soatExpiry:ft().typeError("La fecha de vencimiento del SOAT es obligatoria").required("La fecha de vencimiento del SOAT es obligatoria"),annualCertification:ft().when("fuelType",([t],e)=>["glp","gnv"].includes(t)?e.required("La fecha de revisión técnica anual es obligatoria"):e.notRequired()),annualTechnicalInspection:ft().typeError("La fecha de inspección técnica anual es obligatoria").required("La fecha de inspección técnica anual es obligatoria")}))})),Un=ds("user",()=>{const{errors:t,defineField:e,handleSubmit:n,meta:r,isSubmitting:s}=dc({validationSchema:CN,initialValues:{firstName:"",lastName:"",phone:"",cars:[{brand:"",model:"",year:new Date().getFullYear(),mileage:"",fuelType:"gasolina",soatExpiry:"",annualCertification:"",annualTechnicalInspection:""}]}}),i=Le(()=>RN(t.value)),[o,a]=e("firstName"),[l,c]=e("lastName"),[u,h]=e("phone"),{remove:d,insert:f,fields:_,replace:E}=SO("cars"),b=ye(""),A=ye(""),P=Dn({latitude:"",longitude:""}),M=Dn({country:"",administrative_area_level_1:"",administrative_area_level_2:"",locality:"",sublocality:"",route:"",street_number:"",postal_code:""}),q=te=>{Object.assign(M,{country:te.country||"",administrative_area_level_1:te.administrative_area_level_1||"",administrative_area_level_2:te.administrative_area_level_2||"",locality:te.locality||"",sublocality:te.sublocality||"",route:te.route||"",street_number:te.street_number||"",postal_code:te.postal_code||""})},R=te=>{Object.assign(P,{latitude:te.latitude||"",longitude:te.longitude||""})};function I(){f(0,{brand:"",model:"",year:new Date().getFullYear(),mileage:"",fuelType:"gasolina",soatExpiry:"",annualCertification:"",annualTechnicalInspection:""})}function F(te){d(te)}function x(te){A.value=te.uid||A.value||"",o.value=te.firstName||"",l.value=te.lastName||"",u.value=te.phone||"",E(te.cars||[{brand:"",model:"",year:new Date().getFullYear(),mileage:"",fuelType:"",soatExpiry:"",annualCertification:"",annualTechnicalInspection:""}])}function V(){A.value="",o.value="",l.value="",u.value="",E([{brand:"",model:"",year:new Date().getFullYear(),mileage:"",fuelType:"",soatExpiry:"",annualCertification:"",annualTechnicalInspection:""}])}async function $(te){if(te){const Ae=Rm(tu,"users"),je=ok(Ae,ak("uid","==",te));(await pk(je)).docs.map(xe=>{const ve=xe.data();b.value=xe.id,x(ve)})}else return[]}async function Y(te){try{const Ae=Rm(tu,"users"),je={uid:te,firstName:"",lastName:"",phone:"",cars:[{brand:"",model:"",year:new Date().getFullYear(),mileage:"",fuelType:"gasolina",soatExpiry:"",annualCertification:"",annualTechnicalInspection:""}]};x(je);const oe=await gk(Ae,je);return b.value=oe.id,oe}catch(Ae){throw Ae}}async function B(te){try{const Ae={firstName:o.value,lastName:l.value,phone:u.value,...te};x(Ae);const je=S0(tu,"users",b.value);await mk(je,Ae)}catch(Ae){throw Ae}}return{id:b,uid:A,firstName:o,firstNameProps:a,lastName:l,lastNameProps:c,phone:u,phoneProps:h,deleteCar:F,addCar:I,replaceCars:E,cars:_,errors:i,handleSubmit:n,meta:r,isSubmitting:s,setUser:x,getUserByUid:$,createUser:Y,updateUser:B,resetUser:V,location:M,setUserLocation:q,coordinates:P,setUserCoordinates:R}}),vs=ds("auth",()=>{const t=ye(""),e=ye(""),n=ye(""),r=ye(!1),s=ye(!1);function i(a){r.value=a}async function o(){return new Promise((a,l)=>{try{ni.onAuthStateChanged(c=>{s.value=!!c,c&&(e.value=c.email,n.value=c.uid,t.value=c.displayName),a()})}catch(c){l(c)}})}return{isLoading:r,setIsLoading:i,email:e,uid:n,displayName:t,getFirebaseUser:o,isAuthenticated:s}}),yc=ds("loginModal",()=>{const t=fc(si({email:ft().required().email(),password:ft().min(6).required()})),{errors:e,defineField:n,handleSubmit:r,meta:s,isSubmitting:i}=dc({validationSchema:t}),o=ye(!1),a=ye(!1),[l,c]=n("email"),[u,h]=n("password");function d(E){o.value=E}function f(E){a.value=E}function _(){f(!0)}return{email:l,password:u,emailProps:c,passwordProps:h,errors:e,defineField:n,handleSubmit:r,meta:s,isSubmitting:i,isLoading:o,showModal:a,setIsLoading:d,setShowModal:f,handleShowLoginModal:_}}),vc=ds("registerModal",()=>{const t=fc(si({email:ft().required().email(),password:ft().min(6).required()})),{errors:e,defineField:n,handleSubmit:r,meta:s,isSubmitting:i}=dc({validationSchema:t}),o=ye(!1),a=ye(!1),[l,c]=n("email"),[u,h]=n("password");function d(E){o.value=E}function f(E){a.value=E}function _(){f(!0)}return{email:l,password:u,emailProps:c,passwordProps:h,errors:e,defineField:n,handleSubmit:r,meta:s,isSubmitting:i,isLoading:o,showModal:a,setIsLoading:d,setShowModal:f,handleShowRegisterModal:_}}),Yd=ds("locationModal",()=>{const t=ye(!1),e=ye(!1);function n(i){t.value=i}function r(i){e.value=i}function s(){r(!0)}return{isLoading:t,showModal:e,setIsLoading:n,setShowModal:r,handleShowRegisterModal:s}}),uw=ds("contactModal",()=>{const t=fc(si({selectedCar:ft().required("Debe registrar por lo menos un atomóvil."),selectedMotive:ft().required("Debe seleccionar un motivo"),selectedService:ft().required()})),{errors:e,defineField:n,handleSubmit:r,meta:s,isSubmitting:i,resetForm:o}=dc({validationSchema:t}),a=ye(!1),l=ye(!1),[c,u]=n("selectedCar"),[h,d]=n("selectedMotive"),[f,_]=n("selectedService");function E(M){a.value=M}function b(M){l.value=M}function A(M){f.value=M,b(!0)}function P(M){c.value=M}return{selectedCar:c,selectedCarProps:u,selectedMotive:h,selectedMotiveProps:d,selectedService:f,selectedServiceProps:_,setSelectedCar:P,errors:e,defineField:n,handleSubmit:r,resetForm:o,meta:s,isSubmitting:i,isLoading:a,showModal:l,setIsLoading:E,setShowModal:b,handleShowContactModal:A}}),xN=At({__name:"App",setup(t){const e=Yd(),n=Un(),r=vs();async function s(){navigator.geolocation?await new Promise((i,o)=>{navigator.geolocation.getCurrentPosition(async a=>{n.setUserCoordinates(a.coords);const{Geocoder:l}=await google.maps.importLibrary("geocoding");new l().geocode({location:{lat:a.coords.latitude,lng:a.coords.longitude}},function(u,h){if(h==="OK"){const d={country:"",administrative_area_level_1:"",administrative_area_level_2:"",locality:"",sublocality:"",route:"",street_number:"",postal_code:""};u[0].address_components.map(f=>{f.types.includes("country")?d.country=f.long_name:f.types.includes("administrative_area_level_1")?d.administrative_area_level_1=f.long_name:f.types.includes("administrative_area_level_2")?d.administrative_area_level_2=f.long_name:f.types.includes("locality")?d.locality=f.long_name:f.types.includes("sublocality")?d.sublocality=f.long_name:f.types.includes("route")?d.route=f.long_name:f.types.includes("street_number")?d.street_number=f.long_name:f.types.includes("postal_code")&&(d.postal_code=f.long_name)}),n.setUserLocation(d)}else console.error("Error al geocodificar la dirección:",h)}),i()},a=>{a.code===a.PERMISSION_DENIED&&e.setShowModal(!0),o()})}):console.error("Geolocalización no es compatible con este navegador.")}return wo(async()=>{r.setIsLoading(!0),await r.getFirebaseUser().then(async()=>{await n.getUserByUid(r==null?void 0:r.uid).then(()=>{r.setIsLoading(!1),s()})})}),(i,o)=>w(r).isLoading?(X(),ht(sI,{key:0})):(X(),ht(w(A_),{key:1}))}}),PN={class:"z-10 flex sm:flex-row flex-col justify-between items-center bg-white w-full px-4 py-4 drop-shadow-xl sticky"},kN={class:"flex flex-row justify-start items-center sm:mb-0 mb-5"},ON=g("p",{class:"cursor-default text-blue-700 border-blue-700 text-4xl font-bold border-4 rounded-xl px-1 hidden sm:block"},"AUTOWASI",-1),NN={class:"flex flex-col justify-center items-center sm:mx-7"},DN=g("span",{class:"cursor-default flex flex-row items-center px-2 rounded-sm"},[g("p",{class:"text-blue-700 font-black mr-2"},"Ubicación"),g("i",{class:"fas fa-map-marker-alt text-blue-700"})],-1),VN={class:"flex flex-row items-center"},MN={class:"cursor-default w-fit px-2 text-center text-gray-700 font-semibold py-1"},LN={class:"flex flex-row justify-between items-center"},FN={class:"flex flex-row justify-between items-center"},$N={class:"flex flex-row justify-between items-center"},UN=g("i",{class:"fa-solid fa-user mr-2 text-blue-700"},null,-1),jN={class:"text-blue-700 font-black"},BN=g("div",{class:"absolute w-0 h-0",style:{top:"-8px",left:"60px","border-left":"7px solid transparent","border-right":"7px solid transparent","border-bottom":"7px solid #1e3a8a"}},null,-1),qN=At({__name:"TopBar",setup(t){const{handleShowLoginModal:e}=yc(),{handleShowRegisterModal:n}=vc(),r=Un(),s=vs(),i=Yd(),o=oi(),a=ye(!1);async function l(){try{s.setIsLoading(!0),await US(ni).then(()=>{r.resetUser(),o.push({name:"Home"})}).finally(()=>{s.setIsLoading(!1)})}catch(c){console.error("Error al cerrar sesión:",c)}}return(c,u)=>(X(),ue("div",PN,[g("div",kN,[ON,g("div",NN,[DN,g("span",VN,[g("p",MN,[w(r).location.postal_code?(X(),ue(rt,{key:0},[Nt(Me(w(r).location.administrative_area_level_2)+", "+Me(w(r).location.administrative_area_level_1),1)],64)):(X(),ue(rt,{key:1},[Nt("Seleccionar una ubicación")],64))]),g("i",{onClick:u[0]||(u[0]=h=>w(i).setShowModal(!0)),class:"fa-solid fa-pen-to-square cursor-pointer hover:text-blue-500"})])])]),g("div",LN,[g("div",FN,[w(s).isAuthenticated?(X(),ue("div",{key:0,class:"cursor-default bg-white rounded-md h-12 min-w-fit px-2 flex flex-col justify-center items-center",onMouseenter:u[1]||(u[1]=h=>a.value=!0),onMouseleave:u[2]||(u[2]=h=>a.value=!1)},[g("div",$N,[UN,g("p",jN,Me(w(s).displayName||w(s).email||"-"),1)]),a.value?(X(),ue("button",{key:0,onClick:l,class:"cursor-pointer py-1 font-normal rounded-md border-blue-100 border-2 hover:bg-blue-100 text-blue-700 hover:border-blue-700 bg-white w-36 top-[4.3em] absolute flex flex-col justify-between items-center"},[BN,Nt(" Cerrar sesión ")])):Ve("",!0)],32)):(X(),ue(rt,{key:1},[g("button",{onClick:u[3]||(u[3]=(...h)=>w(e)&&w(e)(...h)),class:"font-bold w-40 px-5 py-2 rounded-lg hover:border-blue-700 border-2 text-blue-700 bg-blue-100 mr-3"},"INGRESAR"),g("button",{onClick:u[4]||(u[4]=(...h)=>w(n)&&w(n)(...h)),class:"font-bold w-40 px-5 py-2 rounded-lg hover:border-blue-700 border-2 text-blue-700 bg-blue-100"},"REGISTRARSE")],64))])])]))}}),zN={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 bg-white"},HN=g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),WN=[HN],KN={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 bg-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},GN=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1),QN=[GN],YN=At({__name:"SideBar",setup(t){const e=oi(),n=ye(!1),r=vs(),s=Un();function i(){n.value=!n.value}function o(a){return Object.is(e.currentRoute.value.name,a)}return(a,l)=>{const c=Ih("router-link");return X(),ue("div",null,[g("div",{onClick:i,class:Fe([{"w-44":n.value,"w-6.5":!n.value},"bg-white cursor-pointer sm:hidden flex fixed top-0"])},[n.value?(X(),ue("svg",zN,WN)):(X(),ue("svg",KN,QN))],2),g("div",{class:Fe([{"flex top-[1.5rem]":n.value,"hidden sm:flex top-[5.5rem]":!n.value},"flex-col justify-start items-center h-full w-44 bg-white drop-shadow-xl fixed bottom-0 border-t-2 border-gray-100"])},[w(s).location.administrative_area_level_2=="Trujillo"?(X(),ht(c,{key:0,class:Fe([{"text-blue-700 font-bold bg-rose-100 border-rose-100":o("AllServices"),"text-blue-500 font-semibold bg-white border-gray-100":!o("AllServices")},"hover:text-blue-700 hover:font-bold drop-shadow-md py-1 border-b-2 w-full text-left pl-3"]),to:{name:"AllServices"}},{default:Ot(()=>[Nt("Todos los servicios")]),_:1},8,["class"])):Ve("",!0),Be(c,{class:Fe([{"text-blue-700 font-bold bg-rose-100 border-rose-100":o("CarWashServices"),"text-blue-500 font-semibold bg-white border-gray-100":!o("CarWashServices")},"hover:text-blue-700 hover:font-bold drop-shadow-md py-1 border-b-2 w-full text-left pl-3"]),to:{name:"CarWashServices"}},{default:Ot(()=>[Nt("Todo lavado")]),_:1},8,["class"]),w(r).isAuthenticated?(X(),ht(c,{key:1,class:Fe([{"text-blue-700 font-bold bg-rose-100 border-rose-100":o("Profile"),"text-blue-500 font-semibold bg-white border-gray-100":!o("Profile")},"hover:text-blue-700 hover:font-bold drop-shadow-md py-1 border-b-2 w-full text-left pl-3"]),to:{name:"Profile"}},{default:Ot(()=>[Nt("Mi perfil")]),_:1},8,["class"])):Ve("",!0)],2)])}}}),JN={class:"fixed w-screen h-screen top-0 left-0 flex flex-row justify-center items-center bg-black bg-opacity-80 z-20"},XN={key:0,class:"w-full flex flex-row justify-end items-center mb-1"},ZN={class:"w-full h-full flex flex-col justify-center items-center mt-0 mb-5"},pi=At({__name:"Modal",props:{width:{default:"w-1/2"},height:{default:"h-3/4"},showCloseIcon:{type:Boolean,default:!0}},emits:["closeModal"],setup(t,{emit:e}){const n=t;return(r,s)=>(X(),ue("div",JN,[g("div",{class:Fe(["flex flex-col justify-start items-center bg-white rounded-lg pt-2 px-4",n.width+" "+n.height])},[r.showCloseIcon?(X(),ue("div",XN,[g("i",{onClick:s[0]||(s[0]=i=>r.$emit("closeModal")),class:"fas fa-times text-lg font-bold cursor-pointer"})])):Ve("",!0),g("div",ZN,[$g(r.$slots,"default",{},()=>[Nt("MODAL")])])],2)]))}}),eD={key:1,class:"w-full flex flex-col justify-center items-center"},tD={key:0,class:"text-sm flex flex-row justify-center items-center mb-10"},nD=g("p",{class:"rounded-xs font-semibold px-4 py-1 bg-red-100 text-red-800 cursor-default mr-1"},"El correo o la contraseña son incorrectos",-1),rD=[nD],sD={key:1,class:"text-sm flex flex-row justify-center items-center mb-10"},iD=g("p",{class:"cursor-default mr-1"},"¿No tienes una cuenta?",-1),oD={class:"flex flex-col rounded-md w-full"},aD={class:"flex flex-col w-full"},lD=["disabled"],cD=g("div",{class:"flex flex-row justify-between items-baseline"},[g("hr",{class:"h-[2px] w-24 bg-[#ededed]"}),g("p",{class:"my-4 mx-2 text-gray-500"},"o"),g("hr",{class:"h-[2px] w-24 bg-[#ededed]"})],-1),uD=g("svg",{class:"h-6",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},[g("g",null,[g("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),g("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),g("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),g("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),g("path",{fill:"none",d:"M0 0h48v48H0z"})])],-1),hD=g("p",{class:"ml-3"},"Iniciar sesión con Google",-1),dD=[uD,hD],fD=At({__name:"LoginModal",setup(t){const e=yc(),n=vc(),r=Un(),s=vs(),i=oi(),o=ye(!1);function a(){e.setShowModal(!1),n.setShowModal(!0)}const l=async()=>{try{n.setIsLoading(!0),o.value=!1;const h=new bn;await _y(ni,h).then(async({user:{uid:d}})=>{await r.getUserByUid(d).then(async()=>{r.uid?(e.setIsLoading(!1),e.setShowModal(!1)):await r.createUser(d).then(()=>{n.setIsLoading(!1),e.setShowModal(!1),i.push({name:"Profile"})})})})}catch(h){n.setIsLoading(!1),o.value=!0,console.error("Error al iniciar sesión con Google:",h)}},c=async()=>{try{o.value=!1,e.setIsLoading(!0),await LS(ni,e.email||"",e.password||"").then(async()=>{await r.getUserByUid(s==null?void 0:s.uid),e.setIsLoading(!1),e.setShowModal(!1)})}catch(h){o.value=!0,e.setIsLoading(!1),console.error("Error al iniciar sesión con correo y contraseña:",h)}},u=e.handleSubmit(()=>{c()},()=>{s.setIsLoading(!1)});return(h,d)=>w(e).showModal?(X(),ht(pi,{key:0,onCloseModal:d[3]||(d[3]=f=>w(e).setShowModal(!1)),width:"w-3/4",height:"h-3/4",showCloseIcon:!0},{default:Ot(()=>[w(e).isLoading?(X(),ht(Cl,{key:0})):(X(),ue("div",eD,[o.value?(X(),ue("span",tD,rD)):(X(),ue("span",sD,[iD,g("p",{class:"cursor-pointer bg-white font-semibold",onClick:a},"Registrate gratis")])),g("form",{onSubmit:d[2]||(d[2]=c_((...f)=>w(u)&&w(u)(...f),["prevent"])),class:"rounded-md w-full sm:w-2/5 flex flex-col justify-center items-center"},[g("div",oD,[g("label",{for:"email",class:Fe(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":w(e).meta.touched&&w(e).errors&&w(e).errors.email}])},"Correo electrónico",2),ct(g("input",Yi({class:[{"border-red-400 border-2 rounded-xs":w(e).meta.touched&&w(e).errors&&w(e).errors.email},"h-8 mb-2 pl-2 bg-blue-100 rounded-md"],style:{outline:"none"},type:"email",id:"email","onUpdate:modelValue":d[0]||(d[0]=f=>w(e).email=f)},w(e).emailProps),null,16),[[$t,w(e).email]])]),g("div",aD,[g("label",{for:"password",class:Fe(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":w(e).meta.touched&&w(e).errors&&w(e).errors.password}])},"Contraseña",2),ct(g("input",Yi({class:[{"border-red-400 border-2 rounded-xs":w(e).meta.touched&&w(e).errors&&w(e).errors.password},"h-8 mb-2 pl-2 bg-blue-100 rounded-md"],style:{outline:"none"},type:"password",id:"password","onUpdate:modelValue":d[1]||(d[1]=f=>w(e).password=f)},w(e).passwordProps,{placeholder:"Mínimo 6 carácteres"}),null,16),[[$t,w(e).password]])]),g("button",{disabled:w(e).isSubmitting,type:"submit",class:"w-full flex flex-row justify-center items-center mt-3 py-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},Me(w(e).isSubmitting?"Cargando":"Iniciar sesión"),9,lD),cD],32),g("button",{type:"button",class:"mt-2 flex flex-row justify-evenly items-center bg-white border-blue-100 border-2 w-fit rounded-md px-3 py-1 hover:opacity-60",onClick:l},dD)]))]),_:1})):Ve("",!0)}}),pD={key:1,class:"w-full flex flex-col justify-center items-center"},mD={key:0,class:"text-sm flex flex-row justify-center items-center mb-10"},gD=g("p",{class:"rounded-xs font-semibold px-4 py-1 bg-red-100 text-red-800 cursor-default mr-1"},"El correo o la contraseña son incorrectos",-1),_D=[gD],yD=g("p",{class:"cursor-default mr-1"},"¿Ya tienes una cuenta?",-1),vD={class:"flex flex-col rounded-md w-full"},wD={class:"flex flex-col w-full"},ED=["disabled"],bD=g("div",{class:"flex flex-row justify-between items-baseline"},[g("hr",{class:"h-[2px] w-24 bg-[#ededed]"}),g("p",{class:"my-4 mx-2 text-gray-500"},"o"),g("hr",{class:"h-[2px] w-24 bg-[#ededed]"})],-1),TD=g("svg",{class:"h-6",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},[g("g",null,[g("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),g("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),g("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),g("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),g("path",{fill:"none",d:"M0 0h48v48H0z"})])],-1),ID=g("p",{class:"ml-3"},"Registrarse con Google",-1),AD=[TD,ID],SD=At({__name:"RegisterModal",setup(t){const e=oi(),n=vc(),r=yc(),s=Un(),i=vs(),o=ye(!1);function a(){n.setShowModal(!1),r.setShowModal(!0)}const l=async()=>{try{o.value=!1,n.setShowModal(!0),await MS(ni,n.email||"",n.password||"").then(async({user:{uid:h}})=>{await s.createUser(h).then(()=>{n.setShowModal(!1),e.push({name:"Profile"})})})}catch(h){o.value=!0,console.error("Error al registrar el usuario:",h)}},c=async()=>{try{n.setIsLoading(!0),o.value=!1;const h=new bn;await _y(ni,h).then(async({user:{uid:d}})=>{await s.getUserByUid(d).then(async()=>{s.uid?(n.setShowModal(!1),n.setIsLoading(!1)):await s.createUser(d).then(()=>{n.setIsLoading(!1),n.setShowModal(!1),e.push({name:"Profile"})})})})}catch(h){o.value=!0,n.setIsLoading(!1),console.error("Error al iniciar sesión con Google:",h)}},u=n.handleSubmit(()=>l(),()=>i.setIsLoading(!1));return(h,d)=>w(n).showModal?(X(),ht(pi,{key:0,onCloseModal:d[3]||(d[3]=f=>w(n).setShowModal(!1)),width:"w-3/4",height:"h-3/4",showCloseIcon:!0},{default:Ot(()=>[w(n).isLoading?(X(),ht(Cl,{key:0})):(X(),ue("div",pD,[o.value?(X(),ue("span",mD,_D)):Ve("",!0),g("span",{class:"text-sm flex flex-row justify-center items-center mb-10"},[yD,g("p",{class:"cursor-pointer bg-white font-semibold",onClick:a},"Inicia sesión")]),g("form",{onSubmit:d[2]||(d[2]=c_((...f)=>w(u)&&w(u)(...f),["prevent"])),class:"rounded-md w-full sm:w-2/5 flex flex-col justify-center items-center"},[g("div",vD,[g("label",{for:"email",class:Fe(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":w(n).meta.touched&&w(n).errors&&w(n).errors.email}])},"Correo electrónico",2),ct(g("input",Yi({class:["h-8 mb-2 pl-2 bg-blue-100 rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors&&w(n).errors.email}],style:{outline:"none"},type:"email",id:"email","onUpdate:modelValue":d[0]||(d[0]=f=>w(n).email=f)},w(n).emailProps),null,16),[[$t,w(n).email]])]),g("div",wD,[g("label",{for:"password",class:Fe(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":w(n).meta.touched&&w(n).errors&&w(n).errors.password}])},"Contraseña",2),ct(g("input",Yi({class:["h-8 mb-2 pl-2 bg-blue-100 rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors&&w(n).errors.password}],style:{outline:"none"},type:"password",id:"password","onUpdate:modelValue":d[1]||(d[1]=f=>w(n).password=f)},w(n).passwordProps,{placeholder:"Mínimo 6 carácteres"}),null,16),[[$t,w(n).password]])]),g("button",{disabled:w(n).isSubmitting,type:"submit",class:"w-full flex flex-row justify-center items-center mt-3 py-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},Me(w(r).isSubmitting?"Cargando":"Registrarse"),9,ED),bD],32),g("button",{type:"button",class:"mt-2 flex flex-row justify-evenly items-center bg-white border-blue-100 border-2 w-fit rounded-md px-3 py-1 hover:opacity-60",onClick:c},AD)]))]),_:1})):Ve("",!0)}}),RD={id:"address-form",class:"w-full h-full flex flex-col justify-between items-center"},CD={class:"w-full h-full mt-10 px-10 flex flex-col justify-start items-center"},xD=g("label",{for:"autocomplete-input",class:"mb-3"},"Es necesario ingresar una dirección:",-1),PD={key:0,class:"w-full bg-blue-50 rounded-xs"},kD=["onClick"],OD={class:"py-2 px-4"},ND={class:"bg-black text-white text-sm py-1 px-2 rounded-lg absolute bottom-40"},DD=At({__name:"LocationModal",setup(t){const e=Yd(),n=Un(),r=ye(""),s=ye({predictions:[{description:""}]}),i=ye({description:"",place_id:""}),o=ye(!1);let a=null;function l(){a&&(clearTimeout(a),i.value={description:"",place_id:""});try{a=setTimeout(async()=>{const{AutocompleteService:h}=await google.maps.importLibrary("places");s.value=await new h().getPlacePredictions({input:r.value})},200)}catch(h){console.log("error",h)}}async function c(h){const{Geocoder:d}=await google.maps.importLibrary("geocoding");new d().geocode({placeId:h},function(_,E){if(E==="OK"){const b=_[0].geometry.location,A={country:"",administrative_area_level_1:"",administrative_area_level_2:"",locality:"",sublocality:"",route:"",street_number:"",postal_code:""};_[0].address_components.map(P=>{P.types.includes("country")?A.country=P.long_name:P.types.includes("administrative_area_level_1")?A.administrative_area_level_1=P.long_name:P.types.includes("administrative_area_level_2")?A.administrative_area_level_2=P.long_name:P.types.includes("locality")?A.locality=P.long_name:P.types.includes("sublocality")?A.sublocality=P.long_name:P.types.includes("route")?A.route=P.long_name:P.types.includes("street_number")?A.street_number=P.long_name:P.types.includes("postal_code")&&(A.postal_code=P.long_name)}),n.setUserLocation(A),n.setUserCoordinates({latitude:b.lat(),longitude:b.lng()})}else console.error("Error al geocodificar la dirección:",E)})}function u(h){i.value=h,r.value=h.description,c(h.place_id)}return(h,d)=>w(e).showModal?(X(),ht(pi,{key:0,onCloseModal:d[4]||(d[4]=f=>w(e).setShowModal(!1)),showCloseIcon:!1},{default:Ot(()=>[g("form",RD,[g("span",CD,[xD,ct(g("input",{"onUpdate:modelValue":d[0]||(d[0]=f=>r.value=f),onInput:l,class:"pl-2 w-full h-10 bg-blue-100 rounded-md",style:{outline:"none"},type:"text",id:"autocomplete-input",name:"autocomplete-input"},null,544),[[$t,r.value]]),r.value&&!i.value.place_id?(X(),ue("ul",PD,[(X(!0),ue(rt,null,wl(s.value.predictions,(f,_)=>(X(),ue("li",{key:_,class:"cursor-pointer text-sm hover:bg-blue-50 hover:font-medium",onClick:E=>u(f)},[g("div",OD,Me(f.description),1)],8,kD))),128))])):Ve("",!0)]),g("button",{class:Fe(["bg-blue-700 px-4 py-2 mb-10 text-blue-100 font-bold rounded-md hover:opacity-70",{"opacity-70":!i.value.place_id}]),type:"button",onClick:d[1]||(d[1]=f=>w(e).setShowModal(!1)),onMouseover:d[2]||(d[2]=f=>o.value=!i.value.place_id),onMouseleave:d[3]||(d[3]=f=>o.value=!1)},[Nt("ACEPTAR "),ct(g("span",ND,"Selecciona un opción sugerida.",512),[[mb,o.value&&!i.value.place_id]])],34)])]),_:1})):Ve("",!0)}}),VD={key:1,class:"h-full py-20 flex flex-col justify-evenly items-center"},MD=g("p",{class:"text-gray-700 font-bold"},"Es necesario",-1),LD=g("p",{class:"text-gray-700 font-bold"},"o",-1),FD=g("p",{class:"text-gray-700 font-bold"},"para continuar",-1),$D={key:2,class:"w-full h-full flex flex-col justify-center items-center"},UD={class:"w-full h-full flex flex-col justify-evenly items-center py-10"},jD=g("p",{class:"text-gray-700 text-md text-center mb-2"},"Para continuar, por favor selecciona tu automóvil y el motivo de tu consulta.",-1),BD={class:"flex flex-col justify-center items-start bg-blue-200 px-10 py-4 rounded-md"},qD=g("label",{for:"car",class:"mb-2 text-xs text-left text-blue-700 font-black"},"Selecciona tu auto:",-1),zD=["value"],HD={class:"text-xs text-red-700 font-medium pl-2"},WD={class:"flex flex-col justify-center items-start bg-blue-200 px-10 py-4 rounded-md"},KD=g("label",{for:"reason",class:"mb-2 text-xs text-blue-700 font-black"},"Motivo de la consulta:",-1),GD=g("option",{value:"Mantenimiento"},"Mantenimiento preventivo",-1),QD=g("option",{value:"Reparación"},"Reparación",-1),YD=g("option",{value:"Reparación"},"Inspección",-1),JD=g("option",{value:"Reparación"},"Otros",-1),XD=[GD,QD,YD,JD],ZD={key:0,class:"text-xs text-red-700 font-medium pl-2"},eV=947387067,tV=At({__name:"ContactModal",setup(t){const e=yc(),n=vc(),r=uw(),s=Un(),i=vs();function o(){r.setShowModal(!1),e.setShowModal(!1),n.setShowModal(!0)}function a(){r.setShowModal(!1),n.setShowModal(!1),e.setShowModal(!0)}const l=Le(()=>`https://api.whatsapp.com/send?phone=${eV}&text=Hola,%20mi%20nombre%20es%20*${s.firstName}*%20%20Tengo%20un%20*${r.selectedCar}*%20y%20requiero%20el%20servicio%20de%20*${r.selectedMotive}*.%20Quisiera%20m%C3%A1s%20informaci%C3%B3n.`);function c(){r.handleSubmit(()=>{window.open(l.value,"_blank")})()}function u(){r.resetForm(),r.setShowModal(!1)}return(h,d)=>{const f=Ih("router-link");return w(r).showModal?(X(),ht(pi,{key:0,onCloseModal:d[2]||(d[2]=_=>w(r).setShowModal(!1)),width:"w-3/4",height:"h-3/4",showCloseIcon:!0},{default:Ot(()=>[w(r).isLoading?(X(),ht(Cl,{key:0})):w(i).isAuthenticated?(X(),ue("div",$D,[g("form",UD,[jD,g("span",BD,[qD,ct(g("select",{id:"car",name:"car","onUpdate:modelValue":d[0]||(d[0]=_=>w(r).selectedCar=_),class:Fe(["outline-none focus:outline-none rounded-md bg-gray-50 w-fit min-w-64 text-md",{"border-2 border-red-700":w(r).meta.touched&&w(r).errors.selectedCar}])},[(X(!0),ue(rt,null,wl(w(s).cars,(_,E)=>(X(),ue("option",{key:E,value:`${_.value.brand} ${_.value.model}, ${_.value.year}`},Me(_.value.brand)+" "+Me(_.value.model)+", "+Me(_.value.year),9,zD))),128))],2),[[yu,w(r).selectedCar]]),w(r).meta.touched&&w(r).errors.selectedCar?(X(),ue("span",{key:0,onClick:u,class:"flex flex-col justify-start items-start"},[g("p",HD,Me(w(r).errors.selectedCar),1),Be(f,{to:{name:"Profile"},class:"pl-2 cursor-pointer text-xs text-red-700 font-extrabold"},{default:Ot(()=>[Nt("===> Ir a mi perfil")]),_:1})])):Ve("",!0)]),g("span",WD,[KD,ct(g("select",{id:"reason",name:"reason","onUpdate:modelValue":d[1]||(d[1]=_=>w(r).selectedMotive=_),class:Fe(["outline-none focus:outline-none rounded-md bg-gray-50 w-fit min-w-64 text-md",{"border-2 border-red-700":w(r).meta.touched&&w(r).errors.selectedMotive}])},XD,2),[[yu,w(r).selectedMotive]]),w(r).meta.touched&&w(r).errors.selectedMotive?(X(),ue("p",ZD,Me(w(r).errors.selectedMotive),1)):Ve("",!0)]),g("button",{type:"button",onClick:c,class:"mt-2 hover:opacity-80 text-center text-white text-md font-black mr-2 bg-blue-700 px-10 py-2 rounded-md w-fit min-w-52"},"CONTINUAR")])])):(X(),ue("div",VD,[MD,g("button",{type:"button",lass:"hover:opacity-80 cursor-pointer rounded-lg text-white bg-blue-700 py-2 px-6 font-black",onClick:a},"INICIAR SESIÓN"),LD,g("button",{type:"button",class:"hover:opacity-80 cursor-pointer rounded-lg text-white bg-blue-700 py-2 px-6 font-black",onClick:o},"REGISTRARSE"),FD]))]),_:1})):Ve("",!0)}}}),hw=ds("alert",()=>{const t=ye(!1);function e(n){t.value=n,setTimeout(()=>{t.value=!1},1500)}return{showAlert:t,setShowAlert:e}}),nV=g("p",{class:"text-blue-700 font-bold"},"¡Los datos se actualizaron con éxito!",-1),rV=At({__name:"Alert",setup(t){const e=hw();return(n,r)=>w(e).showAlert?(X(),ht(pi,{key:0,onCloseModal:r[0]||(r[0]=s=>w(e).setShowAlert(!1)),width:"w-1/3",height:"h-40",showCloseIcon:!0},{default:Ot(()=>[nV]),_:1})):Ve("",!0)}}),sV={},iV={class:"footer"},oV={class:"pt-10 pb-7 px-10 text-center bg-white font-bold"},aV={class:"text-gray-700"};function lV(t,e){return X(),ue("footer",iV,[g("div",oV,[g("p",aV,"© "+Me(new Date().getFullYear())+" AUTOWASI. Todos los derechos reservados.",1)])])}const cV=S_(sV,[["render",lV]]),uV={class:"flex flex-col w-full h-screen overflow-hidden"},hV={class:"flex flex-row w-full h-full overflow-y-auto"},dV={class:"md:container md:mx-auto w-full sm:pl-44"},fV={class:"w-full h-full"},Jd=At({__name:"Layout",setup(t){return(e,n)=>(X(),ue("div",uV,[Be(fD),Be(SD),Be(DD),Be(tV),Be(rV),Be(qN),g("div",hV,[Be(YN),g("span",dV,[g("div",fV,[$g(e.$slots,"default",{},()=>[Nt("Add view")]),Be(cV)])])])]))}}),pV="/assets/adjustable-wrench-R0lMtTwB.png",mV="/assets/fan-CsgU8Uvx.png",gV="/assets/brakes-dzGoctIr.png",_V="/assets/oil-CdbIrvwP.png",yV="/assets/clean-Bi88ezXv.png",vV="/assets/searching-Cov3dSz6.png",wV={class:"md:container md:mx-auto bg-white pt-12"},EV=g("h1",{class:"text-2xl text-left px-5 text-blue-700 font-bold mb-4"},"SERVICIOS PARA AUTOMÓVILES A DOMICILIO",-1),bV=g("p",{class:"text-left px-5 font-normal text-gray-700 mb-12"},[Nt("Lista de servicios de mantenimiento y reparación de automóviles "),g("strong",null,"disponibles a domicilio"),Nt(".")],-1),TV={class:"flex flex-row flex-wrap justify-evenly items-center"},IV={key:0,class:"text-center text-base text-blue-500 py-0 font-bold w-ful"},AV={class:"my-6 rounded-lg p-2"},SV=["src"],RV=["innerHTML"],CV=["onClick"],xV={class:"text-center text-white text-xl font-black mr-2"},PV=g("i",{class:"fab fa-whatsapp text-white font-black text-2xl"},null,-1),kV=At({__name:"AllServices",setup(t){const e=oi(),n=Un(),r=uw(),s=ye([{name:"LAVADO",imageSrc:yV,description:'<span class="text-rose-100">Encuentra talleres cerca de ti.</span>',CTAtext:"VER TALLERES",isCarWash:!0},{name:"Afinamiento",organization:"Nombre del taller",imageSrc:pV,description:'<span class="text-blue-700">Servicio regular para mantener el rendimiento óptimo del vehículo.</span>',price:"Desde S/50",rating:4.5,endedServices:37,mobile:"+51 987654321",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Cambio de Aceite",imageSrc:_V,description:'<span class="text-blue-700">Cambio de aceite y filtro para garantizar un motor saludable.</span>',price:"Desde S/30 (Incluye filtro)",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Reparación de Frenos",imageSrc:gV,description:'<span class="text-blue-700">Inspección y reparación de sistemas de frenos para una conducción segura.</span>',price:"Desde S/100",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Revisión de Aire Acondicionado",imageSrc:mV,description:'<span class="text-blue-700">Recarga y mantenimiento del sistema de aire acondicionado para un clima interior cómodo.</span>',price:"Desde S/60",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Consulta general o escaneo",imageSrc:vV,description:'<span class="text-blue-700">Diagnóstico completo para tu vehículo, garantizando su óptimo funcionamiento.</span>',price:"Desde S/60",CTAtext:"CONTACTAR",isCarWash:!1}]);Ah(()=>{n.location.administrative_area_level_2&&n.location.administrative_area_level_2!="Trujillo"&&e.push({name:"CarWashServices"})});function i(o){if(n.cars.length==1){const{value:{brand:a,model:l,year:c}}=n.cars[0];r.setSelectedCar(`${a} ${l}, ${c}`)}r.handleShowContactModal(o)}return(o,a)=>{const l=Ih("router-link");return X(),ht(Jd,null,{default:Ot(()=>[g("div",wV,[EV,bV,g("div",TV,[(X(!0),ue(rt,null,wl(s.value,c=>(X(),ue("div",{key:c.name,class:Fe([{"bg-blue-900":c.isCarWash,"bg-rose-50":!c.isCarWash},"w-[21rem] h-[30rem] mb-6 p-2 mr-1 flex flex-col justify-center items-center rounded-lg shadow-xl"])},[g("p",{class:Fe(["text-center text-2xl font-black w-52",{"text-rose-100":c.isCarWash,"text-blue-700":!c.isCarWash}])},Me(c.name),3),c.price?(X(),ue("p",IV,Me(c.price),1)):Ve("",!0),g("figure",AV,[g("img",{src:c.imageSrc,alt:"Car service",class:"h-24"},null,8,SV)]),g("p",{class:"px-1 rounded mb-6 w-[19rem] text-center text-sm font-mono font-black",innerHTML:c.description},null,8,RV),c.isCarWash?(X(),ht(l,{key:1,to:{name:"CarWashServices"},class:"hover:opacity-80 mb-3 p-1 w-[15rem] rounded-md text-center text-blue-600 text-xl font-black bg-rose-100"},{default:Ot(()=>[Nt(Me(c.CTAtext),1)]),_:2},1024)):(X(),ue("button",{key:2,onClick:u=>i(c.name),class:"flex flex-row justify-center items-center mb-3 p-1 w-[15rem] rounded-md bg-green-500 hover:opacity-70 border-2 border-blue-100"},[g("p",xV,Me(c.CTAtext),1),PV],8,CV))],2))),128))])])]),_:1})}}}),OV={class:"px-5"},NV={key:0,class:"relative flex justify-center items-center w-full h-96 text-lg font-bold text-gray-600"},DV=g("div",{id:"map",class:"h-[400px]"},null,-1),VV=At({__name:"CarWashMap",setup(t){const e=ye(!0),n=Un();let r=null,s=null;const i=[];function o(c,u,h,d){const _=a(c),E=a(h),b=a(h-c),A=a(d-u),P=Math.sin(b/2)*Math.sin(b/2)+Math.cos(_)*Math.cos(E)*Math.sin(A/2)*Math.sin(A/2),q=6371*(2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P)));return Math.round(q*10)/10}function a(c){return c*Math.PI/180}async function l(){const{latitude:c,longitude:u}=n.coordinates,h=c&&u?{lat:c,lng:u}:{lat:-8.1169477,lng:-79.021662},{Map:d}=await google.maps.importLibrary("maps"),{PlacesService:f}=await google.maps.importLibrary("places"),{AdvancedMarkerView:_,PinView:E}=await google.maps.importLibrary("marker");r=new d(document.getElementById("map"),{zoom:14,center:h,mapId:"f9e9a07281e43ce7"});var b=new google.maps.LatLng(h.lat,h.lng),A={type:"car_wash",location:b,radius:5e3},P=new f(r);await P.nearbySearch(A,async(M,q)=>{if(q===google.maps.places.PlacesServiceStatus.OK)for(var R=0;R<M.length;R++){var I=M[R];const F=await new E({glyphColor:"#811411",background:"#e94335",borderColor:"#811411"}),x=new E({glyphColor:"#811411",background:"#e94335",borderColor:"#811411",scale:1.2}),V=await new _({map:r,position:I.geometry.location,content:F.element,zIndex:R}),$=new google.maps.InfoWindow({content:`<ul class="py-2">
            <li class="flex flex-row items-center"><p class="mb-2"><span class="font-semibold">Taller:</span> ${I.name||""} <span class="font-semibold">(${o(h.lat,h.lng,I.geometry.location.lat(),I.geometry.location.lng())} Km)</span></p></li>
            <li class="flex flex-row items-center">${I.business_status?'<p class="mb-2"><span class="font-semibold">Estado:</span> Operacional</p>':""}</li>
            <li class="flex flex-row items-center">${I.isOpen?'<p class="mb-2 font-semibold">Abierto ahora</p>':""}</li>
            <li class="flex flex-row items-center">${I.vicinity?`<p class="mb-2"><span class="font-semibold">Dirección: </span>${I.vicinity}</p>`:""}</li>
            <li class="flex flex-row items-center">${I.user_ratings_total?`<p class="mb-2"><span class="font-semibold">Rating: </span>⭐ ${I.rating} (${I.user_ratings_total})</p>`:""}</li>
            <li class="mt-2"><a class="text-sm text-blue-700 font-black rounded-md py-1" href="https://www.google.com/maps/dir/?api=1&destination=${I.geometry.location.lat},${I.geometry.location.lng}" target="_blank" rel="noopener noreferrer">Abrir en Google Maps</a></li>
          </ul>`});V.addListener("gmp-click",()=>{(s==null?void 0:s.zIndex)!=V.zIndex&&(s&&(s.content=F.element),V.content=x.element,s=V,i.forEach(Y=>Y.close()),$.open({anchor:V,map:r}),i.push($))})}}),r.addListener("bounds_changed",async function(){const M=r.getBounds();await P.nearbySearch({radius:5e3,bounds:M,location:b,type:"car_wash"},async(q,R)=>{if(R===google.maps.places.PlacesServiceStatus.OK)for(var I=0;I<q.length;I++){var F=q[I];const x=await new E({glyphColor:"#811411",background:"#e94335",borderColor:"#811411"}),V=new E({glyphColor:"#811411",background:"#e94335",borderColor:"#811411",scale:1.2}),$=await new _({map:r,position:F.geometry.location,content:x.element,zIndex:I}),Y=new google.maps.InfoWindow({content:`<ul class="py-2">
              <li class="flex flex-row items-center"><p class="mb-2"><span class="font-semibold">Taller:</span> ${F.name||""} <span class="font-semibold">(${o(h.lat,h.lng,F.geometry.location.lat(),F.geometry.location.lng())} Km)</span></p></li>
              <li class="flex flex-row items-center">${F.business_status?'<p class="mb-2"><span class="font-semibold">Estado:</span> Operacional</p>':""}</li>
              <li class="flex flex-row items-center">${F.isOpen?'<p class="mb-2 font-semibold">Abierto ahora</p>':""}</li>
              <li class="flex flex-row items-center">${F.vicinity?`<p class="mb-2"><span class="font-semibold">Dirección: </span>${F.vicinity}</p>`:""}</li>
              <li class="flex flex-row items-center">${F.user_ratings_total?`<p class="mb-2"><span class="font-semibold">Rating: </span>⭐ ${F.rating} (${F.user_ratings_total})</p>`:""}</li>
              <li class="mt-2"><a class="text-sm text-blue-700 font-black rounded-md py-1" href="https://www.google.com/maps/dir/?api=1&destination=${F.geometry.location.lat},${F.geometry.location.lng}" target="_blank" rel="noopener noreferrer">Abrir en Google Maps</a></li>
            </ul>`});$.addListener("gmp-click",()=>{(s==null?void 0:s.zIndex)!=$.zIndex&&(s&&(s.content=x.element),$.content=V.element,s=$,i.forEach(B=>B.close()),Y.open({anchor:$,map:r}),i.push(Y))})}})})}return Ah(async()=>{n.location.postal_code&&(await l(),e.value=!1)}),(c,u)=>(X(),ue("div",OV,[e.value?(X(),ue("div",NV,"Cargando el mapa...")):Ve("",!0),DV]))}}),MV={class:"md:container md:mx-auto pt-12"},LV=g("h1",{class:"text-2xl text-left px-5 font-bold text-blue-700 mb-4"},"LAVADO DE AUTOMÓVILES",-1),FV=g("p",{class:"text-left px-5 font-normal text-gray-700 mb-12"},"Encuentra talleres de lavado cerca de ti.",-1),$V=At({__name:"CarWashServices",setup(t){return(e,n)=>(X(),ht(Jd,null,{default:Ot(()=>[g("div",MV,[LV,FV,Be(VV)])]),_:1}))}}),UV={class:"md:container md:mx-auto pt-12 mb-11"},jV={class:"cursor-default flex flex-col justify-center items-center"},BV=g("p",{class:"px-10 py-1 text-gray-700 text-xl font-semibold mb-10"},"¿Guardar los cambios?",-1),qV={class:"w-full flex flex-row justify-evenly items-center"},zV=g("h1",{class:"text-left pl-5 text-2xl text-blue-700 font-bold mb-4"},"CONFIGURACIÓN",-1),HV=g("p",{class:"text-left pl-5 text-gray-700 font-normal mb-12"},"Administra tus datos personales y de tus autos.",-1),WV={class:"mb-4 rounded-xs w-11/12 mx-5 p-5 flex flex-col justify-center items-start bg-rose-100 rounded-xs px-4 py-5 drop-shadow-md"},KV=g("h2",{class:"text-lg text-left font-bold mb-6 text-blue-700"},"Información de contacto",-1),GV={class:"flex sm:flex-row flex-col justify-between w-full items-baseline"},QV={class:"mb-4 sm:mb-0 sm:mr-3 field flex flex-col w-full"},YV=g("label",{for:"first-name",class:"font-bold text-xs mb-1"},"Nombres*",-1),JV={key:0,class:"text-xs text-red-700 font-medium pl-2"},XV={class:"mb-4 sm:mb-0 sm:mr-3 field flex flex-col w-full"},ZV=g("label",{for:"last-name",class:"font-bold text-xs mb-1"},"Apellidos*",-1),e2={key:0,class:"text-xs text-red-700 font-medium pl-2"},t2={class:"field flex flex-col w-full"},n2=g("label",{for:"phone",class:"font-bold text-xs mb-1"},"Teléfono*",-1),r2={key:0,class:"text-xs text-red-700 font-medium pl-2"},s2={class:"mb-4 w-11/12 mx-5 p-5 flex flex-col justify-center items-start bg-rose-100 px-4 py-5 drop-shadow-md"},i2={class:"flex flex-row justify-between items-center w-full mb-6"},o2=g("h2",{class:"text-lg text-left font-bold text-blue-700"},"Información de tus automóviles",-1),a2=g("i",{class:"fas fa-plus"},null,-1),l2={class:"flex flex-col justify-between items-center w-full bg-rose-50 px-2 py-2"},c2={class:"w-full flex flex-row justify-between items-center mb-4"},u2={class:"text-xl text-left text-blue-700 font-black"},h2=["onClick"],d2=g("i",{class:"fas fa-trash"},null,-1),f2={class:"w-full flex sm:flex-row flex-col justify-between items-baseline"},p2={class:"field flex flex-col mb-2 w-full mr-1"},m2=g("label",{for:"brand",class:"font-bold text-xs mb-1"},"Marca",-1),g2=["onUpdate:modelValue"],_2={key:0,class:"text-xs text-red-700 font-medium pl-2"},y2={class:"field flex flex-col mb-2 w-full ml-1"},v2=g("label",{for:"model",class:"font-bold text-xs mb-1"},"Modelo",-1),w2=["onUpdate:modelValue"],E2={key:0,class:"text-xs text-red-700 font-medium pl-2"},b2={class:"w-full flex sm:flex-row flex-col justify-between items-baseline"},T2={class:"field flex flex-col mb-2 w-full mr-1"},I2=g("label",{for:"year",class:"font-bold text-xs mb-1"},"Año",-1),A2=["onUpdate:modelValue"],S2={key:0,class:"text-xs text-red-700 font-medium pl-2"},R2={class:"field flex flex-col mb-2 w-full mr-1 ml-1"},C2=g("label",{for:"mileage",class:"font-bold text-xs mb-1"},"Kilometraje Actual",-1),x2=["onUpdate:modelValue"],P2={key:0,class:"text-xs text-red-700 font-medium pl-2"},k2={class:"field flex flex-col mb-2 w-full ml-1"},O2=g("label",{for:"fuel-type",class:"font-bold text-xs mb-1"},"Tipo de Combustible",-1),N2=["onUpdate:modelValue"],D2=g("option",{value:"gasolina"},"Gasolina",-1),V2=g("option",{value:"gnv"},"GNV",-1),M2=g("option",{value:"glp"},"GLP",-1),L2=g("option",{value:"diesel"},"Diésel",-1),F2=g("option",{value:"hibrido"},"Híbrido",-1),$2=[D2,V2,M2,L2,F2],U2={key:0,class:"text-xs text-red-700 font-medium pl-2"},j2={class:"w-full flex sm:flex-row flex-col justify-between items-baseline"},B2={class:"field flex flex-col mb-2 w-full mr-1"},q2=g("label",{for:"soat-expiry",class:"font-bold text-xs mb-1"},"Fecha vencimiento SOAT",-1),z2=["onUpdate:modelValue"],H2={key:0,class:"text-xs text-red-700 font-medium pl-2"},W2={key:0,class:"field flex flex-col mb-2 w-full mr-1 ml-1"},K2=g("label",{for:"annual-inspection",class:"font-bold text-xs mb-1"},"Fecha certificación técnica anual",-1),G2=["onUpdate:modelValue"],Q2={key:0,class:"text-xs text-red-700 font-medium pl-2"},Y2={class:"field flex flex-col mb-2 w-full ml-1"},J2=g("label",{for:"technical-inspection",class:"font-bold text-xs mb-1"},"Fecha revisión técnica anual",-1),X2=["onUpdate:modelValue"],Z2={key:0,class:"text-xs text-red-700 font-medium pl-2"},eM={key:0,class:"h-0.5 w-full my-8 bg-sky-50"},tM=["disabled"],nM=At({__name:"Profile",setup(t){const e=vs(),n=Un(),r=hw(),s=oi(),i=ye(!1);wo(()=>{e.isAuthenticated||s.push({name:"Home"})});async function o(){n.handleSubmit(()=>{i.value=!0})()}async function a(){n.handleSubmit(async l=>(e.setIsLoading(!0),await n.updateUser({firstName:l.firstName,lastName:l.lastName,phone:l.phone,cars:l.cars}).then(()=>{e.setIsLoading(!1),r.setShowAlert(!0)})),()=>{e.setIsLoading(!1)})()}return(l,c)=>(X(),ht(Jd,null,{default:Ot(()=>[g("div",UV,[i.value?(X(),ht(pi,{key:0,onCloseModal:c[1]||(c[1]=u=>i.value=!1),width:"w-1/3",height:"h-1/3",showCloseIcon:!0},{default:Ot(()=>[g("div",jV,[BV,g("span",qV,[g("button",{type:"button",class:"mr-5 hover:opacity-80 hover:border-blue-700 border-gray-200 border-2 cursor-pointer rounded-lg text-blue-700 py-2 px-6 font-black text-xs",onClick:c[0]||(c[0]=u=>i.value=!1)},"CANCELAR"),g("button",{type:"button",class:"hover:opacity-80 cursor-pointer rounded-lg text-white bg-blue-700 py-2 px-6 font-black text-xs",onClick:a},"GUARDAR")])])]),_:1})):Ve("",!0),zV,HV,g("form",WV,[KV,g("span",GV,[g("div",QV,[YV,ct(g("input",{id:"first-name","onUpdate:modelValue":c[2]||(c[2]=u=>w(n).firstName=u),type:"text",placeholder:"Ingresa tu nombre",class:Fe(["pl-2 rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors.firstName}]),style:{outline:"none"}},null,2),[[$t,w(n).firstName]]),w(n).meta.touched&&w(n).errors.firstName?(X(),ue("p",JV,Me(w(n).errors.firstName),1)):Ve("",!0)]),g("div",XV,[ZV,ct(g("input",{id:"last-name","onUpdate:modelValue":c[3]||(c[3]=u=>w(n).lastName=u),type:"text",placeholder:"Ingresa tus apellidos",class:Fe(["pl-2 rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors.lastName}]),style:{outline:"none"}},null,2),[[$t,w(n).lastName]]),w(n).meta.touched&&w(n).errors.lastName?(X(),ue("p",e2,Me(w(n).errors.lastName),1)):Ve("",!0)]),g("div",t2,[n2,ct(g("input",{id:"phone","onUpdate:modelValue":c[4]||(c[4]=u=>w(n).phone=u),type:"tel",placeholder:"Ingresa tu número de teléfono",class:Fe(["pl-2 rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors.phone}]),style:{outline:"none"}},null,2),[[$t,w(n).phone]]),w(n).meta.touched&&w(n).errors.phone?(X(),ue("p",r2,Me(w(n).errors.phone),1)):Ve("",!0)])])]),g("form",s2,[g("span",i2,[o2,g("button",{type:"button",onClick:c[5]||(c[5]=(...u)=>w(n).addCar&&w(n).addCar(...u)),class:"pointer-default hover:opacity-90 border-2 hover:border-blue-700 hover:bg-blue-100 hover:text-blue-700 text-blue-100 bg-blue-700 font-bold rounded-md px-4 py-1"},[Nt("Agregar automóvil "),a2])]),Be(Ob,{name:"fade",tag:"ul",class:"w-full"},{default:Ot(()=>[(X(!0),ue(rt,null,wl(w(n).cars,(u,h)=>(X(),ue("li",{key:u.key,class:"flex flex-col justify-between items-center w-full"},[g("span",l2,[g("span",c2,[g("p",u2,"AUTO N° "+Me(h+1),1),g("button",{type:"button",onClick:d=>w(n).deleteCar(h),class:"ml-4 px-2 rounded-md text-md font-black hover:opacity-90 hover:bg-blue-700 hover:text-blue-100 text-blue-700 bg-blue-100"},[Nt("Quitar automóvil "),d2],8,h2)]),g("span",f2,[g("div",p2,[m2,ct(g("input",{id:"brand","onUpdate:modelValue":d=>u.value.brand=d,type:"text",placeholder:"Ejemplo: Toyota, Honda, etc.",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.brand`]}]),style:{outline:"none"}},null,10,g2),[[$t,u.value.brand]]),w(n).meta.touched&&w(n).errors[`cars.${h}.brand`]?(X(),ue("p",_2,Me(w(n).errors[`cars.${h}.brand`]),1)):Ve("",!0)]),g("div",y2,[v2,ct(g("input",{id:"model","onUpdate:modelValue":d=>u.value.model=d,type:"text",placeholder:"Ejemplo: Corolla, Civic, etc.",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.model`]}]),style:{outline:"none"}},null,10,w2),[[$t,u.value.model]]),w(n).meta.touched&&w(n).errors[`cars.${h}.model`]?(X(),ue("p",E2,Me(w(n).errors[`cars[${h}].model`]),1)):Ve("",!0)])]),g("span",b2,[g("div",T2,[I2,ct(g("input",{id:"year","onUpdate:modelValue":d=>u.value.year=d,type:"number",placeholder:"Ejemplo: 2022",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars[${h}].year`]}]),style:{outline:"none"}},null,10,A2),[[$t,u.value.year]]),w(n).meta.touched&&w(n).errors[`cars.${h}.year`]?(X(),ue("p",S2,Me(w(n).errors[`cars[${h}].year`]),1)):Ve("",!0)]),g("div",R2,[C2,ct(g("input",{id:"mileage","onUpdate:modelValue":d=>u.value.mileage=d,type:"number",placeholder:"Ejemplo: 50000",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.mileage`]}]),style:{outline:"none"}},null,10,x2),[[$t,u.value.mileage]]),w(n).meta.touched&&w(n).errors[`cars.${h}.mileage`]?(X(),ue("p",P2,Me(w(n).errors[`cars.${h}.mileage`]),1)):Ve("",!0)]),g("div",k2,[O2,ct(g("select",{id:"fuel-type","onUpdate:modelValue":d=>u.value.fuelType=d,class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.fuelType`]}]),style:{outline:"none"}},$2,10,N2),[[yu,u.value.fuelType]]),w(n).meta.touched&&w(n).errors[`cars.${h}.fuelType`]?(X(),ue("p",U2,Me(w(n).errors[`cars[${h}].fuelType`]),1)):Ve("",!0)])]),g("span",j2,[g("div",B2,[q2,ct(g("input",{id:"soat-expiry","onUpdate:modelValue":d=>u.value.soatExpiry=d,type:"date",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.soatExpiry`]}]),style:{outline:"none"}},null,10,z2),[[$t,u.value.soatExpiry]]),w(n).meta.touched&&w(n).errors[`cars.${h}.soatExpiry`]?(X(),ue("p",H2,Me(w(n).errors[`cars.${h}.soatExpiry`]),1)):Ve("",!0)]),["gnv","glp"].includes(u.value.fuelType)?(X(),ue("div",W2,[K2,ct(g("input",{id:"annual-inspection","onUpdate:modelValue":d=>u.value.annualCertification=d,type:"date",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.annualCertification`]}]),style:{outline:"none"}},null,10,G2),[[$t,u.value.annualCertification]]),w(n).meta.touched&&w(n).errors[`cars.${h}.annualCertification`]?(X(),ue("p",Q2,Me(w(n).errors[`cars.${h}.annualCertification`]),1)):Ve("",!0)])):Ve("",!0),g("div",Y2,[J2,ct(g("input",{id:"technical-inspection","onUpdate:modelValue":d=>u.value.annualTechnicalInspection=d,type:"date",class:Fe(["pl-2 bg-white rounded-md",{"border-red-400 border-2 rounded-xs":w(n).meta.touched&&w(n).errors[`cars.${h}.annualTechnicalInspection`]}]),style:{outline:"none"}},null,10,X2),[[$t,u.value.annualTechnicalInspection]]),w(n).meta.touched&&w(n).errors[`cars.${h}.annualTechnicalInspection`]?(X(),ue("p",Z2,Me(w(n).errors[`cars.${h}.annualTechnicalInspection`]),1)):Ve("",!0)])])]),h!=w(n).cars.length-1&&w(n).cars.length>0?(X(),ue("div",eM)):Ve("",!0)]))),128))]),_:1})]),g("button",{disabled:w(n).isSubmitting,type:"button",onClick:o,class:"w-11/12 flex flex-row justify-center items-center mx-5 mb-3 p-1 rounded-md bg-blue-700 hover:opacity-80 text-blue-50 font-bold"},Me(w(n).isSubmitting?"ENVIANDO...":"GUARDAR"),9,tM)])]),_:1}))}}),rM=XT({history:CT("/"),routes:[{path:"/",name:"Home",redirect:"/all-services"},{path:"/all-services",name:"AllServices",component:kV},{path:"/car-wash-services",name:"CarWashServices",component:$V},{path:"/profile",name:"Profile",component:nM}]}),Xd=Bb(xN);Xd.use(Wb());Xd.use(rM);Xd.mount("#app");
