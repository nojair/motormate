(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mu(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Ue={},ys=[],Yt=()=>{},I0=()=>!1,za=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Lu=t=>t.startsWith("onUpdate:"),mt=Object.assign,Fu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b0=Object.prototype.hasOwnProperty,be=(t,e)=>b0.call(t,e),te=Array.isArray,vs=t=>to(t)==="[object Map]",Ha=t=>to(t)==="[object Set]",Sd=t=>to(t)==="[object Date]",ue=t=>typeof t=="function",et=t=>typeof t=="string",pr=t=>typeof t=="symbol",Le=t=>t!==null&&typeof t=="object",Em=t=>(Le(t)||ue(t))&&ue(t.then)&&ue(t.catch),wm=Object.prototype.toString,to=t=>wm.call(t),A0=t=>to(t).slice(8,-1),Tm=t=>to(t)==="[object Object]",Uu=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fi=Mu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},R0=/-(\w)/g,Rn=Wa(t=>t.replace(R0,(e,n)=>n?n.toUpperCase():"")),S0=/\B([A-Z])/g,qs=Wa(t=>t.replace(S0,"-$1").toLowerCase()),Ka=Wa(t=>t.charAt(0).toUpperCase()+t.slice(1)),tc=Wa(t=>t?`on${Ka(t)}`:""),mr=(t,e)=>!Object.is(t,e),Go=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ca=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Pi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Cd;const Im=()=>Cd||(Cd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $u(t){if(te(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=et(r)?O0(r):$u(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(et(t)||Le(t))return t}const C0=/;(?![^(]*\))/g,P0=/:([^]+)/,x0=/\/\*[^]*?\*\//g;function O0(t){const e={};return t.replace(x0,"").split(C0).forEach(n=>{if(n){const r=n.split(P0);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Jt(t){let e="";if(et(t))e=t;else if(te(t))for(let n=0;n<t.length;n++){const r=Jt(t[n]);r&&(e+=r+" ")}else if(Le(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const k0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",D0=Mu(k0);function bm(t){return!!t||t===""}function N0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ga(t[r],e[r]);return n}function Ga(t,e){if(t===e)return!0;let n=Sd(t),r=Sd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=pr(t),r=pr(e),n||r)return t===e;if(n=te(t),r=te(e),n||r)return n&&r?N0(t,e):!1;if(n=Le(t),r=Le(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ga(t[o],e[o]))return!1}}return String(t)===String(e)}function V0(t,e){return t.findIndex(n=>Ga(n,e))}const zt=t=>et(t)?t:t==null?"":te(t)||Le(t)&&(t.toString===wm||!ue(t.toString))?JSON.stringify(t,Am,2):String(t),Am=(t,e)=>e&&e.__v_isRef?Am(t,e.value):vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[nc(r,i)+" =>"]=s,n),{})}:Ha(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>nc(n))}:pr(e)?nc(e):Le(e)&&!te(e)&&!Tm(e)?String(e):e,nc=(t,e="")=>{var n;return pr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qt;class Rm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=qt,!e&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=qt;try{return qt=this,e()}finally{qt=n}}}on(){qt=this}off(){qt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Sm(t){return new Rm(t)}function M0(t,e=qt){e&&e.active&&e.effects.push(t)}function Cm(){return qt}function L0(t){qt&&qt.cleanups.push(t)}let jr;class ju{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,M0(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,es();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(F0(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ts()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ar,n=jr;try{return ar=!0,jr=this,this._runnings++,Pd(this),this.fn()}finally{xd(this),this._runnings--,jr=n,ar=e}}stop(){var e;this.active&&(Pd(this),xd(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function F0(t){return t.value}function Pd(t){t._trackId++,t._depsLength=0}function xd(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Pm(t.deps[e],t);t.deps.length=t._depsLength}}function Pm(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ar=!0,Lc=0;const xm=[];function es(){xm.push(ar),ar=!1}function ts(){const t=xm.pop();ar=t===void 0?!0:t}function Bu(){Lc++}function qu(){for(Lc--;!Lc&&Fc.length;)Fc.shift()()}function Om(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&Pm(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Fc=[];function km(t,e,n){Bu();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Fc.push(r.scheduler)))}qu()}const Dm=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},ua=new WeakMap,Br=Symbol(""),Uc=Symbol("");function $t(t,e,n){if(ar&&jr){let r=ua.get(t);r||ua.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Dm(()=>r.delete(n))),Om(jr,s)}}function Un(t,e,n,r,s,i){const o=ua.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&te(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!pr(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":te(t)?Uu(n)&&a.push(o.get("length")):(a.push(o.get(Br)),vs(t)&&a.push(o.get(Uc)));break;case"delete":te(t)||(a.push(o.get(Br)),vs(t)&&a.push(o.get(Uc)));break;case"set":vs(t)&&a.push(o.get(Br));break}Bu();for(const l of a)l&&km(l,4);qu()}function U0(t,e){var n;return(n=ua.get(t))==null?void 0:n.get(e)}const $0=Mu("__proto__,__v_isRef,__isVue"),Nm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pr)),Od=j0();function j0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ae(this);for(let i=0,o=this.length;i<o;i++)$t(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Ae)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){es(),Bu();const r=Ae(this)[e].apply(this,n);return qu(),ts(),r}}),t}function B0(t){const e=Ae(this);return $t(e,"has",t),e.hasOwnProperty(t)}class Vm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?tE:Um:i?Fm:Lm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=te(e);if(!s){if(o&&be(Od,n))return Reflect.get(Od,n,r);if(n==="hasOwnProperty")return B0}const a=Reflect.get(e,n,r);return(pr(n)?Nm.has(n):$0(n))||(s||$t(e,"get",n),i)?a:Ke(a)?o&&Uu(n)?a:a.value:Le(a)?s?Wu(a):jn(a):a}}class Mm extends Vm{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Cs(i);if(!ha(r)&&!Cs(r)&&(i=Ae(i),r=Ae(r)),!te(e)&&Ke(i)&&!Ke(r))return l?!1:(i.value=r,!0)}const o=te(e)&&Uu(n)?Number(n)<e.length:be(e,n),a=Reflect.set(e,n,r,s);return e===Ae(s)&&(o?mr(r,i)&&Un(e,"set",n,r):Un(e,"add",n,r)),a}deleteProperty(e,n){const r=be(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Un(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!pr(n)||!Nm.has(n))&&$t(e,"has",n),r}ownKeys(e){return $t(e,"iterate",te(e)?"length":Br),Reflect.ownKeys(e)}}class q0 extends Vm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const z0=new Mm,H0=new q0,W0=new Mm(!0),zu=t=>t,Qa=t=>Reflect.getPrototypeOf(t);function So(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ae(t),i=Ae(e);n||(mr(e,i)&&$t(s,"get",e),$t(s,"get",i));const{has:o}=Qa(s),a=r?zu:n?Gu:xi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Co(t,e=!1){const n=this.__v_raw,r=Ae(n),s=Ae(t);return e||(mr(t,s)&&$t(r,"has",t),$t(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Po(t,e=!1){return t=t.__v_raw,!e&&$t(Ae(t),"iterate",Br),Reflect.get(t,"size",t)}function kd(t){t=Ae(t);const e=Ae(this);return Qa(e).has.call(e,t)||(e.add(t),Un(e,"add",t,t)),this}function Dd(t,e){e=Ae(e);const n=Ae(this),{has:r,get:s}=Qa(n);let i=r.call(n,t);i||(t=Ae(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?mr(e,o)&&Un(n,"set",t,e):Un(n,"add",t,e),this}function Nd(t){const e=Ae(this),{has:n,get:r}=Qa(e);let s=n.call(e,t);s||(t=Ae(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Un(e,"delete",t,void 0),i}function Vd(){const t=Ae(this),e=t.size!==0,n=t.clear();return e&&Un(t,"clear",void 0,void 0),n}function xo(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Ae(o),l=e?zu:t?Gu:xi;return!t&&$t(a,"iterate",Br),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Oo(t,e,n){return function(...r){const s=this.__v_raw,i=Ae(s),o=vs(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?zu:e?Gu:xi;return!e&&$t(i,"iterate",l?Uc:Br),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Kn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function K0(){const t={get(i){return So(this,i)},get size(){return Po(this)},has:Co,add:kd,set:Dd,delete:Nd,clear:Vd,forEach:xo(!1,!1)},e={get(i){return So(this,i,!1,!0)},get size(){return Po(this)},has:Co,add:kd,set:Dd,delete:Nd,clear:Vd,forEach:xo(!1,!0)},n={get(i){return So(this,i,!0)},get size(){return Po(this,!0)},has(i){return Co.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:xo(!0,!1)},r={get(i){return So(this,i,!0,!0)},get size(){return Po(this,!0)},has(i){return Co.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:xo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Oo(i,!1,!1),n[i]=Oo(i,!0,!1),e[i]=Oo(i,!1,!0),r[i]=Oo(i,!0,!0)}),[t,n,e,r]}const[G0,Q0,Y0,J0]=K0();function Hu(t,e){const n=e?t?J0:Y0:t?Q0:G0;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const X0={get:Hu(!1,!1)},Z0={get:Hu(!1,!0)},eE={get:Hu(!0,!1)},Lm=new WeakMap,Fm=new WeakMap,Um=new WeakMap,tE=new WeakMap;function nE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rE(t){return t.__v_skip||!Object.isExtensible(t)?0:nE(A0(t))}function jn(t){return Cs(t)?t:Ku(t,!1,z0,X0,Lm)}function $m(t){return Ku(t,!1,W0,Z0,Fm)}function Wu(t){return Ku(t,!0,H0,eE,Um)}function Ku(t,e,n,r,s){if(!Le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=rE(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function lr(t){return Cs(t)?lr(t.__v_raw):!!(t&&t.__v_isReactive)}function Cs(t){return!!(t&&t.__v_isReadonly)}function ha(t){return!!(t&&t.__v_isShallow)}function jm(t){return lr(t)||Cs(t)}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function Ya(t){return Object.isExtensible(t)&&ca(t,"__v_skip",!0),t}const xi=t=>Le(t)?jn(t):t,Gu=t=>Le(t)?Wu(t):t;class Bm{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ju(()=>e(this._value),()=>Qo(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Ae(this);return(!e._cacheable||e.effect.dirty)&&mr(e._value,e._value=e.effect.run())&&Qo(e,4),qm(e),e.effect._dirtyLevel>=2&&Qo(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function sE(t,e,n=!1){let r,s;const i=ue(t);return i?(r=t,s=Yt):(r=t.get,s=t.set),new Bm(r,s,i||!s,n)}function qm(t){var e;ar&&jr&&(t=Ae(t),Om(jr,(e=t.dep)!=null?e:t.dep=Dm(()=>t.dep=void 0,t instanceof Bm?t:void 0)))}function Qo(t,e=4,n){t=Ae(t);const r=t.dep;r&&km(r,e)}function Ke(t){return!!(t&&t.__v_isRef===!0)}function pe(t){return Hm(t,!1)}function zm(t){return Hm(t,!0)}function Hm(t,e){return Ke(t)?t:new iE(t,e)}class iE{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ae(e),this._value=n?e:xi(e)}get value(){return qm(this),this._value}set value(e){const n=this.__v_isShallow||ha(e)||Cs(e);e=n?e:Ae(e),mr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:xi(e),Qo(this,4))}}function q(t){return Ke(t)?t.value:t}function Rt(t){return ue(t)?t():q(t)}const oE={get:(t,e,n)=>q(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ke(s)&&!Ke(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Wm(t){return lr(t)?t:new Proxy(t,oE)}function aE(t){const e=te(t)?new Array(t.length):{};for(const n in t)e[n]=cE(t,n);return e}class lE{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return U0(Ae(this._object),this._key)}}function cE(t,e,n){const r=t[e];return Ke(r)?r:new lE(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cr(t,e,n,r){try{return r?t(...r):t()}catch(s){Ja(s,e,n)}}function sn(t,e,n,r){if(ue(t)){const i=cr(t,e,n,r);return i&&Em(i)&&i.catch(o=>{Ja(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(sn(t[i],e,n,r));return s}function Ja(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){cr(l,null,10,[t,o,a]);return}}uE(t,n,s,r)}function uE(t,e,n,r=!0){console.error(t)}let Oi=!1,$c=!1;const Et=[];let mn=0;const Es=[];let Xn=null,xr=0;const Km=Promise.resolve();let Qu=null;function Lt(t){const e=Qu||Km;return t?e.then(this?t.bind(this):t):e}function hE(t){let e=mn+1,n=Et.length;for(;e<n;){const r=e+n>>>1,s=Et[r],i=ki(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function Yu(t){(!Et.length||!Et.includes(t,Oi&&t.allowRecurse?mn+1:mn))&&(t.id==null?Et.push(t):Et.splice(hE(t.id),0,t),Gm())}function Gm(){!Oi&&!$c&&($c=!0,Qu=Km.then(Ym))}function dE(t){const e=Et.indexOf(t);e>mn&&Et.splice(e,1)}function fE(t){te(t)?Es.push(...t):(!Xn||!Xn.includes(t,t.allowRecurse?xr+1:xr))&&Es.push(t),Gm()}function Md(t,e,n=Oi?mn+1:0){for(;n<Et.length;n++){const r=Et[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Et.splice(n,1),n--,r()}}}function Qm(t){if(Es.length){const e=[...new Set(Es)].sort((n,r)=>ki(n)-ki(r));if(Es.length=0,Xn){Xn.push(...e);return}for(Xn=e,xr=0;xr<Xn.length;xr++)Xn[xr]();Xn=null,xr=0}}const ki=t=>t.id==null?1/0:t.id,pE=(t,e)=>{const n=ki(t)-ki(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Ym(t){$c=!1,Oi=!0,Et.sort(pE);try{for(mn=0;mn<Et.length;mn++){const e=Et[mn];e&&e.active!==!1&&cr(e,null,14)}}finally{mn=0,Et.length=0,Qm(),Oi=!1,Qu=null,(Et.length||Es.length)&&Ym()}}function mE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ue;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||Ue;d&&(s=n.map(p=>et(p)?p.trim():p)),h&&(s=n.map(Pi))}let a,l=r[a=tc(e)]||r[a=tc(Rn(e))];!l&&i&&(l=r[a=tc(qs(e))]),l&&sn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,sn(c,t,6,s)}}function Jm(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!ue(t)){const l=c=>{const u=Jm(c,e,!0);u&&(a=!0,mt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Le(t)&&r.set(t,null),null):(te(i)?i.forEach(l=>o[l]=null):mt(o,i),Le(t)&&r.set(t,o),o)}function Xa(t,e){return!t||!za(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,qs(e))||be(t,e))}let Xe=null,Xm=null;function da(t){const e=Xe;return Xe=t,Xm=t&&t.type.__scopeId||null,e}function Xt(t,e=Xe,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Kd(-1);const i=da(e);let o;try{o=t(...s)}finally{da(i),r._d&&Kd(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function rc(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:p,ctx:E,inheritAttrs:T}=t;let w,x;const D=da(t);try{if(n.shapeFlag&4){const N=s||r,H=N;w=pn(u.call(H,N,h,i,p,d,E)),x=l}else{const N=e;w=pn(N.length>1?N(i,{attrs:l,slots:a,emit:c}):N(i,null)),x=e.props?l:gE(l)}}catch(N){_i.length=0,Ja(N,t,1),w=Be(gr)}let L=w;if(x&&T!==!1){const N=Object.keys(x),{shapeFlag:H}=L;N.length&&H&7&&(o&&N.some(Lu)&&(x=_E(x,o)),L=Ps(L,x))}return n.dirs&&(L=Ps(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),w=L,da(D),w}const gE=t=>{let e;for(const n in t)(n==="class"||n==="style"||za(n))&&((e||(e={}))[n]=t[n]);return e},_E=(t,e)=>{const n={};for(const r in t)(!Lu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function yE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Ld(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Xa(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Ld(r,o,c):!0:!!o;return!1}function Ld(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Xa(n,i))return!0}return!1}function vE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zm="components";function eg(t,e){return wE(Zm,t,!0,e)||t}const EE=Symbol.for("v-ndc");function wE(t,e,n=!0,r=!1){const s=Xe||ht;if(s){const i=s.type;if(t===Zm){const a=mw(i,!1);if(a&&(a===e||a===Rn(e)||a===Ka(Rn(e))))return i}const o=Fd(s[t]||i[t],e)||Fd(s.appContext[t],e);return!o&&r?i:o}}function Fd(t,e){return t&&(t[e]||t[Rn(e)]||t[Ka(Rn(e))])}const TE=t=>t.__isSuspense;function IE(t,e){e&&e.pendingBranch?te(t)?e.effects.push(...t):e.effects.push(t):fE(t)}const bE=Symbol.for("v-scx"),AE=()=>on(bE);function RE(t,e){return Ju(t,null,e)}const ko={};function qr(t,e,n){return Ju(t,e,n)}function Ju(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Ue){if(e&&i){const B=e;e=(...me)=>{B(...me),H()}}const l=ht,c=B=>r===!0?B:Dr(B,r===!1?1:void 0);let u,h=!1,d=!1;if(Ke(t)?(u=()=>t.value,h=ha(t)):lr(t)?(u=()=>c(t),h=!0):te(t)?(d=!0,h=t.some(B=>lr(B)||ha(B)),u=()=>t.map(B=>{if(Ke(B))return B.value;if(lr(B))return c(B);if(ue(B))return cr(B,l,2)})):ue(t)?e?u=()=>cr(t,l,2):u=()=>(p&&p(),sn(t,l,3,[E])):u=Yt,e&&r){const B=u;u=()=>Dr(B())}let p,E=B=>{p=L.onStop=()=>{cr(B,l,4),p=L.onStop=void 0}},T;if(rl)if(E=Yt,e?n&&sn(e,l,3,[u(),d?[]:void 0,E]):u(),s==="sync"){const B=AE();T=B.__watcherHandles||(B.__watcherHandles=[])}else return Yt;let w=d?new Array(t.length).fill(ko):ko;const x=()=>{if(!(!L.active||!L.dirty))if(e){const B=L.run();(r||h||(d?B.some((me,ne)=>mr(me,w[ne])):mr(B,w)))&&(p&&p(),sn(e,l,3,[B,w===ko?void 0:d&&w[0]===ko?[]:w,E]),w=B)}else L.run()};x.allowRecurse=!!e;let D;s==="sync"?D=x:s==="post"?D=()=>Vt(x,l&&l.suspense):(x.pre=!0,l&&(x.id=l.uid),D=()=>Yu(x));const L=new ju(u,Yt,D),N=Cm(),H=()=>{L.stop(),N&&Fu(N.effects,L)};return e?n?x():w=L.run():s==="post"?Vt(L.run.bind(L),l&&l.suspense):L.run(),T&&T.push(H),H}function SE(t,e,n){const r=this.proxy,s=et(t)?t.includes(".")?tg(r,t):()=>r[t]:t.bind(r,r);let i;ue(e)?i=e:(i=e.handler,n=e);const o=no(this),a=Ju(s,i.bind(r),n);return o(),a}function tg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Dr(t,e,n=0,r){if(!Le(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),Ke(t))Dr(t.value,e,n,r);else if(te(t))for(let s=0;s<t.length;s++)Dr(t[s],e,n,r);else if(Ha(t)||vs(t))t.forEach(s=>{Dr(s,e,n,r)});else if(Tm(t))for(const s in t)Dr(t[s],e,n,r);return t}function Ct(t,e){if(Xe===null)return t;const n=sl(Xe)||Xe.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Ue]=e[s];i&&(ue(i)&&(i={mounted:i,updated:i}),i.deep&&Dr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Sr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(es(),sn(l,n,8,[t.el,a,t,e]),ts())}}/*! #__NO_SIDE_EFFECTS__ */function Ot(t,e){return ue(t)?mt({name:t.name},e,{setup:t}):t}const pi=t=>!!t.type.__asyncLoader,ng=t=>t.type.__isKeepAlive;function CE(t,e){rg(t,"a",e)}function PE(t,e){rg(t,"da",e)}function rg(t,e,n=ht){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Za(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ng(s.parent.vnode)&&xE(r,e,n,s),s=s.parent}}function xE(t,e,n,r){const s=Za(e,t,r,!0);sg(()=>{Fu(r[e],s)},n)}function Za(t,e,n=ht,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;es();const a=no(n),l=sn(e,n,t,o);return a(),ts(),l});return r?s.unshift(i):s.push(i),i}}const Hn=t=>(e,n=ht)=>(!rl||t==="sp")&&Za(t,(...r)=>e(...r),n),OE=Hn("bm"),el=Hn("m"),kE=Hn("bu"),DE=Hn("u"),NE=Hn("bum"),sg=Hn("um"),VE=Hn("sp"),ME=Hn("rtg"),LE=Hn("rtc");function FE(t,e=ht){Za("ec",t,e)}function Xu(t,e,n,r){let s;const i=n&&n[r];if(te(t)||et(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Le(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function ig(t,e,n={},r,s){if(Xe.isCE||Xe.parent&&pi(Xe.parent)&&Xe.parent.isCE)return e!=="default"&&(n.name=e),Be("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),re();const o=i&&og(i(n)),a=It(Pt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function og(t){return t.some(e=>pa(e)?!(e.type===gr||e.type===Pt&&!og(e.children)):!0)?t:null}const jc=t=>t?yg(t)?sl(t)||t.proxy:jc(t.parent):null,mi=mt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jc(t.parent),$root:t=>jc(t.root),$emit:t=>t.emit,$options:t=>Zu(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Yu(t.update)}),$nextTick:t=>t.n||(t.n=Lt.bind(t.proxy)),$watch:t=>SE.bind(t)}),sc=(t,e)=>t!==Ue&&!t.__isScriptSetup&&be(t,e),UE={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(sc(r,e))return o[e]=1,r[e];if(s!==Ue&&be(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&be(c,e))return o[e]=3,i[e];if(n!==Ue&&be(n,e))return o[e]=4,n[e];Bc&&(o[e]=0)}}const u=mi[e];let h,d;if(u)return e==="$attrs"&&$t(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ue&&be(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,be(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return sc(s,e)?(s[e]=n,!0):r!==Ue&&be(r,e)?(r[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Ue&&be(t,o)||sc(e,o)||(a=i[0])&&be(a,o)||be(r,o)||be(mi,o)||be(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ud(t){return te(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Bc=!0;function $E(t){const e=Zu(t),n=t.proxy,r=t.ctx;Bc=!1,e.beforeCreate&&$d(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:E,activated:T,deactivated:w,beforeDestroy:x,beforeUnmount:D,destroyed:L,unmounted:N,render:H,renderTracked:B,renderTriggered:me,errorCaptured:ne,serverPrefetch:ee,expose:de,inheritAttrs:fe,components:qe,directives:at,filters:jt}=e;if(c&&jE(c,r,null),o)for(const Pe in o){const _e=o[Pe];ue(_e)&&(r[Pe]=_e.bind(n))}if(s){const Pe=s.call(n,n);Le(Pe)&&(t.data=jn(Pe))}if(Bc=!0,i)for(const Pe in i){const _e=i[Pe],kt=ue(_e)?_e.bind(n,n):ue(_e.get)?_e.get.bind(n,n):Yt,un=!ue(_e)&&ue(_e.set)?_e.set.bind(n):Yt,Bt=De({get:kt,set:un});Object.defineProperty(r,Pe,{enumerable:!0,configurable:!0,get:()=>Bt.value,set:At=>Bt.value=At})}if(a)for(const Pe in a)ag(a[Pe],r,n,Pe);if(l){const Pe=ue(l)?l.call(n):l;Reflect.ownKeys(Pe).forEach(_e=>{gi(_e,Pe[_e])})}u&&$d(u,t,"c");function se(Pe,_e){te(_e)?_e.forEach(kt=>Pe(kt.bind(n))):_e&&Pe(_e.bind(n))}if(se(OE,h),se(el,d),se(kE,p),se(DE,E),se(CE,T),se(PE,w),se(FE,ne),se(LE,B),se(ME,me),se(NE,D),se(sg,N),se(VE,ee),te(de))if(de.length){const Pe=t.exposed||(t.exposed={});de.forEach(_e=>{Object.defineProperty(Pe,_e,{get:()=>n[_e],set:kt=>n[_e]=kt})})}else t.exposed||(t.exposed={});H&&t.render===Yt&&(t.render=H),fe!=null&&(t.inheritAttrs=fe),qe&&(t.components=qe),at&&(t.directives=at)}function jE(t,e,n=Yt){te(t)&&(t=qc(t));for(const r in t){const s=t[r];let i;Le(s)?"default"in s?i=on(s.from||r,s.default,!0):i=on(s.from||r):i=on(s),Ke(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function $d(t,e,n){sn(te(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ag(t,e,n,r){const s=r.includes(".")?tg(n,r):()=>n[r];if(et(t)){const i=e[t];ue(i)&&qr(s,i)}else if(ue(t))qr(s,t.bind(n));else if(Le(t))if(te(t))t.forEach(i=>ag(i,e,n,r));else{const i=ue(t.handler)?t.handler.bind(n):e[t.handler];ue(i)&&qr(s,i,t)}}function Zu(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>fa(l,c,o,!0)),fa(l,e,o)),Le(e)&&i.set(e,l),l}function fa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&fa(t,i,n,!0),s&&s.forEach(o=>fa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=BE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const BE={data:jd,props:Bd,emits:Bd,methods:ii,computed:ii,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:ii,directives:ii,watch:zE,provide:jd,inject:qE};function jd(t,e){return e?t?function(){return mt(ue(t)?t.call(this,this):t,ue(e)?e.call(this,this):e)}:e:t}function qE(t,e){return ii(qc(t),qc(e))}function qc(t){if(te(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function St(t,e){return t?[...new Set([].concat(t,e))]:e}function ii(t,e){return t?mt(Object.create(null),t,e):e}function Bd(t,e){return t?te(t)&&te(e)?[...new Set([...t,...e])]:mt(Object.create(null),Ud(t),Ud(e??{})):e}function zE(t,e){if(!t)return e;if(!e)return t;const n=mt(Object.create(null),t);for(const r in e)n[r]=St(t[r],e[r]);return n}function lg(){return{app:null,config:{isNativeTag:I0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HE=0;function WE(t,e){return function(r,s=null){ue(r)||(r=mt({},r)),s!=null&&!Le(s)&&(s=null);const i=lg(),o=new WeakSet;let a=!1;const l=i.app={_uid:HE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:_w,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&ue(c.install)?(o.add(c),c.install(l,...u)):ue(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const d=Be(r,s);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,sl(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=ws;ws=l;try{return c()}finally{ws=u}}};return l}}let ws=null;function gi(t,e){if(ht){let n=ht.provides;const r=ht.parent&&ht.parent.provides;r===n&&(n=ht.provides=Object.create(r)),n[t]=e}}function on(t,e,n=!1){const r=ht||Xe;if(r||ws){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ws._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ue(e)?e.call(r&&r.proxy):e}}function KE(){return!!(ht||Xe||ws)}function GE(t,e,n,r=!1){const s={},i={};ca(i,nl,1),t.propsDefaults=Object.create(null),cg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:$m(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function QE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ae(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Xa(t.emitsOptions,d))continue;const p=e[d];if(l)if(be(i,d))p!==i[d]&&(i[d]=p,c=!0);else{const E=Rn(d);s[E]=zc(l,a,E,p,t,!1)}else p!==i[d]&&(i[d]=p,c=!0)}}}else{cg(t,e,s,i)&&(c=!0);let u;for(const h in a)(!e||!be(e,h)&&((u=qs(h))===h||!be(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=zc(l,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!be(e,h))&&(delete i[h],c=!0)}c&&Un(t,"set","$attrs")}function cg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(fi(l))continue;const c=e[l];let u;s&&be(s,u=Rn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Xa(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Ae(n),c=a||Ue;for(let u=0;u<i.length;u++){const h=i[u];n[h]=zc(s,l,h,c[h],t,!be(c,h))}}return o}function zc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=be(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ue(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=no(s);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===qs(n))&&(r=!0))}return r}function ug(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!ue(t)){const u=h=>{l=!0;const[d,p]=ug(h,e,!0);mt(o,d),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return Le(t)&&r.set(t,ys),ys;if(te(i))for(let u=0;u<i.length;u++){const h=Rn(i[u]);qd(h)&&(o[h]=Ue)}else if(i)for(const u in i){const h=Rn(u);if(qd(h)){const d=i[u],p=o[h]=te(d)||ue(d)?{type:d}:mt({},d);if(p){const E=Wd(Boolean,p.type),T=Wd(String,p.type);p[0]=E>-1,p[1]=T<0||E<T,(E>-1||be(p,"default"))&&a.push(h)}}}const c=[o,a];return Le(t)&&r.set(t,c),c}function qd(t){return t[0]!=="$"&&!fi(t)}function zd(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Hd(t,e){return zd(t)===zd(e)}function Wd(t,e){return te(e)?e.findIndex(n=>Hd(n,t)):ue(e)&&Hd(e,t)?0:-1}const hg=t=>t[0]==="_"||t==="$stable",eh=t=>te(t)?t.map(pn):[pn(t)],YE=(t,e,n)=>{if(e._n)return e;const r=Xt((...s)=>eh(e(...s)),n);return r._c=!1,r},dg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(hg(s))continue;const i=t[s];if(ue(i))e[s]=YE(s,i,r);else if(i!=null){const o=eh(i);e[s]=()=>o}}},fg=(t,e)=>{const n=eh(e);t.slots.default=()=>n},JE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ae(e),ca(e,"_",n)):dg(e,t.slots={})}else t.slots={},e&&fg(t,e);ca(t.slots,nl,1)},XE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ue;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(mt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,dg(e,s)),o=e}else e&&(fg(t,e),o={default:1});if(i)for(const a in s)!hg(a)&&o[a]==null&&delete s[a]};function Hc(t,e,n,r,s=!1){if(te(t)){t.forEach((d,p)=>Hc(d,e&&(te(e)?e[p]:e),n,r,s));return}if(pi(r)&&!s)return;const i=r.shapeFlag&4?sl(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Ue?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(et(c)?(u[c]=null,be(h,c)&&(h[c]=null)):Ke(c)&&(c.value=null)),ue(l))cr(l,a,12,[o,u]);else{const d=et(l),p=Ke(l);if(d||p){const E=()=>{if(t.f){const T=d?be(h,l)?h[l]:u[l]:l.value;s?te(T)&&Fu(T,i):te(T)?T.includes(i)||T.push(i):d?(u[l]=[i],be(h,l)&&(h[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,be(h,l)&&(h[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};o?(E.id=-1,Vt(E,n)):E()}}}const Vt=IE;function ZE(t){return ew(t)}function ew(t,e){const n=Im();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=Yt,insertStaticContent:E}=t,T=(f,m,v,R=null,b=null,O=null,V=void 0,k=null,M=!!m.dynamicChildren)=>{if(f===m)return;f&&!ei(f,m)&&(R=I(f),At(f,b,O,!0),f=null),m.patchFlag===-2&&(M=!1,m.dynamicChildren=null);const{type:P,ref:z,shapeFlag:X}=m;switch(P){case tl:w(f,m,v,R);break;case gr:x(f,m,v,R);break;case oc:f==null&&D(m,v,R,V);break;case Pt:qe(f,m,v,R,b,O,V,k,M);break;default:X&1?H(f,m,v,R,b,O,V,k,M):X&6?at(f,m,v,R,b,O,V,k,M):(X&64||X&128)&&P.process(f,m,v,R,b,O,V,k,M,G)}z!=null&&b&&Hc(z,f&&f.ref,O,m||f,!m)},w=(f,m,v,R)=>{if(f==null)r(m.el=a(m.children),v,R);else{const b=m.el=f.el;m.children!==f.children&&c(b,m.children)}},x=(f,m,v,R)=>{f==null?r(m.el=l(m.children||""),v,R):m.el=f.el},D=(f,m,v,R)=>{[f.el,f.anchor]=E(f.children,m,v,R,f.el,f.anchor)},L=({el:f,anchor:m},v,R)=>{let b;for(;f&&f!==m;)b=d(f),r(f,v,R),f=b;r(m,v,R)},N=({el:f,anchor:m})=>{let v;for(;f&&f!==m;)v=d(f),s(f),f=v;s(m)},H=(f,m,v,R,b,O,V,k,M)=>{m.type==="svg"?V="svg":m.type==="math"&&(V="mathml"),f==null?B(m,v,R,b,O,V,k,M):ee(f,m,b,O,V,k,M)},B=(f,m,v,R,b,O,V,k)=>{let M,P;const{props:z,shapeFlag:X,transition:Y,dirs:ie}=f;if(M=f.el=o(f.type,O,z&&z.is,z),X&8?u(M,f.children):X&16&&ne(f.children,M,null,R,b,ic(f,O),V,k),ie&&Sr(f,null,R,"created"),me(M,f,f.scopeId,V,R),z){for(const xe in z)xe!=="value"&&!fi(xe)&&i(M,xe,null,z[xe],O,f.children,R,b,Ne);"value"in z&&i(M,"value",null,z.value,O),(P=z.onVnodeBeforeMount)&&dn(P,R,f)}ie&&Sr(f,null,R,"beforeMount");const ge=tw(b,Y);ge&&Y.beforeEnter(M),r(M,m,v),((P=z&&z.onVnodeMounted)||ge||ie)&&Vt(()=>{P&&dn(P,R,f),ge&&Y.enter(M),ie&&Sr(f,null,R,"mounted")},b)},me=(f,m,v,R,b)=>{if(v&&p(f,v),R)for(let O=0;O<R.length;O++)p(f,R[O]);if(b){let O=b.subTree;if(m===O){const V=b.vnode;me(f,V,V.scopeId,V.slotScopeIds,b.parent)}}},ne=(f,m,v,R,b,O,V,k,M=0)=>{for(let P=M;P<f.length;P++){const z=f[P]=k?Zn(f[P]):pn(f[P]);T(null,z,m,v,R,b,O,V,k)}},ee=(f,m,v,R,b,O,V)=>{const k=m.el=f.el;let{patchFlag:M,dynamicChildren:P,dirs:z}=m;M|=f.patchFlag&16;const X=f.props||Ue,Y=m.props||Ue;let ie;if(v&&Cr(v,!1),(ie=Y.onVnodeBeforeUpdate)&&dn(ie,v,m,f),z&&Sr(m,f,v,"beforeUpdate"),v&&Cr(v,!0),P?de(f.dynamicChildren,P,k,v,R,ic(m,b),O):V||_e(f,m,k,null,v,R,ic(m,b),O,!1),M>0){if(M&16)fe(k,m,X,Y,v,R,b);else if(M&2&&X.class!==Y.class&&i(k,"class",null,Y.class,b),M&4&&i(k,"style",X.style,Y.style,b),M&8){const ge=m.dynamicProps;for(let xe=0;xe<ge.length;xe++){const g=ge[xe],_=X[g],A=Y[g];(A!==_||g==="value")&&i(k,g,_,A,b,f.children,v,R,Ne)}}M&1&&f.children!==m.children&&u(k,m.children)}else!V&&P==null&&fe(k,m,X,Y,v,R,b);((ie=Y.onVnodeUpdated)||z)&&Vt(()=>{ie&&dn(ie,v,m,f),z&&Sr(m,f,v,"updated")},R)},de=(f,m,v,R,b,O,V)=>{for(let k=0;k<m.length;k++){const M=f[k],P=m[k],z=M.el&&(M.type===Pt||!ei(M,P)||M.shapeFlag&70)?h(M.el):v;T(M,P,z,null,R,b,O,V,!0)}},fe=(f,m,v,R,b,O,V)=>{if(v!==R){if(v!==Ue)for(const k in v)!fi(k)&&!(k in R)&&i(f,k,v[k],null,V,m.children,b,O,Ne);for(const k in R){if(fi(k))continue;const M=R[k],P=v[k];M!==P&&k!=="value"&&i(f,k,P,M,V,m.children,b,O,Ne)}"value"in R&&i(f,"value",v.value,R.value,V)}},qe=(f,m,v,R,b,O,V,k,M)=>{const P=m.el=f?f.el:a(""),z=m.anchor=f?f.anchor:a("");let{patchFlag:X,dynamicChildren:Y,slotScopeIds:ie}=m;ie&&(k=k?k.concat(ie):ie),f==null?(r(P,v,R),r(z,v,R),ne(m.children||[],v,z,b,O,V,k,M)):X>0&&X&64&&Y&&f.dynamicChildren?(de(f.dynamicChildren,Y,v,b,O,V,k),(m.key!=null||b&&m===b.subTree)&&pg(f,m,!0)):_e(f,m,v,z,b,O,V,k,M)},at=(f,m,v,R,b,O,V,k,M)=>{m.slotScopeIds=k,f==null?m.shapeFlag&512?b.ctx.activate(m,v,R,V,M):jt(m,v,R,b,O,V,M):tt(f,m,M)},jt=(f,m,v,R,b,O,V)=>{const k=f.component=uw(f,R,b);if(ng(f)&&(k.ctx.renderer=G),hw(k),k.asyncDep){if(b&&b.registerDep(k,se),!f.el){const M=k.subTree=Be(gr);x(null,M,m,v)}}else se(k,f,m,v,b,O,V)},tt=(f,m,v)=>{const R=m.component=f.component;if(yE(f,m,v))if(R.asyncDep&&!R.asyncResolved){Pe(R,m,v);return}else R.next=m,dE(R.update),R.effect.dirty=!0,R.update();else m.el=f.el,R.vnode=m},se=(f,m,v,R,b,O,V)=>{const k=()=>{if(f.isMounted){let{next:z,bu:X,u:Y,parent:ie,vnode:ge}=f;{const U=mg(f);if(U){z&&(z.el=ge.el,Pe(f,z,V)),U.asyncDep.then(()=>{f.isUnmounted||k()});return}}let xe=z,g;Cr(f,!1),z?(z.el=ge.el,Pe(f,z,V)):z=ge,X&&Go(X),(g=z.props&&z.props.onVnodeBeforeUpdate)&&dn(g,ie,z,ge),Cr(f,!0);const _=rc(f),A=f.subTree;f.subTree=_,T(A,_,h(A.el),I(A),f,b,O),z.el=_.el,xe===null&&vE(f,_.el),Y&&Vt(Y,b),(g=z.props&&z.props.onVnodeUpdated)&&Vt(()=>dn(g,ie,z,ge),b)}else{let z;const{el:X,props:Y}=m,{bm:ie,m:ge,parent:xe}=f,g=pi(m);if(Cr(f,!1),ie&&Go(ie),!g&&(z=Y&&Y.onVnodeBeforeMount)&&dn(z,xe,m),Cr(f,!0),X&&Ve){const _=()=>{f.subTree=rc(f),Ve(X,f.subTree,f,b,null)};g?m.type.__asyncLoader().then(()=>!f.isUnmounted&&_()):_()}else{const _=f.subTree=rc(f);T(null,_,v,R,f,b,O),m.el=_.el}if(ge&&Vt(ge,b),!g&&(z=Y&&Y.onVnodeMounted)){const _=m;Vt(()=>dn(z,xe,_),b)}(m.shapeFlag&256||xe&&pi(xe.vnode)&&xe.vnode.shapeFlag&256)&&f.a&&Vt(f.a,b),f.isMounted=!0,m=v=R=null}},M=f.effect=new ju(k,Yt,()=>Yu(P),f.scope),P=f.update=()=>{M.dirty&&M.run()};P.id=f.uid,Cr(f,!0),P()},Pe=(f,m,v)=>{m.component=f;const R=f.vnode.props;f.vnode=m,f.next=null,QE(f,m.props,R,v),XE(f,m.children,v),es(),Md(f),ts()},_e=(f,m,v,R,b,O,V,k,M=!1)=>{const P=f&&f.children,z=f?f.shapeFlag:0,X=m.children,{patchFlag:Y,shapeFlag:ie}=m;if(Y>0){if(Y&128){un(P,X,v,R,b,O,V,k,M);return}else if(Y&256){kt(P,X,v,R,b,O,V,k,M);return}}ie&8?(z&16&&Ne(P,b,O),X!==P&&u(v,X)):z&16?ie&16?un(P,X,v,R,b,O,V,k,M):Ne(P,b,O,!0):(z&8&&u(v,""),ie&16&&ne(X,v,R,b,O,V,k,M))},kt=(f,m,v,R,b,O,V,k,M)=>{f=f||ys,m=m||ys;const P=f.length,z=m.length,X=Math.min(P,z);let Y;for(Y=0;Y<X;Y++){const ie=m[Y]=M?Zn(m[Y]):pn(m[Y]);T(f[Y],ie,v,null,b,O,V,k,M)}P>z?Ne(f,b,O,!0,!1,X):ne(m,v,R,b,O,V,k,M,X)},un=(f,m,v,R,b,O,V,k,M)=>{let P=0;const z=m.length;let X=f.length-1,Y=z-1;for(;P<=X&&P<=Y;){const ie=f[P],ge=m[P]=M?Zn(m[P]):pn(m[P]);if(ei(ie,ge))T(ie,ge,v,null,b,O,V,k,M);else break;P++}for(;P<=X&&P<=Y;){const ie=f[X],ge=m[Y]=M?Zn(m[Y]):pn(m[Y]);if(ei(ie,ge))T(ie,ge,v,null,b,O,V,k,M);else break;X--,Y--}if(P>X){if(P<=Y){const ie=Y+1,ge=ie<z?m[ie].el:R;for(;P<=Y;)T(null,m[P]=M?Zn(m[P]):pn(m[P]),v,ge,b,O,V,k,M),P++}}else if(P>Y)for(;P<=X;)At(f[P],b,O,!0),P++;else{const ie=P,ge=P,xe=new Map;for(P=ge;P<=Y;P++){const Te=m[P]=M?Zn(m[P]):pn(m[P]);Te.key!=null&&xe.set(Te.key,P)}let g,_=0;const A=Y-ge+1;let U=!1,Z=0;const Q=new Array(A);for(P=0;P<A;P++)Q[P]=0;for(P=ie;P<=X;P++){const Te=f[P];if(_>=A){At(Te,b,O,!0);continue}let Re;if(Te.key!=null)Re=xe.get(Te.key);else for(g=ge;g<=Y;g++)if(Q[g-ge]===0&&ei(Te,m[g])){Re=g;break}Re===void 0?At(Te,b,O,!0):(Q[Re-ge]=P+1,Re>=Z?Z=Re:U=!0,T(Te,m[Re],v,null,b,O,V,k,M),_++)}const Ee=U?nw(Q):ys;for(g=Ee.length-1,P=A-1;P>=0;P--){const Te=ge+P,Re=m[Te],nt=Te+1<z?m[Te+1].el:R;Q[P]===0?T(null,Re,v,nt,b,O,V,k,M):U&&(g<0||P!==Ee[g]?Bt(Re,v,nt,2):g--)}}},Bt=(f,m,v,R,b=null)=>{const{el:O,type:V,transition:k,children:M,shapeFlag:P}=f;if(P&6){Bt(f.component.subTree,m,v,R);return}if(P&128){f.suspense.move(m,v,R);return}if(P&64){V.move(f,m,v,G);return}if(V===Pt){r(O,m,v);for(let X=0;X<M.length;X++)Bt(M[X],m,v,R);r(f.anchor,m,v);return}if(V===oc){L(f,m,v);return}if(R!==2&&P&1&&k)if(R===0)k.beforeEnter(O),r(O,m,v),Vt(()=>k.enter(O),b);else{const{leave:X,delayLeave:Y,afterLeave:ie}=k,ge=()=>r(O,m,v),xe=()=>{X(O,()=>{ge(),ie&&ie()})};Y?Y(O,ge,xe):xe()}else r(O,m,v)},At=(f,m,v,R=!1,b=!1)=>{const{type:O,props:V,ref:k,children:M,dynamicChildren:P,shapeFlag:z,patchFlag:X,dirs:Y}=f;if(k!=null&&Hc(k,null,v,f,!0),z&256){m.ctx.deactivate(f);return}const ie=z&1&&Y,ge=!pi(f);let xe;if(ge&&(xe=V&&V.onVnodeBeforeUnmount)&&dn(xe,m,f),z&6)ls(f.component,v,R);else{if(z&128){f.suspense.unmount(v,R);return}ie&&Sr(f,null,m,"beforeUnmount"),z&64?f.type.remove(f,m,v,b,G,R):P&&(O!==Pt||X>0&&X&64)?Ne(P,m,v,!1,!0):(O===Pt&&X&384||!b&&z&16)&&Ne(M,m,v),R&&hn(f)}(ge&&(xe=V&&V.onVnodeUnmounted)||ie)&&Vt(()=>{xe&&dn(xe,m,f),ie&&Sr(f,null,m,"unmounted")},v)},hn=f=>{const{type:m,el:v,anchor:R,transition:b}=f;if(m===Pt){Wn(v,R);return}if(m===oc){N(f);return}const O=()=>{s(v),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(f.shapeFlag&1&&b&&!b.persisted){const{leave:V,delayLeave:k}=b,M=()=>V(v,O);k?k(f.el,O,M):M()}else O()},Wn=(f,m)=>{let v;for(;f!==m;)v=d(f),s(f),f=v;s(m)},ls=(f,m,v)=>{const{bum:R,scope:b,update:O,subTree:V,um:k}=f;R&&Go(R),b.stop(),O&&(O.active=!1,At(V,f,m,v)),k&&Vt(k,m),Vt(()=>{f.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},Ne=(f,m,v,R=!1,b=!1,O=0)=>{for(let V=O;V<f.length;V++)At(f[V],m,v,R,b)},I=f=>f.shapeFlag&6?I(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el);let W=!1;const F=(f,m,v)=>{f==null?m._vnode&&At(m._vnode,null,null,!0):T(m._vnode||null,f,m,null,null,null,v),W||(W=!0,Md(),Qm(),W=!1),m._vnode=f},G={p:T,um:At,m:Bt,r:hn,mt:jt,mc:ne,pc:_e,pbc:de,n:I,o:t};let ve,Ve;return e&&([ve,Ve]=e(G)),{render:F,hydrate:ve,createApp:WE(F,ve)}}function ic({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Cr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function tw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function pg(t,e,n=!1){const r=t.children,s=e.children;if(te(r)&&te(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Zn(s[i]),a.el=o.el),n||pg(o,a)),a.type===tl&&(a.el=o.el)}}function nw(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function mg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:mg(e)}const rw=t=>t.__isTeleport,Pt=Symbol.for("v-fgt"),tl=Symbol.for("v-txt"),gr=Symbol.for("v-cmt"),oc=Symbol.for("v-stc"),_i=[];let rn=null;function re(t=!1){_i.push(rn=t?null:[])}function sw(){_i.pop(),rn=_i[_i.length-1]||null}let Di=1;function Kd(t){Di+=t}function gg(t){return t.dynamicChildren=Di>0?rn||ys:null,sw(),Di>0&&rn&&rn.push(t),t}function Ce(t,e,n,r,s,i){return gg(y(t,e,n,r,s,i,!0))}function It(t,e,n,r,s){return gg(Be(t,e,n,r,s,!0))}function pa(t){return t?t.__v_isVNode===!0:!1}function ei(t,e){return t.type===e.type&&t.key===e.key}const nl="__vInternal",_g=({key:t})=>t??null,Yo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||Ke(t)||ue(t)?{i:Xe,r:t,k:e,f:!!n}:t:null);function y(t,e=null,n=null,r=0,s=null,i=t===Pt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&_g(e),ref:e&&Yo(e),scopeId:Xm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xe};return a?(th(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=et(n)?8:16),Di>0&&!o&&rn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&rn.push(l),l}const Be=iw;function iw(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===EE)&&(t=gr),pa(t)){const a=Ps(t,e,!0);return n&&th(a,n),Di>0&&!i&&rn&&(a.shapeFlag&6?rn[rn.indexOf(t)]=a:rn.push(a)),a.patchFlag|=-2,a}if(gw(t)&&(t=t.__vccOpts),e){e=ow(e);let{class:a,style:l}=e;a&&!et(a)&&(e.class=Jt(a)),Le(l)&&(jm(l)&&!te(l)&&(l=mt({},l)),e.style=$u(l))}const o=et(t)?1:TE(t)?128:rw(t)?64:Le(t)?4:ue(t)?2:0;return y(t,e,n,r,s,o,i,!0)}function ow(t){return t?jm(t)||nl in t?mt({},t):t:null}function Ps(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?aw(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&_g(a),ref:e&&e.ref?n&&s?te(s)?s.concat(Yo(e)):[s,Yo(e)]:Yo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ps(t.ssContent),ssFallback:t.ssFallback&&Ps(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Zt(t=" ",e=0){return Be(tl,null,t,e)}function ut(t="",e=!1){return e?(re(),It(gr,null,t)):Be(gr,null,t)}function pn(t){return t==null||typeof t=="boolean"?Be(gr):te(t)?Be(Pt,null,t.slice()):typeof t=="object"?Zn(t):Be(tl,null,String(t))}function Zn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ps(t)}function th(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(te(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),th(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(nl in e)?e._ctx=Xe:s===3&&Xe&&(Xe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ue(e)?(e={default:e,_ctx:Xe},n=32):(e=String(e),r&64?(n=16,e=[Zt(e)]):n=8);t.children=e,t.shapeFlag|=n}function aw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Jt([e.class,r.class]));else if(s==="style")e.style=$u([e.style,r.style]);else if(za(s)){const i=e[s],o=r[s];o&&i!==o&&!(te(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function dn(t,e,n,r=null){sn(t,e,7,[n,r])}const lw=lg();let cw=0;function uw(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||lw,i={uid:cw++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ug(r,s),emitsOptions:Jm(r,s),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:r.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=mE.bind(null,i),t.ce&&t.ce(i),i}let ht=null,ma,Wc;{const t=Im(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ma=e("__VUE_INSTANCE_SETTERS__",n=>ht=n),Wc=e("__VUE_SSR_SETTERS__",n=>rl=n)}const no=t=>{const e=ht;return ma(t),t.scope.on(),()=>{t.scope.off(),ma(e)}},Gd=()=>{ht&&ht.scope.off(),ma(null)};function yg(t){return t.vnode.shapeFlag&4}let rl=!1;function hw(t,e=!1){e&&Wc(e);const{props:n,children:r}=t.vnode,s=yg(t);GE(t,n,s,e),JE(t,r);const i=s?dw(t,e):void 0;return e&&Wc(!1),i}function dw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Ya(new Proxy(t.ctx,UE));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?pw(t):null,i=no(t);es();const o=cr(r,t,0,[t.props,s]);if(ts(),i(),Em(o)){if(o.then(Gd,Gd),e)return o.then(a=>{Qd(t,a,e)}).catch(a=>{Ja(a,t,0)});t.asyncDep=o}else Qd(t,o,e)}else vg(t,e)}function Qd(t,e,n){ue(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Le(e)&&(t.setupState=Wm(e)),vg(t,n)}let Yd;function vg(t,e,n){const r=t.type;if(!t.render){if(!e&&Yd&&!r.render){const s=r.template||Zu(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=mt(mt({isCustomElement:i,delimiters:a},o),l);r.render=Yd(s,c)}}t.render=r.render||Yt}{const s=no(t);es();try{$E(t)}finally{ts(),s()}}}function fw(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return $t(t,"get","$attrs"),e[n]}}))}function pw(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return fw(t)},slots:t.slots,emit:t.emit,expose:e}}function sl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Wm(Ya(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in mi)return mi[n](t)},has(e,n){return n in e||n in mi}}))}function mw(t,e=!0){return ue(t)?t.displayName||t.name:t.name||e&&t.__name}function gw(t){return ue(t)&&"__vccOpts"in t}const De=(t,e)=>sE(t,e,rl);function Eg(t,e,n){const r=arguments.length;return r===2?Le(e)&&!te(e)?pa(e)?Be(t,null,[e]):Be(t,e):Be(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&pa(n)&&(n=[n]),Be(t,e,n))}const _w="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const yw="http://www.w3.org/2000/svg",vw="http://www.w3.org/1998/Math/MathML",er=typeof document<"u"?document:null,Jd=er&&er.createElement("template"),Ew={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?er.createElementNS(yw,t):e==="mathml"?er.createElementNS(vw,t):er.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>er.createTextNode(t),createComment:t=>er.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>er.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Jd.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=Jd.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ww=Symbol("_vtc");function Tw(t,e,n){const r=t[ww];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Xd=Symbol("_vod"),Iw=Symbol("_vsh"),bw=Symbol(""),Aw=/(^|;)\s*display\s*:/;function Rw(t,e,n){const r=t.style,s=et(n);let i=!1;if(n&&!s){if(e)if(et(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Jo(r,a,"")}else for(const o in e)n[o]==null&&Jo(r,o,"");for(const o in n)o==="display"&&(i=!0),Jo(r,o,n[o])}else if(s){if(e!==n){const o=r[bw];o&&(n+=";"+o),r.cssText=n,i=Aw.test(n)}}else e&&t.removeAttribute("style");Xd in t&&(t[Xd]=i?r.display:"",t[Iw]&&(r.display="none"))}const Zd=/\s*!important$/;function Jo(t,e,n){if(te(n))n.forEach(r=>Jo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Sw(t,e);Zd.test(n)?t.setProperty(qs(r),n.replace(Zd,""),"important"):t[r]=n}}const ef=["Webkit","Moz","ms"],ac={};function Sw(t,e){const n=ac[e];if(n)return n;let r=Rn(e);if(r!=="filter"&&r in t)return ac[e]=r;r=Ka(r);for(let s=0;s<ef.length;s++){const i=ef[s]+r;if(i in t)return ac[e]=i}return e}const tf="http://www.w3.org/1999/xlink";function Cw(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(tf,e.slice(6,e.length)):t.setAttributeNS(tf,e,n);else{const i=D0(e);n==null||i&&!bm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Pw(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=bm(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Or(t,e,n,r){t.addEventListener(e,n,r)}function xw(t,e,n,r){t.removeEventListener(e,n,r)}const nf=Symbol("_vei");function Ow(t,e,n,r,s=null){const i=t[nf]||(t[nf]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=kw(e);if(r){const c=i[e]=Vw(r,s);Or(t,a,c,l)}else o&&(xw(t,a,o,l),i[e]=void 0)}}const rf=/(?:Once|Passive|Capture)$/;function kw(t){let e;if(rf.test(t)){e={};let r;for(;r=t.match(rf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qs(t.slice(2)),e]}let lc=0;const Dw=Promise.resolve(),Nw=()=>lc||(Dw.then(()=>lc=0),lc=Date.now());function Vw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;sn(Mw(r,n.value),e,5,[r])};return n.value=t,n.attached=Nw(),n}function Mw(t,e){if(te(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const sf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Lw=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?Tw(t,r,c):e==="style"?Rw(t,n,r):za(e)?Lu(e)||Ow(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Fw(t,e,r,c))?Pw(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Cw(t,e,r,c))};function Fw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&sf(e)&&ue(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return sf(e)&&et(n)?!1:e in t}const ga=t=>{const e=t.props["onUpdate:modelValue"]||!1;return te(e)?n=>Go(e,n):e};function Uw(t){t.target.composing=!0}function of(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ts=Symbol("_assign"),Mt={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Ts]=ga(s);const i=r||s.props&&s.props.type==="number";Or(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Pi(a)),t[Ts](a)}),n&&Or(t,"change",()=>{t.value=t.value.trim()}),e||(Or(t,"compositionstart",Uw),Or(t,"compositionend",of),Or(t,"change",of))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t[Ts]=ga(i),t.composing)return;const o=s||t.type==="number"?Pi(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},$w={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ha(e);Or(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Pi(_a(o)):_a(o));t[Ts](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Lt(()=>{t._assigning=!1})}),t[Ts]=ga(r)},mounted(t,{value:e,modifiers:{number:n}}){af(t,e,n)},beforeUpdate(t,e,n){t[Ts]=ga(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||af(t,e,n)}};function af(t,e,n){const r=t.multiple,s=te(e);if(!(r&&!s&&!Ha(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=_a(a);if(r)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?Pi(l):l):a.selected=V0(e,l)>-1}else a.selected=e.has(l);else if(Ga(_a(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function _a(t){return"_value"in t?t._value:t.value}const jw=["ctrl","shift","alt","meta"],Bw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jw.some(n=>t[`${n}Key`]&&!e.includes(n))},wg=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=Bw[e[o]];if(a&&a(s,e))return}return t(s,...i)})},qw=mt({patchProp:Lw},Ew);let lf;function zw(){return lf||(lf=ZE(qw))}const Hw=(...t)=>{const e=zw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Kw(r);if(!s)return;const i=e._component;!ue(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Ww(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Ww(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Kw(t){return et(t)?document.querySelector(t):t}var Gw=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Tg;const il=t=>Tg=t,Ig=Symbol();function Kc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var yi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(yi||(yi={}));function Qw(){const t=Sm(!0),e=t.run(()=>pe({}));let n=[],r=[];const s=Ya({install(i){il(s),s._a=i,i.provide(Ig,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!Gw?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const bg=()=>{};function cf(t,e,n,r=bg){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Cm()&&L0(s),s}function cs(t,...e){t.slice().forEach(n=>{n(...e)})}const Yw=t=>t();function Gc(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Kc(s)&&Kc(r)&&t.hasOwnProperty(n)&&!Ke(r)&&!lr(r)?t[n]=Gc(s,r):t[n]=r}return t}const Jw=Symbol();function Xw(t){return!Kc(t)||!t.hasOwnProperty(Jw)}const{assign:Yn}=Object;function Zw(t){return!!(Ke(t)&&t.effect)}function eT(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=aE(n.state.value[t]);return Yn(u,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=Ya(De(()=>{il(n);const p=n._s.get(t);return o[d].call(p,p)})),h),{}))}return l=Ag(t,c,e,n,r,!0),l}function Ag(t,e,n={},r,s,i){let o;const a=Yn({actions:{}},n),l={deep:!0};let c,u,h=[],d=[],p;const E=r.state.value[t];!i&&!E&&(r.state.value[t]={}),pe({});let T;function w(ne){let ee;c=u=!1,typeof ne=="function"?(ne(r.state.value[t]),ee={type:yi.patchFunction,storeId:t,events:p}):(Gc(r.state.value[t],ne),ee={type:yi.patchObject,payload:ne,storeId:t,events:p});const de=T=Symbol();Lt().then(()=>{T===de&&(c=!0)}),u=!0,cs(h,ee,r.state.value[t])}const x=i?function(){const{state:ee}=n,de=ee?ee():{};this.$patch(fe=>{Yn(fe,de)})}:bg;function D(){o.stop(),h=[],d=[],r._s.delete(t)}function L(ne,ee){return function(){il(r);const de=Array.from(arguments),fe=[],qe=[];function at(se){fe.push(se)}function jt(se){qe.push(se)}cs(d,{args:de,name:ne,store:H,after:at,onError:jt});let tt;try{tt=ee.apply(this&&this.$id===t?this:H,de)}catch(se){throw cs(qe,se),se}return tt instanceof Promise?tt.then(se=>(cs(fe,se),se)).catch(se=>(cs(qe,se),Promise.reject(se))):(cs(fe,tt),tt)}}const N={_p:r,$id:t,$onAction:cf.bind(null,d),$patch:w,$reset:x,$subscribe(ne,ee={}){const de=cf(h,ne,ee.detached,()=>fe()),fe=o.run(()=>qr(()=>r.state.value[t],qe=>{(ee.flush==="sync"?u:c)&&ne({storeId:t,type:yi.direct,events:p},qe)},Yn({},l,ee)));return de},$dispose:D},H=jn(N);r._s.set(t,H);const me=(r._a&&r._a.runWithContext||Yw)(()=>r._e.run(()=>(o=Sm()).run(e)));for(const ne in me){const ee=me[ne];if(Ke(ee)&&!Zw(ee)||lr(ee))i||(E&&Xw(ee)&&(Ke(ee)?ee.value=E[ne]:Gc(ee,E[ne])),r.state.value[t][ne]=ee);else if(typeof ee=="function"){const de=L(ne,ee);me[ne]=de,a.actions[ne]=ee}}return Yn(H,me),Yn(Ae(H),me),Object.defineProperty(H,"$state",{get:()=>r.state.value[t],set:ne=>{w(ee=>{Yn(ee,ne)})}}),r._p.forEach(ne=>{Yn(H,o.run(()=>ne({store:H,app:r._a,pinia:r,options:a})))}),E&&i&&n.hydrate&&n.hydrate(H.$state,E),c=!0,u=!0,H}function zs(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=KE();return a=a||(c?on(Ig,null):null),a&&il(a),a=Tg,a._s.has(r)||(i?Ag(r,e,s,a):eT(r,s,a)),a._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ds=typeof document<"u";function tT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Oe=Object.assign;function cc(t,e){const n={};for(const r in e){const s=e[r];n[r]=an(s)?s.map(t):t(s)}return n}const vi=()=>{},an=Array.isArray,Rg=/#/g,nT=/&/g,rT=/\//g,sT=/=/g,iT=/\?/g,Sg=/\+/g,oT=/%5B/g,aT=/%5D/g,Cg=/%5E/g,lT=/%60/g,Pg=/%7B/g,cT=/%7C/g,xg=/%7D/g,uT=/%20/g;function nh(t){return encodeURI(""+t).replace(cT,"|").replace(oT,"[").replace(aT,"]")}function hT(t){return nh(t).replace(Pg,"{").replace(xg,"}").replace(Cg,"^")}function Qc(t){return nh(t).replace(Sg,"%2B").replace(uT,"+").replace(Rg,"%23").replace(nT,"%26").replace(lT,"`").replace(Pg,"{").replace(xg,"}").replace(Cg,"^")}function dT(t){return Qc(t).replace(sT,"%3D")}function fT(t){return nh(t).replace(Rg,"%23").replace(iT,"%3F")}function pT(t){return t==null?"":fT(t).replace(rT,"%2F")}function Ni(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const mT=/\/$/,gT=t=>t.replace(mT,"");function uc(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=ET(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Ni(o)}}function _T(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function uf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function yT(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&xs(e.matched[r],n.matched[s])&&Og(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function xs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Og(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!vT(t[n],e[n]))return!1;return!0}function vT(t,e){return an(t)?hf(t,e):an(e)?hf(e,t):t===e}function hf(t,e){return an(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function ET(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var Vi;(function(t){t.pop="pop",t.push="push"})(Vi||(Vi={}));var Ei;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ei||(Ei={}));function wT(t){if(!t)if(ds){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gT(t)}const TT=/^[^#]+#/;function IT(t,e){return t.replace(TT,"#")+e}function bT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ol=()=>({left:window.scrollX,top:window.scrollY});function AT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=bT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function df(t,e){return(history.state?history.state.position-e:-1)+t}const Yc=new Map;function RT(t,e){Yc.set(t,e)}function ST(t){const e=Yc.get(t);return Yc.delete(t),e}let CT=()=>location.protocol+"//"+location.host;function kg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),uf(l,"")}return uf(n,t)+r+s}function PT(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const p=kg(t,location),E=n.value,T=e.value;let w=0;if(d){if(n.value=p,e.value=d,o&&o===E){o=null;return}w=T?d.position-T.position:0}else r(p);s.forEach(x=>{x(n.value,E,{delta:w,type:Vi.pop,direction:w?w>0?Ei.forward:Ei.back:Ei.unknown})})};function l(){o=n.value}function c(d){s.push(d);const p=()=>{const E=s.indexOf(d);E>-1&&s.splice(E,1)};return i.push(p),p}function u(){const{history:d}=window;d.state&&d.replaceState(Oe({},d.state,{scroll:ol()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function ff(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ol():null}}function xT(t){const{history:e,location:n}=window,r={value:kg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:CT()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(p){console.error(p),n[u?"replace":"assign"](d)}}function o(l,c){const u=Oe({},e.state,ff(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=Oe({},s.value,e.state,{forward:l,scroll:ol()});i(u.current,u,!0);const h=Oe({},ff(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function OT(t){t=wT(t);const e=xT(t),n=PT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Oe({location:"",base:t,go:r,createHref:IT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function kT(t){return typeof t=="string"||t&&typeof t=="object"}function Dg(t){return typeof t=="string"||typeof t=="symbol"}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ng=Symbol("");var pf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(pf||(pf={}));function Os(t,e){return Oe(new Error,{type:t,[Ng]:!0},e)}function Dn(t,e){return t instanceof Error&&Ng in t&&(e==null||!!(t.type&e))}const mf="[^/]+?",DT={sensitive:!1,strict:!1,start:!0,end:!0},NT=/[.+*?^${}()[\]/\\]/g;function VT(t,e){const n=Oe({},DT,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let p=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(NT,"\\$&"),p+=40;else if(d.type===1){const{value:E,repeatable:T,optional:w,regexp:x}=d;i.push({name:E,repeatable:T,optional:w});const D=x||mf;if(D!==mf){p+=10;try{new RegExp(`(${D})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${E}" (${D}): `+N.message)}}let L=T?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;h||(L=w&&c.length<2?`(?:/${L})`:"/"+L),w&&(L+="?"),s+=L,p+=20,w&&(p+=-8),T&&(p+=-20),D===".*"&&(p+=-50)}u.push(p)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",E=i[d-1];h[E.name]=p&&E.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of d)if(p.type===0)u+=p.value;else if(p.type===1){const{value:E,repeatable:T,optional:w}=p,x=E in c?c[E]:"";if(an(x)&&!T)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const D=an(x)?x.join("/"):x;if(!D)if(w)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${E}"`);u+=D}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function MT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function LT(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=MT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(gf(r))return 1;if(gf(s))return-1}return s.length-r.length}function gf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const FT={type:0,value:""},UT=/[a-zA-Z0-9_]/;function $T(t){if(!t)return[[]];if(t==="/")return[[FT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:UT.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function jT(t,e,n){const r=VT($T(t.path),n),s=Oe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function BT(t,e){const n=[],r=new Map;e=vf({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,h,d){const p=!d,E=qT(u);E.aliasOf=d&&d.record;const T=vf(e,u),w=[E];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const N of L)w.push(Oe({},E,{components:d?d.record.components:E.components,path:N,aliasOf:d?d.record:E}))}let x,D;for(const L of w){const{path:N}=L;if(h&&N[0]!=="/"){const H=h.record.path,B=H[H.length-1]==="/"?"":"/";L.path=h.record.path+(N&&B+N)}if(x=jT(L,h,T),d?d.alias.push(x):(D=D||x,D!==x&&D.alias.push(x),p&&u.name&&!yf(x)&&o(u.name)),E.children){const H=E.children;for(let B=0;B<H.length;B++)i(H[B],x,d&&d.children[B])}d=d||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&l(x)}return D?()=>{o(D)}:vi}function o(u){if(Dg(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&LT(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Vg(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!yf(u)&&r.set(u.record.name,u)}function c(u,h){let d,p={},E,T;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Os(1,{location:u});T=d.record.name,p=Oe(_f(h.params,d.keys.filter(D=>!D.optional).concat(d.parent?d.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),u.params&&_f(u.params,d.keys.map(D=>D.name))),E=d.stringify(p)}else if(u.path!=null)E=u.path,d=n.find(D=>D.re.test(E)),d&&(p=d.parse(E),T=d.record.name);else{if(d=h.name?r.get(h.name):n.find(D=>D.re.test(h.path)),!d)throw Os(1,{location:u,currentLocation:h});T=d.record.name,p=Oe({},h.params,u.params),E=d.stringify(p)}const w=[];let x=d;for(;x;)w.unshift(x.record),x=x.parent;return{name:T,path:E,params:p,matched:w,meta:HT(w)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function _f(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function qT(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:zT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function zT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function yf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function HT(t){return t.reduce((e,n)=>Oe(e,n.meta),{})}function vf(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Vg(t,e){return e.children.some(n=>n===t||Vg(t,n))}function WT(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Sg," "),o=i.indexOf("="),a=Ni(o<0?i:i.slice(0,o)),l=o<0?null:Ni(i.slice(o+1));if(a in e){let c=e[a];an(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Ef(t){let e="";for(let n in t){const r=t[n];if(n=dT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(an(r)?r.map(i=>i&&Qc(i)):[r&&Qc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function KT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=an(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const GT=Symbol(""),wf=Symbol(""),al=Symbol(""),Mg=Symbol(""),Jc=Symbol("");function ti(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function tr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Os(4,{from:n,to:e})):d instanceof Error?l(d):kT(d)?l(Os(2,{from:e,to:d})):(o&&r.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function hc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(QT(l)){const u=(l.__vccOpts||l)[e];u&&i.push(tr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=tT(u)?u.default:u;o.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&tr(p,n,r,o,a,s)()}))}}return i}function QT(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Tf(t){const e=on(al),n=on(Mg),r=De(()=>e.resolve(q(t.to))),s=De(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(xs.bind(null,u));if(d>-1)return d;const p=If(l[c-2]);return c>1&&If(u)===p&&h[h.length-1].path!==p?h.findIndex(xs.bind(null,l[c-2])):d}),i=De(()=>s.value>-1&&ZT(n.params,r.value.params)),o=De(()=>s.value>-1&&s.value===n.matched.length-1&&Og(n.params,r.value.params));function a(l={}){return XT(l)?e[q(t.replace)?"replace":"push"](q(t.to)).catch(vi):Promise.resolve()}return{route:r,href:De(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const YT=Ot({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Tf,setup(t,{slots:e}){const n=jn(Tf(t)),{options:r}=on(al),s=De(()=>({[bf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[bf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Eg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),JT=YT;function XT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ZT(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!an(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function If(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const bf=(t,e,n)=>t??e??n,eI=Ot({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=on(Jc),s=De(()=>t.route||r.value),i=on(wf,0),o=De(()=>{let c=q(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=De(()=>s.value.matched[o.value]);gi(wf,De(()=>o.value+1)),gi(GT,a),gi(Jc,s);const l=pe();return qr(()=>[l.value,a.value,t.name],([c,u,h],[d,p,E])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!xs(u,p)||!d)&&(u.enterCallbacks[h]||[]).forEach(T=>T(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Af(n.default,{Component:d,route:c});const p=h.props[u],E=p?p===!0?c.params:typeof p=="function"?p(c):p:null,w=Eg(d,Oe({},E,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Af(n.default,{Component:w,route:c})||w}}});function Af(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Lg=eI;function tI(t){const e=BT(t.routes,t),n=t.parseQuery||WT,r=t.stringifyQuery||Ef,s=t.history,i=ti(),o=ti(),a=ti(),l=zm(Gn);let c=Gn;ds&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cc.bind(null,I=>""+I),h=cc.bind(null,pT),d=cc.bind(null,Ni);function p(I,W){let F,G;return Dg(I)?(F=e.getRecordMatcher(I),G=W):G=I,e.addRoute(G,F)}function E(I){const W=e.getRecordMatcher(I);W&&e.removeRoute(W)}function T(){return e.getRoutes().map(I=>I.record)}function w(I){return!!e.getRecordMatcher(I)}function x(I,W){if(W=Oe({},W||l.value),typeof I=="string"){const m=uc(n,I,W.path),v=e.resolve({path:m.path},W),R=s.createHref(m.fullPath);return Oe(m,v,{params:d(v.params),hash:Ni(m.hash),redirectedFrom:void 0,href:R})}let F;if(I.path!=null)F=Oe({},I,{path:uc(n,I.path,W.path).path});else{const m=Oe({},I.params);for(const v in m)m[v]==null&&delete m[v];F=Oe({},I,{params:h(m)}),W.params=h(W.params)}const G=e.resolve(F,W),ve=I.hash||"";G.params=u(d(G.params));const Ve=_T(r,Oe({},I,{hash:hT(ve),path:G.path})),f=s.createHref(Ve);return Oe({fullPath:Ve,hash:ve,query:r===Ef?KT(I.query):I.query||{}},G,{redirectedFrom:void 0,href:f})}function D(I){return typeof I=="string"?uc(n,I,l.value.path):Oe({},I)}function L(I,W){if(c!==I)return Os(8,{from:W,to:I})}function N(I){return me(I)}function H(I){return N(Oe(D(I),{replace:!0}))}function B(I){const W=I.matched[I.matched.length-1];if(W&&W.redirect){const{redirect:F}=W;let G=typeof F=="function"?F(I):F;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=D(G):{path:G},G.params={}),Oe({query:I.query,hash:I.hash,params:G.path!=null?{}:I.params},G)}}function me(I,W){const F=c=x(I),G=l.value,ve=I.state,Ve=I.force,f=I.replace===!0,m=B(F);if(m)return me(Oe(D(m),{state:typeof m=="object"?Oe({},ve,m.state):ve,force:Ve,replace:f}),W||F);const v=F;v.redirectedFrom=W;let R;return!Ve&&yT(r,G,F)&&(R=Os(16,{to:v,from:G}),Bt(G,G,!0,!1)),(R?Promise.resolve(R):de(v,G)).catch(b=>Dn(b)?Dn(b,2)?b:un(b):_e(b,v,G)).then(b=>{if(b){if(Dn(b,2))return me(Oe({replace:f},D(b.to),{state:typeof b.to=="object"?Oe({},ve,b.to.state):ve,force:Ve}),W||v)}else b=qe(v,G,!0,f,ve);return fe(v,G,b),b})}function ne(I,W){const F=L(I,W);return F?Promise.reject(F):Promise.resolve()}function ee(I){const W=Wn.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(I):I()}function de(I,W){let F;const[G,ve,Ve]=nI(I,W);F=hc(G.reverse(),"beforeRouteLeave",I,W);for(const m of G)m.leaveGuards.forEach(v=>{F.push(tr(v,I,W))});const f=ne.bind(null,I,W);return F.push(f),Ne(F).then(()=>{F=[];for(const m of i.list())F.push(tr(m,I,W));return F.push(f),Ne(F)}).then(()=>{F=hc(ve,"beforeRouteUpdate",I,W);for(const m of ve)m.updateGuards.forEach(v=>{F.push(tr(v,I,W))});return F.push(f),Ne(F)}).then(()=>{F=[];for(const m of Ve)if(m.beforeEnter)if(an(m.beforeEnter))for(const v of m.beforeEnter)F.push(tr(v,I,W));else F.push(tr(m.beforeEnter,I,W));return F.push(f),Ne(F)}).then(()=>(I.matched.forEach(m=>m.enterCallbacks={}),F=hc(Ve,"beforeRouteEnter",I,W,ee),F.push(f),Ne(F))).then(()=>{F=[];for(const m of o.list())F.push(tr(m,I,W));return F.push(f),Ne(F)}).catch(m=>Dn(m,8)?m:Promise.reject(m))}function fe(I,W,F){a.list().forEach(G=>ee(()=>G(I,W,F)))}function qe(I,W,F,G,ve){const Ve=L(I,W);if(Ve)return Ve;const f=W===Gn,m=ds?history.state:{};F&&(G||f?s.replace(I.fullPath,Oe({scroll:f&&m&&m.scroll},ve)):s.push(I.fullPath,ve)),l.value=I,Bt(I,W,F,f),un()}let at;function jt(){at||(at=s.listen((I,W,F)=>{if(!ls.listening)return;const G=x(I),ve=B(G);if(ve){me(Oe(ve,{replace:!0}),G).catch(vi);return}c=G;const Ve=l.value;ds&&RT(df(Ve.fullPath,F.delta),ol()),de(G,Ve).catch(f=>Dn(f,12)?f:Dn(f,2)?(me(f.to,G).then(m=>{Dn(m,20)&&!F.delta&&F.type===Vi.pop&&s.go(-1,!1)}).catch(vi),Promise.reject()):(F.delta&&s.go(-F.delta,!1),_e(f,G,Ve))).then(f=>{f=f||qe(G,Ve,!1),f&&(F.delta&&!Dn(f,8)?s.go(-F.delta,!1):F.type===Vi.pop&&Dn(f,20)&&s.go(-1,!1)),fe(G,Ve,f)}).catch(vi)}))}let tt=ti(),se=ti(),Pe;function _e(I,W,F){un(I);const G=se.list();return G.length?G.forEach(ve=>ve(I,W,F)):console.error(I),Promise.reject(I)}function kt(){return Pe&&l.value!==Gn?Promise.resolve():new Promise((I,W)=>{tt.add([I,W])})}function un(I){return Pe||(Pe=!I,jt(),tt.list().forEach(([W,F])=>I?F(I):W()),tt.reset()),I}function Bt(I,W,F,G){const{scrollBehavior:ve}=t;if(!ds||!ve)return Promise.resolve();const Ve=!F&&ST(df(I.fullPath,0))||(G||!F)&&history.state&&history.state.scroll||null;return Lt().then(()=>ve(I,W,Ve)).then(f=>f&&AT(f)).catch(f=>_e(f,I,W))}const At=I=>s.go(I);let hn;const Wn=new Set,ls={currentRoute:l,listening:!0,addRoute:p,removeRoute:E,hasRoute:w,getRoutes:T,resolve:x,options:t,push:N,replace:H,go:At,back:()=>At(-1),forward:()=>At(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:se.add,isReady:kt,install(I){const W=this;I.component("RouterLink",JT),I.component("RouterView",Lg),I.config.globalProperties.$router=W,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>q(l)}),ds&&!hn&&l.value===Gn&&(hn=!0,N(s.location).catch(ve=>{}));const F={};for(const ve in Gn)Object.defineProperty(F,ve,{get:()=>l.value[ve],enumerable:!0});I.provide(al,W),I.provide(Mg,$m(F)),I.provide(Jc,l);const G=I.unmount;Wn.add(I),I.unmount=function(){Wn.delete(I),Wn.size<1&&(c=Gn,at&&at(),at=null,l.value=Gn,hn=!1,Pe=!1),G()}}};function Ne(I){return I.reduce((W,F)=>W.then(()=>ee(F)),Promise.resolve())}return ls}function nI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>xs(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>xs(c,l))||s.push(l))}return[n,r,s]}function Fg(){return on(al)}var Rf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(d=64)),r.push(n[u],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ug(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new sI;const d=i<<2|a>>4;if(r.push(d),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iI=function(t){const e=Ug(t);return $g.encodeByteArray(e,!0)},ya=function(t){return iI(t).replace(/\./g,"")},jg=function(t){try{return $g.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=()=>oI().__FIREBASE_DEFAULTS__,lI=()=>{if(typeof process>"u"||typeof Rf>"u")return;const t=Rf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jg(t[1]);return e&&JSON.parse(e)},ll=()=>{try{return aI()||lI()||cI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bg=t=>{var e,n;return(n=(e=ll())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qg=t=>{const e=Bg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zg=()=>{var t;return(t=ll())===null||t===void 0?void 0:t.config},Hg=t=>{var e;return(e=ll())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ya(JSON.stringify(n)),ya(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function dI(){var t;const e=(t=ll())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mI(){const t=Je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gI(){return!dI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kg(){try{return typeof indexedDB=="object"}catch{return!1}}function _I(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yI,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?vI(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new On(s,a,r)}}function vI(t,e){return t.replace(EI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const EI=/\{\$([^}]+)}/g;function wI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function va(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Sf(i)&&Sf(o)){if(!va(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ai(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TI(t,e){const n=new II(t,e);return n.subscribe.bind(n)}class II{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dc),s.error===void 0&&(s.error=dc),s.complete===void 0&&(s.complete=dc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class _r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SI(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RI(t){return t===Pr?void 0:t}function SI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const PI={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},xI=we.INFO,OI={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},kI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rh{constructor(e){this.name=e,this._logLevel=xI,this._logHandler=kI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const DI=(t,e)=>e.some(n=>t instanceof n);let Cf,Pf;function NI(){return Cf||(Cf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VI(){return Pf||(Pf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gg=new WeakMap,Xc=new WeakMap,Qg=new WeakMap,fc=new WeakMap,sh=new WeakMap;function MI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gg.set(n,t)}).catch(()=>{}),sh.set(e,t),e}function LI(t){if(Xc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xc.set(t,e)}let Zc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FI(t){Zc=t(Zc)}function UI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pc(this),e,...n);return Qg.set(r,e.sort?e.sort():[e]),ur(r)}:VI().includes(t)?function(...e){return t.apply(pc(this),e),ur(Gg.get(this))}:function(...e){return ur(t.apply(pc(this),e))}}function $I(t){return typeof t=="function"?UI(t):(t instanceof IDBTransaction&&LI(t),DI(t,NI())?new Proxy(t,Zc):t)}function ur(t){if(t instanceof IDBRequest)return MI(t);if(fc.has(t))return fc.get(t);const e=$I(t);return e!==t&&(fc.set(t,e),sh.set(e,t)),e}const pc=t=>sh.get(t);function jI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ur(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ur(o.result),l.oldVersion,l.newVersion,ur(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const BI=["get","getKey","getAll","getAllKeys","count"],qI=["put","add","delete","clear"],mc=new Map;function xf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mc.get(e))return mc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=qI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BI.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return mc.set(e,i),i}FI(t=>({...t,get:(e,n,r)=>xf(e,n)||t.get(e,n,r),has:(e,n)=>!!xf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eu="@firebase/app",Of="0.9.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new rh("@firebase/app"),WI="@firebase/app-compat",KI="@firebase/analytics-compat",GI="@firebase/analytics",QI="@firebase/app-check-compat",YI="@firebase/app-check",JI="@firebase/auth",XI="@firebase/auth-compat",ZI="@firebase/database",eb="@firebase/database-compat",tb="@firebase/functions",nb="@firebase/functions-compat",rb="@firebase/installations",sb="@firebase/installations-compat",ib="@firebase/messaging",ob="@firebase/messaging-compat",ab="@firebase/performance",lb="@firebase/performance-compat",cb="@firebase/remote-config",ub="@firebase/remote-config-compat",hb="@firebase/storage",db="@firebase/storage-compat",fb="@firebase/firestore",pb="@firebase/firestore-compat",mb="firebase",gb="10.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="[DEFAULT]",_b={[eu]:"fire-core",[WI]:"fire-core-compat",[GI]:"fire-analytics",[KI]:"fire-analytics-compat",[YI]:"fire-app-check",[QI]:"fire-app-check-compat",[JI]:"fire-auth",[XI]:"fire-auth-compat",[ZI]:"fire-rtdb",[eb]:"fire-rtdb-compat",[tb]:"fire-fn",[nb]:"fire-fn-compat",[rb]:"fire-iid",[sb]:"fire-iid-compat",[ib]:"fire-fcm",[ob]:"fire-fcm-compat",[ab]:"fire-perf",[lb]:"fire-perf-compat",[cb]:"fire-rc",[ub]:"fire-rc-compat",[hb]:"fire-gcs",[db]:"fire-gcs-compat",[fb]:"fire-fst",[pb]:"fire-fst-compat","fire-js":"fire-js",[mb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Map,nu=new Map;function yb(t,e){try{t.container.addComponent(e)}catch(n){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gr(t){const e=t.name;if(nu.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;nu.set(e,t);for(const n of Ea.values())yb(n,t);return!0}function cl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},hr=new ro("app","Firebase",vb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=gb;function Yg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tu,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw hr.create("bad-app-name",{appName:String(s)});if(n||(n=zg()),!n)throw hr.create("no-options");const i=Ea.get(s);if(i){if(va(n,i.options)&&va(r,i.config))return i;throw hr.create("duplicate-app",{appName:s})}const o=new CI(s);for(const l of nu.values())o.addComponent(l);const a=new Eb(n,r,o);return Ea.set(s,a),a}function ih(t=tu){const e=Ea.get(t);if(!e&&t===tu&&zg())return Yg();if(!e)throw hr.create("no-app",{appName:t});return e}function En(t,e,n){var r;let s=(r=_b[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(a.join(" "));return}Gr(new _r(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="firebase-heartbeat-database",Tb=1,Mi="firebase-heartbeat-store";let gc=null;function Jg(){return gc||(gc=jI(wb,Tb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mi)}catch(n){console.warn(n)}}}}).catch(t=>{throw hr.create("idb-open",{originalErrorMessage:t.message})})),gc}async function Ib(t){try{const n=(await Jg()).transaction(Mi),r=await n.objectStore(Mi).get(Xg(t));return await n.done,r}catch(e){if(e instanceof On)Kr.warn(e.message);else{const n=hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(n.message)}}}async function kf(t,e){try{const r=(await Jg()).transaction(Mi,"readwrite");await r.objectStore(Mi).put(e,Xg(t)),await r.done}catch(n){if(n instanceof On)Kr.warn(n.message);else{const r=hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kr.warn(r.message)}}}function Xg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=1024,Ab=30*24*60*60*1e3;class Rb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Cb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Df();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Ab}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Df(),{heartbeatsToSend:r,unsentEntries:s}=Sb(this._heartbeatsCache.heartbeats),i=ya(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Df(){return new Date().toISOString().substring(0,10)}function Sb(t,e=bb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Nf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Nf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Cb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kg()?_I().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ib(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Nf(t){return ya(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){Gr(new _r("platform-logger",e=>new zI(e),"PRIVATE")),Gr(new _r("heartbeat",e=>new Rb(e),"PRIVATE")),En(eu,Of,t),En(eu,Of,"esm2017"),En("fire-js","")}Pb("");var xb="firebase",Ob="10.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(xb,Ob,"app");function oh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Zg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kb=Zg,e_=new ro("auth","Firebase",Zg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new rh("@firebase/auth");function Db(t,...e){wa.logLevel<=we.WARN&&wa.warn(`Auth (${ns}): ${t}`,...e)}function Xo(t,...e){wa.logLevel<=we.ERROR&&wa.error(`Auth (${ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw ah(t,...e)}function wn(t,...e){return ah(t,...e)}function t_(t,e,n){const r=Object.assign(Object.assign({},kb()),{[e]:n});return new ro("auth","Firebase",r).create(e,{appName:t.name})}function Nb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&en(t,"argument-error"),t_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ah(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e_.create(t,...e)}function oe(t,e,...n){if(!t)throw ah(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xo(e),new Error(e)}function Bn(t,e){t||Mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Vb(){return Vf()==="http:"||Vf()==="https:"}function Vf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vb()||fI()||"connection"in navigator)?navigator.onLine:!0}function Lb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bn(n>e,"Short delay should be less than long delay!"),this.isMobile=hI()||pI()}get(){return Mb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e){Bn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new io(3e4,6e4);function wr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tr(t,e,n,r,s={}){return r_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=so(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),n_.fetch()(s_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function r_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fb),e);try{const s=new jb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Do(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Do(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Do(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Do(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw t_(t,u,c);en(t,u)}}catch(s){if(s instanceof On)throw s;en(t,"network-request-failed",{message:String(s)})}}async function oo(t,e,n,r,s={}){const i=await Tr(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}function s_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?lh(t.config,s):`${t.config.apiScheme}://${s}`}function $b(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),Ub.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Do(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}function Mf(t){return t!==void 0&&t.enterprise!==void 0}class Bb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $b(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function qb(t,e){return Tr(t,"GET","/v2/recaptchaConfig",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(t,e){return Tr(t,"POST","/v1/accounts:delete",e)}async function Hb(t,e){return Tr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wb(t,e=!1){const n=st(t),r=await n.getIdToken(e),s=ch(r);oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wi(_c(s.auth_time)),issuedAtTime:wi(_c(s.iat)),expirationTime:wi(_c(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _c(t){return Number(t)*1e3}function ch(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xo("JWT malformed, contained fewer than 3 sections"),null;try{const s=jg(n);return s?JSON.parse(s):(Xo("Failed to decode base64 JWT payload"),null)}catch(s){return Xo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Kb(t){const e=ch(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&Gb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Gb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Li(t,Hb(n,{idToken:r}));oe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Xb(i.providerUserInfo):[],a=Jb(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new i_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Yb(t){const e=st(t);await Ta(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Xb(t){return t.map(e=>{var{providerId:n}=e,r=oh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(t,e){const n=await r_(t,{},async()=>{const r=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=s_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",n_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eA(t,e){return Tr(t,"POST","/v2/accounts:revokeToken",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return oe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Zb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fi;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(oe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fi,this.toJSON())}_performRefresh(){return Mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Li(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Wb(this,e)}reload(){return Yb(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ta(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Li(this,zb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,D=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:L,emailVerified:N,isAnonymous:H,providerData:B,stsTokenManager:me}=n;oe(L&&me,e,"internal-error");const ne=Fi.fromJSON(this.name,me);oe(typeof L=="string",e,"internal-error"),Qn(h,e.name),Qn(d,e.name),oe(typeof N=="boolean",e,"internal-error"),oe(typeof H=="boolean",e,"internal-error"),Qn(p,e.name),Qn(E,e.name),Qn(T,e.name),Qn(w,e.name),Qn(x,e.name),Qn(D,e.name);const ee=new zr({uid:L,auth:e,email:d,emailVerified:N,displayName:h,isAnonymous:H,photoURL:E,phoneNumber:p,tenantId:T,stsTokenManager:ne,createdAt:x,lastLoginAt:D});return B&&Array.isArray(B)&&(ee.providerData=B.map(de=>Object.assign({},de))),w&&(ee._redirectEventId=w),ee}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fi;s.updateFromServerResponse(n);const i=new zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ta(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Map;function Ln(t){Bn(t instanceof Function,"Expected a class definition");let e=Lf.get(t);return e?(Bn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lf.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o_.type="NONE";const Ff=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t,e,n){return`firebase:${t}:${e}:${n}`}class Is{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zo(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zo("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Is(Ln(Ff),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ln(Ff);const o=Zo(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=zr._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Is(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Is(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h_(e))return"Blackberry";if(d_(e))return"Webos";if(uh(e))return"Safari";if((e.includes("chrome/")||l_(e))&&!e.includes("edge/"))return"Chrome";if(u_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a_(t=Je()){return/firefox\//i.test(t)}function uh(t=Je()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l_(t=Je()){return/crios\//i.test(t)}function c_(t=Je()){return/iemobile/i.test(t)}function u_(t=Je()){return/android/i.test(t)}function h_(t=Je()){return/blackberry/i.test(t)}function d_(t=Je()){return/webos/i.test(t)}function ul(t=Je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tA(t=Je()){var e;return ul(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nA(){return mI()&&document.documentMode===10}function f_(t=Je()){return ul(t)||u_(t)||d_(t)||h_(t)||/windows phone/i.test(t)||c_(t)}function rA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e=[]){let n;switch(t){case"Browser":n=Uf(Je());break;case"Worker":n=`${Uf(Je())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e={}){return Tr(t,"GET","/v2/passwordPolicy",wr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=6;class aA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $f(this),this.idTokenSubscription=new $f(this),this.beforeStateQueue=new sA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Is.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ta(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?st(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iA(this),n=new aA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Is.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Db(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ir(t){return st(t)}class $f{constructor(e){this.auth=e,this.observer=null,this.addObserver=TI(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cA(t){hl=t}function m_(t){return hl.loadJS(t)}function uA(){return hl.recaptchaEnterpriseScript}function hA(){return hl.gapiScript}function dA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fA="recaptcha-enterprise",pA="NO_RECAPTCHA";class mA{constructor(e){this.type=fA,this.auth=Ir(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{qb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Bb(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Mf(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(pA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Mf(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uA();l.length!==0&&(l+=a),m_(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function jf(t,e,n,r=!1){const s=new mA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function su(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await jf(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jf(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t,e){const n=cl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(va(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function _A(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yA(t,e,n){const r=Ir(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=g_(e),{host:o,port:a}=vA(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||EA()}function g_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vA(t){const e=g_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Bf(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Bf(o)}}}function Bf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function wA(t,e){return Tr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t,e){return oo(t,"POST","/v1/accounts:signInWithPassword",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(t,e){return oo(t,"POST","/v1/accounts:signInWithEmailLink",wr(t,e))}async function bA(t,e){return oo(t,"POST","/v1/accounts:signInWithEmailLink",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends hh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ui(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ui(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,n,"signInWithPassword",TA);case"emailLink":return IA(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,r,"signUpPassword",wA);case"emailLink":return bA(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(t,e){return oo(t,"POST","/v1/accounts:signInWithIdp",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="http://localhost";class Qr extends hh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=oh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Qr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bs(e,n)}buildRequest(){const e={requestUri:AA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=so(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SA(t){const e=oi(ai(t)).link,n=e?oi(ai(e)).deep_link_id:null,r=oi(ai(t)).deep_link_id;return(r?oi(ai(r)).link:null)||r||n||e||t}class dh{constructor(e){var n,r,s,i,o,a;const l=oi(ai(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=RA((s=l.mode)!==null&&s!==void 0?s:null);oe(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=SA(e);try{return new dh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.providerId=Hs.PROVIDER_ID}static credential(e,n){return Ui._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dh.parseLink(n);return oe(r,"argument-error"),Ui._fromEmailAndCode(e,r.code,r.tenantId)}}Hs.PROVIDER_ID="password";Hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends fh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ao{constructor(){super("facebook.com")}static credential(e){return Qr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends ao{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qr._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gn.credential(n,r)}catch{return null}}}gn.GOOGLE_SIGN_IN_METHOD="google.com";gn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ao{constructor(){super("github.com")}static credential(e){return Qr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ao{constructor(){super("twitter.com")}static credential(e,n){return Qr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e){return oo(t,"POST","/v1/accounts:signUp",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zr._fromIdTokenResponse(e,r,s),o=qf(r);return new Yr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qf(r);return new Yr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends On{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ia.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ia(e,n,r,s)}}function __(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ia._fromErrorAndOperation(t,i,e,r):i})}async function PA(t,e,n=!1){const r=await Li(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Li(t,__(r,s,e,t),n);oe(i.idToken,r,"internal-error");const o=ch(i.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Yr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(t,e,n=!1){const r="signIn",s=await __(t,r,e),i=await Yr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function OA(t,e){return y_(Ir(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v_(t){const e=Ir(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kA(t,e,n){const r=Ir(t),o=await su(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&v_(t),l}),a=await Yr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function DA(t,e,n){return OA(st(t),Hs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&v_(t),r})}function NA(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function VA(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function MA(t){return st(t).signOut()}const ba="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ba,"1"),this.storage.removeItem(ba),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){const t=Je();return uh(t)||ul(t)}const FA=1e3,UA=10;class w_ extends E_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=LA()&&rA(),this.fallbackToPolling=f_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);nA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}w_.type="LOCAL";const $A=w_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends E_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T_.type="SESSION";const I_=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new dl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await jA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=ph("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function qA(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function zA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function WA(){return b_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="firebaseLocalStorageDb",KA=1,Aa="firebaseLocalStorage",R_="fbase_key";class lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fl(t,e){return t.transaction([Aa],e?"readwrite":"readonly").objectStore(Aa)}function GA(){const t=indexedDB.deleteDatabase(A_);return new lo(t).toPromise()}function iu(){const t=indexedDB.open(A_,KA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Aa,{keyPath:R_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Aa)?e(r):(r.close(),await GA(),e(await iu()))})})}async function zf(t,e,n){const r=fl(t,!0).put({[R_]:e,value:n});return new lo(r).toPromise()}async function QA(t,e){const n=fl(t,!1).get(e),r=await new lo(n).toPromise();return r===void 0?null:r.value}function Hf(t,e){const n=fl(t,!0).delete(e);return new lo(n).toPromise()}const YA=800,JA=3;class S_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return b_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dl._getInstance(WA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zA(),!this.activeServiceWorker)return;this.sender=new BA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await iu();return await zf(e,ba,"1"),await Hf(e,ba),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zf(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=fl(s,!1).getAll();return new lo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S_.type="LOCAL";const XA=S_;new io(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){return e?Ln(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends hh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZA(t){return y_(t.auth,new mh(t),t.bypassAuthState)}function eR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),xA(n,new mh(t),t.bypassAuthState)}async function tR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),PA(n,new mh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZA;case"linkViaPopup":case"linkViaRedirect":return tR;case"reauthViaPopup":case"reauthViaRedirect":return eR;default:en(this.auth,"internal-error")}}resolve(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new io(2e3,1e4);async function x_(t,e,n){const r=Ir(t);Nb(t,e,fh);const s=C_(r,n);return new Nr(r,"signInViaPopup",e,s).executeNotNull()}class Nr extends P_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Nr.currentPopupAction&&Nr.currentPopupAction.cancel(),Nr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Bn(this.filter.length===1,"Popup operations only handle one event");const e=ph();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nR.get())};e()}}Nr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="pendingRedirect",ea=new Map;class sR extends P_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ea.get(this.auth._key());if(!e){try{const r=await iR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ea.set(this.auth._key(),e)}return this.bypassAuthState||ea.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iR(t,e){const n=lR(e),r=aR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function oR(t,e){ea.set(t._key(),e)}function aR(t){return Ln(t._redirectPersistence)}function lR(t){return Zo(rR,t.config.apiKey,t.name)}async function cR(t,e,n=!1){const r=Ir(t),s=C_(r,e),o=await new sR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=10*60*1e3;class hR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!O_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wf(e))}saveEventToCache(e){this.cachedEventUids.add(Wf(e)),this.lastProcessedEventTime=Date.now()}}function Wf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function O_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e={}){return Tr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mR=/^https?/;async function gR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fR(t);for(const n of e)try{if(_R(n))return}catch{}en(t,"unauthorized-domain")}function _R(t){const e=ru(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mR.test(n))return!1;if(pR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new io(3e4,6e4);function Kf(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vR(t){return new Promise((e,n)=>{var r,s,i;function o(){Kf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kf(),n(wn(t,"network-request-failed"))},timeout:yR.get()})}if(!((s=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)o();else{const a=dA("iframefcb");return Tn()[a]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},m_(`${hA()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ta=null,e})}let ta=null;function ER(t){return ta=ta||vR(t),ta}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new io(5e3,15e3),TR="__/auth/iframe",IR="emulator/auth/iframe",bR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RR(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lh(e,IR):`https://${t.config.authDomain}/${TR}`,r={apiKey:e.apiKey,appName:t.name,v:ns},s=AR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${so(r).slice(1)}`}async function SR(t){const e=await ER(t),n=Tn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:RR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),a=Tn().setTimeout(()=>{i(o)},wR.get());function l(){Tn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PR=500,xR=600,OR="_blank",kR="http://localhost";class Gf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DR(t,e,n,r=PR,s=xR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},CR),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Je().toLowerCase();n&&(a=l_(c)?OR:n),a_(c)&&(e=e||kR,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[p,E])=>`${d}${p}=${E},`,"");if(tA(c)&&a!=="_self")return NR(e||"",a),new Gf(null);const h=window.open(e||"",a,u);oe(h,t,"popup-blocked");try{h.focus()}catch{}return new Gf(h)}function NR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="__/auth/handler",MR="emulator/auth/handler",LR=encodeURIComponent("fac");async function Qf(t,e,n,r,s,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ns,eventId:s};if(e instanceof fh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(i||{}))o[u]=h}if(e instanceof ao){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${LR}=${encodeURIComponent(l)}`:"";return`${FR(t)}?${so(a).slice(1)}${c}`}function FR({config:t}){return t.emulator?lh(t,MR):`https://${t.authDomain}/${VR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="webStorageSupport";class UR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I_,this._completeRedirectFn=cR,this._overrideRedirectResult=oR}async _openPopup(e,n,r,s){var i;Bn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Qf(e,n,r,ru(),s);return DR(e,o,ph())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Qf(e,n,r,ru(),s);return qA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Bn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await SR(e),r=new hR(e);return n.register("authEvent",s=>(oe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yc,{type:yc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[yc];o!==void 0&&n(!!o),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f_()||uh()||ul()}}const $R=UR;var Yf="@firebase/auth",Jf="1.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qR(t){Gr(new _r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p_(t)},c=new lA(r,s,i,l);return _A(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gr(new _r("auth-internal",e=>{const n=Ir(e.getProvider("auth").getImmediate());return(r=>new jR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(Yf,Jf,BR(t)),En(Yf,Jf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=5*60,HR=Hg("authIdTokenMaxAge")||zR;let Xf=null;const WR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HR)return;const s=n==null?void 0:n.token;Xf!==s&&(Xf=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KR(t=ih()){const e=cl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gA(t,{popupRedirectResolver:$R,persistence:[XA,$A,I_]}),r=Hg("authTokenSyncURL");if(r){const i=WR(r);VA(n,i,()=>i(n.currentUser)),NA(n,o=>i(o))}const s=Bg("auth");return s&&yA(n,`http://${s}`),n}function GR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",GR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qR("Browser");var QR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j,gh=gh||{},le=QR||self;function pl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function co(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function YR(t){return Object.prototype.hasOwnProperty.call(t,vc)&&t[vc]||(t[vc]=++JR)}var vc="closure_uid_"+(1e9*Math.random()>>>0),JR=0;function XR(t,e,n){return t.call.apply(t.bind,arguments)}function ZR(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?wt=XR:wt=ZR,wt.apply(null,arguments)}function No(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ot(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function br(){this.s=this.s,this.o=this.o}var eS=0;br.prototype.s=!1;br.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),eS!=0)&&YR(this)};br.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const k_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _h(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Zf(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(pl(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Tt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var tS=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};le.addEventListener("test",n,e),le.removeEventListener("test",n,e)}catch{}return t}();function $i(t){return/^[\s\xa0]*$/.test(t)}function ml(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function _n(t){return ml().indexOf(t)!=-1}function yh(t){return yh[" "](t),t}yh[" "]=function(){};function nS(t,e){var n=GS;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var rS=_n("Opera"),ks=_n("Trident")||_n("MSIE"),D_=_n("Edge"),ou=D_||ks,N_=_n("Gecko")&&!(ml().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge"))&&!(_n("Trident")||_n("MSIE"))&&!_n("Edge"),sS=ml().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge");function V_(){var t=le.document;return t?t.documentMode:void 0}var au;e:{var Ec="",wc=function(){var t=ml();if(N_)return/rv:([^\);]+)(\)|;)/.exec(t);if(D_)return/Edge\/([\d\.]+)/.exec(t);if(ks)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sS)return/WebKit\/(\S+)/.exec(t);if(rS)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(wc&&(Ec=wc?wc[1]:""),ks){var Tc=V_();if(Tc!=null&&Tc>parseFloat(Ec)){au=String(Tc);break e}}au=Ec}var lu;if(le.document&&ks){var ep=V_();lu=ep||parseInt(au,10)||void 0}else lu=void 0;var iS=lu;function ji(t,e){if(Tt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(N_){e:{try{yh(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:oS[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ji.$.h.call(this)}}ot(ji,Tt);var oS={2:"touch",3:"pen",4:"mouse"};ji.prototype.h=function(){ji.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var uo="closure_listenable_"+(1e6*Math.random()|0),aS=0;function lS(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++aS,this.fa=this.ia=!1}function gl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function vh(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function cS(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function M_(t){const e={};for(const n in t)e[n]=t[n];return e}const tp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L_(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<tp.length;i++)n=tp[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _l(t){this.src=t,this.g={},this.h=0}_l.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=uu(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new lS(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function cu(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=k_(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(gl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function uu(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Eh="closure_lm_"+(1e6*Math.random()|0),Ic={};function F_(t,e,n,r,s){if(r&&r.once)return $_(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)F_(t,e[i],n,r,s);return null}return n=Ih(n),t&&t[uo]?t.O(e,n,co(r)?!!r.capture:!!r,s):U_(t,e,n,!1,r,s)}function U_(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=co(s)?!!s.capture:!!s,a=Th(t);if(a||(t[Eh]=a=new _l(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=uS(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tS||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(B_(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function uS(){function t(n){return e.call(t.src,t.listener,n)}const e=hS;return t}function $_(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)$_(t,e[i],n,r,s);return null}return n=Ih(n),t&&t[uo]?t.P(e,n,co(r)?!!r.capture:!!r,s):U_(t,e,n,!0,r,s)}function j_(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)j_(t,e[i],n,r,s);else r=co(r)?!!r.capture:!!r,n=Ih(n),t&&t[uo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=uu(i,n,r,s),-1<n&&(gl(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Th(t))&&(e=t.g[e.toString()],t=-1,e&&(t=uu(e,n,r,s)),(n=-1<t?e[t]:null)&&wh(n))}function wh(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[uo])cu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(B_(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Th(e))?(cu(n,t),n.h==0&&(n.src=null,e[Eh]=null)):gl(t)}}}function B_(t){return t in Ic?Ic[t]:Ic[t]="on"+t}function hS(t,e){if(t.fa)t=!0;else{e=new ji(e,this);var n=t.listener,r=t.la||t.src;t.ia&&wh(t),t=n.call(r,e)}return t}function Th(t){return t=t[Eh],t instanceof _l?t:null}var bc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ih(t){return typeof t=="function"?t:(t[bc]||(t[bc]=function(e){return t.handleEvent(e)}),t[bc])}function it(){br.call(this),this.i=new _l(this),this.S=this,this.J=null}ot(it,br);it.prototype[uo]=!0;it.prototype.removeEventListener=function(t,e,n,r){j_(this,t,e,n,r)};function ft(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Tt(e,t);else if(e instanceof Tt)e.target=e.target||t;else{var s=e;e=new Tt(r,t),L_(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Vo(o,r,!0,e)&&s}if(o=e.g=t,s=Vo(o,r,!0,e)&&s,s=Vo(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Vo(o,r,!1,e)&&s}it.prototype.N=function(){if(it.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gl(n[r]);delete t.g[e],t.h--}}this.J=null};it.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};it.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Vo(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&cu(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var bh=le.JSON.stringify;class dS{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function fS(){var t=Ah;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class pS{constructor(){this.h=this.g=null}add(e,n){const r=q_.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var q_=new dS(()=>new mS,t=>t.reset());class mS{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function gS(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function _S(t){le.setTimeout(()=>{throw t},0)}let Bi,qi=!1,Ah=new pS,z_=()=>{const t=le.Promise.resolve(void 0);Bi=()=>{t.then(yS)}};var yS=()=>{for(var t;t=fS();){try{t.h.call(t.g)}catch(n){_S(n)}var e=q_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}qi=!1};function yl(t,e){it.call(this),this.h=t||1,this.g=e||le,this.j=wt(this.qb,this),this.l=Date.now()}ot(yl,it);j=yl.prototype;j.ga=!1;j.T=null;j.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ft(this,"tick"),this.ga&&(Rh(this),this.start()))}};j.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}j.N=function(){yl.$.N.call(this),Rh(this),delete this.g};function Sh(t,e,n){if(typeof t=="function")n&&(t=wt(t,n));else if(t&&typeof t.handleEvent=="function")t=wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function H_(t){t.g=Sh(()=>{t.g=null,t.i&&(t.i=!1,H_(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class vS extends br{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:H_(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(t){br.call(this),this.h=t,this.g={}}ot(zi,br);var np=[];function W_(t,e,n,r){Array.isArray(n)||(n&&(np[0]=n.toString()),n=np);for(var s=0;s<n.length;s++){var i=F_(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function K_(t){vh(t.g,function(e,n){this.g.hasOwnProperty(n)&&wh(e)},t),t.g={}}zi.prototype.N=function(){zi.$.N.call(this),K_(this)};zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vl(){this.g=!0}vl.prototype.Ea=function(){this.g=!1};function ES(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function wS(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function gs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+IS(t,n)+(r?" "+r:"")})}function TS(t,e){t.info(function(){return"TIMEOUT: "+e})}vl.prototype.info=function(){};function IS(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return bh(n)}catch{return e}}var rs={},rp=null;function El(){return rp=rp||new it}rs.Ta="serverreachability";function G_(t){Tt.call(this,rs.Ta,t)}ot(G_,Tt);function Hi(t){const e=El();ft(e,new G_(e))}rs.STAT_EVENT="statevent";function Q_(t,e){Tt.call(this,rs.STAT_EVENT,t),this.stat=e}ot(Q_,Tt);function xt(t){const e=El();ft(e,new Q_(e,t))}rs.Ua="timingevent";function Y_(t,e){Tt.call(this,rs.Ua,t),this.size=e}ot(Y_,Tt);function ho(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var wl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},J_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ch(){}Ch.prototype.h=null;function sp(t){return t.h||(t.h=t.i())}function X_(){}var fo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ph(){Tt.call(this,"d")}ot(Ph,Tt);function xh(){Tt.call(this,"c")}ot(xh,Tt);var hu;function Tl(){}ot(Tl,Ch);Tl.prototype.g=function(){return new XMLHttpRequest};Tl.prototype.i=function(){return{}};hu=new Tl;function po(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new zi(this),this.P=bS,t=ou?125:void 0,this.V=new yl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Z_}function Z_(){this.i=null,this.g="",this.h=!1}var bS=45e3,ey={},du={};j=po.prototype;j.setTimeout=function(t){this.P=t};function fu(t,e,n){t.L=1,t.A=bl(qn(e)),t.u=n,t.S=!0,ty(t,null)}function ty(t,e){t.G=Date.now(),mo(t),t.B=qn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),cy(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Z_,t.g=xy(t.l,n?e:null,!t.u),0<t.O&&(t.M=new vS(wt(t.Pa,t,t.g),t.O)),W_(t.U,t.g,"readystatechange",t.nb),e=t.I?M_(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Hi(),ES(t.j,t.v,t.B,t.m,t.W,t.u)}j.nb=function(t){t=t.target;const e=this.M;e&&yn(t)==3?e.l():this.Pa(t)};j.Pa=function(t){try{if(t==this.g)e:{const u=yn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||ou||this.g&&(this.h.h||this.g.ja()||lp(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Hi(3):Hi(2)),Il(this);var n=this.g.da();this.ca=n;t:if(ny(this)){var r=lp(this.g);t="";var s=r.length,i=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Ti(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,wS(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$i(a)){var c=a;break t}}c=null}if(n=c)gs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pu(this,n);else{this.i=!1,this.s=3,xt(12),Vr(this),Ti(this);break e}}this.S?(ry(this,u,o),ou&&this.i&&u==3&&(W_(this.U,this.V,"tick",this.mb),this.V.start())):(gs(this.j,this.m,o,null),pu(this,o)),u==4&&Vr(this),this.i&&!this.J&&(u==4?Ry(this.l,this):(this.i=!1,mo(this)))}else HS(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Vr(this),Ti(this)}}}catch{}finally{}};function ny(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function ry(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=AS(t,n),s==du){e==4&&(t.s=4,xt(14),r=!1),gs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==ey){t.s=4,xt(15),gs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else gs(t.j,t.m,s,null),pu(t,s);ny(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,xt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mh(e),e.M=!0,xt(11))):(gs(t.j,t.m,n,"[Invalid Chunked Response]"),Vr(t),Ti(t))}j.mb=function(){if(this.g){var t=yn(this.g),e=this.g.ja();this.o<e.length&&(Il(this),ry(this,t,e),this.i&&t!=4&&mo(this))}};function AS(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?du:(n=Number(e.substring(n,r)),isNaN(n)?ey:(r+=1,r+n>e.length?du:(e=e.slice(r,r+n),t.o=r+n,e)))}j.cancel=function(){this.J=!0,Vr(this)};function mo(t){t.Y=Date.now()+t.P,sy(t,t.P)}function sy(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ho(wt(t.lb,t),e)}function Il(t){t.C&&(le.clearTimeout(t.C),t.C=null)}j.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(TS(this.j,this.B),this.L!=2&&(Hi(),xt(17)),Vr(this),this.s=2,Ti(this)):sy(this,this.Y-t)};function Ti(t){t.l.H==0||t.J||Ry(t.l,t)}function Vr(t){Il(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Rh(t.V),K_(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function pu(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||mu(n.i,t))){if(!t.K&&mu(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ca(n),Cl(n);else break e;Vh(n),xt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ho(wt(n.ib,n),6e3));if(1>=dy(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Mr(n,11)}else if((t.K||n.g==t)&&Ca(n),!$i(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const E=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var i=r.i;i.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Oh(i,i.h),i.h=null))}if(r.F){const T=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,$e(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Py(r,r.J?r.pa:null,r.Y),o.K){fy(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Il(a),mo(a)),r.g=o}else by(r);0<n.j.length&&Pl(n)}else c[0]!="stop"&&c[0]!="close"||Mr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Mr(n,7):Nh(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Hi(4)}catch{}}function RS(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(pl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function SS(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(pl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function iy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(pl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=SS(t),r=RS(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CS(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Hr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Hr){this.h=t.h,Ra(this,t.j),this.s=t.s,this.g=t.g,Sa(this,t.m),this.l=t.l;var e=t.i,n=new Wi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ip(this,n),this.o=t.o}else t&&(e=String(t).match(oy))?(this.h=!1,Ra(this,e[1]||"",!0),this.s=li(e[2]||""),this.g=li(e[3]||"",!0),Sa(this,e[4]),this.l=li(e[5]||"",!0),ip(this,e[6]||"",!0),this.o=li(e[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Hr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ci(e,op,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ci(e,op,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ci(n,n.charAt(0)=="/"?OS:xS,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ci(n,DS)),t.join("")};function qn(t){return new Hr(t)}function Ra(t,e,n){t.j=n?li(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ip(t,e,n){e instanceof Wi?(t.i=e,NS(t.i,t.h)):(n||(e=ci(e,kS)),t.i=new Wi(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function bl(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function li(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ci(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,PS),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function PS(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var op=/[#\/\?@]/g,xS=/[#\?:]/g,OS=/[#\?]/g,kS=/[#\?@]/g,DS=/#/g;function Wi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ar(t){t.g||(t.g=new Map,t.h=0,t.i&&CS(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}j=Wi.prototype;j.add=function(t,e){Ar(this),this.i=null,t=Ws(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ay(t,e){Ar(t),e=Ws(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ly(t,e){return Ar(t),e=Ws(t,e),t.g.has(e)}j.forEach=function(t,e){Ar(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};j.ta=function(){Ar(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};j.Z=function(t){Ar(this);let e=[];if(typeof t=="string")ly(this,t)&&(e=e.concat(this.g.get(Ws(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};j.set=function(t,e){return Ar(this),this.i=null,t=Ws(this,t),ly(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};j.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function cy(t,e,n){ay(t,e),0<n.length&&(t.i=null,t.g.set(Ws(t,e),_h(n)),t.h+=n.length)}j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Ws(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function NS(t,e){e&&!t.j&&(Ar(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(ay(this,r),cy(this,s,n))},t)),t.j=e}var VS=class{constructor(t,e){this.g=t,this.map=e}};function uy(t){this.l=t||MS,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var MS=10;function hy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function dy(t){return t.h?1:t.g?t.g.size:0}function mu(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Oh(t,e){t.g?t.g.add(e):t.h=e}function fy(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}uy.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function py(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return _h(t.i)}var LS=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function FS(){this.g=new LS}function US(t,e,n){const r=n||"";try{iy(t,function(s,i){let o=s;co(s)&&(o=bh(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function $S(t,e){const n=new vl;if(le.Image){const r=new Image;r.onload=No(Mo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=No(Mo,n,r,"TestLoadImage: error",!1,e),r.onabort=No(Mo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=No(Mo,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Mo(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Al(t){this.l=t.ec||null,this.j=t.ob||!1}ot(Al,Ch);Al.prototype.g=function(){return new Rl(this.l,this.j)};Al.prototype.i=function(t){return function(){return t}}({});function Rl(t,e){it.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=kh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ot(Rl,it);var kh=0;j=Rl.prototype;j.open=function(t,e){if(this.readyState!=kh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ki(this)};j.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=kh};j.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;my(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function my(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}j.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?go(this):Ki(this),this.readyState==3&&my(this)}};j.Za=function(t){this.g&&(this.response=this.responseText=t,go(this))};j.Ya=function(t){this.g&&(this.response=t,go(this))};j.ka=function(){this.g&&go(this)};function go(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ki(t)}j.setRequestHeader=function(t,e){this.v.append(t,e)};j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ki(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var jS=le.JSON.parse;function We(t){it.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gy,this.L=this.M=!1}ot(We,it);var gy="",BS=/^https?$/i,qS=["POST","PUT"];j=We.prototype;j.Oa=function(t){this.M=t};j.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hu.g(),this.C=this.u?sp(this.u):sp(hu),this.g.onreadystatechange=wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){ap(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=le.FormData&&t instanceof le.FormData,!(0<=k_(qS,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vy(this),0<this.B&&((this.L=zS(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wt(this.ua,this)):this.A=Sh(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){ap(this,i)}};function zS(t){return ks&&typeof t.timeout=="number"&&t.ontimeout!==void 0}j.ua=function(){typeof gh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ft(this,"timeout"),this.abort(8))};function ap(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_y(t),Sl(t)}function _y(t){t.F||(t.F=!0,ft(t,"complete"),ft(t,"error"))}j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ft(this,"complete"),ft(this,"abort"),Sl(this))};j.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sl(this,!0)),We.$.N.call(this)};j.La=function(){this.s||(this.G||this.v||this.l?yy(this):this.kb())};j.kb=function(){yy(this)};function yy(t){if(t.h&&typeof gh<"u"&&(!t.C[1]||yn(t)!=4||t.da()!=2)){if(t.v&&yn(t)==4)Sh(t.La,0,t);else if(ft(t,"readystatechange"),yn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(oy)[1]||null;!s&&le.self&&le.self.location&&(s=le.self.location.protocol.slice(0,-1)),r=!BS.test(s?s.toLowerCase():"")}n=r}if(n)ft(t,"complete"),ft(t,"success");else{t.m=6;try{var i=2<yn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",_y(t)}}finally{Sl(t)}}}}function Sl(t,e){if(t.g){vy(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ft(t,"ready");try{n.onreadystatechange=r}catch{}}}function vy(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}j.isActive=function(){return!!this.g};function yn(t){return t.g?t.g.readyState:0}j.da=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}};j.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};j.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),jS(e)}};function lp(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case gy:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function HS(t){const e={};t=(t.g&&2<=yn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if($i(t[r]))continue;var n=gS(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}cS(e,function(r){return r.join(", ")})}j.Ia=function(){return this.m};j.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Ey(t){let e="";return vh(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Dh(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ey(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$e(t,e,n))}function ni(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wy(t){this.Ga=0,this.j=[],this.l=new vl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ni("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ni("baseRetryDelayMs",5e3,t),this.hb=ni("retryDelaySeedMs",1e4,t),this.eb=ni("forwardChannelMaxRetries",2,t),this.xa=ni("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new uy(t&&t.concurrentRequestLimit),this.Ja=new FS,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}j=wy.prototype;j.ra=8;j.H=1;function Nh(t){if(Ty(t),t.H==3){var e=t.W++,n=qn(t.I);if($e(n,"SID",t.K),$e(n,"RID",e),$e(n,"TYPE","terminate"),_o(t,n),e=new po(t,t.l,e),e.L=2,e.A=bl(qn(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.A,n=!0),n||(e.g=xy(e.l,null),e.g.ha(e.A)),e.G=Date.now(),mo(e)}Cy(t)}function Cl(t){t.g&&(Mh(t),t.g.cancel(),t.g=null)}function Ty(t){Cl(t),t.u&&(le.clearTimeout(t.u),t.u=null),Ca(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function Pl(t){if(!hy(t.i)&&!t.m){t.m=!0;var e=t.Na;Bi||z_(),qi||(Bi(),qi=!0),Ah.add(e,t),t.C=0}}function WS(t,e){return dy(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ho(wt(t.Na,t,e),Sy(t,t.C)),t.C++,!0)}j.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new po(this,this.l,t);let i=this.s;if(this.U&&(i?(i=M_(i),L_(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Iy(this,s,e),n=qn(this.I),$e(n,"RID",t),$e(n,"CVER",22),this.F&&$e(n,"X-HTTP-Session-Id",this.F),_o(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Ey(i)))+"&"+e:this.o&&Dh(n,this.o,i)),Oh(this.i,s),this.bb&&$e(n,"TYPE","init"),this.P?($e(n,"$req",e),$e(n,"SID","null"),s.aa=!0,fu(s,n,null)):fu(s,n,e),this.H=2}}else this.H==3&&(t?cp(this,t):this.j.length==0||hy(this.i)||cp(this))};function cp(t,e){var n;e?n=e.m:n=t.W++;const r=qn(t.I);$e(r,"SID",t.K),$e(r,"RID",n),$e(r,"AID",t.V),_o(t,r),t.o&&t.s&&Dh(r,t.o,t.s),n=new po(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Iy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Oh(t.i,n),fu(n,r,e)}function _o(t,e){t.na&&vh(t.na,function(n,r){$e(e,r,n)}),t.h&&iy({},function(n,r){$e(e,r,n)})}function Iy(t,e,n){n=Math.min(t.j.length,n);var r=t.h?wt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{US(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function by(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bi||z_(),qi||(Bi(),qi=!0),Ah.add(e,t),t.A=0}}function Vh(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ho(wt(t.Ma,t),Sy(t,t.A)),t.A++,!0)}j.Ma=function(){if(this.u=null,Ay(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ho(wt(this.jb,this),t)}};j.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xt(10),Cl(this),Ay(this))};function Mh(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function Ay(t){t.g=new po(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=qn(t.wa);$e(e,"RID","rpc"),$e(e,"SID",t.K),$e(e,"AID",t.V),$e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&$e(e,"TO",t.qa),$e(e,"TYPE","xmlhttp"),_o(t,e),t.o&&t.s&&Dh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=bl(qn(e)),n.u=null,n.S=!0,ty(n,t)}j.ib=function(){this.v!=null&&(this.v=null,Cl(this),Vh(this),xt(19))};function Ca(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function Ry(t,e){var n=null;if(t.g==e){Ca(t),Mh(t),t.g=null;var r=2}else if(mu(t.i,e))n=e.F,fy(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=El(),ft(r,new Y_(r,n)),Pl(t)}else by(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&WS(t,e)||r==2&&Vh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Mr(t,5);break;case 4:Mr(t,10);break;case 3:Mr(t,6);break;default:Mr(t,2)}}}function Sy(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Mr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=wt(t.pb,t);n||(n=new Hr("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||Ra(n,"https"),bl(n)),$S(n.toString(),r)}else xt(2);t.H=0,t.h&&t.h.za(e),Cy(t),Ty(t)}j.pb=function(t){t?(this.l.info("Successfully pinged google.com"),xt(2)):(this.l.info("Failed to ping google.com"),xt(1))};function Cy(t){if(t.H=0,t.ma=[],t.h){const e=py(t.i);(e.length!=0||t.j.length!=0)&&(Zf(t.ma,e),Zf(t.ma,t.j),t.i.i.length=0,_h(t.j),t.j.length=0),t.h.ya()}}function Py(t,e,n){var r=n instanceof Hr?qn(n):new Hr(n);if(r.g!="")e&&(r.g=e+"."+r.g),Sa(r,r.m);else{var s=le.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Hr(null);r&&Ra(i,r),e&&(i.g=e),s&&Sa(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&$e(r,n,e),$e(r,"VER",t.ra),_o(t,r),r}function xy(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new We(new Al({ob:n})):new We(t.va),e.Oa(t.J),e}j.isActive=function(){return!!this.h&&this.h.isActive(this)};function Oy(){}j=Oy.prototype;j.Ba=function(){};j.Aa=function(){};j.za=function(){};j.ya=function(){};j.isActive=function(){return!0};j.Va=function(){};function Pa(){if(ks&&!(10<=Number(iS)))throw Error("Environmental error: no available transport.")}Pa.prototype.g=function(t,e){return new Kt(t,e)};function Kt(t,e){it.call(this),this.g=new wy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$i(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$i(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ks(this)}ot(Kt,it);Kt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;xt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Py(t,null,t.Y),Pl(t)};Kt.prototype.close=function(){Nh(this.g)};Kt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=bh(t),t=n);e.j.push(new VS(e.fb++,t)),e.H==3&&Pl(e)};Kt.prototype.N=function(){this.g.h=null,delete this.j,Nh(this.g),delete this.g,Kt.$.N.call(this)};function ky(t){Ph.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ot(ky,Ph);function Dy(){xh.call(this),this.status=1}ot(Dy,xh);function Ks(t){this.g=t}ot(Ks,Oy);Ks.prototype.Ba=function(){ft(this.g,"a")};Ks.prototype.Aa=function(t){ft(this.g,new ky(t))};Ks.prototype.za=function(t){ft(this.g,new Dy)};Ks.prototype.ya=function(){ft(this.g,"b")};function KS(){this.blockSize=-1}function ln(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ot(ln,KS);ln.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ac(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}ln.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Ac(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Ac(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Ac(this,r),s=0;break}}this.h=s,this.i+=e};ln.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ke(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var GS={};function Lh(t){return-128<=t&&128>t?nS(t,function(e){return new ke([e|0],0>e?-1:0)}):new ke([t|0],0>t?-1:0)}function vn(t){if(isNaN(t)||!isFinite(t))return As;if(0>t)return ct(vn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=gu;return new ke(e,0)}function Ny(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ct(Ny(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vn(Math.pow(e,8)),r=As,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=vn(Math.pow(e,i)),r=r.R(i).add(vn(o))):(r=r.R(n),r=r.add(vn(o)))}return r}var gu=4294967296,As=Lh(0),_u=Lh(1),up=Lh(16777216);j=ke.prototype;j.ea=function(){if(Qt(this))return-ct(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:gu+r)*e,e*=gu}return t};j.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Fn(this))return"0";if(Qt(this))return"-"+ct(this).toString(t);for(var e=vn(Math.pow(t,6)),n=this,r="";;){var s=Oa(n,e).g;n=xa(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Fn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};j.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Fn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Qt(t){return t.h==-1}j.X=function(t){return t=xa(this,t),Qt(t)?-1:Fn(t)?0:1};function ct(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ke(n,~t.h).add(_u)}j.abs=function(){return Qt(this)?ct(this):this};j.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ke(n,n[n.length-1]&-2147483648?-1:0)};function xa(t,e){return t.add(ct(e))}j.R=function(t){if(Fn(this)||Fn(t))return As;if(Qt(this))return Qt(t)?ct(this).R(ct(t)):ct(ct(this).R(t));if(Qt(t))return ct(this.R(ct(t)));if(0>this.X(up)&&0>t.X(up))return vn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Lo(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Lo(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Lo(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Lo(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ke(n,0)};function Lo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ri(t,e){this.g=t,this.h=e}function Oa(t,e){if(Fn(e))throw Error("division by zero");if(Fn(t))return new ri(As,As);if(Qt(t))return e=Oa(ct(t),e),new ri(ct(e.g),ct(e.h));if(Qt(e))return e=Oa(t,ct(e)),new ri(ct(e.g),e.h);if(30<t.g.length){if(Qt(t)||Qt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=_u,r=e;0>=r.X(t);)n=hp(n),r=hp(r);var s=us(n,1),i=us(r,1);for(r=us(r,2),n=us(n,2);!Fn(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=us(r,1),n=us(n,1)}return e=xa(t,s.R(e)),new ri(s,e)}for(s=As;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=vn(n),o=i.R(e);Qt(o)||0<o.X(t);)n-=r,i=vn(n),o=i.R(e);Fn(i)&&(i=_u),s=s.add(i),t=xa(t,o)}return new ri(s,t)}j.gb=function(t){return Oa(this,t).h};j.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ke(n,this.h&t.h)};j.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ke(n,this.h|t.h)};j.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ke(n,this.h^t.h)};function hp(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ke(n,t.h)}function us(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ke(s,t.h)}Pa.prototype.createWebChannel=Pa.prototype.g;Kt.prototype.send=Kt.prototype.u;Kt.prototype.open=Kt.prototype.m;Kt.prototype.close=Kt.prototype.close;wl.NO_ERROR=0;wl.TIMEOUT=8;wl.HTTP_ERROR=6;J_.COMPLETE="complete";X_.EventType=fo;fo.OPEN="a";fo.CLOSE="b";fo.ERROR="c";fo.MESSAGE="d";it.prototype.listen=it.prototype.O;We.prototype.listenOnce=We.prototype.P;We.prototype.getLastError=We.prototype.Sa;We.prototype.getLastErrorCode=We.prototype.Ia;We.prototype.getStatus=We.prototype.da;We.prototype.getResponseJson=We.prototype.Wa;We.prototype.getResponseText=We.prototype.ja;We.prototype.send=We.prototype.ha;We.prototype.setWithCredentials=We.prototype.Oa;ln.prototype.digest=ln.prototype.l;ln.prototype.reset=ln.prototype.reset;ln.prototype.update=ln.prototype.j;ke.prototype.add=ke.prototype.add;ke.prototype.multiply=ke.prototype.R;ke.prototype.modulo=ke.prototype.gb;ke.prototype.compare=ke.prototype.X;ke.prototype.toNumber=ke.prototype.ea;ke.prototype.toString=ke.prototype.toString;ke.prototype.getBits=ke.prototype.D;ke.fromNumber=vn;ke.fromString=Ny;var QS=function(){return new Pa},YS=function(){return El()},Rc=wl,JS=J_,XS=rs,dp={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Fo=X_,ZS=We,eC=ln,Rs=ke;const fp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="10.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new rh("@firebase/firestore");function si(){return Jr.logLevel}function $(t,...e){if(Jr.logLevel<=we.DEBUG){const n=e.map(Fh);Jr.debug(`Firestore (${Gs}): ${t}`,...n)}}function Sn(t,...e){if(Jr.logLevel<=we.ERROR){const n=e.map(Fh);Jr.error(`Firestore (${Gs}): ${t}`,...n)}}function Ds(t,...e){if(Jr.logLevel<=we.WARN){const n=e.map(Fh);Jr.warn(`Firestore (${Gs}): ${t}`,...n)}}function Fh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+t;throw Sn(e),new Error(e)}function Me(t,e){t||ae()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class nC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rC{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $n)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string"),new Vy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new yt(e)}}class sC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new oC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=lC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Ns(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Ze(0,0))}static max(){return new ce(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Gi{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const cC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Gi{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return cC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(je.fromString(e))}static fromName(e){return new J(je.fromString(e).popFirst(5))}static empty(){return new J(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new je(e.slice()))}}function uC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new yr(s,J.empty(),e)}function hC(t){return new yr(t.readTime,t.key,-1)}class yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yr(ce.min(),J.empty(),-1)}static max(){return new yr(ce.max(),J.empty(),-1)}}function dC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){if(t.code!==S.FAILED_PRECONDITION||t.message!==fC)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,r)=>{n(e)})}static reject(e){return new C((n,r)=>{r(e)})}static waitFor(e){return new C((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=C.resolve(!1);for(const r of e)n=n.next(s=>s?C.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new C((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new C((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new $n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ii(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=$h(r.target.error);this.V.reject(new Ii(e,s))}}static open(e,n,r,s){try{return new Uh(n,e.transaction(s,r))}catch(i){throw new Ii(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new gC(n)}}class Lr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Lr.S(Je())===12.2&&Sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),kr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Kg())return!1;if(Lr.C())return!0;const e=Je(),n=Lr.S(e),r=0<n&&n<10,s=Lr.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||($("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ii(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(S.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ii(e,o))},s.onupgradeneeded=i=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Uh.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),C.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class mC{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return kr(this.k.delete())}}class Ii extends K{constructor(e,n){super(S.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function vo(t){return t.name==="IndexedDbTransactionError"}class gC{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kr(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),kr(this.store.add(e))}get(e){return kr(this.store.get(e)).next(n=>(n===void 0&&(n=null),$("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),kr(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),kr(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new C((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new C((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){$("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new C((r,s)=>{n.onerror=i=>{const o=$h(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new C((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new mC(a),c=n(a.primaryKey,a.value,l);if(c instanceof C){const u=c.catch(h=>(l.done(),C.reject(h)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>C.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function kr(t){return new C((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=$h(r.target.error);n(s)}})}let pp=!1;function $h(t){const e=Lr.S(Je());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pp||(pp=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}jh._e=-1;function xl(t){return t==null}function ka(t){return t===0&&1/t==-1/0}function _C(t){return typeof t=="number"&&Number.isInteger(t)&&!ka(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ly(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uo(this.root,e,this.comparator,!0)}}class Uo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gp(this.data.getIterator())}getIteratorFrom(e){return new gp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class gp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new pt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Fy("Invalid base64 string: "+i):i}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const yC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(t){if(Me(!!t),typeof t=="string"){let e=0;const n=yC.exec(t);if(Me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qh(t){const e=t.mapValue.fields.__previous_value__;return Bh(e)?qh(e):e}function Qi(t){const e=vr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Yi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Yi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bh(t)?4:EC(t)?9007199254740991:10:ae()}function Cn(t,e){if(t===e)return!0;const n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qi(t).isEqual(Qi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=vr(s.timestampValue),a=vr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Xr(s.bytesValue).isEqual(Xr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Qe(s.doubleValue),a=Qe(i.doubleValue);return o===a?ka(o)===ka(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(mp(o)!==mp(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Cn(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Ji(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function Vs(t,e){if(t===e)return 0;const n=Zr(t),r=Zr(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Qe(i.integerValue||i.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _p(t.timestampValue,e.timestampValue);case 4:return _p(Qi(t),Qi(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Xr(i),l=Xr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Se(a[c],l[c]);if(u!==0)return u}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(Qe(i.latitude),Qe(o.latitude));return a!==0?a:Se(Qe(i.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Vs(a[c],l[c]);if(u)return u}return Se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===$o.mapValue&&o===$o.mapValue)return 0;if(i===$o.mapValue)return 1;if(o===$o.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Se(l[h],u[h]);if(d!==0)return d;const p=Vs(a[l[h]],c[u[h]]);if(p!==0)return p}return Se(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ae()}}function _p(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=vr(t),r=vr(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function Ms(t){return yu(t)}function yu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=yu(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${yu(n.fields[o])}`;return s+"}"}(t.mapValue):ae()}function yp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vu(t){return!!t&&"integerValue"in t}function zh(t){return!!t&&"arrayValue"in t}function vp(t){return!!t&&"nullValue"in t}function Ep(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function na(t){return!!t&&"mapValue"in t}function bi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!na(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bi(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=bi(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());na(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];na(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ss(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ut(bi(this.value))}}function Uy(t){const e=[];return ss(t.fields,(n,r)=>{const s=new dt([n]);if(na(r)){const i=Uy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,ce.min(),ce.min(),ce.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,ce.min(),ce.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,ce.min(),ce.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.position=e,this.inclusive=n}}function wp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Vs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n="asc"){this.field=e,this.dir=n}}function wC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{}class Ye extends $y{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IC(e,n,r):n==="array-contains"?new RC(e,r):n==="in"?new SC(e,r):n==="not-in"?new CC(e,r):n==="array-contains-any"?new PC(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bC(e,r):new AC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vs(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(Vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends $y{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new cn(e,n)}matches(e){return jy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function jy(t){return t.op==="and"}function By(t){return TC(t)&&jy(t)}function TC(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function Eu(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(By(t))return t.filters.map(e=>Eu(e)).join(",");{const e=t.filters.map(n=>Eu(n)).join(",");return`${t.op}(${e})`}}function qy(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof cn?function(r,s){return s instanceof cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&qy(o,s.filters[a]),!0):!1}(t,e):void ae()}function zy(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(zy).join(" ,")+"}"}(t):"Filter"}class IC extends Ye{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class bC extends Ye{constructor(e,n){super(e,"in",n),this.keys=Hy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AC extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=Hy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hy(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class RC extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zh(n)&&Ji(n.arrayValue,this.value)}}class SC extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ji(this.value.arrayValue,n)}}class CC extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ji(this.value.arrayValue,n)}}class PC extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ji(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Ip(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xC(t,e,n,r,s,i,o)}function Hh(t){const e=he(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eu(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),xl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.ce=n}return e.ce}function Wh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tp(t.startAt,e.startAt)&&Tp(t.endAt,e.endAt)}function wu(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function OC(t,e,n,r,s,i,o,a){return new Eo(t,e,n,r,s,i,o,a)}function Wy(t){return new Eo(t)}function bp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ky(t){return t.collectionGroup!==null}function Ai(t){const e=he(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new Na(i,r))}),n.has(dt.keyField().canonicalString())||e.le.push(new Na(dt.keyField(),r))}return e.le}function In(t){const e=he(t);return e.he||(e.he=kC(e,Ai(t))),e.he}function kC(t,e){if(t.limitType==="F")return Ip(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Na(s.field,i)});const n=t.endAt?new Da(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Da(t.startAt.position,t.startAt.inclusive):null;return Ip(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tu(t,e){const n=t.filters.concat([e]);return new Eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Iu(t,e,n){return new Eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ol(t,e){return Wh(In(t),In(e))&&t.limitType===e.limitType}function Gy(t){return`${Hh(In(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>zy(s)).join(", ")}]`),xl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ms(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ms(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function kl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ai(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=wp(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ai(r),s)||r.endAt&&!function(o,a,l){const c=wp(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ai(r),s))}(t,e)}function DC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Qy(t){return(e,n)=>{let r=!1;for(const s of Ai(t)){const i=NC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function NC(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Vs(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ly(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new He(J.comparator);function zn(){return VC}const Yy=new He(J.comparator);function ui(...t){let e=Yy;for(const n of t)e=e.insert(n.key,n);return e}function Jy(t){let e=Yy;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fr(){return Ri()}function Xy(){return Ri()}function Ri(){return new Qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const MC=new He(J.comparator),LC=new pt(J.comparator);function ye(...t){let e=LC;for(const n of t)e=e.add(n);return e}const FC=new pt(Se);function UC(){return FC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ka(e)?"-0":e}}function ev(t){return{integerValue:""+t}}function $C(t,e){return _C(e)?ev(e):Zy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this._=void 0}}function jC(t,e,n){return t instanceof Va?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Bh(i)&&(i=qh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Xi?nv(t,e):t instanceof Zi?rv(t,e):function(s,i){const o=tv(s,i),a=Ap(o)+Ap(s.Ie);return vu(o)&&vu(s.Ie)?ev(a):Zy(s.serializer,a)}(t,e)}function BC(t,e,n){return t instanceof Xi?nv(t,e):t instanceof Zi?rv(t,e):n}function tv(t,e){return t instanceof Ma?function(r){return vu(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Va extends Dl{}class Xi extends Dl{constructor(e){super(),this.elements=e}}function nv(t,e){const n=sv(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zi extends Dl{constructor(e){super(),this.elements=e}}function rv(t,e){let n=sv(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class Ma extends Dl{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Ap(t){return Qe(t.integerValue||t.doubleValue)}function sv(t){return zh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xi&&s instanceof Xi||r instanceof Zi&&s instanceof Zi?Ns(r.elements,s.elements,Cn):r instanceof Ma&&s instanceof Ma?Cn(r.Ie,s.Ie):r instanceof Va&&s instanceof Va}(t.transform,e.transform)}class zC{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ra(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nl{}function iv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new av(t.key,bn.none()):new wo(t.key,t.data,bn.none());{const n=t.data,r=Ut.empty();let s=new pt(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Rr(t.key,r,new Ht(s.toArray()),bn.none())}}function HC(t,e,n){t instanceof wo?function(s,i,o){const a=s.value.clone(),l=Sp(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Rr?function(s,i,o){if(!ra(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Sp(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(ov(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Si(t,e,n,r){return t instanceof wo?function(i,o,a,l){if(!ra(i.precondition,o))return a;const c=i.value.clone(),u=Cp(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rr?function(i,o,a,l){if(!ra(i.precondition,o))return a;const c=Cp(i.fieldTransforms,l,o),u=o.data;return u.setAll(ov(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return ra(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=tv(r.transform,s||null);i!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,i))}return n||null}function Rp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ns(r,s,(i,o)=>qC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wo extends Nl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rr extends Nl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ov(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sp(t,e,n){const r=new Map;Me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,BC(o,a,n[s]))}return r}function Cp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jC(i,o,e))}return r}class av extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KC extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Si(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Si(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xy();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=iv(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>Rp(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>Rp(n,r))}}class Kh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Me(e.mutations.length===r.length);let s=function(){return MC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Kh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,Ie;function JC(t){switch(t){default:return ae();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function lv(t){if(t===void 0)return Sn("GRPC error has no .code"),S.UNKNOWN;switch(t){case Ge.OK:return S.OK;case Ge.CANCELLED:return S.CANCELLED;case Ge.UNKNOWN:return S.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return S.INTERNAL;case Ge.UNAVAILABLE:return S.UNAVAILABLE;case Ge.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Ge.NOT_FOUND:return S.NOT_FOUND;case Ge.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Ge.ABORTED:return S.ABORTED;case Ge.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Ge.DATA_LOSS:return S.DATA_LOSS;default:return ae()}}(Ie=Ge||(Ge={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new Rs([4294967295,4294967295],0);function Pp(t){const e=XC().encode(t),n=new eC;return n.update(e),new Uint8Array(n.digest())}function xp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([s,i],0)]}class Gh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hi(`Invalid padding: ${n}`);if(r<0)throw new hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Rs.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(Rs.fromNumber(r)));return s.compare(ZC)===1&&(s=new Rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Pp(e),[r,s]=xp(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Gh(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Pp(e),[r,s]=xp(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,To.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vl(ce.min(),s,new He(Se),zn(),ye())}}class To{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new To(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class cv{constructor(e,n){this.targetId=e,this.fe=n}}class uv{constructor(e,n,r=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Op{constructor(){this.ge=0,this.pe=Dp(),this.ye=bt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ye(),n=ye(),r=ye();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new To(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Dp()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Me(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class eP{constructor(e){this.Le=e,this.ke=new Map,this.qe=zn(),this.Qe=kp(),this.Ke=new He(Se)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(wu(i))if(r===0){const o=new J(i.path);this.We(n,o,vt.newNoDocument(o,ce.min()))}else Me(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Xr(r).toUint8Array()}catch(l){if(l instanceof Fy)return Ds("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Gh(o,s,i)}catch(l){return Ds(l instanceof hi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&wu(a.target)){const l=new J(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,vt.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=ye();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Vl(e,n,this.Ke,this.qe,r);return this.qe=zn(),this.Qe=kp(),this.Ke=new He(Se),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Op,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new pt(Se),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Op),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function kp(){return new He(J.comparator)}function Dp(){return new He(J.comparator)}const tP={asc:"ASCENDING",desc:"DESCENDING"},nP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class sP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bu(t,e){return t.useProto3Json||xl(e)?e:{value:e}}function La(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iP(t,e){return La(t,e.toTimestamp())}function An(t){return Me(!!t),ce.fromTimestamp(function(n){const r=vr(n);return new Ze(r.seconds,r.nanos)}(t))}function Qh(t,e){return Au(t,e).canonicalString()}function Au(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dv(t){const e=je.fromString(t);return Me(_v(e)),e}function Ru(t,e){return Qh(t.databaseId,e.path)}function Sc(t,e){const n=dv(e);if(n.get(1)!==t.databaseId.projectId)throw new K(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(pv(n))}function fv(t,e){return Qh(t.databaseId,e)}function oP(t){const e=dv(t);return e.length===4?je.emptyPath():pv(e)}function Su(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pv(t){return Me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Np(t,e,n){return{name:Ru(t,e),fields:n.value.mapValue.fields}}function aP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Me(u===void 0||typeof u=="string"),bt.fromBase64String(u||"")):(Me(u===void 0||u instanceof Uint8Array),bt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?S.UNKNOWN:lv(c.code);return new K(u,c.message||"")}(o);n=new uv(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sc(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):ce.min(),a=new Ut({mapValue:{fields:r.document.fields}}),l=vt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new sa(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sc(t,r.document),i=r.readTime?An(r.readTime):ce.min(),o=vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new sa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sc(t,r.document),i=r.removedTargetIds||[];n=new sa([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new YC(s,i),a=r.targetId;n=new cv(a,o)}}return n}function lP(t,e){let n;if(e instanceof wo)n={update:Np(t,e.key,e.value)};else if(e instanceof av)n={delete:Ru(t,e.key)};else if(e instanceof Rr)n={update:Np(t,e.key,e.data),updateMask:_P(e.fieldMask)};else{if(!(e instanceof KC))return ae();n={verify:Ru(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function cP(t,e){return t&&t.length>0?(Me(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(ce.min())&&(o=An(i)),new zC(o,s.transformResults||[])}(n,e))):[]}function uP(t,e){return{documents:[fv(t,e.path)]}}function hP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fv(t,s);const i=function(c){if(c.length!==0)return gv(cn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:ps(d.field),direction:pP(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=bu(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function dP(t){let e=oP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Me(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const d=mv(h);return d instanceof cn&&By(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(E){return new Na(ms(E.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,xl(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new Da(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new Da(p,d)}(n.endAt)),OC(e,s,o,i,a,"F",l,c)}function fP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ms(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ms(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ms(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ms(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(ms(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(r=>mv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function pP(t){return tP[t]}function mP(t){return nP[t]}function gP(t){return rP[t]}function ps(t){return{fieldPath:t.canonicalString()}}function ms(t){return dt.fromServerFormat(t.fieldPath)}function gv(t){return t instanceof Ye?function(n){if(n.op==="=="){if(Ep(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(vp(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ep(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(vp(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:mP(n.op),value:n.value}}}(t):t instanceof cn?function(n){const r=n.getFilters().map(s=>gv(s));return r.length===1?r[0]:{compositeFilter:{op:gP(n.op),filters:r}}}(t):ae()}function _P(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _v(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.ct=e}}function vP(t){const e=dP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this._n=new wP}addToCollectionParentIndex(e,n){return this._n.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(yr.min())}updateCollectionGroup(e,n,r){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class wP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new pt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ls(0)}static Bn(){return new Ls(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.changes=new Qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?C.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Si(r.mutation,s,Ht.empty(),Ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=Fr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ui();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zn();const o=Ri(),a=function(){return Ri()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Rr)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Si(u.mutation,c,u.mutation.getFieldMask(),Ze.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new IP(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ri();let s=new He((o,a)=>o-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Ht.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||ye()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Xy();u.forEach(d=>{if(!i.has(d)){const p=iv(n.get(d),r.get(d));p!==null&&h.set(d,p),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return C.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ky(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):C.resolve(Fr());let a=-1,l=i;return o.next(c=>C.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?C.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ye())).next(u=>({batchId:a,changes:Jy(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=ui();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ui();return this.indexManager.getCollectionParents(e,i).next(a=>C.forEach(a,l=>{const c=function(h,d){return new Eo(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,vt.newInvalidDocument(u)))});let a=ui();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Si(u.mutation,c,Ht.empty(),Ze.now()),kl(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return C.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),C.resolve()}getNamedQuery(e,n){return C.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:vP(s.bundledQuery),readTime:An(s.readTime)}}(n)),C.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new He(J.comparator),this.hr=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fr();return C.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),C.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),C.resolve()}getOverlaysForCollection(e,n,r){const s=Fr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return C.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new He((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Fr(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Fr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return C.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QC(n,r));let i=this.hr.get(n);i===void 0&&(i=ye(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.Pr=new pt(rt.Ir),this.Tr=new pt(rt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new rt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new je([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new je([])),r=new rt(n,e),s=new rt(n,e+1);let i=ye();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new pt(rt.Ir)}checkEmpty(e){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GC(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,n){return C.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return C.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),C.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(Se);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),C.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new rt(new J(i),0);let a=new pt(Se);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),C.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return C.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new rt(n,0),s=this.wr.firstAfterOrEqual(r);return C.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,C.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.vr=e,this.docs=function(){return new He(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return C.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),C.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zn();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||dC(hC(u),r)<=0||(s.has(u.key)||kl(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return C.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Fr(e,n){return C.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PP(this)}getSize(e){return C.resolve(this.size)}}class PP extends TP{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),C.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.persistence=e,this.Mr=new Qs(n=>Hh(n),Wh),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Yh,this.targetCount=0,this.Br=Ls.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),C.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Ls(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.qn(n),C.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),C.waitFor(i).next(()=>s)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return C.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),C.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),C.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),C.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return C.resolve(r)}containsKey(e,n){return C.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.Lr={},this.overlays={},this.kr=new jh(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xP(this),this.indexManager=new EP,this.remoteDocumentCache=function(s){return new CP(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new yP(n),this.$r=new AP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new SP(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new kP(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return C.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class kP extends pC{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.zr=new Yh,this.jr=null}static Hr(e){return new Jh(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),C.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),C.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Jr,r=>{const s=J.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return C.or([()=>C.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return gI()?8:Lr.v(Je())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new DP;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(si()<=we.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),C.resolve()):(si()<=we.DEBUG&&$("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(si()<=we.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):C.resolve())}ji(e,n){if(bp(n))return C.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Iu(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Iu(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return bp(n)||s.isEqual(ce.min())?C.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?C.resolve(null):(si()<=we.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fs(n)),this.es(e,o,n,uC(s,-1)).next(a=>a))})}Zi(e,n){let r=new pt(Qy(e));return n.forEach((s,i)=>{kl(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return si()<=we.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",fs(n)),this.zi.getDocumentsMatchingQuery(e,n,yr.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new He(Se),this.rs=new Qs(i=>Hh(i),Wh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function MP(t,e,n,r){return new VP(t,e,n,r)}async function yv(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ye();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function LP(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let p=C.resolve();return d.forEach(E=>{p=p.next(()=>u.getEntry(l,E)).next(T=>{const w=c.docVersions.get(E);Me(w!==null),T.version.compareTo(w)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function vv(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function FP(t,e){const n=he(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let p=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(bt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(h,p),function(T,w,x){return T.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(d,p,u)&&a.push(n.Qr.updateTargetData(i,p))});let l=zn(),c=ye();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(UP(i,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(ce.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return C.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function UP(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function $P(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jP(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,C.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Cu(t,e,n){const r=he(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!vo(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function Vp(t,e,n){const r=he(t);let s=ce.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=he(l),d=h.rs.get(u);return d!==void 0?C.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,In(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:ye())).next(a=>(BP(r,DC(e),a),{documents:a,hs:i})))}function BP(t,e,n){let r=t.ss.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class Mp{constructor(){this.activeTargetIds=UC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qP{constructor(){this.no=new Mp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Mp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo=null;function Cc(){return jo===null?jo=function(){return 268435456+Math.round(2147483648*Math.random())}():jo++,"0x"+jo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class KP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Cc(),l=this.bo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>($("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ds("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=HP[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=Cc();return new Promise((o,a)=>{const l=new ZS;l.setWithCredentials(!0),l.listenOnce(JS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rc.NO_ERROR:const u=l.getResponseJson();$(_t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Rc.TIMEOUT:$(_t,`RPC '${e}' ${i} timed out`),a(new K(S.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const h=l.getStatus();if($(_t,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const E=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(x)>=0?x:S.UNKNOWN}(p.status);a(new K(E,p.message))}else a(new K(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(S.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{$(_t,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);$(_t,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=Cc(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QS(),a=YS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");$(_t,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,p=!1;const E=new WP({lo:w=>{p?$(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(d||($(_t,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),$(_t,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},ho:()=>h.close()}),T=(w,x,D)=>{w.listen(x,L=>{try{D(L)}catch(N){setTimeout(()=>{throw N},0)}})};return T(h,Fo.EventType.OPEN,()=>{p||$(_t,`RPC '${e}' stream ${s} transport opened.`)}),T(h,Fo.EventType.CLOSE,()=>{p||(p=!0,$(_t,`RPC '${e}' stream ${s} transport closed`),E.Vo())}),T(h,Fo.EventType.ERROR,w=>{p||(p=!0,Ds(_t,`RPC '${e}' stream ${s} transport errored:`,w),E.Vo(new K(S.UNAVAILABLE,"The operation could not be completed")))}),T(h,Fo.EventType.MESSAGE,w=>{var x;if(!p){const D=w.data[0];Me(!!D);const L=D,N=L.error||((x=L[0])===null||x===void 0?void 0:x.error);if(N){$(_t,`RPC '${e}' stream ${s} received error:`,N);const H=N.status;let B=function(ee){const de=Ge[ee];if(de!==void 0)return lv(de)}(H),me=N.message;B===void 0&&(B=S.INTERNAL,me="Unknown error status: "+H+" with message "+N.message),p=!0,E.Vo(new K(B,me)),h.close()}else $(_t,`RPC '${e}' stream ${s} received:`,D),E.mo(D)}}),T(a,XS.STAT_EVENT,w=>{w.stat===dp.PROXY?$(_t,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===dp.NOPROXY&&$(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}}function Pc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return new sP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ev(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===S.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new K(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GP extends wv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=aP(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?An(o.readTime):ce.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Su(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=wu(l)?{documents:uP(i,l)}:{query:hP(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hv(i,o.resumeToken);const c=bu(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=La(i,o.snapshotVersion.toTimestamp());const c=bu(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=fP(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Su(this.serializer),n.removeTarget=e,this.t_(n)}}class QP extends wv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=cP(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.T_(r,n)}return Me(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Su(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lP(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new K(S.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Au(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(S.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Au(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(S.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class JP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Sn(n),this.g_=!1):$("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{is(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=he(l);c.v_.add(4),await Io(c),c.x_.set("Unknown"),c.v_.delete(4),await Ll(c)}(this))})}),this.x_=new JP(r,s)}}async function Ll(t){if(is(t))for(const e of t.F_)await e(!0)}async function Io(t){for(const e of t.F_)await e(!1)}function Tv(t,e){const n=he(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),td(n)?ed(n):Ys(n).Jo()&&Zh(n,e))}function Iv(t,e){const n=he(t),r=Ys(n);n.C_.delete(e),r.Jo()&&bv(n,e),n.C_.size===0&&(r.Jo()?r.Xo():is(n)&&n.x_.set("Unknown"))}function Zh(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).c_(e)}function bv(t,e){t.O_.Oe(e),Ys(t).l_(e)}function ed(t){t.O_=new eP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.x_.p_()}function td(t){return is(t)&&!Ys(t).Ho()&&t.C_.size>0}function is(t){return he(t).v_.size===0}function Av(t){t.O_=void 0}async function ZP(t){t.C_.forEach((e,n)=>{Zh(t,e)})}async function e1(t,e){Av(t),td(t)?(t.x_.S_(e),ed(t)):t.x_.set("Unknown")}async function t1(t,e,n){if(t.x_.set("Online"),e instanceof uv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fa(t,r)}else if(e instanceof sa?t.O_.$e(e):e instanceof cv?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ce.min()))try{const r=await vv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(bt.EMPTY_BYTE_STRING,u.snapshotVersion)),bv(i,l);const h=new ir(u.target,l,c,u.sequenceNumber);Zh(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await Fa(t,r)}}async function Fa(t,e,n){if(!vo(e))throw e;t.v_.add(1),await Io(t),t.x_.set("Offline"),n||(n=()=>vv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Ll(t)})}function Rv(t,e){return e().catch(n=>Fa(t,n,e))}async function Fl(t){const e=he(t),n=Er(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;n1(e);)try{const s=await $P(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,r1(e,s)}catch(s){await Fa(e,s)}Sv(e)&&Cv(e)}function n1(t){return is(t)&&t.D_.length<10}function r1(t,e){t.D_.push(e);const n=Er(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Sv(t){return is(t)&&!Er(t).Ho()&&t.D_.length>0}function Cv(t){Er(t).start()}async function s1(t){Er(t).d_()}async function i1(t){const e=Er(t);for(const n of t.D_)e.I_(n.mutations)}async function o1(t,e,n){const r=t.D_.shift(),s=Kh.from(r,e,n);await Rv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fl(t)}async function a1(t,e){e&&Er(t).P_&&await async function(r,s){if(function(o){return JC(o)&&o!==S.ABORTED}(s.code)){const i=r.D_.shift();Er(r).Zo(),await Rv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fl(r)}}(t,e),Sv(t)&&Cv(t)}async function Fp(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const r=is(n);n.v_.add(3),await Io(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Ll(n)}async function l1(t,e){const n=he(t);e?(n.v_.delete(2),await Ll(n)):e||(n.v_.add(2),await Io(n),n.x_.set("Unknown"))}function Ys(t){return t.N_||(t.N_=function(n,r,s){const i=he(n);return i.R_(),new GP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:ZP.bind(null,t),To:e1.bind(null,t),u_:t1.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),td(t)?ed(t):t.x_.set("Unknown")):(await t.N_.stop(),Av(t))})),t.N_}function Er(t){return t.B_||(t.B_=function(n,r,s){const i=he(n);return i.R_(),new QP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:s1.bind(null,t),To:a1.bind(null,t),E_:i1.bind(null,t),T_:o1.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await Fl(t)):(await t.B_.stop(),t.D_.length>0&&($("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new nd(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rd(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),vo(t))return new K(S.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ui(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new Ss(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.L_=new He(J.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):ae():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fs{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fs(e,n,Ss.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.q_=void 0,this.Q_=[]}}class u1{constructor(){this.queries=new Qs(e=>Gy(e),Ol),this.onlineState="Unknown",this.K_=new Set}}async function h1(t,e){const n=he(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new c1),s)try{i.q_=await n.onListen(r)}catch(o){const a=rd(o,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Q_.push(e),e.U_(n.onlineState),i.q_&&e.W_(i.q_)&&sd(n)}async function d1(t,e){const n=he(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function f1(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&sd(n)}function p1(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function sd(t){t.K_.forEach(e=>{e.next()})}class m1{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.key=e}}class xv{constructor(e){this.key=e}}class g1{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ye(),this.mutatedKeys=ye(),this.ua=Qy(e),this.ca=new Ss(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new Up,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),p=kl(this.query,h)?h:null,E=!!d&&this.mutatedKeys.has(d.key),T=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?E!==T&&(r.track({type:3,doc:p}),w=!0):this.Ia(d,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.ua(p,l)>0||c&&this.ua(p,c)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),w=!0):d&&!p&&(r.track({type:1,doc:d}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),i=T?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((u,h)=>function(p,E){const T=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return T(p)-T(E)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new Fs(this.query,e.ca,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Up,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=ye(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new xv(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Pv(r))}),n}Ra(e){this.oa=e.hs,this.aa=ye();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Fs.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class _1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class y1{constructor(e){this.key=e,this.ma=!1}}class v1{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Qs(a=>Gy(a),Ol),this.pa=new Map,this.ya=new Set,this.wa=new He(J.comparator),this.Sa=new Map,this.ba=new Yh,this.Da={},this.Ca=new Map,this.va=Ls.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function E1(t,e){const n=x1(t);let r,s;const i=n.ga.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await jP(n.localStore,In(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await w1(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Tv(n.remoteStore,o)}return s}async function w1(t,e,n,r,s){t.Ma=(h,d,p)=>async function(T,w,x,D){let L=w.view.ha(x);L.Xi&&(L=await Vp(T.localStore,w.query,!1).then(({documents:me})=>w.view.ha(me,L)));const N=D&&D.targetChanges.get(w.targetId),H=D&&D.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(L,T.isPrimaryClient,N,H);return jp(T,w.targetId,B.da),B.snapshot}(t,h,d,p);const i=await Vp(t.localStore,e,!0),o=new g1(e,i.hs),a=o.ha(i.documents),l=To.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);jp(t,n,c.da);const u=new _1(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function T1(t,e){const n=he(t),r=n.ga.get(e),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!Ol(i,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Cu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Iv(n.remoteStore,r.targetId),Pu(n,r.targetId)}).catch(yo)):(Pu(n,r.targetId),await Cu(n.localStore,r.targetId,!0))}async function I1(t,e,n){const r=O1(t);try{const s=await function(o,a){const l=he(o),c=Ze.now(),u=a.reduce((p,E)=>p.add(E.key),ye());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=zn(),T=ye();return l.os.getEntries(p,u).next(w=>{E=w,E.forEach((x,D)=>{D.isValidDocument()||(T=T.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,E)).next(w=>{h=w;const x=[];for(const D of a){const L=WC(D,h.get(D.key).overlayedDocument);L!=null&&x.push(new Rr(D.key,L,Uy(L.value.mapValue),bn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(w=>{d=w;const x=w.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(p,w.batchId,x)})}).then(()=>({batchId:d.batchId,changes:Jy(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Da[o.currentUser.toKey()];c||(c=new He(Se)),c=c.insert(a,l),o.Da[o.currentUser.toKey()]=c}(r,s.batchId,n),await bo(r,s.changes),await Fl(r.remoteStore)}catch(s){const i=rd(s,"Failed to persist write");n.reject(i)}}async function Ov(t,e){const n=he(t);try{const r=await FP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?Me(o.ma):s.removedDocuments.size>0&&(Me(o.ma),o.ma=!1))}),await bo(n,r,e)}catch(r){await yo(r)}}function $p(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.U_(a)&&(c=!0)}),c&&sd(l)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function b1(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Sa.get(e),i=s&&s.key;if(i){let o=new He(J.comparator);o=o.insert(i,vt.newNoDocument(i,ce.min()));const a=ye().add(i),l=new Vl(ce.min(),new Map,new He(Se),o,a);await Ov(r,l),r.wa=r.wa.remove(i),r.Sa.delete(e),id(r)}else await Cu(r.localStore,e,!1).then(()=>Pu(r,e,n)).catch(yo)}async function A1(t,e){const n=he(t),r=e.batch.batchId;try{const s=await LP(n.localStore,e);Dv(n,r,null),kv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bo(n,s)}catch(s){await yo(s)}}async function R1(t,e,n){const r=he(t);try{const s=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Me(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);Dv(r,e,n),kv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bo(r,s)}catch(s){await yo(s)}}function kv(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Dv(t,e,n){const r=he(t);let s=r.Da[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}function Pu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||Nv(t,r)})}function Nv(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(Iv(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),id(t))}function jp(t,e,n){for(const r of n)r instanceof Pv?(t.ba.addReference(r.key,e),S1(t,r)):r instanceof xv?($("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||Nv(t,r.key)):ae()}function S1(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||($("SyncEngine","New document in limbo: "+n),t.ya.add(r),id(t))}function id(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new J(je.fromString(e)),r=t.va.next();t.Sa.set(r,new y1(n)),t.wa=t.wa.insert(n,r),Tv(t.remoteStore,new ir(In(Wy(n.path)),r,"TargetPurposeLimboResolution",jh._e))}}async function bo(t,e,n){const r=he(t),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=Xh.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.fa.u_(s),await async function(l,c){const u=he(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>C.forEach(c,d=>C.forEach(d.qi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>C.forEach(d.Qi,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!vo(h))throw h;$("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.ns.get(d),E=p.snapshotVersion,T=p.withLastLimboFreeSnapshotVersion(E);u.ns=u.ns.insert(d,T)}}}(r.localStore,i))}async function C1(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const r=await yv(n.localStore,e);n.currentUser=e,function(i,o){i.Ca.forEach(a=>{a.forEach(l=>{l.reject(new K(S.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bo(n,r.us)}}function P1(t,e){const n=he(t),r=n.Sa.get(e);if(r&&r.ma)return ye().add(r.key);{let s=ye();const i=n.pa.get(e);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}function x1(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ov.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b1.bind(null,e),e.fa.u_=f1.bind(null,e.eventManager),e.fa.xa=p1.bind(null,e.eventManager),e}function O1(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R1.bind(null,e),e}class Bp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return MP(this.persistence,new NP,e.initialUser,this.serializer)}createPersistence(e){return new OP(Jh.Hr,this.serializer)}createSharedClientState(e){return new qP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class k1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$p(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C1.bind(null,this.syncEngine),await l1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u1}()}createDatastore(e){const n=Ml(e.databaseInfo.databaseId),r=function(i){return new KP(i)}(e.databaseInfo);return function(i,o,a,l){return new YP(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new XP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$p(this.syncEngine,n,0),function(){return Lp.D()?new Lp:new zP}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new v1(s,i,o,a,l,c);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=he(r);$("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Io(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=My.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{$("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>($("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xc(t,e){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await yv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await M1(t);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Fp(e.remoteStore,s)),t._onlineComponents=e}function V1(t){return t.name==="FirebaseError"?t.code===S.FAILED_PRECONDITION||t.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function M1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await xc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!V1(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await xc(t,new Bp)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await xc(t,new Bp);return t._offlineComponents}async function Vv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await qp(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await qp(t,new k1))),t._onlineComponents}function L1(t){return Vv(t).then(e=>e.syncEngine)}async function F1(t){const e=await Vv(t),n=e.eventManager;return n.onListen=E1.bind(null,e.syncEngine),n.onUnlisten=T1.bind(null,e.syncEngine),n}function U1(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new D1({next:d=>{o.enqueueAndForget(()=>d1(i,h)),d.fromCache&&l.source==="server"?c.reject(new K(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new m1(a,u,{includeMetadataChanges:!0,Z_:!0});return h1(i,h)}(await F1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e,n){if(!n)throw new K(S.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $1(t,e,n,r){if(e===!0&&r===!0)throw new K(S.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hp(t){if(!J.isDocumentKey(t))throw new K(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wp(t){if(J.isDocumentKey(t))throw new K(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ul(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ul(t);throw new K(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(S.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(S.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(S.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $l{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tC;switch(r.type){case"firstParty":return new iC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zp.get(n);r&&($("ComponentProvider","Removing Datastore"),zp.delete(n),r.terminate())}(this),Promise.resolve()}}function j1(t,e,n,r={}){var s;const i=(t=Us(t,$l))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=Wg(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}t._authCredentials=new nC(new Vy(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class dr extends Js{constructor(e,n,r){super(e,n,Wy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new J(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function Gp(t,e,...n){if(t=st(t),Lv("collection","path",e),t instanceof $l){const r=je.fromString(e,...n);return Wp(r),new dr(t,null,r)}{if(!(t instanceof Wt||t instanceof dr))throw new K(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Wp(r),new dr(t.firestore,null,r)}}function Fv(t,e,...n){if(t=st(t),arguments.length===1&&(e=My.newId()),Lv("doc","path",e),t instanceof $l){const r=je.fromString(e,...n);return Hp(r),new Wt(t,null,new J(r))}{if(!(t instanceof Wt||t instanceof dr))throw new K(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Hp(r),new Wt(t.firestore,t instanceof dr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Ev(this,"async_queue_retry"),this._u=()=>{const n=Pc();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Pc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Pc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new $n;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!vo(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Sn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const s=nd.createAndSchedule(this,e,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&ae()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}class jl extends $l{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new B1}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$v(this),this._firestoreClient.terminate()}}function q1(t,e){const n=typeof t=="object"?t:ih(),r=typeof t=="string"?t:e||"(default)",s=cl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=qg("firestore");i&&j1(s,...i)}return s}function Uv(t){return t._firestoreClient||$v(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $v(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new vC(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Mv(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new N1(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(bt.fromBase64String(e))}catch(n){throw new K(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $s(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=/^__.*__$/;class H1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new wo(e,this.data,n,this.fieldTransforms)}}class jv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class ld{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new ld(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ua(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Bv(this.du)&&z1.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class W1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ml(e)}Su(e,n,r,s=!1){return new ld({du:e,methodName:n,wu:r,path:dt.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cd(t){const e=t._freezeSettings(),n=Ml(t._databaseId);return new W1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function K1(t,e,n,r,s,i={}){const o=t.Su(i.merge||i.mergeFields?2:0,e,n,s);ud("Data must be an object, but it was:",o,r);const a=qv(r,o);let l,c;if(i.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=xu(e,h,n);if(!o.contains(d))throw new K(S.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Hv(u,d)||u.push(d)}l=new Ht(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new H1(new Ut(a),l,c)}class ql extends od{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}function G1(t,e,n,r){const s=t.Su(1,e,n);ud("Data must be an object, but it was:",s,r);const i=[],o=Ut.empty();ss(r,(l,c)=>{const u=hd(e,l,n);c=st(c);const h=s.fu(u);if(c instanceof ql)i.push(u);else{const d=Ao(c,h);d!=null&&(i.push(u),o.set(u,d))}});const a=new Ht(i);return new jv(o,a,s.fieldTransforms)}function Q1(t,e,n,r,s,i){const o=t.Su(1,e,n),a=[xu(e,r,n)],l=[s];if(i.length%2!=0)throw new K(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(xu(e,i[d])),l.push(i[d+1]);const c=[],u=Ut.empty();for(let d=a.length-1;d>=0;--d)if(!Hv(c,a[d])){const p=a[d];let E=l[d];E=st(E);const T=o.fu(p);if(E instanceof ql)c.push(p);else{const w=Ao(E,T);w!=null&&(c.push(p),u.set(p,w))}}const h=new Ht(c);return new jv(u,h,o.fieldTransforms)}function Y1(t,e,n,r=!1){return Ao(n,t.Su(r?4:3,e))}function Ao(t,e){if(zv(t=st(t)))return ud("Unsupported field value:",e,t),qv(t,e);if(t instanceof od)return function(r,s){if(!Bv(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ao(a,s.gu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $C(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ze.fromDate(r);return{timestampValue:La(s.serializer,i)}}if(r instanceof Ze){const i=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:La(s.serializer,i)}}if(r instanceof ad)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $s)return{bytesValue:hv(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qh(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${Ul(r)}`)}(t,e)}function qv(t,e){const n={};return Ly(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(r,s)=>{const i=Ao(s,e.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function zv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof ad||t instanceof $s||t instanceof Wt||t instanceof od)}function ud(t,e,n){if(!zv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ul(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function xu(t,e,n){if((e=st(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return hd(t,e);throw Ua("Field path arguments must be of type string or ",t,!1,void 0,n)}const J1=new RegExp("[~\\*/\\[\\]]");function hd(t,e,n){if(e.search(J1)>=0)throw Ua(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bl(...e.split("."))._internalPath}catch{throw Ua(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ua(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(S.INVALID_ARGUMENT,a+t+l)}function Hv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X1 extends Wv{data(){return super.data()}}function dd(t,e){return typeof e=="string"?hd(t,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fd{}class ex extends fd{}function tx(t,e,...n){let r=[];e instanceof fd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof pd).length,a=i.filter(l=>l instanceof zl).length;if(o>1||o>0&&a>0)throw new K(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class zl extends ex{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zl(e,n,r)}_apply(e){const n=this._parse(e);return Kv(e._query,n),new Js(e.firestore,e.converter,Tu(e._query,n))}_parse(e){const n=cd(e.firestore);return function(i,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new K(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Yp(h,u);const p=[];for(const E of h)p.push(Qp(l,i,E));d={arrayValue:{values:p}}}else d=Qp(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Yp(h,u),d=Y1(a,o,h,u==="in"||u==="not-in");return Ye.create(c,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nx(t,e,n){const r=e,s=dd("where",t);return zl._create(s,r,n)}class pd extends fd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Kv(o,l),o=Tu(o,l)}(e._query,n),new Js(e.firestore,e.converter,Tu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Qp(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new K(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ky(e)&&n.indexOf("/")!==-1)throw new K(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!J.isDocumentKey(r))throw new K(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yp(t,new J(r))}if(n instanceof Wt)return yp(t,n._key);throw new K(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ul(n)}.`)}function Yp(t,e){if(!Array.isArray(t)||t.length===0)throw new K(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kv(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rx{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ss(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new ad(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const n=vr(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Me(_v(r));const s=new Yi(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Sn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ix extends Wv{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ia extends ix{data(e={}){return super.data(e)}}class ox{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ia(this._firestore,this._userDataWriter,r.key,r,new Bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ia(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ia(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:ax(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ax(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class lx extends rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function cx(t){t=Us(t,Js);const e=Us(t.firestore,jl),n=Uv(e),r=new lx(e);return Z1(t._query),U1(n,t._query).then(s=>new ox(e,r,t,s))}function ux(t,e,n,...r){t=Us(t,Wt);const s=Us(t.firestore,jl),i=cd(s);let o;return o=typeof(e=st(e))=="string"||e instanceof Bl?Q1(i,"updateDoc",t._key,e,n,r):G1(i,"updateDoc",t._key,e),Gv(s,[o.toMutation(t._key,bn.exists(!0))])}function hx(t,e){const n=Us(t.firestore,jl),r=Fv(t),s=sx(t.converter,e);return Gv(n,[K1(cd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function Gv(t,e){return function(r,s){const i=new $n;return r.asyncQueue.enqueueAndForget(async()=>I1(await L1(r),s,i)),i.promise}(Uv(t),e)}(function(e,n=!0){(function(s){Gs=s})(ns),Gr(new _r("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new jl(new rC(r.getProvider("auth-internal")),new aC(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yi(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),En(fp,"4.4.3",e),En(fp,"4.4.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firebasestorage.googleapis.com",dx="storageBucket",fx=2*60*1e3,px=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends On{constructor(e,n,r=0){super(Oc(e),`Firebase Storage: ${n} (${Oc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pn||(Pn={}));function Oc(t){return"storage/"+t}function mx(){const t="An unknown error occurred, please check the error payload for server response.";return new kn(Pn.UNKNOWN,t)}function gx(){return new kn(Pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _x(){return new kn(Pn.CANCELED,"User canceled the upload/download.")}function yx(t){return new kn(Pn.INVALID_URL,"Invalid URL '"+t+"'.")}function vx(t){return new kn(Pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jp(t){return new kn(Pn.INVALID_ARGUMENT,t)}function Yv(){return new kn(Pn.APP_DELETED,"The Firebase app was deleted.")}function Ex(t){return new kn(Pn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur=class oa{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=oa.makeFromUrl(e,n)}catch{return new oa(e,"")}if(r.path==="")return r;throw vx(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${s}/o${d}`,"i"),E={bucket:1,path:3},T=n===Qv?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",x=new RegExp(`^https?://${T}/${s}/${w}`,"i"),L=[{regex:a,indices:l,postModify:i},{regex:p,indices:E,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<L.length;N++){const H=L[N],B=H.regex.exec(e);if(B){const me=B[H.indices.bucket];let ne=B[H.indices.path];ne||(ne=""),r=new oa(me,ne),H.postModify(r);break}}if(r==null)throw yx(e);return r}};class wx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(p,l())},w)}function d(){i&&clearTimeout(i)}function p(w,...x){if(c){d();return}if(w){d(),u.call(null,w,...x);return}if(l()||o){d(),u.call(null,w,...x);return}r<64&&(r*=2);let L;a===1?(a=2,L=0):L=(r+Math.random())*1e3,h(L)}let E=!1;function T(w){E||(E=!0,d(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function Ix(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){return t!==void 0}function Xp(t,e,n,r){if(r<e)throw Jp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jp(`Invalid value for '${t}'. Expected ${n} or less.`)}function Ax(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($a||($a={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,r,s,i,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,E)=>{this.resolve_=p,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qo(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===$a.NO_ERROR,l=i.getStatus();if(!a||Rx(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===$a.ABORT;r(!1,new qo(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new qo(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());bx(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=mx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Yv():_x();o(l)}else{const l=gx();o(l)}};this.canceled_?n(!1,new qo(!1,null,!0)):this.backoffId_=Tx(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ix(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qo{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Cx(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Px(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function xx(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Ox(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kx(t,e,n,r,s,i,o=!0){const a=Ax(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return xx(c,e),Cx(c,n),Px(c,i),Ox(c,r),new Sx(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Nx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vx=class Ou{constructor(e,n){this._service=e,n instanceof Ur?this._location=n:this._location=Ur.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ou(e,n)}get root(){const e=new Ur(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nx(this._location.path)}get storage(){return this._service}get parent(){const e=Dx(this._location.path);if(e===null)return null;const n=new Ur(this._location.bucket,e);return new Ou(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Ex(e)}};function Zp(t,e){const n=e==null?void 0:e[dx];return n==null?null:Ur.makeFromBucketSpec(n,t)}function Mx(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Wg(s,t.app.options.projectId))}class Lx{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Qv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fx,this._maxUploadRetryTime=px,this._requests=new Set,s!=null?this._bucket=Ur.makeFromBucketSpec(s,this._host):this._bucket=Zp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ur.makeFromBucketSpec(this._url,e):this._bucket=Zp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vx(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new wx(Yv());{const o=kx(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const em="@firebase/storage",tm="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="storage";function Fx(t=ih(),e){t=st(t);const r=cl(t,Jv).getImmediate({identifier:e}),s=qg("storage");return s&&Ux(r,...s),r}function Ux(t,e,n,r={}){Mx(t,e,n,r)}function $x(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Lx(n,r,s,e,ns)}function jx(){Gr(new _r(Jv,$x,"PUBLIC").setMultipleInstances(!0)),En(em,tm,""),En(em,tm,"esm2017")}jx();const Bx={apiKey:"AIzaSyDyp1H4_IoRX2Z6AbXFtqUmKJlpkCu91HY",authDomain:"motormate-cd4a6.firebaseapp.com",projectId:"motormate-cd4a6",storageBucket:"motormate-cd4a6.appspot.com",messagingSenderId:"34392934813",appId:"1:34392934813:web:29660022bf0a9ffec14774"},md=Yg(Bx),js=KR(md),kc=q1(md);Fx(md);/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function nn(t){return typeof t=="function"}function Xv(t){return t==null}const Bs=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function gd(t){return Number(t)>=0}function qx(t){return typeof t=="object"&&t!==null}function zx(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function nm(t){if(!qx(t)||zx(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function eo(t,e){return Object.keys(e).forEach(n=>{if(nm(e[n])&&nm(t[n])){t[n]||(t[n]={}),eo(t[n],e[n]);return}t[n]=e[n]}),t}function zo(t){const e=t.split(".");if(!e.length)return"";let n=String(e[0]);for(let r=1;r<e.length;r++){if(gd(e[r])){n+=`[${e[r]}]`;continue}n+=`.${e[r]}`}return n}const Hx={};function Wx(t){return Hx[t]}function rm(t,e,n){typeof n.value=="object"&&(n.value=ze(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function ze(t){if(typeof t!="object")return t;var e=0,n,r,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(ze(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,a){s.set(ze(a),ze(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor(ze(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)rm(s,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(s,n=r[e])&&s[n]===t[n]||rm(s,n,Object.getOwnPropertyDescriptor(t,n))}return s||t}const Kx=Symbol("vee-validate-form"),Gx=typeof window<"u";function Qx(t){return nn(t)&&!!t.__locatorRef}function or(t){return!!t&&nn(t.parse)&&t.__type==="VVTypedSchema"}function Zv(t){return!!t&&nn(t.validate)}function Yx(t){return t==="checkbox"||t==="radio"}function Jx(t){return Bs(t)||Array.isArray(t)}function Xx(t){return Array.isArray(t)?t.length===0:Bs(t)&&Object.keys(t).length===0}function Ro(t){return/^\[.+\]$/i.test(t)}function Zx(t){return e0(t)&&t.multiple}function e0(t){return t.tagName==="SELECT"}function eO(t){return t0(t)&&t.target&&"submit"in t.target}function t0(t){return t?!!(typeof Event<"u"&&nn(Event)&&t instanceof Event||t&&t.srcElement):!1}function Ci(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Ci(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;for(r of t.entries())if(!Ci(r[1],e.get(r[0])))return!1;return!0}if(sm(t)&&sm(e))return!(t.size!==e.size||t.name!==e.name||t.lastModified!==e.lastModified||t.type!==e.type);if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();for(s=Object.keys(t),n=s.length,r=n;r--!==0;){var i=s[r];if(!Ci(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function sm(t){return Gx?t instanceof File:!1}function Hl(t){return Ro(t)?t.replace(/\[|\]/gi,""):t}function Vn(t,e,n){return t?Ro(e)?t[Hl(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>Jx(s)&&i in s?s[i]:n,t):n}function Jn(t,e,n){if(Ro(e)){t[Hl(e)]=n;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<r.length;i++){if(i===r.length-1){s[r[i]]=n;return}(!(r[i]in s)||Xv(s[r[i]]))&&(s[r[i]]=gd(r[i+1])?[]:{}),s=s[r[i]]}}function Dc(t,e){if(Array.isArray(t)&&gd(e)){t.splice(Number(e),1);return}Bs(t)&&delete t[e]}function im(t,e){if(Ro(e)){delete t[Hl(e)];return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=t;for(let i=0;i<n.length;i++){if(i===n.length-1){Dc(r,n[i]);break}if(!(n[i]in r)||Xv(r[n[i]]))break;r=r[n[i]]}const s=n.map((i,o)=>Vn(t,n.slice(0,o).join(".")));for(let i=s.length-1;i>=0;i--)if(Xx(s[i])){if(i===0){Dc(t,n[0]);continue}Dc(s[i-1],n[i-1])}}function Gt(t){return Object.keys(t)}function om(t,e=0){let n=null,r=[];return function(...s){return n&&clearTimeout(n),n=setTimeout(()=>{const i=t(...s);r.forEach(o=>o(i)),r=[]},e),new Promise(i=>r.push(i))}}function tO(t,e){let n;return async function(...s){const i=t(...s);n=i;const o=await i;return i!==n?o:(n=void 0,e(o,s))}}function am(t){return Array.isArray(t)?t:t?[t]:[]}function Ho(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function nO(t){let e=null,n=[];return function(...r){const s=Lt(()=>{if(e!==s)return;const i=t(...r);n.forEach(o=>o(i)),n=[],e=null});return e=s,new Promise(i=>n.push(i))}}function Nc(t){if(n0(t))return t._value}function n0(t){return"_value"in t}function rO(t){return t.type==="number"||t.type==="range"?Number.isNaN(t.valueAsNumber)?t.value:t.valueAsNumber:t.value}function lm(t){if(!t0(t))return t;const e=t.target;if(Yx(e.type)&&n0(e))return Nc(e);if(e.type==="file"&&e.files){const n=Array.from(e.files);return e.multiple?n:n[0]}if(Zx(e))return Array.from(e.options).filter(n=>n.selected&&!n.disabled).map(Nc);if(e0(e)){const n=Array.from(e.options).find(r=>r.selected);return n?Nc(n):e.value}return rO(e)}function sO(t){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t?Bs(t)&&t._$$isNormalized?t:Bs(t)?Object.keys(t).reduce((n,r)=>{const s=iO(t[r]);return t[r]!==!1&&(n[r]=cm(s)),n},e):typeof t!="string"?e:t.split("|").reduce((n,r)=>{const s=oO(r);return s.name&&(n[s.name]=cm(s.params)),n},e):e}function iO(t){return t===!0?[]:Array.isArray(t)||Bs(t)?t:[t]}function cm(t){const e=n=>typeof n=="string"&&n[0]==="@"?aO(n.slice(1)):n;return Array.isArray(t)?t.map(e):t instanceof RegExp?[t]:Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{})}const oO=t=>{let e=[];const n=t.split(":")[0];return t.includes(":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}};function aO(t){const e=n=>Vn(n,t)||n[t];return e.__locatorRef=t,e}const lO={generateMessage:({field:t})=>`${t} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let cO=Object.assign({},lO);const di=()=>cO;async function uO(t,e,n={}){const r=n==null?void 0:n.bails,s={name:(n==null?void 0:n.name)||"{field}",rules:e,label:n==null?void 0:n.label,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await hO(s,t)).errors;return{errors:o,valid:!o.length}}async function hO(t,e){if(or(t.rules)||Zv(t.rules))return fO(e,t.rules);if(nn(t.rules)||Array.isArray(t.rules)){const o={field:t.label||t.name,name:t.name,label:t.label,form:t.formData,value:e},a=Array.isArray(t.rules)?t.rules:[t.rules],l=a.length,c=[];for(let u=0;u<l;u++){const h=a[u],d=await h(e,o);if(!(typeof d!="string"&&!Array.isArray(d)&&d)){if(Array.isArray(d))c.push(...d);else{const E=typeof d=="string"?d:s0(o);c.push(E)}if(t.bails)return{errors:c}}}return{errors:c}}const n=Object.assign(Object.assign({},t),{rules:sO(t.rules)}),r=[],s=Object.keys(n.rules),i=s.length;for(let o=0;o<i;o++){const a=s[o],l=await pO(n,e,{name:a,params:n.rules[a]});if(l.error&&(r.push(l.error),t.bails))return{errors:r}}return{errors:r}}function dO(t){return!!t&&t.name==="ValidationError"}function r0(t){return{__type:"VVTypedSchema",async parse(n){var r;try{return{output:await t.validate(n,{abortEarly:!1}),errors:[]}}catch(s){if(!dO(s))throw s;if(!(!((r=s.inner)===null||r===void 0)&&r.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const i=s.inner.reduce((o,a)=>{const l=a.path||"";return o[l]||(o[l]={errors:[],path:l}),o[l].errors.push(...a.errors),o},{});return{errors:Object.values(i)}}}}}async function fO(t,e){const r=await(or(e)?e:r0(e)).parse(t),s=[];for(const i of r.errors)i.errors.length&&s.push(...i.errors);return{errors:s}}async function pO(t,e,n){const r=Wx(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=mO(n.params,t.formData),i={field:t.label||t.name,name:t.name,label:t.label,value:e,form:t.formData,rule:Object.assign(Object.assign({},n),{params:s})},o=await r(e,s,i);return typeof o=="string"?{error:o}:{error:o?void 0:s0(i)}}function s0(t){const e=di().generateMessage;return e?e(t):"Field is invalid"}function mO(t,e){const n=r=>Qx(r)?r(e):r;return Array.isArray(t)?t.map(n):Object.keys(t).reduce((r,s)=>(r[s]=n(t[s]),r),{})}async function gO(t,e){const r=await(or(t)?t:r0(t)).parse(ze(e)),s={},i={};for(const o of r.errors){const a=o.errors,l=(o.path||"").replace(/\["(\d+)"\]/g,(c,u)=>`[${u}]`);s[l]={valid:!a.length,errors:a},a.length&&(i[l]=a[0])}return{valid:!r.errors.length,results:s,errors:i,values:r.value}}async function _O(t,e,n){const s=Gt(t).map(async c=>{var u,h,d;const p=(u=n==null?void 0:n.names)===null||u===void 0?void 0:u[c],E=await uO(Vn(e,c),t[c],{name:(p==null?void 0:p.name)||c,label:p==null?void 0:p.label,values:e,bails:(d=(h=n==null?void 0:n.bailsMap)===null||h===void 0?void 0:h[c])!==null&&d!==void 0?d:!0});return Object.assign(Object.assign({},E),{path:c})});let i=!0;const o=await Promise.all(s),a={},l={};for(const c of o)a[c.path]={valid:c.valid,errors:c.errors},c.valid||(i=!1,l[c.path]=c.errors[0]);return{valid:i,results:a,errors:l}}let yO=0;const Wo=["bails","fieldsCount","id","multiple","type","validate"];function i0(t){const e=Object.assign({},Rt((t==null?void 0:t.initialValues)||{})),n=q(t==null?void 0:t.validationSchema);return n&&or(n)&&nn(n.cast)?ze(n.cast(e)||{}):ze(e)}function vO(t){var e;const n=yO++;let r=0;const s=pe(!1),i=pe(!1),o=pe(0),a=[],l=jn(i0(t)),c=pe([]),u=pe({}),h=pe({}),d=nO(()=>{h.value=c.value.reduce((g,_)=>(g[zo(Rt(_.path))]=_,g),{})});function p(g,_){const A=se(g);if(!A){typeof g=="string"&&(u.value[zo(g)]=am(_));return}if(typeof g=="string"){const U=zo(g);u.value[U]&&delete u.value[U]}A.errors=am(_),A.valid=!A.errors.length}function E(g){Gt(g).forEach(_=>{p(_,g[_])})}t!=null&&t.initialErrors&&E(t.initialErrors);const T=De(()=>{const g=c.value.reduce((_,A)=>(A.errors.length&&(_[A.path]=A.errors),_),{});return Object.assign(Object.assign({},u.value),g)}),w=De(()=>Gt(T.value).reduce((g,_)=>{const A=T.value[_];return A!=null&&A.length&&(g[_]=A[0]),g},{})),x=De(()=>c.value.reduce((g,_)=>(g[_.path]={name:_.path||"",label:_.label||""},g),{})),D=De(()=>c.value.reduce((g,_)=>{var A;return g[_.path]=(A=_.bails)!==null&&A!==void 0?A:!0,g},{})),L=Object.assign({},(t==null?void 0:t.initialErrors)||{}),N=(e=t==null?void 0:t.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:H,originalInitialValues:B,setInitialValues:me}=wO(c,l,t),ne=EO(c,l,B,w),ee=De(()=>c.value.reduce((g,_)=>{const A=Vn(l,_.path);return Jn(g,_.path,A),g},{})),de=t==null?void 0:t.validationSchema;function fe(g,_){var A,U;const Z=De(()=>Vn(H.value,Rt(g))),Q=h.value[Rt(g)],Ee=(_==null?void 0:_.type)==="checkbox"||(_==null?void 0:_.type)==="radio";if(Q&&Ee){Q.multiple=!0;const tn=r++;return Array.isArray(Q.id)?Q.id.push(tn):Q.id=[Q.id,tn],Q.fieldsCount++,Q.__flags.pendingUnmount[tn]=!1,Q}const Te=De(()=>Vn(l,Rt(g))),Re=Rt(g),nt=_e.findIndex(tn=>tn===Re);nt!==-1&&_e.splice(nt,1);const Fe=De(()=>{var tn,Zs,Xl,Rd,Zl,ec;return or(de)?(Xl=(Zs=(tn=de).describe)===null||Zs===void 0?void 0:Zs.call(tn,Rt(g)).required)!==null&&Xl!==void 0?Xl:!1:or(_==null?void 0:_.schema)&&(ec=(Zl=(Rd=_==null?void 0:_.schema).describe)===null||Zl===void 0?void 0:Zl.call(Rd).required)!==null&&ec!==void 0?ec:!1}),gt=r++,Dt=jn({id:gt,path:g,touched:!1,pending:!1,valid:!0,validated:!!(!((A=L[Re])===null||A===void 0)&&A.length),required:Fe,initialValue:Z,errors:zm([]),bails:(U=_==null?void 0:_.bails)!==null&&U!==void 0?U:!1,label:_==null?void 0:_.label,type:(_==null?void 0:_.type)||"default",value:Te,multiple:!1,__flags:{pendingUnmount:{[gt]:!1},pendingReset:!1},fieldsCount:1,validate:_==null?void 0:_.validate,dirty:De(()=>!Ci(q(Te),q(Z)))});return c.value.push(Dt),h.value[Re]=Dt,d(),w.value[Re]&&!L[Re]&&Lt(()=>{V(Re,{mode:"silent"})}),Ke(g)&&qr(g,tn=>{d();const Zs=ze(Te.value);h.value[tn]=Dt,Lt(()=>{Jn(l,tn,Zs)})}),Dt}const qe=om(z,5),at=om(z,5),jt=tO(async g=>await(g==="silent"?qe():at()),(g,[_])=>{const A=Gt(Ne.errorBag.value),Z=[...new Set([...Gt(g.results),...c.value.map(Q=>Q.path),...A])].sort().reduce((Q,Ee)=>{var Te;const Re=Ee,nt=se(Re)||Pe(Re),Fe=((Te=g.results[Re])===null||Te===void 0?void 0:Te.errors)||[],gt=Rt(nt==null?void 0:nt.path)||Re,Dt=TO({errors:Fe,valid:!Fe.length},Q.results[gt]);return Q.results[gt]=Dt,Dt.valid||(Q.errors[gt]=Dt.errors[0]),nt&&u.value[gt]&&delete u.value[gt],nt?(nt.valid=Dt.valid,_==="silent"||_==="validated-only"&&!nt.validated||p(nt,Dt.errors),Q):(p(gt,Fe),Q)},{valid:g.valid,results:{},errors:{}});return g.values&&(Z.values=g.values),Gt(Z.results).forEach(Q=>{var Ee;const Te=se(Q);Te&&_!=="silent"&&(_==="validated-only"&&!Te.validated||p(Te,(Ee=Z.results[Q])===null||Ee===void 0?void 0:Ee.errors))}),Z});function tt(g){c.value.forEach(g)}function se(g){const _=typeof g=="string"?zo(g):g;return typeof _=="string"?h.value[_]:_}function Pe(g){return c.value.filter(A=>g.startsWith(A.path)).reduce((A,U)=>A?U.path.length>A.path.length?U:A:U,void 0)}let _e=[],kt;function un(g){return _e.push(g),kt||(kt=Lt(()=>{[..._e].sort().reverse().forEach(A=>{im(l,A)}),_e=[],kt=null})),kt}function Bt(g){return function(A,U){return function(Q){return Q instanceof Event&&(Q.preventDefault(),Q.stopPropagation()),tt(Ee=>Ee.touched=!0),s.value=!0,o.value++,O().then(Ee=>{const Te=ze(l);if(Ee.valid&&typeof A=="function"){const Re=ze(ee.value);let nt=g?Re:Te;return Ee.values&&(nt=Ee.values),A(nt,{evt:Q,controlledValues:Re,setErrors:E,setFieldError:p,setTouched:v,setFieldTouched:ve,setValues:F,setFieldValue:I,resetForm:b,resetField:R})}!Ee.valid&&typeof U=="function"&&U({values:Te,evt:Q,errors:Ee.errors,results:Ee.results})}).then(Ee=>(s.value=!1,Ee),Ee=>{throw s.value=!1,Ee})}}}const hn=Bt(!1);hn.withControlled=Bt(!0);function Wn(g,_){const A=c.value.findIndex(Z=>Z.path===g&&(Array.isArray(Z.id)?Z.id.includes(_):Z.id===_)),U=c.value[A];if(!(A===-1||!U)){if(Lt(()=>{V(g,{mode:"silent",warn:!1})}),U.multiple&&U.fieldsCount&&U.fieldsCount--,Array.isArray(U.id)){const Z=U.id.indexOf(_);Z>=0&&U.id.splice(Z,1),delete U.__flags.pendingUnmount[_]}(!U.multiple||U.fieldsCount<=0)&&(c.value.splice(A,1),k(g),d(),delete h.value[g])}}function ls(g){Gt(h.value).forEach(_=>{_.startsWith(g)&&delete h.value[_]}),c.value=c.value.filter(_=>!_.path.startsWith(g)),Lt(()=>{d()})}const Ne={formId:n,values:l,controlledValues:ee,errorBag:T,errors:w,schema:de,submitCount:o,meta:ne,isSubmitting:s,isValidating:i,fieldArrays:a,keepValuesOnUnmount:N,validateSchema:q(de)?jt:void 0,validate:O,setFieldError:p,validateField:V,setFieldValue:I,setValues:F,setErrors:E,setFieldTouched:ve,setTouched:v,resetForm:b,resetField:R,handleSubmit:hn,useFieldModel:ie,defineInputBinds:ge,defineComponentBinds:xe,defineField:Y,stageInitialValue:M,unsetInitialValue:k,setFieldInitialValue:P,createPathState:fe,getPathState:se,unsetPathValue:un,removePathState:Wn,initialValues:H,getAllPathStates:()=>c.value,destroyPath:ls,isFieldTouched:Ve,isFieldDirty:f,isFieldValid:m};function I(g,_,A=!0){const U=ze(_),Z=typeof g=="string"?g:g.path;se(Z)||fe(Z),Jn(l,Z,U),A&&V(Z)}function W(g,_=!0){Gt(l).forEach(A=>{delete l[A]}),Gt(g).forEach(A=>{I(A,g[A],!1)}),_&&O()}function F(g,_=!0){eo(l,g),a.forEach(A=>A&&A.reset()),_&&O()}function G(g,_){const A=se(Rt(g))||fe(g);return De({get(){return A.value},set(U){var Z;const Q=Rt(g);I(Q,U,(Z=Rt(_))!==null&&Z!==void 0?Z:!1)}})}function ve(g,_){const A=se(g);A&&(A.touched=_)}function Ve(g){const _=se(g);return _?_.touched:c.value.filter(A=>A.path.startsWith(g)).some(A=>A.touched)}function f(g){const _=se(g);return _?_.dirty:c.value.filter(A=>A.path.startsWith(g)).some(A=>A.dirty)}function m(g){const _=se(g);return _?_.valid:c.value.filter(A=>A.path.startsWith(g)).every(A=>A.valid)}function v(g){if(typeof g=="boolean"){tt(_=>{_.touched=g});return}Gt(g).forEach(_=>{ve(_,!!g[_])})}function R(g,_){var A;const U=_&&"value"in _?_.value:Vn(H.value,g),Z=se(g);Z&&(Z.__flags.pendingReset=!0),P(g,ze(U),!0),I(g,U,!1),ve(g,(A=_==null?void 0:_.touched)!==null&&A!==void 0?A:!1),p(g,(_==null?void 0:_.errors)||[]),Lt(()=>{Z&&(Z.__flags.pendingReset=!1)})}function b(g,_){let A=ze(g!=null&&g.values?g.values:B.value);A=_!=null&&_.force?A:eo(B.value,A),A=or(de)&&nn(de.cast)?de.cast(A):A,me(A),tt(U=>{var Z;U.__flags.pendingReset=!0,U.validated=!1,U.touched=((Z=g==null?void 0:g.touched)===null||Z===void 0?void 0:Z[U.path])||!1,I(U.path,Vn(A,U.path),!1),p(U.path,void 0)}),_!=null&&_.force?W(A,!1):F(A,!1),E((g==null?void 0:g.errors)||{}),o.value=(g==null?void 0:g.submitCount)||0,Lt(()=>{O({mode:"silent"}),tt(U=>{U.__flags.pendingReset=!1})})}async function O(g){const _=(g==null?void 0:g.mode)||"force";if(_==="force"&&tt(Q=>Q.validated=!0),Ne.validateSchema)return Ne.validateSchema(_);i.value=!0;const A=await Promise.all(c.value.map(Q=>Q.validate?Q.validate(g).then(Ee=>({key:Q.path,valid:Ee.valid,errors:Ee.errors})):Promise.resolve({key:Q.path,valid:!0,errors:[]})));i.value=!1;const U={},Z={};for(const Q of A)U[Q.key]={valid:Q.valid,errors:Q.errors},Q.errors.length&&(Z[Q.key]=Q.errors[0]);return{valid:A.every(Q=>Q.valid),results:U,errors:Z}}async function V(g,_){var A;const U=se(g);if(U&&(_==null?void 0:_.mode)!=="silent"&&(U.validated=!0),de){const{results:Z}=await jt((_==null?void 0:_.mode)||"validated-only");return Z[g]||{errors:[],valid:!0}}return U!=null&&U.validate?U.validate(_):(!U&&(A=_==null?void 0:_.warn),Promise.resolve({errors:[],valid:!0}))}function k(g){im(H.value,g)}function M(g,_,A=!1){P(g,_),Jn(l,g,_),A&&!(t!=null&&t.initialValues)&&Jn(B.value,g,ze(_))}function P(g,_,A=!1){Jn(H.value,g,ze(_)),A&&Jn(B.value,g,ze(_))}async function z(){const g=q(de);if(!g)return{valid:!0,results:{},errors:{}};i.value=!0;const _=Zv(g)||or(g)?await gO(g,l):await _O(g,l,{names:x.value,bailsMap:D.value});return i.value=!1,_}const X=hn((g,{evt:_})=>{eO(_)&&_.target.submit()});el(()=>{if(t!=null&&t.initialErrors&&E(t.initialErrors),t!=null&&t.initialTouched&&v(t.initialTouched),t!=null&&t.validateOnMount){O();return}Ne.validateSchema&&Ne.validateSchema("silent")}),Ke(de)&&qr(de,()=>{var g;(g=Ne.validateSchema)===null||g===void 0||g.call(Ne,"validated-only")}),gi(Kx,Ne);function Y(g,_){const A=nn(_)||_==null?void 0:_.label,U=se(Rt(g))||fe(g,{label:A}),Z=()=>nn(_)?_(Ho(U,Wo)):_||{};function Q(){var Fe;U.touched=!0,((Fe=Z().validateOnBlur)!==null&&Fe!==void 0?Fe:di().validateOnBlur)&&V(U.path)}function Ee(){var Fe;((Fe=Z().validateOnInput)!==null&&Fe!==void 0?Fe:di().validateOnInput)&&Lt(()=>{V(U.path)})}function Te(){var Fe;((Fe=Z().validateOnChange)!==null&&Fe!==void 0?Fe:di().validateOnChange)&&Lt(()=>{V(U.path)})}const Re=De(()=>{const Fe={onChange:Te,onInput:Ee,onBlur:Q};return nn(_)?Object.assign(Object.assign({},Fe),_(Ho(U,Wo)).props||{}):_!=null&&_.props?Object.assign(Object.assign({},Fe),_.props(Ho(U,Wo))):Fe});return[G(g,()=>{var Fe,gt,Dt;return(Dt=(Fe=Z().validateOnModelUpdate)!==null&&Fe!==void 0?Fe:(gt=di())===null||gt===void 0?void 0:gt.validateOnModelUpdate)!==null&&Dt!==void 0?Dt:!0}),Re]}function ie(g){return Array.isArray(g)?g.map(_=>G(_,!0)):G(g)}function ge(g,_){const[A,U]=Y(g,_);function Z(){U.value.onBlur()}function Q(Te){const Re=lm(Te);I(Rt(g),Re,!1),U.value.onInput()}function Ee(Te){const Re=lm(Te);I(Rt(g),Re,!1),U.value.onChange()}return De(()=>Object.assign(Object.assign({},U.value),{onBlur:Z,onInput:Q,onChange:Ee,value:A.value}))}function xe(g,_){const[A,U]=Y(g,_),Z=se(Rt(g));function Q(Ee){A.value=Ee}return De(()=>{const Ee=nn(_)?_(Ho(Z,Wo)):_||{};return Object.assign({[Ee.model||"modelValue"]:A.value,[`onUpdate:${Ee.model||"modelValue"}`]:Q},U.value)})}return Object.assign(Object.assign({},Ne),{values:Wu(l),handleReset:()=>b(),submitForm:X})}function EO(t,e,n,r){const s={touched:"some",pending:"some",valid:"every"},i=De(()=>!Ci(e,q(n)));function o(){const l=t.value;return Gt(s).reduce((c,u)=>{const h=s[u];return c[u]=l[h](d=>d[u]),c},{})}const a=jn(o());return RE(()=>{const l=o();a.touched=l.touched,a.valid=l.valid,a.pending=l.pending}),De(()=>Object.assign(Object.assign({initialValues:q(n)},a),{valid:a.valid&&!Gt(r.value).length,dirty:i.value}))}function wO(t,e,n){const r=i0(n),s=pe(r),i=pe(ze(r));function o(a,l=!1){s.value=eo(ze(s.value)||{},ze(a)),i.value=eo(ze(i.value)||{},ze(a)),l&&t.value.forEach(c=>{if(c.touched)return;const h=Vn(s.value,c.path);Jn(e,c.path,ze(h))})}return{initialValues:s,originalInitialValues:i,setInitialValues:o}}function TO(t,e){return e?{valid:t.valid&&e.valid,errors:[...t.errors,...e.errors]}:t}/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const ja=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function IO(t){return Number(t)>=0}function bO(t){return typeof t=="object"&&t!==null}function AO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function um(t){if(!bO(t)||AO(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function o0(t,e){return Object.keys(e).forEach(n=>{if(um(e[n])&&um(t[n])){t[n]||(t[n]={}),o0(t[n],e[n]);return}t[n]=e[n]}),t}function RO(t,e={abortEarly:!1}){return{__type:"VVTypedSchema",async parse(r){var s;try{return{value:await t.validate(r,Object.assign({},e)),errors:[]}}catch(i){const o=i;if(o.name!=="ValidationError")throw i;if(!(!((s=o.inner)===null||s===void 0)&&s.length)&&o.errors.length)return{errors:[{path:o.path,errors:o.errors}]};const a=o.inner.reduce((l,c)=>{const u=c.path||"";return l[u]||(l[u]={errors:[],path:u}),l[u].errors.push(...c.errors),l},{});return{errors:Object.values(a)}}},cast(r){try{return t.cast(r)}catch{const i=t.getDefault();return ja(i)&&ja(r)?o0(i,r):r}},describe(r){if(!r)return hm(t.spec);const s=SO(r,t);return s?hm(s):{required:!1,exists:!1}}}}function hm(t){return{required:!t.optional,exists:!0}}function SO(t,e){if(!dm(e))return null;if(Ro(t)){const s=e.fields[Hl(t)];return(s==null?void 0:s.spec)||null}const n=(t||"").split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let s=0;s<n.length;s++){const i=n[s];if(dm(r)&&i in r.fields?r=r.fields[i]:IO(i)&&CO(r)&&(r=r.innerType),s===n.length-1)return r.spec}return null}function dm(t){return ja(t)&&t.type==="object"}function CO(t){return ja(t)&&t.type==="array"}function PO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function os(t){this._maxSize=t,this.clear()}os.prototype.clear=function(){this._size=0,this._values=Object.create(null)};os.prototype.get=function(t){return this._values[t]};os.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var xO=/[^.^\]^[]+|(?=\[\]|\.\.)/g,a0=/^\d+$/,OO=/^\d/,kO=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,DO=/^\s*(['"]?)(.*?)(\1)\s*$/,_d=512,fm=new os(_d),pm=new os(_d),mm=new os(_d),Wr={Cache:os,split:ku,normalizePath:Vc,setter:function(t){var e=Vc(t);return pm.get(t)||pm.set(t,function(r,s){for(var i=0,o=e.length,a=r;i<o-1;){var l=e[i];if(l==="__proto__"||l==="constructor"||l==="prototype")return r;a=a[e[i++]]}a[e[i]]=s})},getter:function(t,e){var n=Vc(t);return mm.get(t)||mm.set(t,function(s){for(var i=0,o=n.length;i<o;)if(s!=null||!e)s=s[n[i++]];else return;return s})},join:function(t){return t.reduce(function(e,n){return e+(yd(n)||a0.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){NO(Array.isArray(t)?t:ku(t),e,n)}};function Vc(t){return fm.get(t)||fm.set(t,ku(t).map(function(e){return e.replace(DO,"$2")}))}function ku(t){return t.match(xO)||[""]}function NO(t,e,n){var r=t.length,s,i,o,a;for(i=0;i<r;i++)s=t[i],s&&(LO(s)&&(s='"'+s+'"'),a=yd(s),o=!a&&/^\d+$/.test(s),e.call(n,s,a,o,i,t))}function yd(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function VO(t){return t.match(OO)&&!t.match(a0)}function MO(t){return kO.test(t)}function LO(t){return!yd(t)&&(VO(t)||MO(t))}const FO=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Wl=t=>t.match(FO)||[],Kl=t=>t[0].toUpperCase()+t.slice(1),vd=(t,e)=>Wl(t).join(e).toLowerCase(),l0=t=>Wl(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),UO=t=>Kl(l0(t)),$O=t=>vd(t,"_"),jO=t=>vd(t,"-"),BO=t=>Kl(vd(t," ")),qO=t=>Wl(t).map(Kl).join(" ");var Mc={words:Wl,upperFirst:Kl,camelCase:l0,pascalCase:UO,snakeCase:$O,kebabCase:jO,sentenceCase:BO,titleCase:qO},Ed={exports:{}};Ed.exports=function(t){return c0(zO(t),t)};Ed.exports.array=c0;function c0(t,e){var n=t.length,r=new Array(n),s={},i=n,o=HO(e),a=WO(t);for(e.forEach(function(c){if(!a.has(c[0])||!a.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||l(t[i],i,new Set);return r;function l(c,u,h){if(h.has(c)){var d;try{d=", node was:"+JSON.stringify(c)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!a.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!s[u]){s[u]=!0;var p=o.get(c)||new Set;if(p=Array.from(p),u=p.length){h.add(c);do{var E=p[--u];l(E,a.get(E),h)}while(u);h.delete(c)}r[--n]=c}}}function zO(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var s=t[n];e.add(s[0]),e.add(s[1])}return Array.from(e)}function HO(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var s=t[n];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}function WO(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}var KO=Ed.exports;const GO=PO(KO),QO=Object.prototype.toString,YO=Error.prototype.toString,JO=RegExp.prototype.toString,XO=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",ZO=/^Symbol\((.*)\)(.*)$/;function ek(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function gm(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return ek(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return XO.call(t).replace(ZO,"Symbol($1)");const r=QO.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+YO.call(t)+"]":r==="RegExp"?JO.call(t):null}function fr(t,e){let n=gm(t,e);return n!==null?n:JSON.stringify(t,function(r,s){let i=gm(this[r],e);return i!==null?i:s},2)}function u0(t){return t==null?[]:[].concat(t)}let h0,d0,f0,tk=/\$\{\s*(\w+)\s*\}/g;h0=Symbol.toStringTag;class _m{constructor(e,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[h0]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],u0(e).forEach(i=>{if(Ft.isError(i)){this.errors.push(...i.errors);const o=i.inner.length?i.inner:[i];this.inner.push(...o)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}d0=Symbol.hasInstance;f0=Symbol.toStringTag;class Ft extends Error{static formatError(e,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof e=="string"?e.replace(tk,(s,i)=>fr(n[i])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,s,i){const o=new _m(e,n,r,s);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[f0]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Ft)}static[d0](e){return _m[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let fn={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${fr(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${fr(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${fr(n,!0)}\``+s}},Nt={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},nk={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Du={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},rk={isValue:"${path} field must be ${value}"},Nu={noUnknown:"${path} field has unspecified keys: ${unknown}"},sk={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},ik={notType:t=>{const{path:e,value:n,spec:r}=t,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${fr(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${fr(n,!0)}\``}return Ft.formatError(fn.notType,t)}};Object.assign(Object.create(null),{mixed:fn,string:Nt,number:nk,date:Du,object:Nu,array:sk,boolean:rk,tuple:ik});const wd=t=>t&&t.__isYupSchema__;class Ba{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:i}=n,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);return new Ba(e,(a,l)=>{var c;let u=o(...a)?s:i;return(c=u==null?void 0:u(l))!=null?c:l})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(i=>i.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,e,n);if(s===void 0||s===e)return e;if(!wd(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const Ko={context:"$",value:"."};class as{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ko.context,this.isValue=this.key[0]===Ko.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Ko.context:this.isValue?Ko.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Wr.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let s=this.isContext?r:this.isValue?e:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}as.prototype.__isYupRef=!0;const $r=t=>t==null;function hs(t){function e({value:n,path:r="",options:s,originalValue:i,schema:o},a,l){const{name:c,test:u,params:h,message:d,skipAbsent:p}=t;let{parent:E,context:T,abortEarly:w=o.spec.abortEarly,disableStackTrace:x=o.spec.disableStackTrace}=s;function D(fe){return as.isRef(fe)?fe.getValue(n,E,T):fe}function L(fe={}){const qe=Object.assign({value:n,originalValue:i,label:o.spec.label,path:fe.path||r,spec:o.spec,disableStackTrace:fe.disableStackTrace||x},h,fe.params);for(const jt of Object.keys(qe))qe[jt]=D(qe[jt]);const at=new Ft(Ft.formatError(fe.message||d,qe),n,qe.path,fe.type||c,qe.disableStackTrace);return at.params=qe,at}const N=w?a:l;let H={path:r,parent:E,type:c,from:s.from,createError:L,resolve:D,options:s,originalValue:i,schema:o};const B=fe=>{Ft.isError(fe)?N(fe):fe?l(null):N(L())},me=fe=>{Ft.isError(fe)?N(fe):a(fe)};if(p&&$r(n))return B(!0);let ee;try{var de;if(ee=u.call(H,n,H),typeof((de=ee)==null?void 0:de.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${H.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(ee).then(B,me)}}catch(fe){me(fe);return}B(ee)}return e.OPTIONS=t,e}function ok(t,e,n,r=n){let s,i,o;return e?(Wr.forEach(e,(a,l,c)=>{let u=l?a.slice(1,a.length-1):a;t=t.resolve({context:r,parent:s,value:n});let h=t.type==="tuple",d=c?parseInt(u,10):0;if(t.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&d>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[d],t=h?t.spec.types[d]:t.innerType}if(!c){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t.type}")`);s=n,n=n&&n[u],t=t.fields[u]}i=u,o=l?"["+a+"]":"."+a}),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class qa extends Set{describe(){const e=[];for(const n of this.values())e.push(as.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new qa(this.values())}merge(e,n){const r=this.clone();return e.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function _s(t,e=new Map){if(wd(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=_s(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,s]of t.entries())n.set(r,_s(s,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(_s(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,s]of Object.entries(t))n[r]=_s(s,e)}else throw Error(`Unable to clone ${t}`);return n}class xn{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new qa,this._blacklist=new qa,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(fn.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=_s(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(i=>{e.tests.forEach(o=>{i.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,i)=>i.resolve(s,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,s,i;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),s=n.assert==="ignore-optionality",i=r._cast(e,n);if(n.assert!==!1&&!r.isType(i)){if(s&&$r(i))return i;let o=fr(e),a=fr(i);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return i}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,s){let{path:i,originalValue:o=e,strict:a=this.spec.strict}=n,l=e;a||(l=this._cast(l,Object.assign({assert:!1},n)));let c=[];for(let u of Object.values(this.internalTests))u&&c.push(u);this.runTests({path:i,value:l,originalValue:o,options:n,tests:c},r,u=>{if(u.length)return s(u,l);this.runTests({path:i,value:l,originalValue:o,options:n,tests:this.tests},r,s)})}runTests(e,n,r){let s=!1,{tests:i,value:o,originalValue:a,path:l,options:c}=e,u=T=>{s||(s=!0,n(T,o))},h=T=>{s||(s=!0,r(T,o))},d=i.length,p=[];if(!d)return h([]);let E={value:o,originalValue:a,path:l,options:c,schema:this};for(let T=0;T<i.length;T++){const w=i[T];w(E,u,function(D){D&&(Array.isArray(D)?p.push(...D):p.push(D)),--d<=0&&h(p)})}}asNestedTest({key:e,index:n,parent:r,parentPath:s,originalParent:i,options:o}){const a=e??n;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let c=r[a];const u=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:i[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${s||""}[${l?a:`"${a}"`}]`:(s?`${s}.`:"")+e});return(h,d,p)=>this.resolve(u)._validate(c,u,d,p)}validate(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((o,a)=>s._validate(e,n,(l,c)=>{Ft.isError(l)&&(l.value=c),a(l)},(l,c)=>{l.length?a(new Ft(l,c,void 0,void 0,i)):o(c)}))}validateSync(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i,o=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},n,{sync:!0}),(a,l)=>{throw Ft.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new Ft(a,e,void 0,void 0,o);i=l}),i}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(Ft.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(Ft.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):_s(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=hs({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=hs({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=fn.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=fn.notNull){return this.nullability(!1,e)}required(e=fn.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=fn.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=hs(n),i=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(i||o.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),s=u0(e).map(i=>new as(i));return s.forEach(i=>{i.isSibling&&r.deps.push(i.key)}),r.conditions.push(typeof n=="function"?new Ba(s,n):Ba.fromOptions(s,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=hs({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=fn.oneOf){let r=this.clone();return e.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=hs({message:n,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,o=i.resolveAll(this.resolve);return o.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:o}})}}),r}notOneOf(e,n=fn.notOneOf){let r=this.clone();return e.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=hs({message:n,name:"notOneOf",test(s){let i=this.schema._blacklist,o=i.resolveAll(this.resolve);return o.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:i,nullable:o}=n.spec;return{meta:s,label:r,optional:i,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,c,u)=>u.findIndex(h=>h.name===l.name)===c)}}}xn.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])xn.prototype[`${t}At`]=function(e,n,r={}){const{parent:s,parentPath:i,schema:o}=ok(this,e,n,r.context);return o[t](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const t of["equals","is"])xn.prototype[t]=xn.prototype.oneOf;for(const t of["not","nope"])xn.prototype[t]=xn.prototype.notOneOf;const ak=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function lk(t){const e=Vu(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function Vu(t){var e,n;const r=ak.exec(t);return r?{year:Nn(r[1]),month:Nn(r[2],1)-1,day:Nn(r[3],1),hour:Nn(r[4]),minute:Nn(r[5]),second:Nn(r[6]),millisecond:r[7]?Nn(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Nn(r[10]),minuteOffset:Nn(r[11])}:null}function Nn(t,e=0){return Number(t)||e}let ck=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,uk=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,hk=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,dk="^\\d{4}-\\d{2}-\\d{2}",fk="\\d{2}:\\d{2}:\\d{2}",pk="(([+-]\\d{2}(:?\\d{2})?)|Z)",mk=new RegExp(`${dk}T${fk}(\\.\\d+)?${pk}$`),gk=t=>$r(t)||t===t.trim(),_k={}.toString();function aa(){return new p0}class p0 extends xn{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===_k?e:s})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||fn.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=Nt.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=Nt.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=Nt.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,s,i;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:i}=n:s=n),this.test({name:i||"matches",message:s||Nt.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=Nt.email){return this.matches(ck,{name:"email",message:e,excludeEmptyString:!0})}url(e=Nt.url){return this.matches(uk,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Nt.uuid){return this.matches(hk,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,s;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=e:n=e),this.matches(mk,{name:"datetime",message:n||Nt.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Nt.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:i=>{if(!i||r)return!0;const o=Vu(i);return o?!!o.z:!1}}).test({name:"datetime_precision",message:n||Nt.datetime_precision,params:{precision:s},skipAbsent:!0,test:i=>{if(!i||s==null)return!0;const o=Vu(i);return o?o.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Nt.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:gk})}lowercase(e=Nt.lowercase){return this.transform(n=>$r(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>$r(n)||n===n.toLowerCase()})}uppercase(e=Nt.uppercase){return this.transform(n=>$r(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>$r(n)||n===n.toUpperCase()})}}aa.prototype=p0.prototype;let yk=new Date(""),vk=t=>Object.prototype.toString.call(t)==="[object Date]";class Gl extends xn{constructor(){super({type:"date",check(e){return vk(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=lk(e),isNaN(e)?Gl.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(as.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,n=Du.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(e,n=Du.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}Gl.INVALID_DATE=yk;Gl.prototype;function Ek(t,e=[]){let n=[],r=new Set,s=new Set(e.map(([o,a])=>`${o}-${a}`));function i(o,a){let l=Wr.split(o)[0];r.add(l),s.has(`${a}-${l}`)||n.push([a,l])}for(const o of Object.keys(t)){let a=t[o];r.add(o),as.isRef(a)&&a.isSibling?i(a.path,o):wd(a)&&"deps"in a&&a.deps.forEach(l=>i(l,o))}return GO.array(Array.from(r),n).reverse()}function ym(t,e){let n=1/0;return t.some((r,s)=>{var i;if((i=e.path)!=null&&i.includes(r))return n=s,!0}),n}function m0(t){return(e,n)=>ym(t,e)-ym(t,n)}const wk=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function la(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=la(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=la(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(la)}):"optional"in t?t.optional():t}const Tk=(t,e)=>{const n=[...Wr.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),s=Wr.getter(Wr.join(n),!0)(t);return!!(s&&r in s)};let vm=t=>Object.prototype.toString.call(t)==="[object Object]";function Ik(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const bk=m0([]);function g0(t){return new _0(t)}class _0 extends xn{constructor(e){super({type:"object",check(n){return vm(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=bk,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let s=super._cast(e,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let i=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(s).filter(h=>!this._nodes.includes(h))),l={},c=Object.assign({},n,{parent:l,__validating:n.__validating||!1}),u=!1;for(const h of a){let d=i[h],p=h in s;if(d){let E,T=s[h];c.path=(n.path?`${n.path}.`:"")+h,d=d.resolve({value:T,context:n.context,parent:l});let w=d instanceof xn?d.spec:void 0,x=w==null?void 0:w.strict;if(w!=null&&w.strip){u=u||h in s;continue}E=!n.__validating||!x?d.cast(s[h],c):s[h],E!==void 0&&(l[h]=E)}else p&&!o&&(l[h]=s[h]);(p!==h in l||l[h]!==s[h])&&(u=!0)}return u?l:s}_validate(e,n={},r,s){let{from:i=[],originalValue:o=e,recursive:a=this.spec.recursive}=n;n.from=[{schema:this,value:o},...i],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(l,c)=>{if(!a||!vm(c)){s(l,c);return}o=o||c;let u=[];for(let h of this._nodes){let d=this.fields[h];!d||as.isRef(d)||u.push(d.asNestedTest({options:n,key:h,parent:c,parentPath:n.path,originalParent:o}))}this.runTests({tests:u,value:c,originalValue:o,options:n},r,h=>{s(h.sort(this._sortErrors).concat(l),c)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[s,i]of Object.entries(this.fields)){const o=r[s];r[s]=o===void 0?i:o}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const i=this.fields[r];let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=i&&"getDefault"in i?i.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=Ek(e,n),r._sortErrors=m0(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return la(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>e.includes(r)&&e.includes(s)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let s=Wr.getter(e,!0);return this.transform(i=>{if(!i)return i;let o=i;return Tk(i,e)&&(o=Object.assign({},i),r||delete o[e],o[n]=s(i)),o})}json(){return this.transform(wk)}noUnknown(e=!0,n=Nu.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const i=Ik(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=Nu.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[e(s)]=n[s];return r})}camelCase(){return this.transformKeys(Mc.camelCase)}snakeCase(){return this.transformKeys(Mc.snakeCase)}constantCase(){return this.transformKeys(e=>Mc.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[i,o]of Object.entries(n.fields)){var s;let a=e;(s=a)!=null&&s.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[i]})),r.fields[i]=o.describe(a)}return r}}g0.prototype=_0.prototype;const Ak=RO(g0({firstName:aa().required(),lastName:aa().required(),phone:aa().required()})),Xs=zs("userStore",()=>{const{errors:t,defineField:e,handleSubmit:n}=vO({validationSchema:Ak}),[r,s]=e("firstName"),[i,o]=e("lastName"),[a,l]=e("phone"),c=pe(""),u=pe(""),h=jn([{brand:"",model:"",year:"",mileage:"",fuelType:"gasolina",soatExpiry:null,annualInspection:null,technicalInspection:null}]),d=async N=>{await n(async H=>{try{return await N.updateUser({uid:N.uid,firstName:H.firstName,lastName:H.lastName,phone:H.phone,cars:N.cars})}catch(B){console.error("Error al enviar el formulario",B)}})()};function p(){h.push({brand:"",model:"",year:"",mileage:"",fuelType:"gasolina",soatExpiry:null,annualInspection:null,technicalInspection:null})}function E(N){h.splice(N,1)}function T(N){u.value=N.uid||"",r.value=N.firstName||"",i.value=N.lastName||"",a.value=N.phone||"",Object.assign(h,N.cars||[{brand:"",model:"",year:"",mileage:"",fuelType:"",soatExpiry:"",annualInspection:"",technicalInspection:""}])}function w(){u.value="",r.value="",i.value="",a.value="",Object.assign(h,[{brand:"",model:"",year:"",mileage:"",fuelType:"",soatExpiry:"",annualInspection:"",technicalInspection:""}])}async function x(N){if(N){const H=Gp(kc,"users"),B=tx(H,nx("uid","==",N));(await cx(B)).docs.map(ne=>{const ee=ne.data();c.value=ne.id,T(ee)})}else return[]}async function D(N){try{const H=Gp(kc,"users"),B={id:"",uid:N,firstName:"",lastName:"",phone:"",cars:[{brand:"",model:"",year:"",mileage:"",fuelType:"gasolina",soatExpiry:"",annualInspection:"",technicalInspection:""}]};return T(B),await hx(H,B)}catch(H){throw H}}async function L(N){try{const H=Fv(kc,"users",c.value);await ux(H,N)}catch(H){throw H}}return{id:c,uid:u,errors:t,firstName:r,firstNameProps:s,lastName:i,lastNameProps:o,phone:a,phoneProps:l,submitUserForm:d,cars:h,setUser:T,getUserByUid:x,createUser:D,updateUser:L,resetUser:w,addCar:p,removeCar:E}}),Ql=zs("auth",()=>{const t=pe(""),e=pe(""),n=pe(!1);function r(i){n.value=i}async function s(){return new Promise((i,o)=>{try{js.onAuthStateChanged(a=>{a&&(t.value=a.email,e.value=a.uid),i()})}catch(a){o(a)}})}return{isLoading:n,setIsLoading:r,email:t,uid:e,getFirebaseUser:s}}),y0=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Rk={},Sk={class:"loader"};function Ck(t,e){return re(),Ce("div",Sk)}const Yl=y0(Rk,[["render",Ck]]),Pk={class:"w-screen h-screen z-30 fixed top-0 left-0 flex flex-row justify-center items-center"},xk=Ot({__name:"LoadingView",setup(t){return(e,n)=>(re(),Ce("div",Pk,[Be(Yl)]))}}),Ok=Ot({__name:"App",setup(t){const e=Xs(),n=Ql();return el(async()=>{n.setIsLoading(!0),await n.getFirebaseUser().then(async()=>{await e.getUserByUid(n==null?void 0:n.uid).then(()=>{n.setIsLoading(!1)})})}),(r,s)=>q(n).isLoading?(re(),It(xk,{key:0})):(re(),It(q(Lg),{key:1}))}}),v0="/assets/location-DpZDhNKF.svg",kk="/assets/profile-DfsRXmBN.png",E0=zs("alert",()=>{const t=pe(!1);function e(n){t.value=n,setTimeout(()=>{t.value=!1},1500)}return{showAlert:t,setShowAlert:e}}),w0=zs("googleMapsModal",()=>{const t=pe(""),e=pe(""),n=pe(!1),r=pe(!1);function s(c){t.value=c}function i(c){e.value=c}function o(c){n.value=c}function a(c){r.value=c}function l(c){o(!0),a(!0),s(c.placeId),i(c.address)}return{isLoading:n,showModal:r,placeId:t,address:e,setPlaceId:s,setAddress:i,setIsLoading:o,setShowModal:a,handleShowGoogleMapsModal:l}}),Td=zs("loginModalStore",()=>{const t=pe(!1),e=pe(!1),n=pe(""),r=pe("");function s(a){t.value=a}function i(a){e.value=a}function o(){i(!0)}return{email:n,password:r,isLoading:t,showModal:e,setIsLoading:s,setShowModal:i,handleShowLoginModal:o}}),Id=zs("registerModalStore",()=>{const t=pe(!1),e=pe(!1),n=pe(""),r=pe("");function s(a){t.value=a}function i(a){e.value=a}function o(){i(!0)}return{email:n,password:r,isLoading:t,showModal:e,setIsLoading:s,setShowModal:i,handleShowRegisterModal:o}}),Dk={class:"flex sm:flex-row flex-col justify-between items-center bg-blue-900 w-full px-4 py-4 drop-shadow-xl sticky"},Nk={class:"flex flex-row justify-start items-center sm:mb-0 mb-5"},Vk=y("p",{class:"cursor-default text-sky-100 border-sky-100 text-4xl font-bold border-4 px-1 hidden sm:block"},"MOTORMATE",-1),Mk={class:"flex flex-col justify-center items-center sm:mx-7"},Lk={class:"cursor-default flex flex-row px-2 rounded-sm"},Fk=y("p",{class:"text-sky-300 font-bold"},"Ubicacin",-1),Uk=["src"],$k=y("p",{class:"cursor-default w-52 text-center text-sky-100 font-black px-6 py-1"},"Trujillo, La Libertad",-1),jk={class:"flex flex-row justify-between items-center"},Bk={class:"flex flex-row justify-between items-center"},qk={class:"flex flex-row justify-between items-center"},zk=["src"],Hk={class:"text-blue-900 font-medium"},Wk=y("div",{class:"absolute w-0 h-0",style:{top:"-10px",left:"75px","border-left":"10px solid transparent","border-right":"10px solid transparent","border-bottom":"10px solid #1e3a8a"}},null,-1),Kk=Ot({__name:"TopBar",setup(t){const{handleShowLoginModal:e}=Td(),{handleShowRegisterModal:n}=Id(),r=Xs(),s=Ql(),i=pe(!1);async function o(){try{await MA(js),r.resetUser()}catch(a){console.error("Error al cerrar sesin:",a)}}return(a,l)=>(re(),Ce("div",Dk,[y("div",Nk,[Vk,y("div",Mk,[y("span",Lk,[Fk,y("img",{src:q(v0),alt:"LOCATION",class:"h-6"},null,8,Uk)]),$k])]),y("div",jk,[y("div",Bk,[q(r).uid?(re(),Ce("div",{key:0,class:"cursor-default bg-white rounded-md h-12 min-w-fit px-2 flex flex-col justify-center items-center",onMouseenter:l[0]||(l[0]=c=>i.value=!0),onMouseleave:l[1]||(l[1]=c=>i.value=!1)},[y("div",qk,[y("img",{src:q(kk),alt:"AVATAR",class:"w-8 mr-2"},null,8,zk),y("p",Hk,zt(q(s).email||"-"),1)]),i.value?(re(),Ce("button",{key:0,onClick:o,class:"cursor-pointer py-1 font-normal rounded-md border-blue-100 border-2 bg-blue-900 text-blue-100 hover:border-blue-900 hover:bg-blue-100 hover:text-blue-900 w-44 top-[4.3em] absolute flex flex-col justify-between items-center"},[Wk,Zt(" Cerrar sesin ")])):ut("",!0)],32)):(re(),Ce(Pt,{key:1},[y("button",{onClick:l[2]||(l[2]=(...c)=>q(e)&&q(e)(...c)),class:"font-semibold w-40 px-5 py-2 rounded-lg border-blue-100 border-2 bg-blue-900 text-blue-100 hover:border-0 hover:bg-blue-100 hover:text-blue-900 mr-3"},"INGRESAR"),y("button",{onClick:l[3]||(l[3]=(...c)=>q(n)&&q(n)(...c)),class:"font-semibold w-40 px-5 py-2 rounded-lg border-blue-100 border-2 bg-blue-900 text-blue-100 hover:border-0 hover:bg-blue-100 hover:text-blue-900"},"REGISTRARSE")],64))])])]))}}),Gk={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 bg-blue-100"},Qk=y("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),Yk=[Qk],Jk={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 bg-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xk=y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1),Zk=[Xk],eD=Ot({__name:"SideBar",setup(t){const e=pe(!1),n=Xs();function r(){e.value=!e.value}return(s,i)=>{const o=eg("router-link");return re(),Ce("div",null,[y("div",{onClick:r,class:Jt([{"w-44":e.value,"w-6.5":!e.value},"bg-blue-900 cursor-pointer sm:hidden flex fixed top-0"])},[e.value?(re(),Ce("svg",Gk,Yk)):(re(),Ce("svg",Jk,Zk))],2),y("div",{class:Jt([{"flex top-[1.5rem]":e.value,"hidden sm:flex top-[5.5rem]":!e.value},"flex-col justify-start items-center h-full w-44 bg-blue-900 drop-shadow-xl fixed bottom-0"])},[Be(o,{to:{name:"AllServices"},class:"font-medium text-sky-100 hover:text-sky-900 bg-blue-900 hover:bg-blue-100 drop-shadow-xl py-1 mb-1 w-full text-left pl-3"},{default:Xt(()=>[Zt("Todos los servicios")]),_:1}),Be(o,{to:{name:"CarWashServices"},class:"font-medium text-sky-100 hover:text-sky-900 bg-blue-900 hover:bg-blue-100 drop-shadow-xl py-1 mb-1 w-full text-left pl-3"},{default:Xt(()=>[Zt("Todo Lavado")]),_:1}),q(n).uid?(re(),It(o,{key:0,to:{name:"Profile"},class:"font-medium text-sky-100 hover:text-sky-900 bg-blue-900 hover:bg-blue-100 drop-shadow-xl py-1 mb-1 w-full text-left pl-3"},{default:Xt(()=>[Zt("Mi perfil")]),_:1})):ut("",!0)],2)])}}}),tD={class:"fixed w-screen h-screen top-0 left-0 flex flex-row justify-center items-center bg-black bg-opacity-80 z-20"},nD={class:"w-full flex flex-row justify-end items-center mb-1"},rD={class:"w-full h-full flex flex-col justify-center items-center mt-0 mb-5"},Jl=Ot({__name:"Modal",props:{width:{default:"w-1/2"},height:{default:"h-3/4"}},emits:["closeModal"],setup(t,{emit:e}){const n=t;return(r,s)=>(re(),Ce("div",tD,[y("div",{class:Jt(["flex flex-col justify-start items-center bg-white rounded-lg pt-2 px-4",n.width+" "+n.height])},[y("div",nD,[y("p",{class:"text-lg font-bold cursor-pointer",onClick:s[0]||(s[0]=i=>r.$emit("closeModal"))},"X")]),y("div",rD,[ig(r.$slots,"default",{},()=>[Zt("MODAL")])])],2)]))}}),sD={key:1,class:"text-sm font-semibold text-center mb-3"},iD=y("strong",null,"UBICACIN",-1),oD=[iD],aD=["src"],lD={key:3,class:"text-sm font-semibold text-center mt-5 max-w-80"},cD=Ot({__name:"GoogleMapsModal",setup(t){const e=pe("AIzaSyDyp1H4_IoRX2Z6AbXFtqUmKJlpkCu91HY"),n=w0();return(r,s)=>q(n).showModal?(re(),It(Jl,{key:0,onCloseModal:s[1]||(s[1]=i=>q(n).setShowModal(!1)),width:"w-3/4",height:"h-3/4"},{default:Xt(()=>[q(n).isLoading?(re(),It(Yl,{key:0})):ut("",!0),q(n).isLoading?ut("",!0):(re(),Ce("p",sD,oD)),q(n).placeId?(re(),Ce("iframe",{key:2,class:"w-full h-full",style:{border:"0"},Loading:"lazy",allowfullscreen:"",onLoad:s[0]||(s[0]=i=>q(n).setIsLoading(!1)),src:`https://www.google.com/maps/embed/v1/place?q=place_id:${q(n).placeId}&key=${e.value}`},null,40,aD)):ut("",!0),q(n).isLoading?ut("",!0):(re(),Ce("p",lD,zt(q(n).address),1))]),_:1})):ut("",!0)}}),uD={key:1,class:"w-full flex flex-col justify-center items-center"},hD=y("p",{class:"cursor-default mr-1"},"No tienes una cuenta?",-1),dD={class:"flex flex-col rounded-md w-full"},fD=y("label",{for:"email",class:"text-blue-900 font-semibold text-xs mb-1"},"Correo electrnico",-1),pD={class:"flex flex-col w-full"},mD=y("label",{for:"password",class:"text-blue-900 font-semibold text-xs"},"Contrasea",-1),gD=y("button",{type:"submit",class:"w-full flex flex-row justify-center items-center mt-3 py-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},"Iniciar sesin",-1),_D=y("div",{class:"flex flex-row justify-between items-baseline"},[y("hr",{class:"h-[2px] w-24 bg-[#ededed]"}),y("p",{class:"my-4 mx-2 text-gray-500"},"o"),y("hr",{class:"h-[2px] w-24 bg-[#ededed]"})],-1),yD=y("svg",{class:"h-6",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},[y("g",null,[y("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),y("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),y("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),y("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),y("path",{fill:"none",d:"M0 0h48v48H0z"})])],-1),vD=y("p",{class:"ml-3"},"Iniciar sesin con Google",-1),ED=[yD,vD],wD=Ot({__name:"LoginModal",setup(t){const e=Td(),n=Id(),r=Xs(),s=Ql(),i=pe(""),o=pe("");function a(){e.setShowModal(!1),n.setShowModal(!0)}const l=async()=>{try{const u=new gn;await x_(js,u)}catch(u){console.error("Error al iniciar sesin con Google:",u)}},c=async()=>{try{e.setIsLoading(!0),await DA(js,i.value,o.value).then(async()=>{await r.getUserByUid(s==null?void 0:s.uid),e.setIsLoading(!1),e.setShowModal(!1)})}catch(u){console.error("Error al iniciar sesin con correo y contrasea:",u)}};return(u,h)=>q(e).showModal?(re(),It(Jl,{key:0,onCloseModal:h[2]||(h[2]=d=>q(e).setShowModal(!1)),width:"w-3/4",height:"h-3/4"},{default:Xt(()=>[q(e).isLoading?(re(),It(Yl,{key:0})):(re(),Ce("div",uD,[y("span",{class:"text-sm flex flex-row justify-center items-center mb-10"},[hD,y("p",{class:"cursor-pointer text-blue-900 font-semibold",onClick:a},"Registrate gratis")]),y("form",{onSubmit:wg(c,["prevent"]),class:"rounded-md w-full sm:w-2/5 flex flex-col justify-center items-center"},[y("div",dD,[fD,Ct(y("input",{class:"h-8 mb-2 pl-2 bg-blue-100 rounded-md",style:{outline:"none"},type:"email",id:"email","onUpdate:modelValue":h[0]||(h[0]=d=>i.value=d),required:""},null,512),[[Mt,i.value]])]),y("div",pD,[mD,Ct(y("input",{class:"h-8 mb-2 pl-2 bg-blue-100 rounded-md",style:{outline:"none"},type:"password",id:"password","onUpdate:modelValue":h[1]||(h[1]=d=>o.value=d),required:""},null,512),[[Mt,o.value]])]),gD,_D],32),y("button",{type:"button",class:"mt-2 flex flex-row justify-evenly items-center bg-white border-blue-100 border-2 w-fit rounded-md px-3 py-1 hover:opacity-60",onClick:l},ED)]))]),_:1})):ut("",!0)}}),TD={key:1,class:"w-full flex flex-col justify-center items-center"},ID=y("p",{class:"cursor-default mr-1"},"Ya tienes una cuenta?",-1),bD={class:"flex flex-col rounded-md w-full"},AD=y("label",{for:"email",class:"text-blue-900 font-semibold text-xs mb-1"},"Correo electrnico",-1),RD={class:"flex flex-col w-full"},SD=y("label",{for:"password",class:"text-blue-900 font-semibold text-xs"},"Contrasea",-1),CD=y("button",{type:"submit",class:"w-full flex flex-row justify-center items-center mt-3 py-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},"Registrarse",-1),PD=y("div",{class:"flex flex-row justify-between items-baseline"},[y("hr",{class:"h-[2px] w-24 bg-[#ededed]"}),y("p",{class:"my-4 mx-2 text-gray-500"},"o"),y("hr",{class:"h-[2px] w-24 bg-[#ededed]"})],-1),xD=y("svg",{class:"h-6",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},[y("g",null,[y("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),y("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),y("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),y("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),y("path",{fill:"none",d:"M0 0h48v48H0z"})])],-1),OD=y("p",{class:"ml-3"},"Registrarse con Google",-1),kD=[xD,OD],DD=Ot({__name:"RegisterModal",setup(t){const e=Fg(),n=Id(),r=Td(),s=Xs(),i=pe(""),o=pe("");function a(){n.setShowModal(!1),r.setShowModal(!0)}const l=async()=>{try{n.setShowModal(!0),await kA(js,i.value,o.value).then(async({user:{uid:u}})=>{await s.createUser(u).then(()=>{n.setShowModal(!1),e.push({name:"Profile"})})})}catch(u){console.error("Error al registrar el usuario:",u)}},c=async()=>{try{const u=new gn;await x_(js,u)}catch(u){console.error("Error al iniciar sesin con Google:",u)}};return(u,h)=>q(n).showModal?(re(),It(Jl,{key:0,onCloseModal:h[2]||(h[2]=d=>q(n).setShowModal(!1)),width:"w-3/4",height:"h-3/4"},{default:Xt(()=>[q(n).isLoading?(re(),It(Yl,{key:0})):(re(),Ce("div",TD,[y("span",{class:"text-sm flex flex-row justify-center items-center mb-10"},[ID,y("p",{class:"cursor-pointer text-blue-900 font-semibold",onClick:a},"Inicia sesin")]),y("form",{onSubmit:wg(l,["prevent"]),class:"rounded-md w-full sm:w-2/5 flex flex-col justify-center items-center"},[y("div",bD,[AD,Ct(y("input",{class:"h-8 mb-2 pl-2 bg-blue-100 rounded-md",style:{outline:"none"},type:"email",id:"email","onUpdate:modelValue":h[0]||(h[0]=d=>i.value=d),required:""},null,512),[[Mt,i.value]])]),y("div",RD,[SD,Ct(y("input",{class:"h-8 mb-2 pl-2 bg-blue-100 rounded-md",style:{outline:"none"},type:"password",id:"password","onUpdate:modelValue":h[1]||(h[1]=d=>o.value=d),required:""},null,512),[[Mt,o.value]])]),CD,PD],32),y("button",{type:"button",class:"mt-2 flex flex-row justify-evenly items-center bg-white border-blue-100 border-2 w-fit rounded-md px-3 py-1 hover:opacity-60",onClick:c},kD)]))]),_:1})):ut("",!0)}}),ND=y("p",{class:"text-blue-600 font-medium"},"Los datos se actualizaron con xito!",-1),VD=Ot({__name:"Alert",setup(t){const e=E0();return(n,r)=>q(e).showAlert?(re(),It(Jl,{key:0,onCloseModal:r[0]||(r[0]=s=>q(e).setShowAlert(!1)),width:"w-1/4",height:"h-40"},{default:Xt(()=>[ND]),_:1})):ut("",!0)}}),MD={},LD={class:"footer"},FD={class:"pt-10 pb-7 px-10 text-center text-blue-900 font-bold"};function UD(t,e){return re(),Ce("footer",LD,[y("div",FD,[y("p",null," "+zt(new Date().getFullYear())+" Motormate. Todos los derechos reservados.",1)])])}const $D=y0(MD,[["render",UD]]),jD={class:"flex flex-col w-full h-screen overflow-hidden"},BD={class:"flex flex-row w-full h-full overflow-y-auto"},qD={class:"md:container md:mx-auto w-full sm:pl-44"},zD={class:"w-full h-full"},bd=Ot({__name:"Layout",setup(t){return(e,n)=>(re(),Ce("div",jD,[Be(cD),Be(wD),Be(DD),Be(VD),Be(Kk),y("div",BD,[Be(eD),y("span",qD,[y("div",zD,[ig(e.$slots,"default",{},()=>[Zt("Add view")]),Be($D)])])])]))}}),HD="/assets/adjustable-wrench-R0lMtTwB.png",WD="/assets/fan-CsgU8Uvx.png",KD="/assets/brakes-dzGoctIr.png",GD="/assets/oil-CO9vyqw0.png",QD="/assets/spray-vO-oeRxu.png",T0="/assets/whatsapp-Bv3ceAgd.png",YD={class:"md:container md:mx-auto bg-white pt-5"},JD=y("h1",{class:"text-2xl text-left px-5 text-blue-900 font-black mb-4"},"SERVICIOS PARA AUTOMVILES A DOMICILIO",-1),XD=y("p",{class:"text-left px-5 text-blue-900 font-normal mb-6"},[Zt("Lista de servicios de mantenimiento y reparacin de automviles "),y("strong",null,"disponibles a domicilio"),Zt(".")],-1),ZD={class:"flex flex-row flex-wrap justify-evenly items-center"},eN={key:0,class:"text-center text-base text-orange-600 py-0 font-black w-ful"},tN=["src"],nN=["innerHTML"],rN={key:2,class:"flex flex-row justify-center items-center mb-3 p-1 w-[15rem] rounded-md bg-blue-600 hover:opacity-80"},sN={class:"text-center text-white text-xl font-bold"},iN=["src"],oN=Ot({__name:"AllServices",setup(t){const e=pe([{name:"Lavado",imageSrc:QD,description:'<span>Servicio de lavado <span class="text-orange-600 font-black text-lg not-italic">A DOMICILIO</span> y talleres cerca de ti.</span>',CTAtext:"VER TALLERES",isCarWash:!0},{name:"Afinamiento",organization:"Nombre del taller",imageSrc:HD,description:"<span>Servicio regular para mantener el rendimiento ptimo del vehculo.</span>",price:"Desde S/50",rating:4.5,endedServices:37,mobile:"+51 987654321",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Cambio de Aceite",imageSrc:GD,description:"<span>Cambio de aceite y filtro para garantizar un motor saludable.</span>",price:"S/30 (Incluye filtro)",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Reparacin de Frenos",imageSrc:KD,description:"<span>Inspeccin y reparacin de sistemas de frenos para una conduccin segura.</span>",price:"Desde S/100",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Revisin de Aire Acondicionado",imageSrc:WD,description:"<span>Recarga y mantenimiento del sistema de aire acondicionado para un clima interior cmodo.</span>",price:"Desde S/60",CTAtext:"CONTACTAR",isCarWash:!1}]);return(n,r)=>{const s=eg("router-link");return re(),It(bd,null,{default:Xt(()=>[y("div",YD,[JD,XD,y("div",ZD,[(re(!0),Ce(Pt,null,Xu(e.value,i=>(re(),Ce("div",{key:i.name,class:"w-[21rem] h-[25rem] mb-6 p-2 mr-1 bg-green-100 flex flex-col justify-center items-center rounded-lg shadow-xl"},[y("p",{class:Jt(["text-center text-2xl font-black",{"text-orange-600":i.isCarWash,"text-blue-600":!i.isCarWash}])},zt(i.name),3),i.price?(re(),Ce("p",eN,zt(i.price),1)):ut("",!0),y("img",{src:i.imageSrc,alt:"Car service",class:"my-6 h-20 rounded"},null,8,tN),y("p",{class:"px-1 rounded mb-6 w-[19rem] text-center text-blue-600 text-base font-mono bg-white italic font-black",innerHTML:i.description},null,8,nN),i.isCarWash?(re(),It(s,{key:1,to:{name:"CarWashServices"},class:"hover:opacity-80 mb-3 p-1 w-[15rem] rounded-md text-center text-white text-xl font-bold bg-orange-600"},{default:Xt(()=>[Zt(zt(i.CTAtext),1)]),_:2},1024)):(re(),Ce("button",rN,[y("p",sN,zt(i.CTAtext),1),y("img",{src:q(T0),alt:"whatsapp",class:"ml-4 h-6"},null,8,iN)]))]))),128))])])]),_:1})}}}),aN={class:"md:container md:mx-auto pt-5"},lN=y("h1",{class:"text-2xl text-left px-5 text-blue-900 font-black mb-4"},"LAVADO DE AUTOMVILES",-1),cN=y("p",{class:"text-left px-5 text-blue-900 font-normal mb-6"},[Zt("Lista de talleres de lavado de automviles disponibles "),y("strong",null,"a domicilio y de forma presencial"),Zt(".")],-1),uN={class:"flex flex-row flex-wrap justify-evenly items-center"},hN=["innerHTML"],dN={key:1,class:"flex flex-col justify-center items-center rounded-sm text-center mb-4 p-2 max-w-64"},fN=y("p",{class:"text-xs font-normal mb-2"},"Ubicacin:",-1),pN={class:"flex flex-row justify-center items-start mb-4"},mN=["src"],gN={class:"text-xs font-semibold"},_N=["onClick"],yN={class:"flex flex-col justify-center items-center mb-4"},vN={class:"mb-1 text-center text-base text-orange-600 font-black w-ful"},EN={class:"mb-1 text-center text-base text-orange-600 font-black w-ful"},wN={class:"mb-1 text-center text-base text-orange-600 font-black w-ful"},TN=["onClick"],IN=y("p",{class:"text-center text-white text-xl font-bold"},"Contactar",-1),bN=["src"],AN=Ot({__name:"CarWashServices",setup(t){const{handleShowGoogleMapsModal:e}=w0(),n=pe([{key:1,organization:"BRUCCE SAC",description:"<span>Lavado de autos a DOMICILIO</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"irvin.jair.pg@gmail.com",phone:"+51 943800214",whatsapp:"+51 943800214",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"online",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!0},{key:2,organization:"AutoTaller QQQ",description:"<span>Haz que tu auto luzca como nuevo! En AutoTaller XYZ, ofrecemos un servicio completo de lavado de autos para mantener tu vehculo limpio y reluciente.</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"irvin.jair.pg@gmail.com",phone:"+51 943800214",whatsapp:"-",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"Jirn Cahuide 439, Urb. Santa Mara 3era etapa",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!1},{key:3,organization:"AutoTaller WWW",description:"<span>Haz que tu auto luzca como nuevo! En AutoTaller XYZ, ofrecemos un servicio completo de lavado de autos para mantener tu vehculo limpio y reluciente.</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"-",phone:"+51 943800214",whatsapp:"+51 943800214",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"Jirn Cahuide 439, Urb. Santa Mara 3era etapa",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!1},{key:4,organization:"AutoTaller EEE",description:"<span>Haz que tu auto luzca como nuevo! En AutoTaller XYZ, ofrecemos un servicio completo de lavado de autos para mantener tu vehculo limpio y reluciente.</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"irvin.jair.pg@gmail.com",phone:"",whatsapp:"+51 943800214",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"Jirn Cahuide 439, Urb. Santa Mara 3era etapa",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!1},{key:5,organization:"AutoTaller RRR",description:"<span>Haz que tu auto luzca como nuevo! En AutoTaller XYZ, ofrecemos un servicio completo de lavado de autos para mantener tu vehculo limpio y reluciente.</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"irvin.jair.pg@gmail.com",phone:"+51 943800214",whatsapp:"+51 943800214",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"Jirn Cahuide 439, Urb. Santa Mara 3era etapa",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!1},{key:6,organization:"AutoTaller TTT",description:"<span>Haz que tu auto luzca como nuevo! En AutoTaller XYZ, ofrecemos un servicio completo de lavado de autos para mantener tu vehculo limpio y reluciente.</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"irvin.jair.pg@gmail.com",phone:"+51 943800214",whatsapp:"+51 943800214",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"Jirn Cahuide 439, Urb. Santa Mara 3era etapa",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!1},{key:7,organization:"AutoTaller YYY",description:"<span>Haz que tu auto luzca como nuevo! En AutoTaller XYZ, ofrecemos un servicio completo de lavado de autos para mantener tu vehculo limpio y reluciente.</span>",price:{exteriorWash:"s/20",exteriorAndInteriorWash:"s/35",completeWash:"s/50"},email:"irvin.jair.pg@gmail.com",phone:"+51 943800214",whatsapp:"+51 943800214",schedules:{fromMondayToFriday:"8am - 6pm",saturday:"9am - 4pm",sundayOrHolidays:"-"},location:{country:"PER",region:"La Libertad",city:"Trujillo",address:"Jirn Cahuide 439, Urb. Santa Mara 3era etapa",placeId:"ChIJW3gamX89rZERq1EIvzdk53E"},isOnline:!1}]);function r(s){return s.whatsapp}return(s,i)=>(re(),It(bd,null,{default:Xt(()=>[y("div",aN,[lN,cN,y("div",uN,[(re(!0),Ce(Pt,null,Xu(n.value,o=>(re(),Ce("div",{key:o.key,class:"cursor-default w-[21rem] h-[26rem] mb-6 p-2 mr-1 bg-green-100 flex flex-col justify-center items-center rounded-lg shadow-xl"},[y("p",{class:Jt(["mb-3 text-center text-2xl font-black",{"text-orange-600":o.isOnline,"text-blue-600":!o.isOnline}])},zt(o.organization),3),o.isOnline?(re(),Ce("p",{key:0,class:"px-1 rounded mb-6 w-[19rem] text-center text-blue-600 font-black font-mono bg-white italic",innerHTML:o.description},null,8,hN)):ut("",!0),o.isOnline?ut("",!0):(re(),Ce("span",dN,[fN,y("span",pN,[y("img",{src:q(v0),alt:"Location icon",class:"w-4"},null,8,mN),y("p",gN,zt(o.location.address),1)]),y("button",{onClick:a=>q(e)(o.location),class:"text-xs font-bold text-white bg-gray-500 hover:text-gray-500 hover:bg-white border-2 border-gray-500 hover:gray-green-500 rounded-lg py-1 px-10"},"Ver mapa",8,_N)])),y("div",yN,[y("p",vN,"Lavado exterior: "+zt(o.price.exteriorWash),1),y("p",EN,"Lavado interior: "+zt(o.price.exteriorAndInteriorWash),1),y("p",wN,"Lavado completo: "+zt(o.price.completeWash),1)]),y("button",{onClick:a=>r(o.whatsapp),class:Jt(["hover:opacity-80 flex flex-row justify-center items-center mb-3 p-1 w-[15rem] rounded-md",{"bg-orange-600":o.isOnline,"bg-blue-600":!o.isOnline}])},[IN,y("img",{src:q(T0),alt:"whatsapp",class:"ml-4 h-6"},null,8,bN)],10,TN)]))),128))])])]),_:1}))}}),RN={class:"md:container md:mx-auto pt-5 mb-11"},SN=y("h1",{class:"text-left pl-5 text-2xl text-blue-900 font-black mb-4"},"CONFIGURACIN",-1),CN=y("p",{class:"text-left pl-5 text-blue-900 font-normal mb-6"},"Llena tus datos y activa notificaciones.",-1),PN={class:"mb-4 rounded-md w-11/12 mx-5 p-5 flex flex-col justify-center items-start bg-blue-100"},xN=y("h2",{class:"text-lg text-left text-blue-900 font-bold mb-6"},"Informacin de contacto",-1),ON={class:"mb-4 field flex flex-col w-full"},kN=y("label",{for:"first-name",class:"text-blue-900 font-bold text-xs mb-1"},"Nombres*",-1),DN={key:0,class:"text-xs text-red-700 font-medium pl-2"},NN={class:"mb-4 field flex flex-col w-full"},VN=y("label",{for:"last-name",class:"text-blue-900 font-bold text-xs mb-1"},"Apellidos*",-1),MN={key:0,class:"text-xs text-red-700 font-medium pl-2"},LN={class:"field flex flex-col w-full"},FN=y("label",{for:"phone",class:"text-blue-900 font-bold text-xs mb-1"},"Telfono*",-1),UN={key:0,class:"text-xs text-red-700 font-medium pl-2"},$N={class:"mb-4 rounded-md w-11/12 mx-5 p-5 flex flex-col justify-center items-start bg-blue-100"},jN={class:"flex flex-row justify-between items-center w-full mb-6"},BN=y("h2",{class:"text-lg text-left text-blue-900 font-bold mb-4"},"Informacin de tus automviles",-1),qN={class:"w-full flex flex-row justify-between items-center mb-4"},zN={class:"text-xl text-left text-blue-600 font-black"},HN=["onClick"],WN={class:"w-full flex flex-row justify-between items-center"},KN={class:"field flex flex-col mb-2 w-full mr-1"},GN=y("label",{for:"brand",class:"text-blue-900 font-bold text-xs mb-1"},"Marca",-1),QN=["onUpdate:modelValue"],YN={class:"field flex flex-col mb-2 w-full ml-1"},JN=y("label",{for:"model",class:"text-blue-900 font-bold text-xs mb-1"},"Modelo",-1),XN=["onUpdate:modelValue"],ZN={class:"w-full flex flex-row justify-between items-center"},eV={class:"field flex flex-col mb-2 w-full mr-1"},tV=y("label",{for:"year",class:"text-blue-900 font-bold text-xs mb-1"},"Ao",-1),nV=["onUpdate:modelValue"],rV={class:"field flex flex-col mb-2 w-full mr-1 ml-1"},sV=y("label",{for:"mileage",class:"text-blue-900 font-bold text-xs mb-1"},"Kilometraje Actual",-1),iV=["onUpdate:modelValue"],oV={class:"field flex flex-col mb-2 w-full ml-1"},aV=y("label",{for:"fuel-type",class:"text-blue-900 font-bold text-xs mb-1"},"Tipo de Combustible",-1),lV=["onUpdate:modelValue"],cV=y("option",{value:"gasolina"},"Gasolina",-1),uV=y("option",{value:"gnv"},"GNV",-1),hV=y("option",{value:"glp"},"GLP",-1),dV=y("option",{value:"diesel"},"Disel",-1),fV=y("option",{value:"hibrido"},"Hbrido",-1),pV=[cV,uV,hV,dV,fV],mV={class:"w-full flex flex-row justify-between items-center"},gV={class:"field flex flex-col mb-2 w-full mr-1"},_V=y("label",{for:"soat-expiry",class:"text-blue-900 font-bold text-xs mb-1"},"Fecha vencimiento SOAT",-1),yV=["onUpdate:modelValue"],vV={class:"field flex flex-col mb-2 w-full mr-1 ml-1"},EV=y("label",{for:"annual-inspection",class:"text-blue-900 font-bold text-xs mb-1"},"Fecha revisin tcnica anual",-1),wV=["onUpdate:modelValue"],TV={class:"field flex flex-col mb-2 w-full ml-1"},IV=y("label",{for:"technical-inspection",class:"text-blue-900 font-bold text-xs mb-1"},"Fecha inspeccin tcnica anual",-1),bV=["onUpdate:modelValue"],AV={key:0,class:"h-0.5 w-full mb-8 bg-white"},RV=Ot({__name:"Profile",setup(t){const e=Ql(),n=pe(!1),r=Xs(),s=E0(),i=Fg();el(()=>{r.uid||i.push({name:"Home"})});function o(){e.setIsLoading(!0),n.value||(n.value=!0),r.submitUserForm(r).then(()=>{e.setIsLoading(!1),s.setShowAlert(!0)})}return(a,l)=>(re(),It(bd,null,{default:Xt(()=>[y("div",RN,[SN,CN,y("form",PN,[xN,y("div",ON,[kN,Ct(y("input",{id:"first-name","onUpdate:modelValue":l[0]||(l[0]=c=>q(r).firstName=c),type:"text",placeholder:"Ingresa tu nombre",class:Jt(["pl-2",{"border-red-400 border-2 rounded-xs":n.value&&q(r).errors&&q(r).errors.firstName}]),style:{outline:"none"}},null,2),[[Mt,q(r).firstName]]),n.value&&q(r).errors&&q(r).errors.firstName?(re(),Ce("p",DN,"Los nombres son requeridos")):ut("",!0)]),y("div",NN,[VN,Ct(y("input",{id:"last-name","onUpdate:modelValue":l[1]||(l[1]=c=>q(r).lastName=c),type:"text",placeholder:"Ingresa tus apellidos",class:Jt(["pl-2",{"border-red-400 border-2 rounded-xs":n.value&&q(r).errors&&q(r).errors.lastName}]),style:{outline:"none"}},null,2),[[Mt,q(r).lastName]]),n.value&&q(r).errors&&q(r).errors.lastName?(re(),Ce("p",MN,"Los apellidos son requerido")):ut("",!0)]),y("div",LN,[FN,Ct(y("input",{id:"phone","onUpdate:modelValue":l[2]||(l[2]=c=>q(r).phone=c),type:"tel",placeholder:"Ingresa tu nmero de telfono",class:Jt(["mb-1 pl-2",{"border-red-400 border-2 rounded-xs":n.value&&q(r).errors&&q(r).errors.phone}]),style:{outline:"none"}},null,2),[[Mt,q(r).phone]]),n.value&&q(r).errors&&q(r).errors.phone?(re(),Ce("p",UN,"El telfono es requerido")):ut("",!0)])]),y("form",$N,[y("span",jN,[BN,y("button",{type:"button",onClick:l[3]||(l[3]=(...c)=>q(r).addCar&&q(r).addCar(...c)),class:"pointer-default bg-blue-600 hover:opacity-80 text-blue-100 font-bold rounded-md px-4 py-1"},"Agregar automvil +")]),(re(!0),Ce(Pt,null,Xu(q(r).cars,(c,u)=>(re(),Ce("span",{key:u,class:"flex flex-col justify-between items-center w-full"},[y("span",qN,[y("p",zN,"AUTO N "+zt(u+1),1),y("button",{type:"button",onClick:h=>q(r).removeCar(u),class:"ml-4 px-2 rounded-md hover:bg-blue-600 hover:text-white font-bold text-blue-600 bg-white"},"Quitar auto",8,HN)]),y("span",WN,[y("div",KN,[GN,Ct(y("input",{id:"brand","onUpdate:modelValue":h=>c.brand=h,type:"text",placeholder:"Ejemplo: Toyota, Honda, etc.",class:"mb-4 pl-2",style:{outline:"none"}},null,8,QN),[[Mt,c.brand]])]),y("div",YN,[JN,Ct(y("input",{id:"model","onUpdate:modelValue":h=>c.model=h,type:"text",placeholder:"Ejemplo: Corolla, Civic, etc.",class:"mb-4 pl-2",style:{outline:"none"}},null,8,XN),[[Mt,c.model]])])]),y("span",ZN,[y("div",eV,[tV,Ct(y("input",{id:"year","onUpdate:modelValue":h=>c.year=h,type:"number",placeholder:"Ejemplo: 2022",class:"mb-4 pl-2",style:{outline:"none"}},null,8,nV),[[Mt,c.year]])]),y("div",rV,[sV,Ct(y("input",{id:"mileage","onUpdate:modelValue":h=>c.mileage=h,type:"number",placeholder:"Ejemplo: 50000",class:"mb-4 pl-2",style:{outline:"none"}},null,8,iV),[[Mt,c.mileage]])]),y("div",oV,[aV,Ct(y("select",{id:"fuel-type","onUpdate:modelValue":h=>c.fuelType=h,class:"mb-4 pl-2",style:{outline:"none"}},pV,8,lV),[[$w,c.fuelType]])])]),y("span",mV,[y("div",gV,[_V,Ct(y("input",{id:"soat-expiry","onUpdate:modelValue":h=>c.soatExpiry=h,type:"date",class:"mb-4 pl-2",style:{outline:"none"}},null,8,yV),[[Mt,c.soatExpiry]])]),y("div",vV,[EV,Ct(y("input",{id:"annual-inspection","onUpdate:modelValue":h=>c.annualInspection=h,type:"date",class:"mb-4 pl-2",style:{outline:"none"}},null,8,wV),[[Mt,c.annualInspection]])]),y("div",TV,[IV,Ct(y("input",{id:"technical-inspection","onUpdate:modelValue":h=>c.technicalInspection=h,type:"date",class:"mb-4 pl-2",style:{outline:"none"}},null,8,bV),[[Mt,c.technicalInspection]])])]),u!=q(r).cars.length-1&&q(r).cars.length>0?(re(),Ce("div",AV)):ut("",!0)]))),128))]),y("button",{type:"button",onClick:o,class:"w-11/12 flex flex-row justify-center items-center mx-5 mb-3 p-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},"GUARDAR")])]),_:1}))}}),SV=tI({history:OT("/"),routes:[{path:"/",name:"Home",redirect:"/all-services"},{path:"/all-services",name:"AllServices",component:oN},{path:"/car-wash-services",name:"CarWashServices",component:AN},{path:"/profile",name:"Profile",component:RV}]}),Ad=Hw(Ok);Ad.use(Qw());Ad.use(SV);Ad.mount("#app");
