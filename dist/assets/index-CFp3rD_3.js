(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fu(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const $e={},vs=[],Xt=()=>{},P0=()=>!1,Ka=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Uu=t=>t.startsWith("onUpdate:"),gt=Object.assign,$u=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},C0=Object.prototype.hasOwnProperty,Ae=(t,e)=>C0.call(t,e),oe=Array.isArray,ws=t=>io(t)==="[object Map]",Ga=t=>io(t)==="[object Set]",Nd=t=>io(t)==="[object Date]",fe=t=>typeof t=="function",tt=t=>typeof t=="string",gr=t=>typeof t=="symbol",Fe=t=>t!==null&&typeof t=="object",Rm=t=>(Fe(t)||fe(t))&&fe(t.then)&&fe(t.catch),Pm=Object.prototype.toString,io=t=>Pm.call(t),x0=t=>io(t).slice(8,-1),Cm=t=>io(t)==="[object Object]",ju=t=>tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gi=Fu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},O0=/-(\w)/g,Pn=Qa(t=>t.replace(O0,(e,n)=>n?n.toUpperCase():"")),k0=/\B([A-Z])/g,Hs=Qa(t=>t.replace(k0,"-$1").toLowerCase()),Ya=Qa(t=>t.charAt(0).toUpperCase()+t.slice(1)),nc=Qa(t=>t?`on${Ya(t)}`:""),_r=(t,e)=>!Object.is(t,e),Xo=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ha=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ki=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vd;const xm=()=>Vd||(Vd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bu(t){if(oe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=tt(r)?M0(r):Bu(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(tt(t)||Fe(t))return t}const D0=/;(?![^(]*\))/g,N0=/:([^]+)/,V0=/\/\*[^]*?\*\//g;function M0(t){const e={};return t.replace(V0,"").split(D0).forEach(n=>{if(n){const r=n.split(N0);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function it(t){let e="";if(tt(t))e=t;else if(oe(t))for(let n=0;n<t.length;n++){const r=it(t[n]);r&&(e+=r+" ")}else if(Fe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const L0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F0=Fu(L0);function Om(t){return!!t||t===""}function U0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ja(t[r],e[r]);return n}function Ja(t,e){if(t===e)return!0;let n=Nd(t),r=Nd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=gr(t),r=gr(e),n||r)return t===e;if(n=oe(t),r=oe(e),n||r)return n&&r?U0(t,e):!1;if(n=Fe(t),r=Fe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ja(t[o],e[o]))return!1}}return String(t)===String(e)}function $0(t,e){return t.findIndex(n=>Ja(n,e))}const Ht=t=>tt(t)?t:t==null?"":oe(t)||Fe(t)&&(t.toString===Pm||!fe(t.toString))?JSON.stringify(t,km,2):String(t),km=(t,e)=>e&&e.__v_isRef?km(t,e.value):ws(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[rc(r,i)+" =>"]=s,n),{})}:Ga(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>rc(n))}:gr(e)?rc(e):Fe(e)&&!oe(e)&&!Cm(e)?String(e):e,rc=(t,e="")=>{var n;return gr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class Dm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=zt;try{return zt=this,e()}finally{zt=n}}}on(){zt=this}off(){zt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Nm(t){return new Dm(t)}function j0(t,e=zt){e&&e.active&&e.effects.push(t)}function Vm(){return zt}function B0(t){zt&&zt.cleanups.push(t)}let Br;class qu{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,j0(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ts();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(q0(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ns()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=cr,n=Br;try{return cr=!0,Br=this,this._runnings++,Md(this),this.fn()}finally{Ld(this),this._runnings--,Br=n,cr=e}}stop(){var e;this.active&&(Md(this),Ld(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function q0(t){return t.value}function Md(t){t._trackId++,t._depsLength=0}function Ld(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Mm(t.deps[e],t);t.deps.length=t._depsLength}}function Mm(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let cr=!0,Fc=0;const Lm=[];function ts(){Lm.push(cr),cr=!1}function ns(){const t=Lm.pop();cr=t===void 0?!0:t}function zu(){Fc++}function Hu(){for(Fc--;!Fc&&Uc.length;)Uc.shift()()}function Fm(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&Mm(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Uc=[];function Um(t,e,n){zu();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Uc.push(r.scheduler)))}Hu()}const $m=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},da=new WeakMap,qr=Symbol(""),$c=Symbol("");function Bt(t,e,n){if(cr&&Br){let r=da.get(t);r||da.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=$m(()=>r.delete(n))),Fm(Br,s)}}function jn(t,e,n,r,s,i){const o=da.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&oe(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!gr(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":oe(t)?ju(n)&&a.push(o.get("length")):(a.push(o.get(qr)),ws(t)&&a.push(o.get($c)));break;case"delete":oe(t)||(a.push(o.get(qr)),ws(t)&&a.push(o.get($c)));break;case"set":ws(t)&&a.push(o.get(qr));break}zu();for(const l of a)l&&Um(l,4);Hu()}function z0(t,e){var n;return(n=da.get(t))==null?void 0:n.get(e)}const H0=Fu("__proto__,__v_isRef,__isVue"),jm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(gr)),Fd=W0();function W0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Se(this);for(let i=0,o=this.length;i<o;i++)Bt(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Se)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ts(),zu();const r=Se(this)[e].apply(this,n);return Hu(),ns(),r}}),t}function K0(t){const e=Se(this);return Bt(e,"has",t),e.hasOwnProperty(t)}class Bm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?ow:Wm:i?Hm:zm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=oe(e);if(!s){if(o&&Ae(Fd,n))return Reflect.get(Fd,n,r);if(n==="hasOwnProperty")return K0}const a=Reflect.get(e,n,r);return(gr(n)?jm.has(n):H0(n))||(s||Bt(e,"get",n),i)?a:Ke(a)?o&&ju(n)?a:a.value:Fe(a)?s?Gu(a):on(a):a}}class qm extends Bm{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=xs(i);if(!fa(r)&&!xs(r)&&(i=Se(i),r=Se(r)),!oe(e)&&Ke(i)&&!Ke(r))return l?!1:(i.value=r,!0)}const o=oe(e)&&ju(n)?Number(n)<e.length:Ae(e,n),a=Reflect.set(e,n,r,s);return e===Se(s)&&(o?_r(r,i)&&jn(e,"set",n,r):jn(e,"add",n,r)),a}deleteProperty(e,n){const r=Ae(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&jn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!gr(n)||!jm.has(n))&&Bt(e,"has",n),r}ownKeys(e){return Bt(e,"iterate",oe(e)?"length":qr),Reflect.ownKeys(e)}}class G0 extends Bm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Q0=new qm,Y0=new G0,J0=new qm(!0),Wu=t=>t,Xa=t=>Reflect.getPrototypeOf(t);function Oo(t,e,n=!1,r=!1){t=t.__v_raw;const s=Se(t),i=Se(e);n||(_r(e,i)&&Bt(s,"get",e),Bt(s,"get",i));const{has:o}=Xa(s),a=r?Wu:n?Yu:Di;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function ko(t,e=!1){const n=this.__v_raw,r=Se(n),s=Se(t);return e||(_r(t,s)&&Bt(r,"has",t),Bt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Do(t,e=!1){return t=t.__v_raw,!e&&Bt(Se(t),"iterate",qr),Reflect.get(t,"size",t)}function Ud(t){t=Se(t);const e=Se(this);return Xa(e).has.call(e,t)||(e.add(t),jn(e,"add",t,t)),this}function $d(t,e){e=Se(e);const n=Se(this),{has:r,get:s}=Xa(n);let i=r.call(n,t);i||(t=Se(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?_r(e,o)&&jn(n,"set",t,e):jn(n,"add",t,e),this}function jd(t){const e=Se(this),{has:n,get:r}=Xa(e);let s=n.call(e,t);s||(t=Se(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&jn(e,"delete",t,void 0),i}function Bd(){const t=Se(this),e=t.size!==0,n=t.clear();return e&&jn(t,"clear",void 0,void 0),n}function No(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Se(o),l=e?Wu:t?Yu:Di;return!t&&Bt(a,"iterate",qr),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Vo(t,e,n){return function(...r){const s=this.__v_raw,i=Se(s),o=ws(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Wu:e?Yu:Di;return!e&&Bt(i,"iterate",l?$c:qr),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Qn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function X0(){const t={get(i){return Oo(this,i)},get size(){return Do(this)},has:ko,add:Ud,set:$d,delete:jd,clear:Bd,forEach:No(!1,!1)},e={get(i){return Oo(this,i,!1,!0)},get size(){return Do(this)},has:ko,add:Ud,set:$d,delete:jd,clear:Bd,forEach:No(!1,!0)},n={get(i){return Oo(this,i,!0)},get size(){return Do(this,!0)},has(i){return ko.call(this,i,!0)},add:Qn("add"),set:Qn("set"),delete:Qn("delete"),clear:Qn("clear"),forEach:No(!0,!1)},r={get(i){return Oo(this,i,!0,!0)},get size(){return Do(this,!0)},has(i){return ko.call(this,i,!0)},add:Qn("add"),set:Qn("set"),delete:Qn("delete"),clear:Qn("clear"),forEach:No(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Vo(i,!1,!1),n[i]=Vo(i,!0,!1),e[i]=Vo(i,!1,!0),r[i]=Vo(i,!0,!0)}),[t,n,e,r]}const[Z0,ew,tw,nw]=X0();function Ku(t,e){const n=e?t?nw:tw:t?ew:Z0;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ae(n,s)&&s in r?n:r,s,i)}const rw={get:Ku(!1,!1)},sw={get:Ku(!1,!0)},iw={get:Ku(!0,!1)},zm=new WeakMap,Hm=new WeakMap,Wm=new WeakMap,ow=new WeakMap;function aw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lw(t){return t.__v_skip||!Object.isExtensible(t)?0:aw(x0(t))}function on(t){return xs(t)?t:Qu(t,!1,Q0,rw,zm)}function Km(t){return Qu(t,!1,J0,sw,Hm)}function Gu(t){return Qu(t,!0,Y0,iw,Wm)}function Qu(t,e,n,r,s){if(!Fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=lw(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function ur(t){return xs(t)?ur(t.__v_raw):!!(t&&t.__v_isReactive)}function xs(t){return!!(t&&t.__v_isReadonly)}function fa(t){return!!(t&&t.__v_isShallow)}function Gm(t){return ur(t)||xs(t)}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function Za(t){return Object.isExtensible(t)&&ha(t,"__v_skip",!0),t}const Di=t=>Fe(t)?on(t):t,Yu=t=>Fe(t)?Gu(t):t;class Qm{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new qu(()=>e(this._value),()=>Zo(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Se(this);return(!e._cacheable||e.effect.dirty)&&_r(e._value,e._value=e.effect.run())&&Zo(e,4),Ym(e),e.effect._dirtyLevel>=2&&Zo(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function cw(t,e,n=!1){let r,s;const i=fe(t);return i?(r=t,s=Xt):(r=t.get,s=t.set),new Qm(r,s,i||!s,n)}function Ym(t){var e;cr&&Br&&(t=Se(t),Fm(Br,(e=t.dep)!=null?e:t.dep=$m(()=>t.dep=void 0,t instanceof Qm?t:void 0)))}function Zo(t,e=4,n){t=Se(t);const r=t.dep;r&&Um(r,e)}function Ke(t){return!!(t&&t.__v_isRef===!0)}function Ie(t){return Xm(t,!1)}function Jm(t){return Xm(t,!0)}function Xm(t,e){return Ke(t)?t:new uw(t,e)}class uw{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Se(e),this._value=n?e:Di(e)}get value(){return Ym(this),this._value}set value(e){const n=this.__v_isShallow||fa(e)||xs(e);e=n?e:Se(e),_r(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Di(e),Zo(this,4))}}function A(t){return Ke(t)?t.value:t}function xt(t){return fe(t)?t():A(t)}const hw={get:(t,e,n)=>A(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ke(s)&&!Ke(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Zm(t){return ur(t)?t:new Proxy(t,hw)}function dw(t){const e=oe(t)?new Array(t.length):{};for(const n in t)e[n]=pw(t,n);return e}class fw{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return z0(Se(this._object),this._key)}}function pw(t,e,n){const r=t[e];return Ke(r)?r:new fw(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hr(t,e,n,r){try{return r?t(...r):t()}catch(s){el(s,e,n)}}function an(t,e,n,r){if(fe(t)){const i=hr(t,e,n,r);return i&&Rm(i)&&i.catch(o=>{el(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(an(t[i],e,n,r));return s}function el(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){hr(l,null,10,[t,o,a]);return}}mw(t,n,s,r)}function mw(t,e,n,r=!0){console.error(t)}let Ni=!1,jc=!1;const Tt=[];let _n=0;const Es=[];let er=null,kr=0;const eg=Promise.resolve();let Ju=null;function Ut(t){const e=Ju||eg;return t?e.then(this?t.bind(this):t):e}function gw(t){let e=_n+1,n=Tt.length;for(;e<n;){const r=e+n>>>1,s=Tt[r],i=Vi(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function Xu(t){(!Tt.length||!Tt.includes(t,Ni&&t.allowRecurse?_n+1:_n))&&(t.id==null?Tt.push(t):Tt.splice(gw(t.id),0,t),tg())}function tg(){!Ni&&!jc&&(jc=!0,Ju=eg.then(rg))}function _w(t){const e=Tt.indexOf(t);e>_n&&Tt.splice(e,1)}function yw(t){oe(t)?Es.push(...t):(!er||!er.includes(t,t.allowRecurse?kr+1:kr))&&Es.push(t),tg()}function qd(t,e,n=Ni?_n+1:0){for(;n<Tt.length;n++){const r=Tt[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Tt.splice(n,1),n--,r()}}}function ng(t){if(Es.length){const e=[...new Set(Es)].sort((n,r)=>Vi(n)-Vi(r));if(Es.length=0,er){er.push(...e);return}for(er=e,kr=0;kr<er.length;kr++)er[kr]();er=null,kr=0}}const Vi=t=>t.id==null?1/0:t.id,vw=(t,e)=>{const n=Vi(t)-Vi(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function rg(t){jc=!1,Ni=!0,Tt.sort(vw);try{for(_n=0;_n<Tt.length;_n++){const e=Tt[_n];e&&e.active!==!1&&hr(e,null,14)}}finally{_n=0,Tt.length=0,ng(),Ni=!1,Ju=null,(Tt.length||Es.length)&&rg()}}function ww(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||$e;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||$e;d&&(s=n.map(f=>tt(f)?f.trim():f)),h&&(s=n.map(ki))}let a,l=r[a=nc(e)]||r[a=nc(Pn(e))];!l&&i&&(l=r[a=nc(Hs(e))]),l&&an(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,an(c,t,6,s)}}function sg(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!fe(t)){const l=c=>{const u=sg(c,e,!0);u&&(a=!0,gt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Fe(t)&&r.set(t,null),null):(oe(i)?i.forEach(l=>o[l]=null):gt(o,i),Fe(t)&&r.set(t,o),o)}function tl(t,e){return!t||!Ka(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ae(t,e[0].toLowerCase()+e.slice(1))||Ae(t,Hs(e))||Ae(t,e))}let Ze=null,ig=null;function pa(t){const e=Ze;return Ze=t,ig=t&&t.type.__scopeId||null,e}function Zt(t,e=Ze,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ef(-1);const i=pa(e);let o;try{o=t(...s)}finally{pa(i),r._d&&ef(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function sc(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:y,inheritAttrs:T}=t;let E,R;const O=pa(t);try{if(n.shapeFlag&4){const z=s||r,G=z;E=gn(u.call(G,z,h,i,f,d,y)),R=l}else{const z=e;E=gn(z.length>1?z(i,{attrs:l,slots:a,emit:c}):z(i,null)),R=e.props?l:Ew(l)}}catch(z){wi.length=0,el(z,t,1),E=qe(yr)}let L=E;if(R&&T!==!1){const z=Object.keys(R),{shapeFlag:G}=L;z.length&&G&7&&(o&&z.some(Uu)&&(R=Tw(R,o)),L=Os(L,R))}return n.dirs&&(L=Os(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),E=L,pa(O),E}const Ew=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ka(n))&&((e||(e={}))[n]=t[n]);return e},Tw=(t,e)=>{const n={};for(const r in t)(!Uu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function bw(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?zd(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!tl(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?zd(r,o,c):!0:!!o;return!1}function zd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!tl(n,i))return!0}return!1}function Iw({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const og="components";function ag(t,e){return Sw(og,t,!0,e)||t}const Aw=Symbol.for("v-ndc");function Sw(t,e,n=!0,r=!1){const s=Ze||dt;if(s){const i=s.type;if(t===og){const a=yE(i,!1);if(a&&(a===e||a===Pn(e)||a===Ya(Pn(e))))return i}const o=Hd(s[t]||i[t],e)||Hd(s.appContext[t],e);return!o&&r?i:o}}function Hd(t,e){return t&&(t[e]||t[Pn(e)]||t[Ya(Pn(e))])}const Rw=t=>t.__isSuspense;function Pw(t,e){e&&e.pendingBranch?oe(t)?e.effects.push(...t):e.effects.push(t):yw(t)}const Cw=Symbol.for("v-scx"),xw=()=>ln(Cw);function Zu(t,e){return eh(t,null,e)}const Mo={};function zr(t,e,n){return eh(t,e,n)}function eh(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=$e){if(e&&i){const N=e;e=(...Z)=>{N(...Z),G()}}const l=dt,c=N=>r===!0?N:Vr(N,r===!1?1:void 0);let u,h=!1,d=!1;if(Ke(t)?(u=()=>t.value,h=fa(t)):ur(t)?(u=()=>c(t),h=!0):oe(t)?(d=!0,h=t.some(N=>ur(N)||fa(N)),u=()=>t.map(N=>{if(Ke(N))return N.value;if(ur(N))return c(N);if(fe(N))return hr(N,l,2)})):fe(t)?e?u=()=>hr(t,l,2):u=()=>(f&&f(),an(t,l,3,[y])):u=Xt,e&&r){const N=u;u=()=>Vr(N())}let f,y=N=>{f=L.onStop=()=>{hr(N,l,4),f=L.onStop=void 0}},T;if(ol)if(y=Xt,e?n&&an(e,l,3,[u(),d?[]:void 0,y]):u(),s==="sync"){const N=xw();T=N.__watcherHandles||(N.__watcherHandles=[])}else return Xt;let E=d?new Array(t.length).fill(Mo):Mo;const R=()=>{if(!(!L.active||!L.dirty))if(e){const N=L.run();(r||h||(d?N.some((Z,ne)=>_r(Z,E[ne])):_r(N,E)))&&(f&&f(),an(e,l,3,[N,E===Mo?void 0:d&&E[0]===Mo?[]:E,y]),E=N)}else L.run()};R.allowRecurse=!!e;let O;s==="sync"?O=R:s==="post"?O=()=>Ft(R,l&&l.suspense):(R.pre=!0,l&&(R.id=l.uid),O=()=>Xu(R));const L=new qu(u,Xt,O),z=Vm(),G=()=>{L.stop(),z&&$u(z.effects,L)};return e?n?R():E=L.run():s==="post"?Ft(L.run.bind(L),l&&l.suspense):L.run(),T&&T.push(G),G}function Ow(t,e,n){const r=this.proxy,s=tt(t)?t.includes(".")?lg(r,t):()=>r[t]:t.bind(r,r);let i;fe(e)?i=e:(i=e.handler,n=e);const o=oo(this),a=eh(s,i.bind(r),n);return o(),a}function lg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Vr(t,e,n=0,r){if(!Fe(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),Ke(t))Vr(t.value,e,n,r);else if(oe(t))for(let s=0;s<t.length;s++)Vr(t[s],e,n,r);else if(Ga(t)||ws(t))t.forEach(s=>{Vr(s,e,n,r)});else if(Cm(t))for(const s in t)Vr(t[s],e,n,r);return t}function lt(t,e){if(Ze===null)return t;const n=al(Ze)||Ze.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=$e]=e[s];i&&(fe(i)&&(i={mounted:i,updated:i}),i.deep&&Vr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Cr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(ts(),an(l,n,8,[t.el,a,t,e]),ns())}}/*! #__NO_SIDE_EFFECTS__ */function Rt(t,e){return fe(t)?gt({name:t.name},e,{setup:t}):t}const _i=t=>!!t.type.__asyncLoader,cg=t=>t.type.__isKeepAlive;function kw(t,e){ug(t,"a",e)}function Dw(t,e){ug(t,"da",e)}function ug(t,e,n=dt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(nl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)cg(s.parent.vnode)&&Nw(r,e,n,s),s=s.parent}}function Nw(t,e,n,r){const s=nl(e,t,r,!0);hg(()=>{$u(r[e],s)},n)}function nl(t,e,n=dt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ts();const a=oo(n),l=an(e,n,t,o);return a(),ns(),l});return r?s.unshift(i):s.push(i),i}}const Wn=t=>(e,n=dt)=>(!ol||t==="sp")&&nl(t,(...r)=>e(...r),n),Vw=Wn("bm"),rl=Wn("m"),Mw=Wn("bu"),Lw=Wn("u"),Fw=Wn("bum"),hg=Wn("um"),Uw=Wn("sp"),$w=Wn("rtg"),jw=Wn("rtc");function Bw(t,e=dt){nl("ec",t,e)}function th(t,e,n,r){let s;const i=n&&n[r];if(oe(t)||tt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Fe(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function dg(t,e,n={},r,s){if(Ze.isCE||Ze.parent&&_i(Ze.parent)&&Ze.parent.isCE)return e!=="default"&&(n.name=e),qe("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),ie();const o=i&&fg(i(n)),a=At(ut,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function fg(t){return t.some(e=>ga(e)?!(e.type===yr||e.type===ut&&!fg(e.children)):!0)?t:null}const Bc=t=>t?Ag(t)?al(t)||t.proxy:Bc(t.parent):null,yi=gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bc(t.parent),$root:t=>Bc(t.root),$emit:t=>t.emit,$options:t=>nh(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Xu(t.update)}),$nextTick:t=>t.n||(t.n=Ut.bind(t.proxy)),$watch:t=>Ow.bind(t)}),ic=(t,e)=>t!==$e&&!t.__isScriptSetup&&Ae(t,e),qw={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(ic(r,e))return o[e]=1,r[e];if(s!==$e&&Ae(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Ae(c,e))return o[e]=3,i[e];if(n!==$e&&Ae(n,e))return o[e]=4,n[e];qc&&(o[e]=0)}}const u=yi[e];let h,d;if(u)return e==="$attrs"&&Bt(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==$e&&Ae(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Ae(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return ic(s,e)?(s[e]=n,!0):r!==$e&&Ae(r,e)?(r[e]=n,!0):Ae(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==$e&&Ae(t,o)||ic(e,o)||(a=i[0])&&Ae(a,o)||Ae(r,o)||Ae(yi,o)||Ae(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ae(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Wd(t){return oe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let qc=!0;function zw(t){const e=nh(t),n=t.proxy,r=t.ctx;qc=!1,e.beforeCreate&&Kd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:y,activated:T,deactivated:E,beforeDestroy:R,beforeUnmount:O,destroyed:L,unmounted:z,render:G,renderTracked:N,renderTriggered:Z,errorCaptured:ne,serverPrefetch:M,expose:Y,inheritAttrs:re,components:De,directives:Ge,filters:Pt}=e;if(c&&Hw(c,r,null),o)for(const Ce in o){const ge=o[Ce];fe(ge)&&(r[Ce]=ge.bind(n))}if(s){const Ce=s.call(n,n);Fe(Ce)&&(t.data=on(Ce))}if(qc=!0,i)for(const Ce in i){const ge=i[Ce],Vt=fe(ge)?ge.bind(n,n):fe(ge.get)?ge.get.bind(n,n):Xt,dn=!fe(ge)&&fe(ge.set)?ge.set.bind(n):Xt,qt=Ne({get:Vt,set:dn});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>qt.value,set:Ct=>qt.value=Ct})}if(a)for(const Ce in a)pg(a[Ce],r,n,Ce);if(l){const Ce=fe(l)?l.call(n):l;Reflect.ownKeys(Ce).forEach(ge=>{vi(ge,Ce[ge])})}u&&Kd(u,t,"c");function ae(Ce,ge){oe(ge)?ge.forEach(Vt=>Ce(Vt.bind(n))):ge&&Ce(ge.bind(n))}if(ae(Vw,h),ae(rl,d),ae(Mw,f),ae(Lw,y),ae(kw,T),ae(Dw,E),ae(Bw,ne),ae(jw,N),ae($w,Z),ae(Fw,O),ae(hg,z),ae(Uw,M),oe(Y))if(Y.length){const Ce=t.exposed||(t.exposed={});Y.forEach(ge=>{Object.defineProperty(Ce,ge,{get:()=>n[ge],set:Vt=>n[ge]=Vt})})}else t.exposed||(t.exposed={});G&&t.render===Xt&&(t.render=G),re!=null&&(t.inheritAttrs=re),De&&(t.components=De),Ge&&(t.directives=Ge)}function Hw(t,e,n=Xt){oe(t)&&(t=zc(t));for(const r in t){const s=t[r];let i;Fe(s)?"default"in s?i=ln(s.from||r,s.default,!0):i=ln(s.from||r):i=ln(s),Ke(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Kd(t,e,n){an(oe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function pg(t,e,n,r){const s=r.includes(".")?lg(n,r):()=>n[r];if(tt(t)){const i=e[t];fe(i)&&zr(s,i)}else if(fe(t))zr(s,t.bind(n));else if(Fe(t))if(oe(t))t.forEach(i=>pg(i,e,n,r));else{const i=fe(t.handler)?t.handler.bind(n):e[t.handler];fe(i)&&zr(s,i,t)}}function nh(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>ma(l,c,o,!0)),ma(l,e,o)),Fe(e)&&i.set(e,l),l}function ma(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ma(t,i,n,!0),s&&s.forEach(o=>ma(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Ww[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ww={data:Gd,props:Qd,emits:Qd,methods:li,computed:li,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:li,directives:li,watch:Gw,provide:Gd,inject:Kw};function Gd(t,e){return e?t?function(){return gt(fe(t)?t.call(this,this):t,fe(e)?e.call(this,this):e)}:e:t}function Kw(t,e){return li(zc(t),zc(e))}function zc(t){if(oe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ot(t,e){return t?[...new Set([].concat(t,e))]:e}function li(t,e){return t?gt(Object.create(null),t,e):e}function Qd(t,e){return t?oe(t)&&oe(e)?[...new Set([...t,...e])]:gt(Object.create(null),Wd(t),Wd(e??{})):e}function Gw(t,e){if(!t)return e;if(!e)return t;const n=gt(Object.create(null),t);for(const r in e)n[r]=Ot(t[r],e[r]);return n}function mg(){return{app:null,config:{isNativeTag:P0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qw=0;function Yw(t,e){return function(r,s=null){fe(r)||(r=gt({},r)),s!=null&&!Fe(s)&&(s=null);const i=mg(),o=new WeakSet;let a=!1;const l=i.app={_uid:Qw++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:wE,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&fe(c.install)?(o.add(c),c.install(l,...u)):fe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const d=qe(r,s);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,al(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=Ts;Ts=l;try{return c()}finally{Ts=u}}};return l}}let Ts=null;function vi(t,e){if(dt){let n=dt.provides;const r=dt.parent&&dt.parent.provides;r===n&&(n=dt.provides=Object.create(r)),n[t]=e}}function ln(t,e,n=!1){const r=dt||Ze;if(r||Ts){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ts._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&fe(e)?e.call(r&&r.proxy):e}}function Jw(){return!!(dt||Ze||Ts)}function Xw(t,e,n,r=!1){const s={},i={};ha(i,il,1),t.propsDefaults=Object.create(null),gg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Km(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Zw(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Se(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(tl(t.emitsOptions,d))continue;const f=e[d];if(l)if(Ae(i,d))f!==i[d]&&(i[d]=f,c=!0);else{const y=Pn(d);s[y]=Hc(l,a,y,f,t,!1)}else f!==i[d]&&(i[d]=f,c=!0)}}}else{gg(t,e,s,i)&&(c=!0);let u;for(const h in a)(!e||!Ae(e,h)&&((u=Hs(h))===h||!Ae(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Hc(l,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Ae(e,h))&&(delete i[h],c=!0)}c&&jn(t,"set","$attrs")}function gg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gi(l))continue;const c=e[l];let u;s&&Ae(s,u=Pn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:tl(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Se(n),c=a||$e;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Hc(s,l,h,c[h],t,!Ae(c,h))}}return o}function Hc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ae(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&fe(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=oo(s);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Hs(n))&&(r=!0))}return r}function _g(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!fe(t)){const u=h=>{l=!0;const[d,f]=_g(h,e,!0);gt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return Fe(t)&&r.set(t,vs),vs;if(oe(i))for(let u=0;u<i.length;u++){const h=Pn(i[u]);Yd(h)&&(o[h]=$e)}else if(i)for(const u in i){const h=Pn(u);if(Yd(h)){const d=i[u],f=o[h]=oe(d)||fe(d)?{type:d}:gt({},d);if(f){const y=Zd(Boolean,f.type),T=Zd(String,f.type);f[0]=y>-1,f[1]=T<0||y<T,(y>-1||Ae(f,"default"))&&a.push(h)}}}const c=[o,a];return Fe(t)&&r.set(t,c),c}function Yd(t){return t[0]!=="$"&&!gi(t)}function Jd(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Xd(t,e){return Jd(t)===Jd(e)}function Zd(t,e){return oe(e)?e.findIndex(n=>Xd(n,t)):fe(e)&&Xd(e,t)?0:-1}const yg=t=>t[0]==="_"||t==="$stable",rh=t=>oe(t)?t.map(gn):[gn(t)],eE=(t,e,n)=>{if(e._n)return e;const r=Zt((...s)=>rh(e(...s)),n);return r._c=!1,r},vg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(yg(s))continue;const i=t[s];if(fe(i))e[s]=eE(s,i,r);else if(i!=null){const o=rh(i);e[s]=()=>o}}},wg=(t,e)=>{const n=rh(e);t.slots.default=()=>n},tE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Se(e),ha(e,"_",n)):vg(e,t.slots={})}else t.slots={},e&&wg(t,e);ha(t.slots,il,1)},nE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=$e;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(gt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,vg(e,s)),o=e}else e&&(wg(t,e),o={default:1});if(i)for(const a in s)!yg(a)&&o[a]==null&&delete s[a]};function Wc(t,e,n,r,s=!1){if(oe(t)){t.forEach((d,f)=>Wc(d,e&&(oe(e)?e[f]:e),n,r,s));return}if(_i(r)&&!s)return;const i=r.shapeFlag&4?al(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===$e?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(tt(c)?(u[c]=null,Ae(h,c)&&(h[c]=null)):Ke(c)&&(c.value=null)),fe(l))hr(l,a,12,[o,u]);else{const d=tt(l),f=Ke(l);if(d||f){const y=()=>{if(t.f){const T=d?Ae(h,l)?h[l]:u[l]:l.value;s?oe(T)&&$u(T,i):oe(T)?T.includes(i)||T.push(i):d?(u[l]=[i],Ae(h,l)&&(h[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,Ae(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(y.id=-1,Ft(y,n)):y()}}}const Ft=Pw;function rE(t){return sE(t)}function sE(t,e){const n=xm();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Xt,insertStaticContent:y}=t,T=(p,m,w,P=null,I=null,D=null,F=void 0,V=null,U=!!m.dynamicChildren)=>{if(p===m)return;p&&!ni(p,m)&&(P=b(p),Ct(p,I,D,!0),p=null),m.patchFlag===-2&&(U=!1,m.dynamicChildren=null);const{type:k,ref:H,shapeFlag:te}=m;switch(k){case sl:E(p,m,w,P);break;case yr:R(p,m,w,P);break;case ac:p==null&&O(m,w,P,F);break;case ut:De(p,m,w,P,I,D,F,V,U);break;default:te&1?G(p,m,w,P,I,D,F,V,U):te&6?Ge(p,m,w,P,I,D,F,V,U):(te&64||te&128)&&k.process(p,m,w,P,I,D,F,V,U,Q)}H!=null&&I&&Wc(H,p&&p.ref,D,m||p,!m)},E=(p,m,w,P)=>{if(p==null)r(m.el=a(m.children),w,P);else{const I=m.el=p.el;m.children!==p.children&&c(I,m.children)}},R=(p,m,w,P)=>{p==null?r(m.el=l(m.children||""),w,P):m.el=p.el},O=(p,m,w,P)=>{[p.el,p.anchor]=y(p.children,m,w,P,p.el,p.anchor)},L=({el:p,anchor:m},w,P)=>{let I;for(;p&&p!==m;)I=d(p),r(p,w,P),p=I;r(m,w,P)},z=({el:p,anchor:m})=>{let w;for(;p&&p!==m;)w=d(p),s(p),p=w;s(m)},G=(p,m,w,P,I,D,F,V,U)=>{m.type==="svg"?F="svg":m.type==="math"&&(F="mathml"),p==null?N(m,w,P,I,D,F,V,U):M(p,m,I,D,F,V,U)},N=(p,m,w,P,I,D,F,V)=>{let U,k;const{props:H,shapeFlag:te,transition:X,dirs:le}=p;if(U=p.el=o(p.type,D,H&&H.is,H),te&8?u(U,p.children):te&16&&ne(p.children,U,null,P,I,oc(p,D),F,V),le&&Cr(p,null,P,"created"),Z(U,p,p.scopeId,F,P),H){for(const xe in H)xe!=="value"&&!gi(xe)&&i(U,xe,null,H[xe],D,p.children,P,I,Ve);"value"in H&&i(U,"value",null,H.value,D),(k=H.onVnodeBeforeMount)&&pn(k,P,p)}le&&Cr(p,null,P,"beforeMount");const me=iE(I,X);me&&X.beforeEnter(U),r(U,m,w),((k=H&&H.onVnodeMounted)||me||le)&&Ft(()=>{k&&pn(k,P,p),me&&X.enter(U),le&&Cr(p,null,P,"mounted")},I)},Z=(p,m,w,P,I)=>{if(w&&f(p,w),P)for(let D=0;D<P.length;D++)f(p,P[D]);if(I){let D=I.subTree;if(m===D){const F=I.vnode;Z(p,F,F.scopeId,F.slotScopeIds,I.parent)}}},ne=(p,m,w,P,I,D,F,V,U=0)=>{for(let k=U;k<p.length;k++){const H=p[k]=V?tr(p[k]):gn(p[k]);T(null,H,m,w,P,I,D,F,V)}},M=(p,m,w,P,I,D,F)=>{const V=m.el=p.el;let{patchFlag:U,dynamicChildren:k,dirs:H}=m;U|=p.patchFlag&16;const te=p.props||$e,X=m.props||$e;let le;if(w&&xr(w,!1),(le=X.onVnodeBeforeUpdate)&&pn(le,w,m,p),H&&Cr(m,p,w,"beforeUpdate"),w&&xr(w,!0),k?Y(p.dynamicChildren,k,V,w,P,oc(m,I),D):F||ge(p,m,V,null,w,P,oc(m,I),D,!1),U>0){if(U&16)re(V,m,te,X,w,P,I);else if(U&2&&te.class!==X.class&&i(V,"class",null,X.class,I),U&4&&i(V,"style",te.style,X.style,I),U&8){const me=m.dynamicProps;for(let xe=0;xe<me.length;xe++){const g=me[xe],_=te[g],S=X[g];(S!==_||g==="value")&&i(V,g,_,S,I,p.children,w,P,Ve)}}U&1&&p.children!==m.children&&u(V,m.children)}else!F&&k==null&&re(V,m,te,X,w,P,I);((le=X.onVnodeUpdated)||H)&&Ft(()=>{le&&pn(le,w,m,p),H&&Cr(m,p,w,"updated")},P)},Y=(p,m,w,P,I,D,F)=>{for(let V=0;V<m.length;V++){const U=p[V],k=m[V],H=U.el&&(U.type===ut||!ni(U,k)||U.shapeFlag&70)?h(U.el):w;T(U,k,H,null,P,I,D,F,!0)}},re=(p,m,w,P,I,D,F)=>{if(w!==P){if(w!==$e)for(const V in w)!gi(V)&&!(V in P)&&i(p,V,w[V],null,F,m.children,I,D,Ve);for(const V in P){if(gi(V))continue;const U=P[V],k=w[V];U!==k&&V!=="value"&&i(p,V,k,U,F,m.children,I,D,Ve)}"value"in P&&i(p,"value",w.value,P.value,F)}},De=(p,m,w,P,I,D,F,V,U)=>{const k=m.el=p?p.el:a(""),H=m.anchor=p?p.anchor:a("");let{patchFlag:te,dynamicChildren:X,slotScopeIds:le}=m;le&&(V=V?V.concat(le):le),p==null?(r(k,w,P),r(H,w,P),ne(m.children||[],w,H,I,D,F,V,U)):te>0&&te&64&&X&&p.dynamicChildren?(Y(p.dynamicChildren,X,w,I,D,F,V),(m.key!=null||I&&m===I.subTree)&&Eg(p,m,!0)):ge(p,m,w,H,I,D,F,V,U)},Ge=(p,m,w,P,I,D,F,V,U)=>{m.slotScopeIds=V,p==null?m.shapeFlag&512?I.ctx.activate(m,w,P,F,U):Pt(m,w,P,I,D,F,U):nt(p,m,U)},Pt=(p,m,w,P,I,D,F)=>{const V=p.component=fE(p,P,I);if(cg(p)&&(V.ctx.renderer=Q),pE(V),V.asyncDep){if(I&&I.registerDep(V,ae),!p.el){const U=V.subTree=qe(yr);R(null,U,m,w)}}else ae(V,p,m,w,I,D,F)},nt=(p,m,w)=>{const P=m.component=p.component;if(bw(p,m,w))if(P.asyncDep&&!P.asyncResolved){Ce(P,m,w);return}else P.next=m,_w(P.update),P.effect.dirty=!0,P.update();else m.el=p.el,P.vnode=m},ae=(p,m,w,P,I,D,F)=>{const V=()=>{if(p.isMounted){let{next:H,bu:te,u:X,parent:le,vnode:me}=p;{const j=Tg(p);if(j){H&&(H.el=me.el,Ce(p,H,F)),j.asyncDep.then(()=>{p.isUnmounted||V()});return}}let xe=H,g;xr(p,!1),H?(H.el=me.el,Ce(p,H,F)):H=me,te&&Xo(te),(g=H.props&&H.props.onVnodeBeforeUpdate)&&pn(g,le,H,me),xr(p,!0);const _=sc(p),S=p.subTree;p.subTree=_,T(S,_,h(S.el),b(S),p,I,D),H.el=_.el,xe===null&&Iw(p,_.el),X&&Ft(X,I),(g=H.props&&H.props.onVnodeUpdated)&&Ft(()=>pn(g,le,H,me),I)}else{let H;const{el:te,props:X}=m,{bm:le,m:me,parent:xe}=p,g=_i(m);if(xr(p,!1),le&&Xo(le),!g&&(H=X&&X.onVnodeBeforeMount)&&pn(H,xe,m),xr(p,!0),te&&Me){const _=()=>{p.subTree=sc(p),Me(te,p.subTree,p,I,null)};g?m.type.__asyncLoader().then(()=>!p.isUnmounted&&_()):_()}else{const _=p.subTree=sc(p);T(null,_,w,P,p,I,D),m.el=_.el}if(me&&Ft(me,I),!g&&(H=X&&X.onVnodeMounted)){const _=m;Ft(()=>pn(H,xe,_),I)}(m.shapeFlag&256||xe&&_i(xe.vnode)&&xe.vnode.shapeFlag&256)&&p.a&&Ft(p.a,I),p.isMounted=!0,m=w=P=null}},U=p.effect=new qu(V,Xt,()=>Xu(k),p.scope),k=p.update=()=>{U.dirty&&U.run()};k.id=p.uid,xr(p,!0),k()},Ce=(p,m,w)=>{m.component=p;const P=p.vnode.props;p.vnode=m,p.next=null,Zw(p,m.props,P,w),nE(p,m.children,w),ts(),qd(p),ns()},ge=(p,m,w,P,I,D,F,V,U=!1)=>{const k=p&&p.children,H=p?p.shapeFlag:0,te=m.children,{patchFlag:X,shapeFlag:le}=m;if(X>0){if(X&128){dn(k,te,w,P,I,D,F,V,U);return}else if(X&256){Vt(k,te,w,P,I,D,F,V,U);return}}le&8?(H&16&&Ve(k,I,D),te!==k&&u(w,te)):H&16?le&16?dn(k,te,w,P,I,D,F,V,U):Ve(k,I,D,!0):(H&8&&u(w,""),le&16&&ne(te,w,P,I,D,F,V,U))},Vt=(p,m,w,P,I,D,F,V,U)=>{p=p||vs,m=m||vs;const k=p.length,H=m.length,te=Math.min(k,H);let X;for(X=0;X<te;X++){const le=m[X]=U?tr(m[X]):gn(m[X]);T(p[X],le,w,null,I,D,F,V,U)}k>H?Ve(p,I,D,!0,!1,te):ne(m,w,P,I,D,F,V,U,te)},dn=(p,m,w,P,I,D,F,V,U)=>{let k=0;const H=m.length;let te=p.length-1,X=H-1;for(;k<=te&&k<=X;){const le=p[k],me=m[k]=U?tr(m[k]):gn(m[k]);if(ni(le,me))T(le,me,w,null,I,D,F,V,U);else break;k++}for(;k<=te&&k<=X;){const le=p[te],me=m[X]=U?tr(m[X]):gn(m[X]);if(ni(le,me))T(le,me,w,null,I,D,F,V,U);else break;te--,X--}if(k>te){if(k<=X){const le=X+1,me=le<H?m[le].el:P;for(;k<=X;)T(null,m[k]=U?tr(m[k]):gn(m[k]),w,me,I,D,F,V,U),k++}}else if(k>X)for(;k<=te;)Ct(p[k],I,D,!0),k++;else{const le=k,me=k,xe=new Map;for(k=me;k<=X;k++){const Te=m[k]=U?tr(m[k]):gn(m[k]);Te.key!=null&&xe.set(Te.key,k)}let g,_=0;const S=X-me+1;let j=!1,se=0;const J=new Array(S);for(k=0;k<S;k++)J[k]=0;for(k=le;k<=te;k++){const Te=p[k];if(_>=S){Ct(Te,I,D,!0);continue}let Re;if(Te.key!=null)Re=xe.get(Te.key);else for(g=me;g<=X;g++)if(J[g-me]===0&&ni(Te,m[g])){Re=g;break}Re===void 0?Ct(Te,I,D,!0):(J[Re-me]=k+1,Re>=se?se=Re:j=!0,T(Te,m[Re],w,null,I,D,F,V,U),_++)}const ve=j?oE(J):vs;for(g=ve.length-1,k=S-1;k>=0;k--){const Te=me+k,Re=m[Te],rt=Te+1<H?m[Te+1].el:P;J[k]===0?T(null,Re,w,rt,I,D,F,V,U):j&&(g<0||k!==ve[g]?qt(Re,w,rt,2):g--)}}},qt=(p,m,w,P,I=null)=>{const{el:D,type:F,transition:V,children:U,shapeFlag:k}=p;if(k&6){qt(p.component.subTree,m,w,P);return}if(k&128){p.suspense.move(m,w,P);return}if(k&64){F.move(p,m,w,Q);return}if(F===ut){r(D,m,w);for(let te=0;te<U.length;te++)qt(U[te],m,w,P);r(p.anchor,m,w);return}if(F===ac){L(p,m,w);return}if(P!==2&&k&1&&V)if(P===0)V.beforeEnter(D),r(D,m,w),Ft(()=>V.enter(D),I);else{const{leave:te,delayLeave:X,afterLeave:le}=V,me=()=>r(D,m,w),xe=()=>{te(D,()=>{me(),le&&le()})};X?X(D,me,xe):xe()}else r(D,m,w)},Ct=(p,m,w,P=!1,I=!1)=>{const{type:D,props:F,ref:V,children:U,dynamicChildren:k,shapeFlag:H,patchFlag:te,dirs:X}=p;if(V!=null&&Wc(V,null,w,p,!0),H&256){m.ctx.deactivate(p);return}const le=H&1&&X,me=!_i(p);let xe;if(me&&(xe=F&&F.onVnodeBeforeUnmount)&&pn(xe,m,p),H&6)cs(p.component,w,P);else{if(H&128){p.suspense.unmount(w,P);return}le&&Cr(p,null,m,"beforeUnmount"),H&64?p.type.remove(p,m,w,I,Q,P):k&&(D!==ut||te>0&&te&64)?Ve(k,m,w,!1,!0):(D===ut&&te&384||!I&&H&16)&&Ve(U,m,w),P&&fn(p)}(me&&(xe=F&&F.onVnodeUnmounted)||le)&&Ft(()=>{xe&&pn(xe,m,p),le&&Cr(p,null,m,"unmounted")},w)},fn=p=>{const{type:m,el:w,anchor:P,transition:I}=p;if(m===ut){Gn(w,P);return}if(m===ac){z(p);return}const D=()=>{s(w),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(p.shapeFlag&1&&I&&!I.persisted){const{leave:F,delayLeave:V}=I,U=()=>F(w,D);V?V(p.el,D,U):U()}else D()},Gn=(p,m)=>{let w;for(;p!==m;)w=d(p),s(p),p=w;s(m)},cs=(p,m,w)=>{const{bum:P,scope:I,update:D,subTree:F,um:V}=p;P&&Xo(P),I.stop(),D&&(D.active=!1,Ct(F,p,m,w)),V&&Ft(V,m),Ft(()=>{p.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},Ve=(p,m,w,P=!1,I=!1,D=0)=>{for(let F=D;F<p.length;F++)Ct(p[F],m,w,P,I)},b=p=>p.shapeFlag&6?b(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el);let W=!1;const $=(p,m,w)=>{p==null?m._vnode&&Ct(m._vnode,null,null,!0):T(m._vnode||null,p,m,null,null,null,w),W||(W=!0,qd(),ng(),W=!1),m._vnode=p},Q={p:T,um:Ct,m:qt,r:fn,mt:Pt,mc:ne,pc:ge,pbc:Y,n:b,o:t};let ye,Me;return e&&([ye,Me]=e(Q)),{render:$,hydrate:ye,createApp:Yw($,ye)}}function oc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function xr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function iE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Eg(t,e,n=!1){const r=t.children,s=e.children;if(oe(r)&&oe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=tr(s[i]),a.el=o.el),n||Eg(o,a)),a.type===sl&&(a.el=o.el)}}function oE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Tg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Tg(e)}const aE=t=>t.__isTeleport,ut=Symbol.for("v-fgt"),sl=Symbol.for("v-txt"),yr=Symbol.for("v-cmt"),ac=Symbol.for("v-stc"),wi=[];let rn=null;function ie(t=!1){wi.push(rn=t?null:[])}function lE(){wi.pop(),rn=wi[wi.length-1]||null}let Mi=1;function ef(t){Mi+=t}function bg(t){return t.dynamicChildren=Mi>0?rn||vs:null,lE(),Mi>0&&rn&&rn.push(t),t}function Ee(t,e,n,r,s,i){return bg(v(t,e,n,r,s,i,!0))}function At(t,e,n,r,s){return bg(qe(t,e,n,r,s,!0))}function ga(t){return t?t.__v_isVNode===!0:!1}function ni(t,e){return t.type===e.type&&t.key===e.key}const il="__vInternal",Ig=({key:t})=>t??null,ea=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?tt(t)||Ke(t)||fe(t)?{i:Ze,r:t,k:e,f:!!n}:t:null);function v(t,e=null,n=null,r=0,s=null,i=t===ut?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ig(e),ref:e&&ea(e),scopeId:ig,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ze};return a?(sh(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=tt(n)?8:16),Mi>0&&!o&&rn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&rn.push(l),l}const qe=cE;function cE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Aw)&&(t=yr),ga(t)){const a=Os(t,e,!0);return n&&sh(a,n),Mi>0&&!i&&rn&&(a.shapeFlag&6?rn[rn.indexOf(t)]=a:rn.push(a)),a.patchFlag|=-2,a}if(vE(t)&&(t=t.__vccOpts),e){e=uE(e);let{class:a,style:l}=e;a&&!tt(a)&&(e.class=it(a)),Fe(l)&&(Gm(l)&&!oe(l)&&(l=gt({},l)),e.style=Bu(l))}const o=tt(t)?1:Rw(t)?128:aE(t)?64:Fe(t)?4:fe(t)?2:0;return v(t,e,n,r,s,o,i,!0)}function uE(t){return t?Gm(t)||il in t?gt({},t):t:null}function Os(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?Li(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ig(a),ref:e&&e.ref?n&&s?oe(s)?s.concat(ea(e)):[s,ea(e)]:ea(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ut?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Os(t.ssContent),ssFallback:t.ssFallback&&Os(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Kt(t=" ",e=0){return qe(sl,null,t,e)}function Dt(t="",e=!1){return e?(ie(),At(yr,null,t)):qe(yr,null,t)}function gn(t){return t==null||typeof t=="boolean"?qe(yr):oe(t)?qe(ut,null,t.slice()):typeof t=="object"?tr(t):qe(sl,null,String(t))}function tr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Os(t)}function sh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(oe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),sh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(il in e)?e._ctx=Ze:s===3&&Ze&&(Ze.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:Ze},n=32):(e=String(e),r&64?(n=16,e=[Kt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Li(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=it([e.class,r.class]));else if(s==="style")e.style=Bu([e.style,r.style]);else if(Ka(s)){const i=e[s],o=r[s];o&&i!==o&&!(oe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function pn(t,e,n,r=null){an(t,e,7,[n,r])}const hE=mg();let dE=0;function fE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||hE,i={uid:dE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Dm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_g(r,s),emitsOptions:sg(r,s),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:r.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ww.bind(null,i),t.ce&&t.ce(i),i}let dt=null,_a,Kc;{const t=xm(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};_a=e("__VUE_INSTANCE_SETTERS__",n=>dt=n),Kc=e("__VUE_SSR_SETTERS__",n=>ol=n)}const oo=t=>{const e=dt;return _a(t),t.scope.on(),()=>{t.scope.off(),_a(e)}},tf=()=>{dt&&dt.scope.off(),_a(null)};function Ag(t){return t.vnode.shapeFlag&4}let ol=!1;function pE(t,e=!1){e&&Kc(e);const{props:n,children:r}=t.vnode,s=Ag(t);Xw(t,n,s,e),tE(t,r);const i=s?mE(t,e):void 0;return e&&Kc(!1),i}function mE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Za(new Proxy(t.ctx,qw));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?_E(t):null,i=oo(t);ts();const o=hr(r,t,0,[t.props,s]);if(ns(),i(),Rm(o)){if(o.then(tf,tf),e)return o.then(a=>{nf(t,a,e)}).catch(a=>{el(a,t,0)});t.asyncDep=o}else nf(t,o,e)}else Sg(t,e)}function nf(t,e,n){fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fe(e)&&(t.setupState=Zm(e)),Sg(t,n)}let rf;function Sg(t,e,n){const r=t.type;if(!t.render){if(!e&&rf&&!r.render){const s=r.template||nh(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=gt(gt({isCustomElement:i,delimiters:a},o),l);r.render=rf(s,c)}}t.render=r.render||Xt}{const s=oo(t);ts();try{zw(t)}finally{ns(),s()}}}function gE(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Bt(t,"get","$attrs"),e[n]}}))}function _E(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return gE(t)},slots:t.slots,emit:t.emit,expose:e}}function al(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Zm(Za(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in yi)return yi[n](t)},has(e,n){return n in e||n in yi}}))}function yE(t,e=!0){return fe(t)?t.displayName||t.name:t.name||e&&t.__name}function vE(t){return fe(t)&&"__vccOpts"in t}const Ne=(t,e)=>cw(t,e,ol);function Rg(t,e,n){const r=arguments.length;return r===2?Fe(e)&&!oe(e)?ga(e)?qe(t,null,[e]):qe(t,e):qe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ga(n)&&(n=[n]),qe(t,e,n))}const wE="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const EE="http://www.w3.org/2000/svg",TE="http://www.w3.org/1998/Math/MathML",nr=typeof document<"u"?document:null,sf=nr&&nr.createElement("template"),bE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?nr.createElementNS(EE,t):e==="mathml"?nr.createElementNS(TE,t):nr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>nr.createTextNode(t),createComment:t=>nr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>nr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{sf.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=sf.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},IE=Symbol("_vtc");function AE(t,e,n){const r=t[IE];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ya=Symbol("_vod"),Pg=Symbol("_vsh"),SE={beforeMount(t,{value:e},{transition:n}){t[ya]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ri(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ri(t,!0),r.enter(t)):r.leave(t,()=>{ri(t,!1)}):ri(t,e))},beforeUnmount(t,{value:e}){ri(t,e)}};function ri(t,e){t.style.display=e?t[ya]:"none",t[Pg]=!e}const RE=Symbol(""),PE=/(^|;)\s*display\s*:/;function CE(t,e,n){const r=t.style,s=tt(n);let i=!1;if(n&&!s){if(e)if(tt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ta(r,a,"")}else for(const o in e)n[o]==null&&ta(r,o,"");for(const o in n)o==="display"&&(i=!0),ta(r,o,n[o])}else if(s){if(e!==n){const o=r[RE];o&&(n+=";"+o),r.cssText=n,i=PE.test(n)}}else e&&t.removeAttribute("style");ya in t&&(t[ya]=i?r.display:"",t[Pg]&&(r.display="none"))}const of=/\s*!important$/;function ta(t,e,n){if(oe(n))n.forEach(r=>ta(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=xE(t,e);of.test(n)?t.setProperty(Hs(r),n.replace(of,""),"important"):t[r]=n}}const af=["Webkit","Moz","ms"],lc={};function xE(t,e){const n=lc[e];if(n)return n;let r=Pn(e);if(r!=="filter"&&r in t)return lc[e]=r;r=Ya(r);for(let s=0;s<af.length;s++){const i=af[s]+r;if(i in t)return lc[e]=i}return e}const lf="http://www.w3.org/1999/xlink";function OE(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(lf,e.slice(6,e.length)):t.setAttributeNS(lf,e,n);else{const i=F0(e);n==null||i&&!Om(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function kE(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Om(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Dr(t,e,n,r){t.addEventListener(e,n,r)}function DE(t,e,n,r){t.removeEventListener(e,n,r)}const cf=Symbol("_vei");function NE(t,e,n,r,s=null){const i=t[cf]||(t[cf]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=VE(e);if(r){const c=i[e]=FE(r,s);Dr(t,a,c,l)}else o&&(DE(t,a,o,l),i[e]=void 0)}}const uf=/(?:Once|Passive|Capture)$/;function VE(t){let e;if(uf.test(t)){e={};let r;for(;r=t.match(uf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Hs(t.slice(2)),e]}let cc=0;const ME=Promise.resolve(),LE=()=>cc||(ME.then(()=>cc=0),cc=Date.now());function FE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;an(UE(r,n.value),e,5,[r])};return n.value=t,n.attached=LE(),n}function UE(t,e){if(oe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const hf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,$E=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?AE(t,r,c):e==="style"?CE(t,n,r):Ka(e)?Uu(e)||NE(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jE(t,e,r,c))?kE(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),OE(t,e,r,c))};function jE(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&hf(e)&&fe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return hf(e)&&tt(n)?!1:e in t}const va=t=>{const e=t.props["onUpdate:modelValue"]||!1;return oe(e)?n=>Xo(e,n):e};function BE(t){t.target.composing=!0}function df(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bs=Symbol("_assign"),kt={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[bs]=va(s);const i=r||s.props&&s.props.type==="number";Dr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=ki(a)),t[bs](a)}),n&&Dr(t,"change",()=>{t.value=t.value.trim()}),e||(Dr(t,"compositionstart",BE),Dr(t,"compositionend",df),Dr(t,"change",df))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t[bs]=va(i),t.composing)return;const o=s||t.type==="number"?ki(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},qE={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ga(e);Dr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ki(wa(o)):wa(o));t[bs](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Ut(()=>{t._assigning=!1})}),t[bs]=va(r)},mounted(t,{value:e,modifiers:{number:n}}){ff(t,e,n)},beforeUpdate(t,e,n){t[bs]=va(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||ff(t,e,n)}};function ff(t,e,n){const r=t.multiple,s=oe(e);if(!(r&&!s&&!Ga(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=wa(a);if(r)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?ki(l):l):a.selected=$0(e,l)>-1}else a.selected=e.has(l);else if(Ja(wa(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function wa(t){return"_value"in t?t._value:t.value}const zE=["ctrl","shift","alt","meta"],HE={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>zE.some(n=>t[`${n}Key`]&&!e.includes(n))},Cg=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=HE[e[o]];if(a&&a(s,e))return}return t(s,...i)})},WE=gt({patchProp:$E},bE);let pf;function KE(){return pf||(pf=rE(WE))}const GE=(...t)=>{const e=KE().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=YE(r);if(!s)return;const i=e._component;!fe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,QE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function QE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function YE(t){return tt(t)?document.querySelector(t):t}var JE=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let xg;const ll=t=>xg=t,Og=Symbol();function Gc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ei;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ei||(Ei={}));function XE(){const t=Nm(!0),e=t.run(()=>Ie({}));let n=[],r=[];const s=Za({install(i){ll(s),s._a=i,i.provide(Og,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!JE?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const kg=()=>{};function mf(t,e,n,r=kg){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Vm()&&B0(s),s}function us(t,...e){t.slice().forEach(n=>{n(...e)})}const ZE=t=>t();function Qc(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Gc(s)&&Gc(r)&&t.hasOwnProperty(n)&&!Ke(r)&&!ur(r)?t[n]=Qc(s,r):t[n]=r}return t}const eT=Symbol();function tT(t){return!Gc(t)||!t.hasOwnProperty(eT)}const{assign:Xn}=Object;function nT(t){return!!(Ke(t)&&t.effect)}function rT(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=dw(n.state.value[t]);return Xn(u,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=Za(Ne(()=>{ll(n);const f=n._s.get(t);return o[d].call(f,f)})),h),{}))}return l=Dg(t,c,e,n,r,!0),l}function Dg(t,e,n={},r,s,i){let o;const a=Xn({actions:{}},n),l={deep:!0};let c,u,h=[],d=[],f;const y=r.state.value[t];!i&&!y&&(r.state.value[t]={}),Ie({});let T;function E(ne){let M;c=u=!1,typeof ne=="function"?(ne(r.state.value[t]),M={type:Ei.patchFunction,storeId:t,events:f}):(Qc(r.state.value[t],ne),M={type:Ei.patchObject,payload:ne,storeId:t,events:f});const Y=T=Symbol();Ut().then(()=>{T===Y&&(c=!0)}),u=!0,us(h,M,r.state.value[t])}const R=i?function(){const{state:M}=n,Y=M?M():{};this.$patch(re=>{Xn(re,Y)})}:kg;function O(){o.stop(),h=[],d=[],r._s.delete(t)}function L(ne,M){return function(){ll(r);const Y=Array.from(arguments),re=[],De=[];function Ge(ae){re.push(ae)}function Pt(ae){De.push(ae)}us(d,{args:Y,name:ne,store:G,after:Ge,onError:Pt});let nt;try{nt=M.apply(this&&this.$id===t?this:G,Y)}catch(ae){throw us(De,ae),ae}return nt instanceof Promise?nt.then(ae=>(us(re,ae),ae)).catch(ae=>(us(De,ae),Promise.reject(ae))):(us(re,nt),nt)}}const z={_p:r,$id:t,$onAction:mf.bind(null,d),$patch:E,$reset:R,$subscribe(ne,M={}){const Y=mf(h,ne,M.detached,()=>re()),re=o.run(()=>zr(()=>r.state.value[t],De=>{(M.flush==="sync"?u:c)&&ne({storeId:t,type:Ei.direct,events:f},De)},Xn({},l,M)));return Y},$dispose:O},G=on(z);r._s.set(t,G);const Z=(r._a&&r._a.runWithContext||ZE)(()=>r._e.run(()=>(o=Nm()).run(e)));for(const ne in Z){const M=Z[ne];if(Ke(M)&&!nT(M)||ur(M))i||(y&&tT(M)&&(Ke(M)?M.value=y[ne]:Qc(M,y[ne])),r.state.value[t][ne]=M);else if(typeof M=="function"){const Y=L(ne,M);Z[ne]=Y,a.actions[ne]=M}}return Xn(G,Z),Xn(Se(G),Z),Object.defineProperty(G,"$state",{get:()=>r.state.value[t],set:ne=>{E(M=>{Xn(M,ne)})}}),r._p.forEach(ne=>{Xn(G,o.run(()=>ne({store:G,app:r._a,pinia:r,options:a})))}),y&&i&&n.hydrate&&n.hydrate(G.$state,y),c=!0,u=!0,G}function Ws(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=Jw();return a=a||(c?ln(Og,null):null),a&&ll(a),a=xg,a._s.has(r)||(i?Dg(r,e,s,a):rT(r,s,a)),a._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const fs=typeof document<"u";function sT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Oe=Object.assign;function uc(t,e){const n={};for(const r in e){const s=e[r];n[r]=cn(s)?s.map(t):t(s)}return n}const Ti=()=>{},cn=Array.isArray,Ng=/#/g,iT=/&/g,oT=/\//g,aT=/=/g,lT=/\?/g,Vg=/\+/g,cT=/%5B/g,uT=/%5D/g,Mg=/%5E/g,hT=/%60/g,Lg=/%7B/g,dT=/%7C/g,Fg=/%7D/g,fT=/%20/g;function ih(t){return encodeURI(""+t).replace(dT,"|").replace(cT,"[").replace(uT,"]")}function pT(t){return ih(t).replace(Lg,"{").replace(Fg,"}").replace(Mg,"^")}function Yc(t){return ih(t).replace(Vg,"%2B").replace(fT,"+").replace(Ng,"%23").replace(iT,"%26").replace(hT,"`").replace(Lg,"{").replace(Fg,"}").replace(Mg,"^")}function mT(t){return Yc(t).replace(aT,"%3D")}function gT(t){return ih(t).replace(Ng,"%23").replace(lT,"%3F")}function _T(t){return t==null?"":gT(t).replace(oT,"%2F")}function Fi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const yT=/\/$/,vT=t=>t.replace(yT,"");function hc(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=bT(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Fi(o)}}function wT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function gf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ET(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ks(e.matched[r],n.matched[s])&&Ug(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ks(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ug(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!TT(t[n],e[n]))return!1;return!0}function TT(t,e){return cn(t)?_f(t,e):cn(e)?_f(e,t):t===e}function _f(t,e){return cn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function bT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var Ui;(function(t){t.pop="pop",t.push="push"})(Ui||(Ui={}));var bi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(bi||(bi={}));function IT(t){if(!t)if(fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),vT(t)}const AT=/^[^#]+#/;function ST(t,e){return t.replace(AT,"#")+e}function RT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const cl=()=>({left:window.scrollX,top:window.scrollY});function PT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=RT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function yf(t,e){return(history.state?history.state.position-e:-1)+t}const Jc=new Map;function CT(t,e){Jc.set(t,e)}function xT(t){const e=Jc.get(t);return Jc.delete(t),e}let OT=()=>location.protocol+"//"+location.host;function $g(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),gf(l,"")}return gf(n,t)+r+s}function kT(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const f=$g(t,location),y=n.value,T=e.value;let E=0;if(d){if(n.value=f,e.value=d,o&&o===y){o=null;return}E=T?d.position-T.position:0}else r(f);s.forEach(R=>{R(n.value,y,{delta:E,type:Ui.pop,direction:E?E>0?bi.forward:bi.back:bi.unknown})})};function l(){o=n.value}function c(d){s.push(d);const f=()=>{const y=s.indexOf(d);y>-1&&s.splice(y,1)};return i.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(Oe({},d.state,{scroll:cl()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function vf(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?cl():null}}function DT(t){const{history:e,location:n}=window,r={value:$g(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:OT()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=Oe({},e.state,vf(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=Oe({},s.value,e.state,{forward:l,scroll:cl()});i(u.current,u,!0);const h=Oe({},vf(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function NT(t){t=IT(t);const e=DT(t),n=kT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Oe({location:"",base:t,go:r,createHref:ST.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function VT(t){return typeof t=="string"||t&&typeof t=="object"}function jg(t){return typeof t=="string"||typeof t=="symbol"}const Yn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Bg=Symbol("");var wf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(wf||(wf={}));function Ds(t,e){return Oe(new Error,{type:t,[Bg]:!0},e)}function Vn(t,e){return t instanceof Error&&Bg in t&&(e==null||!!(t.type&e))}const Ef="[^/]+?",MT={sensitive:!1,strict:!1,start:!0,end:!0},LT=/[.+*?^${}()[\]/\\]/g;function FT(t,e){const n=Oe({},MT,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(LT,"\\$&"),f+=40;else if(d.type===1){const{value:y,repeatable:T,optional:E,regexp:R}=d;i.push({name:y,repeatable:T,optional:E});const O=R||Ef;if(O!==Ef){f+=10;try{new RegExp(`(${O})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${y}" (${O}): `+z.message)}}let L=T?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;h||(L=E&&c.length<2?`(?:/${L})`:"/"+L),E&&(L+="?"),s+=L,f+=20,E&&(f+=-8),T&&(f+=-20),O===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",y=i[d-1];h[y.name]=f&&y.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:y,repeatable:T,optional:E}=f,R=y in c?c[y]:"";if(cn(R)&&!T)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const O=cn(R)?R.join("/"):R;if(!O)if(E)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);u+=O}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function UT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function $T(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=UT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Tf(r))return 1;if(Tf(s))return-1}return s.length-r.length}function Tf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jT={type:0,value:""},BT=/[a-zA-Z0-9_]/;function qT(t){if(!t)return[[]];if(t==="/")return[[jT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:BT.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function zT(t,e,n){const r=FT(qT(t.path),n),s=Oe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function HT(t,e){const n=[],r=new Map;e=Af({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,h,d){const f=!d,y=WT(u);y.aliasOf=d&&d.record;const T=Af(e,u),E=[y];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const z of L)E.push(Oe({},y,{components:d?d.record.components:y.components,path:z,aliasOf:d?d.record:y}))}let R,O;for(const L of E){const{path:z}=L;if(h&&z[0]!=="/"){const G=h.record.path,N=G[G.length-1]==="/"?"":"/";L.path=h.record.path+(z&&N+z)}if(R=zT(L,h,T),d?d.alias.push(R):(O=O||R,O!==R&&O.alias.push(R),f&&u.name&&!If(R)&&o(u.name)),y.children){const G=y.children;for(let N=0;N<G.length;N++)i(G[N],R,d&&d.children[N])}d=d||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&l(R)}return O?()=>{o(O)}:Ti}function o(u){if(jg(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&$T(u,n[h])>=0&&(u.record.path!==n[h].record.path||!qg(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!If(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},y,T;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Ds(1,{location:u});T=d.record.name,f=Oe(bf(h.params,d.keys.filter(O=>!O.optional).concat(d.parent?d.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),u.params&&bf(u.params,d.keys.map(O=>O.name))),y=d.stringify(f)}else if(u.path!=null)y=u.path,d=n.find(O=>O.re.test(y)),d&&(f=d.parse(y),T=d.record.name);else{if(d=h.name?r.get(h.name):n.find(O=>O.re.test(h.path)),!d)throw Ds(1,{location:u,currentLocation:h});T=d.record.name,f=Oe({},h.params,u.params),y=d.stringify(f)}const E=[];let R=d;for(;R;)E.unshift(R.record),R=R.parent;return{name:T,path:y,params:f,matched:E,meta:GT(E)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function bf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function WT(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:KT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function KT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function If(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function GT(t){return t.reduce((e,n)=>Oe(e,n.meta),{})}function Af(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function qg(t,e){return e.children.some(n=>n===t||qg(t,n))}function QT(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Vg," "),o=i.indexOf("="),a=Fi(o<0?i:i.slice(0,o)),l=o<0?null:Fi(i.slice(o+1));if(a in e){let c=e[a];cn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Sf(t){let e="";for(let n in t){const r=t[n];if(n=mT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(cn(r)?r.map(i=>i&&Yc(i)):[r&&Yc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function YT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=cn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const JT=Symbol(""),Rf=Symbol(""),ul=Symbol(""),zg=Symbol(""),Xc=Symbol("");function si(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function rr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Ds(4,{from:n,to:e})):d instanceof Error?l(d):VT(d)?l(Ds(2,{from:e,to:d})):(o&&r.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function dc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(XT(l)){const u=(l.__vccOpts||l)[e];u&&i.push(rr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=sT(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&rr(f,n,r,o,a,s)()}))}}return i}function XT(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Pf(t){const e=ln(ul),n=ln(zg),r=Ne(()=>e.resolve(A(t.to))),s=Ne(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(ks.bind(null,u));if(d>-1)return d;const f=Cf(l[c-2]);return c>1&&Cf(u)===f&&h[h.length-1].path!==f?h.findIndex(ks.bind(null,l[c-2])):d}),i=Ne(()=>s.value>-1&&nb(n.params,r.value.params)),o=Ne(()=>s.value>-1&&s.value===n.matched.length-1&&Ug(n.params,r.value.params));function a(l={}){return tb(l)?e[A(t.replace)?"replace":"push"](A(t.to)).catch(Ti):Promise.resolve()}return{route:r,href:Ne(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const ZT=Rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Pf,setup(t,{slots:e}){const n=on(Pf(t)),{options:r}=ln(ul),s=Ne(()=>({[xf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[xf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Rg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),eb=ZT;function tb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function nb(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!cn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Cf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const xf=(t,e,n)=>t??e??n,rb=Rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=ln(Xc),s=Ne(()=>t.route||r.value),i=ln(Rf,0),o=Ne(()=>{let c=A(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Ne(()=>s.value.matched[o.value]);vi(Rf,Ne(()=>o.value+1)),vi(JT,a),vi(Xc,s);const l=Ie();return zr(()=>[l.value,a.value,t.name],([c,u,h],[d,f,y])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!ks(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(T=>T(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Of(n.default,{Component:d,route:c});const f=h.props[u],y=f?f===!0?c.params:typeof f=="function"?f(c):f:null,E=Rg(d,Oe({},y,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Of(n.default,{Component:E,route:c})||E}}});function Of(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Hg=rb;function sb(t){const e=HT(t.routes,t),n=t.parseQuery||QT,r=t.stringifyQuery||Sf,s=t.history,i=si(),o=si(),a=si(),l=Jm(Yn);let c=Yn;fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=uc.bind(null,b=>""+b),h=uc.bind(null,_T),d=uc.bind(null,Fi);function f(b,W){let $,Q;return jg(b)?($=e.getRecordMatcher(b),Q=W):Q=b,e.addRoute(Q,$)}function y(b){const W=e.getRecordMatcher(b);W&&e.removeRoute(W)}function T(){return e.getRoutes().map(b=>b.record)}function E(b){return!!e.getRecordMatcher(b)}function R(b,W){if(W=Oe({},W||l.value),typeof b=="string"){const m=hc(n,b,W.path),w=e.resolve({path:m.path},W),P=s.createHref(m.fullPath);return Oe(m,w,{params:d(w.params),hash:Fi(m.hash),redirectedFrom:void 0,href:P})}let $;if(b.path!=null)$=Oe({},b,{path:hc(n,b.path,W.path).path});else{const m=Oe({},b.params);for(const w in m)m[w]==null&&delete m[w];$=Oe({},b,{params:h(m)}),W.params=h(W.params)}const Q=e.resolve($,W),ye=b.hash||"";Q.params=u(d(Q.params));const Me=wT(r,Oe({},b,{hash:pT(ye),path:Q.path})),p=s.createHref(Me);return Oe({fullPath:Me,hash:ye,query:r===Sf?YT(b.query):b.query||{}},Q,{redirectedFrom:void 0,href:p})}function O(b){return typeof b=="string"?hc(n,b,l.value.path):Oe({},b)}function L(b,W){if(c!==b)return Ds(8,{from:W,to:b})}function z(b){return Z(b)}function G(b){return z(Oe(O(b),{replace:!0}))}function N(b){const W=b.matched[b.matched.length-1];if(W&&W.redirect){const{redirect:$}=W;let Q=typeof $=="function"?$(b):$;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=O(Q):{path:Q},Q.params={}),Oe({query:b.query,hash:b.hash,params:Q.path!=null?{}:b.params},Q)}}function Z(b,W){const $=c=R(b),Q=l.value,ye=b.state,Me=b.force,p=b.replace===!0,m=N($);if(m)return Z(Oe(O(m),{state:typeof m=="object"?Oe({},ye,m.state):ye,force:Me,replace:p}),W||$);const w=$;w.redirectedFrom=W;let P;return!Me&&ET(r,Q,$)&&(P=Ds(16,{to:w,from:Q}),qt(Q,Q,!0,!1)),(P?Promise.resolve(P):Y(w,Q)).catch(I=>Vn(I)?Vn(I,2)?I:dn(I):ge(I,w,Q)).then(I=>{if(I){if(Vn(I,2))return Z(Oe({replace:p},O(I.to),{state:typeof I.to=="object"?Oe({},ye,I.to.state):ye,force:Me}),W||w)}else I=De(w,Q,!0,p,ye);return re(w,Q,I),I})}function ne(b,W){const $=L(b,W);return $?Promise.reject($):Promise.resolve()}function M(b){const W=Gn.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(b):b()}function Y(b,W){let $;const[Q,ye,Me]=ib(b,W);$=dc(Q.reverse(),"beforeRouteLeave",b,W);for(const m of Q)m.leaveGuards.forEach(w=>{$.push(rr(w,b,W))});const p=ne.bind(null,b,W);return $.push(p),Ve($).then(()=>{$=[];for(const m of i.list())$.push(rr(m,b,W));return $.push(p),Ve($)}).then(()=>{$=dc(ye,"beforeRouteUpdate",b,W);for(const m of ye)m.updateGuards.forEach(w=>{$.push(rr(w,b,W))});return $.push(p),Ve($)}).then(()=>{$=[];for(const m of Me)if(m.beforeEnter)if(cn(m.beforeEnter))for(const w of m.beforeEnter)$.push(rr(w,b,W));else $.push(rr(m.beforeEnter,b,W));return $.push(p),Ve($)}).then(()=>(b.matched.forEach(m=>m.enterCallbacks={}),$=dc(Me,"beforeRouteEnter",b,W,M),$.push(p),Ve($))).then(()=>{$=[];for(const m of o.list())$.push(rr(m,b,W));return $.push(p),Ve($)}).catch(m=>Vn(m,8)?m:Promise.reject(m))}function re(b,W,$){a.list().forEach(Q=>M(()=>Q(b,W,$)))}function De(b,W,$,Q,ye){const Me=L(b,W);if(Me)return Me;const p=W===Yn,m=fs?history.state:{};$&&(Q||p?s.replace(b.fullPath,Oe({scroll:p&&m&&m.scroll},ye)):s.push(b.fullPath,ye)),l.value=b,qt(b,W,$,p),dn()}let Ge;function Pt(){Ge||(Ge=s.listen((b,W,$)=>{if(!cs.listening)return;const Q=R(b),ye=N(Q);if(ye){Z(Oe(ye,{replace:!0}),Q).catch(Ti);return}c=Q;const Me=l.value;fs&&CT(yf(Me.fullPath,$.delta),cl()),Y(Q,Me).catch(p=>Vn(p,12)?p:Vn(p,2)?(Z(p.to,Q).then(m=>{Vn(m,20)&&!$.delta&&$.type===Ui.pop&&s.go(-1,!1)}).catch(Ti),Promise.reject()):($.delta&&s.go(-$.delta,!1),ge(p,Q,Me))).then(p=>{p=p||De(Q,Me,!1),p&&($.delta&&!Vn(p,8)?s.go(-$.delta,!1):$.type===Ui.pop&&Vn(p,20)&&s.go(-1,!1)),re(Q,Me,p)}).catch(Ti)}))}let nt=si(),ae=si(),Ce;function ge(b,W,$){dn(b);const Q=ae.list();return Q.length?Q.forEach(ye=>ye(b,W,$)):console.error(b),Promise.reject(b)}function Vt(){return Ce&&l.value!==Yn?Promise.resolve():new Promise((b,W)=>{nt.add([b,W])})}function dn(b){return Ce||(Ce=!b,Pt(),nt.list().forEach(([W,$])=>b?$(b):W()),nt.reset()),b}function qt(b,W,$,Q){const{scrollBehavior:ye}=t;if(!fs||!ye)return Promise.resolve();const Me=!$&&xT(yf(b.fullPath,0))||(Q||!$)&&history.state&&history.state.scroll||null;return Ut().then(()=>ye(b,W,Me)).then(p=>p&&PT(p)).catch(p=>ge(p,b,W))}const Ct=b=>s.go(b);let fn;const Gn=new Set,cs={currentRoute:l,listening:!0,addRoute:f,removeRoute:y,hasRoute:E,getRoutes:T,resolve:R,options:t,push:z,replace:G,go:Ct,back:()=>Ct(-1),forward:()=>Ct(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:Vt,install(b){const W=this;b.component("RouterLink",eb),b.component("RouterView",Hg),b.config.globalProperties.$router=W,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>A(l)}),fs&&!fn&&l.value===Yn&&(fn=!0,z(s.location).catch(ye=>{}));const $={};for(const ye in Yn)Object.defineProperty($,ye,{get:()=>l.value[ye],enumerable:!0});b.provide(ul,W),b.provide(zg,Km($)),b.provide(Xc,l);const Q=b.unmount;Gn.add(b),b.unmount=function(){Gn.delete(b),Gn.size<1&&(c=Yn,Ge&&Ge(),Ge=null,l.value=Yn,fn=!1,Ce=!1),Q()}}};function Ve(b){return b.reduce((W,$)=>W.then(()=>M($)),Promise.resolve())}return cs}function ib(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>ks(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ks(c,l))||s.push(l))}return[n,r,s]}function hl(){return ln(ul)}const Wg=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},ob={},ab={class:"loader"};function lb(t,e){return ie(),Ee("div",ab)}const oh=Wg(ob,[["render",lb]]),cb={class:"w-screen h-screen z-30 fixed top-0 left-0 flex flex-row justify-center items-center"},ub=Rt({__name:"LoadingView",setup(t){return(e,n)=>(ie(),Ee("div",cb,[qe(oh)]))}});var kf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Gg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new db;const d=i<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class db extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fb=function(t){const e=Kg(t);return Gg.encodeByteArray(e,!0)},Ea=function(t){return fb(t).replace(/\./g,"")},Qg=function(t){try{return Gg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=()=>pb().__FIREBASE_DEFAULTS__,gb=()=>{if(typeof process>"u"||typeof kf>"u")return;const t=kf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_b=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qg(t[1]);return e&&JSON.parse(e)},dl=()=>{try{return mb()||gb()||_b()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yg=t=>{var e,n;return(n=(e=dl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yb=t=>{const e=Yg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jg=()=>{var t;return(t=dl())===null||t===void 0?void 0:t.config},Xg=t=>{var e;return(e=dl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ea(JSON.stringify(n)),Ea(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Eb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Tb(){var t;const e=(t=dl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ib(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ab(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Sb(){return!Tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zg(){try{return typeof indexedDB=="object"}catch{return!1}}function Rb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Pb,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Cb(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Dn(s,a,r)}}function Cb(t,e){return t.replace(xb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xb=/\{\$([^}]+)}/g;function Ob(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ta(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Df(i)&&Df(o)){if(!Ta(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Df(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ci(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ui(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kb(t,e){const n=new Db(t,e);return n.subscribe.bind(n)}class Db{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Nb(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=fc),s.error===void 0&&(s.error=fc),s.complete===void 0&&(s.complete=fc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class vr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lb(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mb(t){return t===Or?void 0:t}function Lb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const Ub={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},$b=we.INFO,jb={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},Bb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jb[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ah{constructor(e){this.name=e,this._logLevel=$b,this._logHandler=Bb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ub[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const qb=(t,e)=>e.some(n=>t instanceof n);let Nf,Vf;function zb(){return Nf||(Nf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hb(){return Vf||(Vf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e_=new WeakMap,Zc=new WeakMap,t_=new WeakMap,pc=new WeakMap,lh=new WeakMap;function Wb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&e_.set(n,t)}).catch(()=>{}),lh.set(e,t),e}function Kb(t){if(Zc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zc.set(t,e)}let eu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||t_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gb(t){eu=t(eu)}function Qb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mc(this),e,...n);return t_.set(r,e.sort?e.sort():[e]),dr(r)}:Hb().includes(t)?function(...e){return t.apply(mc(this),e),dr(e_.get(this))}:function(...e){return dr(t.apply(mc(this),e))}}function Yb(t){return typeof t=="function"?Qb(t):(t instanceof IDBTransaction&&Kb(t),qb(t,zb())?new Proxy(t,eu):t)}function dr(t){if(t instanceof IDBRequest)return Wb(t);if(pc.has(t))return pc.get(t);const e=Yb(t);return e!==t&&(pc.set(t,e),lh.set(e,t)),e}const mc=t=>lh.get(t);function Jb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=dr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(dr(o.result),l.oldVersion,l.newVersion,dr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Xb=["get","getKey","getAll","getAllKeys","count"],Zb=["put","add","delete","clear"],gc=new Map;function Mf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gc.get(e))return gc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Zb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Xb.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return gc.set(e,i),i}Gb(t=>({...t,get:(e,n,r)=>Mf(e,n)||t.get(e,n,r),has:(e,n)=>!!Mf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tu="@firebase/app",Lf="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new ah("@firebase/app"),nI="@firebase/app-compat",rI="@firebase/analytics-compat",sI="@firebase/analytics",iI="@firebase/app-check-compat",oI="@firebase/app-check",aI="@firebase/auth",lI="@firebase/auth-compat",cI="@firebase/database",uI="@firebase/database-compat",hI="@firebase/functions",dI="@firebase/functions-compat",fI="@firebase/installations",pI="@firebase/installations-compat",mI="@firebase/messaging",gI="@firebase/messaging-compat",_I="@firebase/performance",yI="@firebase/performance-compat",vI="@firebase/remote-config",wI="@firebase/remote-config-compat",EI="@firebase/storage",TI="@firebase/storage-compat",bI="@firebase/firestore",II="@firebase/firestore-compat",AI="firebase",SI="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="[DEFAULT]",RI={[tu]:"fire-core",[nI]:"fire-core-compat",[sI]:"fire-analytics",[rI]:"fire-analytics-compat",[oI]:"fire-app-check",[iI]:"fire-app-check-compat",[aI]:"fire-auth",[lI]:"fire-auth-compat",[cI]:"fire-rtdb",[uI]:"fire-rtdb-compat",[hI]:"fire-fn",[dI]:"fire-fn-compat",[fI]:"fire-iid",[pI]:"fire-iid-compat",[mI]:"fire-fcm",[gI]:"fire-fcm-compat",[_I]:"fire-perf",[yI]:"fire-perf-compat",[vI]:"fire-rc",[wI]:"fire-rc-compat",[EI]:"fire-gcs",[TI]:"fire-gcs-compat",[bI]:"fire-fst",[II]:"fire-fst-compat","fire-js":"fire-js",[AI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new Map,ru=new Map;function PI(t,e){try{t.container.addComponent(e)}catch(n){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qr(t){const e=t.name;if(ru.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;ru.set(e,t);for(const n of ba.values())PI(n,t);return!0}function ch(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fr=new ao("app","Firebase",CI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=SI;function n_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nu,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw fr.create("bad-app-name",{appName:String(s)});if(n||(n=Jg()),!n)throw fr.create("no-options");const i=ba.get(s);if(i){if(Ta(n,i.options)&&Ta(r,i.config))return i;throw fr.create("duplicate-app",{appName:s})}const o=new Fb(s);for(const l of ru.values())o.addComponent(l);const a=new xI(n,r,o);return ba.set(s,a),a}function r_(t=nu){const e=ba.get(t);if(!e&&t===nu&&Jg())return n_();if(!e)throw fr.create("no-app",{appName:t});return e}function Tn(t,e,n){var r;let s=(r=RI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(a.join(" "));return}Qr(new vr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="firebase-heartbeat-database",kI=1,$i="firebase-heartbeat-store";let _c=null;function s_(){return _c||(_c=Jb(OI,kI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($i)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),_c}async function DI(t){try{const n=(await s_()).transaction($i),r=await n.objectStore($i).get(i_(t));return await n.done,r}catch(e){if(e instanceof Dn)Gr.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(n.message)}}}async function Ff(t,e){try{const r=(await s_()).transaction($i,"readwrite");await r.objectStore($i).put(e,i_(t)),await r.done}catch(n){if(n instanceof Dn)Gr.warn(n.message);else{const r=fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gr.warn(r.message)}}}function i_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1024,VI=30*24*60*60*1e3;class MI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Uf();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=VI}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uf(),{heartbeatsToSend:r,unsentEntries:s}=LI(this._heartbeatsCache.heartbeats),i=Ea(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Uf(){return new Date().toISOString().substring(0,10)}function LI(t,e=NI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$f(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$f(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zg()?Rb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ff(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ff(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $f(t){return Ea(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){Qr(new vr("platform-logger",e=>new eI(e),"PRIVATE")),Qr(new vr("heartbeat",e=>new MI(e),"PRIVATE")),Tn(tu,Lf,t),Tn(tu,Lf,"esm2017"),Tn("fire-js","")}UI("");var $I="firebase",jI="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn($I,jI,"app");function uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function o_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BI=o_,a_=new ao("auth","Firebase",o_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new ah("@firebase/auth");function qI(t,...e){Ia.logLevel<=we.WARN&&Ia.warn(`Auth (${rs}): ${t}`,...e)}function na(t,...e){Ia.logLevel<=we.ERROR&&Ia.error(`Auth (${rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw hh(t,...e)}function bn(t,...e){return hh(t,...e)}function l_(t,e,n){const r=Object.assign(Object.assign({},BI()),{[e]:n});return new ao("auth","Firebase",r).create(e,{appName:t.name})}function zI(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&en(t,"argument-error"),l_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return a_.create(t,...e)}function ce(t,e,...n){if(!t)throw hh(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw na(e),new Error(e)}function qn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HI(){return jf()==="http:"||jf()==="https:"}function jf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HI()||bb()||"connection"in navigator)?navigator.onLine:!0}function KI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=Eb()||Ib()}get(){return WI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new co(3e4,6e4);function br(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ir(t,e,n,r,s={}){return u_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=lo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),c_.fetch()(h_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function u_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GI),e);try{const s=new JI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Lo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Lo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Lo(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw l_(t,u,c);en(t,u)}}catch(s){if(s instanceof Dn)throw s;en(t,"network-request-failed",{message:String(s)})}}async function uo(t,e,n,r,s={}){const i=await Ir(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}function h_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?dh(t.config,s):`${t.config.apiScheme}://${s}`}function YI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),QI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bn(t,e,r);return s.customData._tokenResponse=n,s}function Bf(t){return t!==void 0&&t.enterprise!==void 0}class XI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ZI(t,e){return Ir(t,"GET","/v2/recaptchaConfig",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t,e){return Ir(t,"POST","/v1/accounts:delete",e)}async function tA(t,e){return Ir(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nA(t,e=!1){const n=_t(t),r=await n.getIdToken(e),s=fh(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ii(yc(s.auth_time)),issuedAtTime:Ii(yc(s.iat)),expirationTime:Ii(yc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yc(t){return Number(t)*1e3}function fh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return na("JWT malformed, contained fewer than 3 sections"),null;try{const s=Qg(n);return s?JSON.parse(s):(na("Failed to decode base64 JWT payload"),null)}catch(s){return na("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rA(t){const e=fh(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&sA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ji(t,tA(n,{idToken:r}));ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?lA(i.providerUserInfo):[],a=aA(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new d_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function oA(t){const e=_t(t);await Aa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function lA(t){return t.map(e=>{var{providerId:n}=e,r=uh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e){const n=await u_(t,{},async()=>{const r=lo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=h_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",c_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uA(t,e){return Ir(t,"POST","/v2/accounts:revokeToken",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Bi;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bi,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=uh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new d_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ji(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nA(this,e)}reload(){return oA(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Aa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ji(this,eA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,R=(c=n.createdAt)!==null&&c!==void 0?c:void 0,O=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:L,emailVerified:z,isAnonymous:G,providerData:N,stsTokenManager:Z}=n;ce(L&&Z,e,"internal-error");const ne=Bi.fromJSON(this.name,Z);ce(typeof L=="string",e,"internal-error"),Jn(h,e.name),Jn(d,e.name),ce(typeof z=="boolean",e,"internal-error"),ce(typeof G=="boolean",e,"internal-error"),Jn(f,e.name),Jn(y,e.name),Jn(T,e.name),Jn(E,e.name),Jn(R,e.name),Jn(O,e.name);const M=new Hr({uid:L,auth:e,email:d,emailVerified:z,displayName:h,isAnonymous:G,photoURL:y,phoneNumber:f,tenantId:T,stsTokenManager:ne,createdAt:R,lastLoginAt:O});return N&&Array.isArray(N)&&(M.providerData=N.map(Y=>Object.assign({},Y))),E&&(M._redirectEventId=E),M}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bi;s.updateFromServerResponse(n);const i=new Hr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Aa(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new Map;function Un(t){qn(t instanceof Function,"Expected a class definition");let e=qf.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qf.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}f_.type="NONE";const zf=f_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e,n){return`firebase:${t}:${e}:${n}`}class Is{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ra(this.userKey,s.apiKey,i),this.fullPersistenceKey=ra("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Is(Un(zf),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Un(zf);const o=ra(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Hr._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Is(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Is(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y_(e))return"Blackberry";if(v_(e))return"Webos";if(ph(e))return"Safari";if((e.includes("chrome/")||m_(e))&&!e.includes("edge/"))return"Chrome";if(__(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p_(t=Xe()){return/firefox\//i.test(t)}function ph(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m_(t=Xe()){return/crios\//i.test(t)}function g_(t=Xe()){return/iemobile/i.test(t)}function __(t=Xe()){return/android/i.test(t)}function y_(t=Xe()){return/blackberry/i.test(t)}function v_(t=Xe()){return/webos/i.test(t)}function fl(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hA(t=Xe()){var e;return fl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dA(){return Ab()&&document.documentMode===10}function w_(t=Xe()){return fl(t)||__(t)||v_(t)||y_(t)||/windows phone/i.test(t)||g_(t)}function fA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e=[]){let n;switch(t){case"Browser":n=Hf(Xe());break;case"Worker":n=`${Hf(Xe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e={}){return Ir(t,"GET","/v2/passwordPolicy",br(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=6;class _A{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wf(this),this.idTokenSubscription=new Wf(this),this.beforeStateQueue=new pA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Is.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Aa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?_t(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mA(this),n=new _A(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Is.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&qI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ar(t){return _t(t)}class Wf{constructor(e){this.auth=e,this.observer=null,this.addObserver=kb(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vA(t){pl=t}function T_(t){return pl.loadJS(t)}function wA(){return pl.recaptchaEnterpriseScript}function EA(){return pl.gapiScript}function TA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const bA="recaptcha-enterprise",IA="NO_RECAPTCHA";class AA{constructor(e){this.type=bA,this.auth=Ar(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{ZI(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new XI(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Bf(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(IA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Bf(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wA();l.length!==0&&(l+=a),T_(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Kf(t,e,n,r=!1){const s=new AA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function iu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Kf(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Kf(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e){const n=ch(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ta(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function RA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PA(t,e,n){const r=Ar(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=b_(e),{host:o,port:a}=CA(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||xA()}function b_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CA(t){const e=b_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Gf(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Gf(o)}}}function Gf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function OA(t,e){return Ir(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t,e){return uo(t,"POST","/v1/accounts:signInWithPassword",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return uo(t,"POST","/v1/accounts:signInWithEmailLink",br(t,e))}async function NA(t,e){return uo(t,"POST","/v1/accounts:signInWithEmailLink",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends mh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new qi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,n,"signInWithPassword",kA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,r,"signUpPassword",OA);case"emailLink":return NA(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(t,e){return uo(t,"POST","/v1/accounts:signInWithIdp",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="http://localhost";class Yr extends mh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=uh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Yr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return As(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,As(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,As(e,n)}buildRequest(){const e={requestUri:VA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LA(t){const e=ci(ui(t)).link,n=e?ci(ui(e)).deep_link_id:null,r=ci(ui(t)).deep_link_id;return(r?ci(ui(r)).link:null)||r||n||e||t}class gh{constructor(e){var n,r,s,i,o,a;const l=ci(ui(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=MA((s=l.mode)!==null&&s!==void 0?s:null);ce(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=LA(e);try{return new gh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.providerId=Ks.PROVIDER_ID}static credential(e,n){return qi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gh.parseLink(n);return ce(r,"argument-error"),qi._fromEmailAndCode(e,r.code,r.tenantId)}}Ks.PROVIDER_ID="password";Ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends _h{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ho{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yn.credentialFromTaggedObject(e)}static credentialFromError(e){return yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yn.credential(n,r)}catch{return null}}}yn.GOOGLE_SIGN_IN_METHOD="google.com";yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ho{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ho{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e){return uo(t,"POST","/v1/accounts:signUp",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Hr._fromIdTokenResponse(e,r,s),o=Qf(r);return new Jr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Qf(r);return new Jr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Qf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Dn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Sa.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Sa(e,n,r,s)}}function I_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sa._fromErrorAndOperation(t,i,e,r):i})}async function UA(t,e,n=!1){const r=await ji(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await ji(t,I_(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=fh(i.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Jr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(t,e,n=!1){const r="signIn",s=await I_(t,r,e),i=await Jr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function jA(t,e){return A_(Ar(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(t){const e=Ar(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BA(t,e,n){const r=Ar(t),o=await iu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&S_(t),l}),a=await Jr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function qA(t,e,n){return jA(_t(t),Ks.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&S_(t),r})}function zA(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function HA(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function WA(t){return _t(t).signOut()}const Ra="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ra,"1"),this.storage.removeItem(Ra),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){const t=Xe();return ph(t)||fl(t)}const GA=1e3,QA=10;class P_ extends R_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=KA()&&fA(),this.fallbackToPolling=w_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}P_.type="LOCAL";const YA=P_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends R_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C_.type="SESSION";const x_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ml(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await JA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ml.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=yh("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function ZA(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function eS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nS(){return O_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebaseLocalStorageDb",rS=1,Pa="firebaseLocalStorage",D_="fbase_key";class fo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gl(t,e){return t.transaction([Pa],e?"readwrite":"readonly").objectStore(Pa)}function sS(){const t=indexedDB.deleteDatabase(k_);return new fo(t).toPromise()}function ou(){const t=indexedDB.open(k_,rS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pa,{keyPath:D_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pa)?e(r):(r.close(),await sS(),e(await ou()))})})}async function Yf(t,e,n){const r=gl(t,!0).put({[D_]:e,value:n});return new fo(r).toPromise()}async function iS(t,e){const n=gl(t,!1).get(e),r=await new fo(n).toPromise();return r===void 0?null:r.value}function Jf(t,e){const n=gl(t,!0).delete(e);return new fo(n).toPromise()}const oS=800,aS=3;class N_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ou(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ml._getInstance(nS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eS(),!this.activeServiceWorker)return;this.sender=new XA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ou();return await Yf(e,Ra,"1"),await Jf(e,Ra),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yf(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=gl(s,!1).getAll();return new fo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N_.type="LOCAL";const lS=N_;new co(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){return e?Un(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends mh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return As(e,this._buildIdpRequest())}_linkToIdToken(e,n){return As(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return As(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cS(t){return A_(t.auth,new vh(t),t.bypassAuthState)}function uS(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),$A(n,new vh(t),t.bypassAuthState)}async function hS(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),UA(n,new vh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cS;case"linkViaPopup":case"linkViaRedirect":return hS;case"reauthViaPopup":case"reauthViaRedirect":return uS;default:en(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new co(2e3,1e4);async function L_(t,e,n){const r=Ar(t);zI(t,e,_h);const s=V_(r,n);return new Mr(r,"signInViaPopup",e,s).executeNotNull()}class Mr extends M_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Mr.currentPopupAction&&Mr.currentPopupAction.cancel(),Mr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=yh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dS.get())};e()}}Mr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="pendingRedirect",sa=new Map;class pS extends M_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sa.get(this.auth._key());if(!e){try{const r=await mS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sa.set(this.auth._key(),e)}return this.bypassAuthState||sa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mS(t,e){const n=yS(e),r=_S(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function gS(t,e){sa.set(t._key(),e)}function _S(t){return Un(t._redirectPersistence)}function yS(t){return ra(fS,t.config.apiKey,t.name)}async function vS(t,e,n=!1){const r=Ar(t),s=V_(r,e),o=await new pS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=10*60*1e3;class ES{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!F_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xf(e))}saveEventToCache(e){this.cachedEventUids.add(Xf(e)),this.lastProcessedEventTime=Date.now()}}function Xf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function F_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(t,e={}){return Ir(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AS=/^https?/;async function SS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bS(t);for(const n of e)try{if(RS(n))return}catch{}en(t,"unauthorized-domain")}function RS(t){const e=su(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!AS.test(n))return!1;if(IS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new co(3e4,6e4);function Zf(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CS(t){return new Promise((e,n)=>{var r,s,i;function o(){Zf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zf(),n(bn(t,"network-request-failed"))},timeout:PS.get()})}if(!((s=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=In().gapi)===null||i===void 0)&&i.load)o();else{const a=TA("iframefcb");return In()[a]=()=>{gapi.load?o():n(bn(t,"network-request-failed"))},T_(`${EA()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ia=null,e})}let ia=null;function xS(t){return ia=ia||CS(t),ia}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=new co(5e3,15e3),kS="__/auth/iframe",DS="emulator/auth/iframe",NS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MS(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dh(e,DS):`https://${t.config.authDomain}/${kS}`,r={apiKey:e.apiKey,appName:t.name,v:rs},s=VS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${lo(r).slice(1)}`}async function LS(t){const e=await xS(t),n=In().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:MS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=bn(t,"network-request-failed"),a=In().setTimeout(()=>{i(o)},OS.get());function l(){In().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},US=500,$S=600,jS="_blank",BS="http://localhost";class ep{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qS(t,e,n,r=US,s=$S){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FS),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Xe().toLowerCase();n&&(a=m_(c)?jS:n),p_(c)&&(e=e||BS,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,y])=>`${d}${f}=${y},`,"");if(hA(c)&&a!=="_self")return zS(e||"",a),new ep(null);const h=window.open(e||"",a,u);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new ep(h)}function zS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="__/auth/handler",WS="emulator/auth/handler",KS=encodeURIComponent("fac");async function tp(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rs,eventId:s};if(e instanceof _h){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ob(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(i||{}))o[u]=h}if(e instanceof ho){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${KS}=${encodeURIComponent(l)}`:"";return`${GS(t)}?${lo(a).slice(1)}${c}`}function GS({config:t}){return t.emulator?dh(t,WS):`https://${t.authDomain}/${HS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="webStorageSupport";class QS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x_,this._completeRedirectFn=vS,this._overrideRedirectResult=gS}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await tp(e,n,r,su(),s);return qS(e,o,yh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await tp(e,n,r,su(),s);return ZA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LS(e),r=new ES(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vc,{type:vc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vc];o!==void 0&&n(!!o),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w_()||ph()||fl()}}const YS=QS;var np="@firebase/auth",rp="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZS(t){Qr(new vr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(t)},c=new yA(r,s,i,l);return RA(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qr(new vr("auth-internal",e=>{const n=Ar(e.getProvider("auth").getImmediate());return(r=>new JS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(np,rp,XS(t)),Tn(np,rp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=5*60,tR=Xg("authIdTokenMaxAge")||eR;let sp=null;const nR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tR)return;const s=n==null?void 0:n.token;sp!==s&&(sp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rR(t=r_()){const e=ch(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SA(t,{popupRedirectResolver:YS,persistence:[lS,YA,x_]}),r=Xg("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){const i=nR(r);HA(n,i,()=>i(n.currentUser)),zA(n,o=>i(o))}const s=Yg("auth");return s&&PA(n,`http://${s}`),n}function sR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=bn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",sR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZS("Browser");var iR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,wh=wh||{},he=iR||self;function _l(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function po(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function oR(t){return Object.prototype.hasOwnProperty.call(t,wc)&&t[wc]||(t[wc]=++aR)}var wc="closure_uid_"+(1e9*Math.random()>>>0),aR=0;function lR(t,e,n){return t.call.apply(t.bind,arguments)}function cR(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?bt=lR:bt=cR,bt.apply(null,arguments)}function Fo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Sr(){this.s=this.s,this.o=this.o}var uR=0;Sr.prototype.s=!1;Sr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),uR!=0)&&oR(this)};Sr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const U_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Eh(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ip(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(_l(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function It(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var hR=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};he.addEventListener("test",n,e),he.removeEventListener("test",n,e)}catch{}return t}();function zi(t){return/^[\s\xa0]*$/.test(t)}function yl(){var t=he.navigator;return t&&(t=t.userAgent)?t:""}function vn(t){return yl().indexOf(t)!=-1}function Th(t){return Th[" "](t),t}Th[" "]=function(){};function dR(t,e){var n=sP;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var fR=vn("Opera"),Ns=vn("Trident")||vn("MSIE"),$_=vn("Edge"),au=$_||Ns,j_=vn("Gecko")&&!(yl().toLowerCase().indexOf("webkit")!=-1&&!vn("Edge"))&&!(vn("Trident")||vn("MSIE"))&&!vn("Edge"),pR=yl().toLowerCase().indexOf("webkit")!=-1&&!vn("Edge");function B_(){var t=he.document;return t?t.documentMode:void 0}var lu;e:{var Ec="",Tc=function(){var t=yl();if(j_)return/rv:([^\);]+)(\)|;)/.exec(t);if($_)return/Edge\/([\d\.]+)/.exec(t);if(Ns)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(pR)return/WebKit\/(\S+)/.exec(t);if(fR)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Tc&&(Ec=Tc?Tc[1]:""),Ns){var bc=B_();if(bc!=null&&bc>parseFloat(Ec)){lu=String(bc);break e}}lu=Ec}var cu;if(he.document&&Ns){var op=B_();cu=op||parseInt(lu,10)||void 0}else cu=void 0;var mR=cu;function Hi(t,e){if(It.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(j_){e:{try{Th(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gR[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Hi.$.h.call(this)}}at(Hi,It);var gR={2:"touch",3:"pen",4:"mouse"};Hi.prototype.h=function(){Hi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mo="closure_listenable_"+(1e6*Math.random()|0),_R=0;function yR(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++_R,this.fa=this.ia=!1}function vl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function bh(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function vR(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function q_(t){const e={};for(const n in t)e[n]=t[n];return e}const ap="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z_(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<ap.length;i++)n=ap[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wl(t){this.src=t,this.g={},this.h=0}wl.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=hu(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new yR(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function uu(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=U_(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(vl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function hu(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Ih="closure_lm_"+(1e6*Math.random()|0),Ic={};function H_(t,e,n,r,s){if(r&&r.once)return K_(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)H_(t,e[i],n,r,s);return null}return n=Rh(n),t&&t[mo]?t.O(e,n,po(r)?!!r.capture:!!r,s):W_(t,e,n,!1,r,s)}function W_(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=po(s)?!!s.capture:!!s,a=Sh(t);if(a||(t[Ih]=a=new wl(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=wR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)hR||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Q_(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wR(){function t(n){return e.call(t.src,t.listener,n)}const e=ER;return t}function K_(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)K_(t,e[i],n,r,s);return null}return n=Rh(n),t&&t[mo]?t.P(e,n,po(r)?!!r.capture:!!r,s):W_(t,e,n,!0,r,s)}function G_(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)G_(t,e[i],n,r,s);else r=po(r)?!!r.capture:!!r,n=Rh(n),t&&t[mo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=hu(i,n,r,s),-1<n&&(vl(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sh(t))&&(e=t.g[e.toString()],t=-1,e&&(t=hu(e,n,r,s)),(n=-1<t?e[t]:null)&&Ah(n))}function Ah(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[mo])uu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Q_(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Sh(e))?(uu(n,t),n.h==0&&(n.src=null,e[Ih]=null)):vl(t)}}}function Q_(t){return t in Ic?Ic[t]:Ic[t]="on"+t}function ER(t,e){if(t.fa)t=!0;else{e=new Hi(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ah(t),t=n.call(r,e)}return t}function Sh(t){return t=t[Ih],t instanceof wl?t:null}var Ac="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rh(t){return typeof t=="function"?t:(t[Ac]||(t[Ac]=function(e){return t.handleEvent(e)}),t[Ac])}function ot(){Sr.call(this),this.i=new wl(this),this.S=this,this.J=null}at(ot,Sr);ot.prototype[mo]=!0;ot.prototype.removeEventListener=function(t,e,n,r){G_(this,t,e,n,r)};function pt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new It(e,t);else if(e instanceof It)e.target=e.target||t;else{var s=e;e=new It(r,t),z_(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Uo(o,r,!0,e)&&s}if(o=e.g=t,s=Uo(o,r,!0,e)&&s,s=Uo(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Uo(o,r,!1,e)&&s}ot.prototype.N=function(){if(ot.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)vl(n[r]);delete t.g[e],t.h--}}this.J=null};ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ot.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Uo(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&uu(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Ph=he.JSON.stringify;class TR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function bR(){var t=Ch;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class IR{constructor(){this.h=this.g=null}add(e,n){const r=Y_.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Y_=new TR(()=>new AR,t=>t.reset());class AR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function SR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function RR(t){he.setTimeout(()=>{throw t},0)}let Wi,Ki=!1,Ch=new IR,J_=()=>{const t=he.Promise.resolve(void 0);Wi=()=>{t.then(PR)}};var PR=()=>{for(var t;t=bR();){try{t.h.call(t.g)}catch(n){RR(n)}var e=Y_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ki=!1};function El(t,e){ot.call(this),this.h=t||1,this.g=e||he,this.j=bt(this.qb,this),this.l=Date.now()}at(El,ot);q=El.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(xh(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){El.$.N.call(this),xh(this),delete this.g};function Oh(t,e,n){if(typeof t=="function")n&&(t=bt(t,n));else if(t&&typeof t.handleEvent=="function")t=bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:he.setTimeout(t,e||0)}function X_(t){t.g=Oh(()=>{t.g=null,t.i&&(t.i=!1,X_(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class CR extends Sr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:X_(this)}N(){super.N(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(t){Sr.call(this),this.h=t,this.g={}}at(Gi,Sr);var lp=[];function Z_(t,e,n,r){Array.isArray(n)||(n&&(lp[0]=n.toString()),n=lp);for(var s=0;s<n.length;s++){var i=H_(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function ey(t){bh(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ah(e)},t),t.g={}}Gi.prototype.N=function(){Gi.$.N.call(this),ey(this)};Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Tl(){this.g=!0}Tl.prototype.Ea=function(){this.g=!1};function xR(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function OR(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function _s(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+DR(t,n)+(r?" "+r:"")})}function kR(t,e){t.info(function(){return"TIMEOUT: "+e})}Tl.prototype.info=function(){};function DR(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Ph(n)}catch{return e}}var ss={},cp=null;function bl(){return cp=cp||new ot}ss.Ta="serverreachability";function ty(t){It.call(this,ss.Ta,t)}at(ty,It);function Qi(t){const e=bl();pt(e,new ty(e))}ss.STAT_EVENT="statevent";function ny(t,e){It.call(this,ss.STAT_EVENT,t),this.stat=e}at(ny,It);function Nt(t){const e=bl();pt(e,new ny(e,t))}ss.Ua="timingevent";function ry(t,e){It.call(this,ss.Ua,t),this.size=e}at(ry,It);function go(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){t()},e)}var Il={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kh(){}kh.prototype.h=null;function up(t){return t.h||(t.h=t.i())}function iy(){}var _o={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Dh(){It.call(this,"d")}at(Dh,It);function Nh(){It.call(this,"c")}at(Nh,It);var du;function Al(){}at(Al,kh);Al.prototype.g=function(){return new XMLHttpRequest};Al.prototype.i=function(){return{}};du=new Al;function yo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gi(this),this.P=NR,t=au?125:void 0,this.V=new El(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oy}function oy(){this.i=null,this.g="",this.h=!1}var NR=45e3,ay={},fu={};q=yo.prototype;q.setTimeout=function(t){this.P=t};function pu(t,e,n){t.L=1,t.A=Rl(zn(e)),t.u=n,t.S=!0,ly(t,null)}function ly(t,e){t.G=Date.now(),vo(t),t.B=zn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),gy(n.i,"t",r),t.o=0,n=t.l.J,t.h=new oy,t.g=Ly(t.l,n?e:null,!t.u),0<t.O&&(t.M=new CR(bt(t.Pa,t,t.g),t.O)),Z_(t.U,t.g,"readystatechange",t.nb),e=t.I?q_(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Qi(),xR(t.j,t.v,t.B,t.m,t.W,t.u)}q.nb=function(t){t=t.target;const e=this.M;e&&wn(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const u=wn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||au||this.g&&(this.h.h||this.g.ja()||pp(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Qi(3):Qi(2)),Sl(this);var n=this.g.da();this.ca=n;t:if(cy(this)){var r=pp(this.g);t="";var s=r.length,i=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),Ai(this);var o="";break t}this.h.i=new he.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,OR(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zi(a)){var c=a;break t}}c=null}if(n=c)_s(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mu(this,n);else{this.i=!1,this.s=3,Nt(12),Lr(this),Ai(this);break e}}this.S?(uy(this,u,o),au&&this.i&&u==3&&(Z_(this.U,this.V,"tick",this.mb),this.V.start())):(_s(this.j,this.m,o,null),mu(this,o)),u==4&&Lr(this),this.i&&!this.J&&(u==4?Dy(this.l,this):(this.i=!1,vo(this)))}else tP(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),Lr(this),Ai(this)}}}catch{}finally{}};function cy(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function uy(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=VR(t,n),s==fu){e==4&&(t.s=4,Nt(14),r=!1),_s(t.j,t.m,null,"[Incomplete Response]");break}else if(s==ay){t.s=4,Nt(15),_s(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else _s(t.j,t.m,s,null),mu(t,s);cy(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Nt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$h(e),e.M=!0,Nt(11))):(_s(t.j,t.m,n,"[Invalid Chunked Response]"),Lr(t),Ai(t))}q.mb=function(){if(this.g){var t=wn(this.g),e=this.g.ja();this.o<e.length&&(Sl(this),uy(this,t,e),this.i&&t!=4&&vo(this))}};function VR(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?fu:(n=Number(e.substring(n,r)),isNaN(n)?ay:(r+=1,r+n>e.length?fu:(e=e.slice(r,r+n),t.o=r+n,e)))}q.cancel=function(){this.J=!0,Lr(this)};function vo(t){t.Y=Date.now()+t.P,hy(t,t.P)}function hy(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=go(bt(t.lb,t),e)}function Sl(t){t.C&&(he.clearTimeout(t.C),t.C=null)}q.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(kR(this.j,this.B),this.L!=2&&(Qi(),Nt(17)),Lr(this),this.s=2,Ai(this)):hy(this,this.Y-t)};function Ai(t){t.l.H==0||t.J||Dy(t.l,t)}function Lr(t){Sl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,xh(t.V),ey(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function mu(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gu(n.i,t))){if(!t.K&&gu(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Oa(n),Ol(n);else break e;Uh(n),Nt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=go(bt(n.ib,n),6e3));if(1>=vy(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Fr(n,11)}else if((t.K||n.g==t)&&Oa(n),!zi(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Vh(i,i.h),i.h=null))}if(r.F){const T=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,je(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=My(r,r.J?r.pa:null,r.Y),o.K){wy(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Sl(a),vo(a)),r.g=o}else Oy(r);0<n.j.length&&kl(n)}else c[0]!="stop"&&c[0]!="close"||Fr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Fr(n,7):Fh(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Qi(4)}catch{}}function MR(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(_l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function LR(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_l(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function dy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_l(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=LR(t),r=MR(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Wr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Wr){this.h=t.h,Ca(this,t.j),this.s=t.s,this.g=t.g,xa(this,t.m),this.l=t.l;var e=t.i,n=new Yi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),hp(this,n),this.o=t.o}else t&&(e=String(t).match(fy))?(this.h=!1,Ca(this,e[1]||"",!0),this.s=hi(e[2]||""),this.g=hi(e[3]||"",!0),xa(this,e[4]),this.l=hi(e[5]||"",!0),hp(this,e[6]||"",!0),this.o=hi(e[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Wr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(di(e,dp,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(di(e,dp,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(di(n,n.charAt(0)=="/"?jR:$R,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",di(n,qR)),t.join("")};function zn(t){return new Wr(t)}function Ca(t,e,n){t.j=n?hi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function hp(t,e,n){e instanceof Yi?(t.i=e,zR(t.i,t.h)):(n||(e=di(e,BR)),t.i=new Yi(e,t.h))}function je(t,e,n){t.i.set(e,n)}function Rl(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function hi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function di(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,UR),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function UR(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var dp=/[#\/\?@]/g,$R=/[#\?:]/g,jR=/[#\?]/g,BR=/[#\?@]/g,qR=/#/g;function Yi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Rr(t){t.g||(t.g=new Map,t.h=0,t.i&&FR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=Yi.prototype;q.add=function(t,e){Rr(this),this.i=null,t=Gs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function py(t,e){Rr(t),e=Gs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function my(t,e){return Rr(t),e=Gs(t,e),t.g.has(e)}q.forEach=function(t,e){Rr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Rr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Rr(this);let e=[];if(typeof t=="string")my(this,t)&&(e=e.concat(this.g.get(Gs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Rr(this),this.i=null,t=Gs(this,t),my(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function gy(t,e,n){py(t,e),0<n.length&&(t.i=null,t.g.set(Gs(t,e),Eh(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Gs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function zR(t,e){e&&!t.j&&(Rr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(py(this,r),gy(this,s,n))},t)),t.j=e}var HR=class{constructor(t,e){this.g=t,this.map=e}};function _y(t){this.l=t||WR,he.PerformanceNavigationTiming?(t=he.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(he.g&&he.g.Ka&&he.g.Ka()&&he.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var WR=10;function yy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function vy(t){return t.h?1:t.g?t.g.size:0}function gu(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Vh(t,e){t.g?t.g.add(e):t.h=e}function wy(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}_y.prototype.cancel=function(){if(this.i=Ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ey(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Eh(t.i)}var KR=class{stringify(t){return he.JSON.stringify(t,void 0)}parse(t){return he.JSON.parse(t,void 0)}};function GR(){this.g=new KR}function QR(t,e,n){const r=n||"";try{dy(t,function(s,i){let o=s;po(s)&&(o=Ph(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function YR(t,e){const n=new Tl;if(he.Image){const r=new Image;r.onload=Fo($o,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fo($o,n,r,"TestLoadImage: error",!1,e),r.onabort=Fo($o,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fo($o,n,r,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function $o(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Pl(t){this.l=t.ec||null,this.j=t.ob||!1}at(Pl,kh);Pl.prototype.g=function(){return new Cl(this.l,this.j)};Pl.prototype.i=function(t){return function(){return t}}({});function Cl(t,e){ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Mh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(Cl,ot);var Mh=0;q=Cl.prototype;q.open=function(t,e){if(this.readyState!=Mh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ji(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||he).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wo(this)),this.readyState=Mh};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ji(this)),this.g&&(this.readyState=3,Ji(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof he.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ty(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Ty(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?wo(this):Ji(this),this.readyState==3&&Ty(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,wo(this))};q.Ya=function(t){this.g&&(this.response=t,wo(this))};q.ka=function(){this.g&&wo(this)};function wo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ji(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ji(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var JR=he.JSON.parse;function We(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=by,this.L=this.M=!1}at(We,ot);var by="",XR=/^https?$/i,ZR=["POST","PUT"];q=We.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():du.g(),this.C=this.u?up(this.u):up(du),this.g.onreadystatechange=bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){fp(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=he.FormData&&t instanceof he.FormData,!(0<=U_(ZR,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sy(this),0<this.B&&((this.L=eP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bt(this.ua,this)):this.A=Oh(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){fp(this,i)}};function eP(t){return Ns&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof wh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function fp(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Iy(t),xl(t)}function Iy(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),xl(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xl(this,!0)),We.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?Ay(this):this.kb())};q.kb=function(){Ay(this)};function Ay(t){if(t.h&&typeof wh<"u"&&(!t.C[1]||wn(t)!=4||t.da()!=2)){if(t.v&&wn(t)==4)Oh(t.La,0,t);else if(pt(t,"readystatechange"),wn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(fy)[1]||null;!s&&he.self&&he.self.location&&(s=he.self.location.protocol.slice(0,-1)),r=!XR.test(s?s.toLowerCase():"")}n=r}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var i=2<wn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",Iy(t)}}finally{xl(t)}}}}function xl(t,e){if(t.g){Sy(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Sy(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(he.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function wn(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),JR(e)}};function pp(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case by:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function tP(t){const e={};t=(t.g&&2<=wn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(zi(t[r]))continue;var n=SR(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}vR(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Ry(t){let e="";return bh(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Lh(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ry(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):je(t,e,n))}function ii(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Py(t){this.Ga=0,this.j=[],this.l=new Tl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ii("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ii("baseRetryDelayMs",5e3,t),this.hb=ii("retryDelaySeedMs",1e4,t),this.eb=ii("forwardChannelMaxRetries",2,t),this.xa=ii("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _y(t&&t.concurrentRequestLimit),this.Ja=new GR,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=Py.prototype;q.ra=8;q.H=1;function Fh(t){if(Cy(t),t.H==3){var e=t.W++,n=zn(t.I);if(je(n,"SID",t.K),je(n,"RID",e),je(n,"TYPE","terminate"),Eo(t,n),e=new yo(t,t.l,e),e.L=2,e.A=Rl(zn(n)),n=!1,he.navigator&&he.navigator.sendBeacon)try{n=he.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&he.Image&&(new Image().src=e.A,n=!0),n||(e.g=Ly(e.l,null),e.g.ha(e.A)),e.G=Date.now(),vo(e)}Vy(t)}function Ol(t){t.g&&($h(t),t.g.cancel(),t.g=null)}function Cy(t){Ol(t),t.u&&(he.clearTimeout(t.u),t.u=null),Oa(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&he.clearTimeout(t.m),t.m=null)}function kl(t){if(!yy(t.i)&&!t.m){t.m=!0;var e=t.Na;Wi||J_(),Ki||(Wi(),Ki=!0),Ch.add(e,t),t.C=0}}function nP(t,e){return vy(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=go(bt(t.Na,t,e),Ny(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new yo(this,this.l,t);let i=this.s;if(this.U&&(i?(i=q_(i),z_(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xy(this,s,e),n=zn(this.I),je(n,"RID",t),je(n,"CVER",22),this.F&&je(n,"X-HTTP-Session-Id",this.F),Eo(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Ry(i)))+"&"+e:this.o&&Lh(n,this.o,i)),Vh(this.i,s),this.bb&&je(n,"TYPE","init"),this.P?(je(n,"$req",e),je(n,"SID","null"),s.aa=!0,pu(s,n,null)):pu(s,n,e),this.H=2}}else this.H==3&&(t?mp(this,t):this.j.length==0||yy(this.i)||mp(this))};function mp(t,e){var n;e?n=e.m:n=t.W++;const r=zn(t.I);je(r,"SID",t.K),je(r,"RID",n),je(r,"AID",t.V),Eo(t,r),t.o&&t.s&&Lh(r,t.o,t.s),n=new yo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=xy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Vh(t.i,n),pu(n,r,e)}function Eo(t,e){t.na&&bh(t.na,function(n,r){je(e,r,n)}),t.h&&dy({},function(n,r){je(e,r,n)})}function xy(t,e,n){n=Math.min(t.j.length,n);var r=t.h?bt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{QR(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Oy(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Wi||J_(),Ki||(Wi(),Ki=!0),Ch.add(e,t),t.A=0}}function Uh(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=go(bt(t.Ma,t),Ny(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,ky(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=go(bt(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nt(10),Ol(this),ky(this))};function $h(t){t.B!=null&&(he.clearTimeout(t.B),t.B=null)}function ky(t){t.g=new yo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=zn(t.wa);je(e,"RID","rpc"),je(e,"SID",t.K),je(e,"AID",t.V),je(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&je(e,"TO",t.qa),je(e,"TYPE","xmlhttp"),Eo(t,e),t.o&&t.s&&Lh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Rl(zn(e)),n.u=null,n.S=!0,ly(n,t)}q.ib=function(){this.v!=null&&(this.v=null,Ol(this),Uh(this),Nt(19))};function Oa(t){t.v!=null&&(he.clearTimeout(t.v),t.v=null)}function Dy(t,e){var n=null;if(t.g==e){Oa(t),$h(t),t.g=null;var r=2}else if(gu(t.i,e))n=e.F,wy(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=bl(),pt(r,new ry(r,n)),kl(t)}else Oy(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&nP(t,e)||r==2&&Uh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Fr(t,5);break;case 4:Fr(t,10);break;case 3:Fr(t,6);break;default:Fr(t,2)}}}function Ny(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Fr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=bt(t.pb,t);n||(n=new Wr("//www.google.com/images/cleardot.gif"),he.location&&he.location.protocol=="http"||Ca(n,"https"),Rl(n)),YR(n.toString(),r)}else Nt(2);t.H=0,t.h&&t.h.za(e),Vy(t),Cy(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Nt(2)):(this.l.info("Failed to ping google.com"),Nt(1))};function Vy(t){if(t.H=0,t.ma=[],t.h){const e=Ey(t.i);(e.length!=0||t.j.length!=0)&&(ip(t.ma,e),ip(t.ma,t.j),t.i.i.length=0,Eh(t.j),t.j.length=0),t.h.ya()}}function My(t,e,n){var r=n instanceof Wr?zn(n):new Wr(n);if(r.g!="")e&&(r.g=e+"."+r.g),xa(r,r.m);else{var s=he.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Wr(null);r&&Ca(i,r),e&&(i.g=e),s&&xa(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&je(r,n,e),je(r,"VER",t.ra),Eo(t,r),r}function Ly(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new We(new Pl({ob:n})):new We(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function Fy(){}q=Fy.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function ka(){if(Ns&&!(10<=Number(mR)))throw Error("Environmental error: no available transport.")}ka.prototype.g=function(t,e){return new Qt(t,e)};function Qt(t,e){ot.call(this),this.g=new Py(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!zi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Qs(this)}at(Qt,ot);Qt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Nt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=My(t,null,t.Y),kl(t)};Qt.prototype.close=function(){Fh(this.g)};Qt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ph(t),t=n);e.j.push(new HR(e.fb++,t)),e.H==3&&kl(e)};Qt.prototype.N=function(){this.g.h=null,delete this.j,Fh(this.g),delete this.g,Qt.$.N.call(this)};function Uy(t){Dh.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(Uy,Dh);function $y(){Nh.call(this),this.status=1}at($y,Nh);function Qs(t){this.g=t}at(Qs,Fy);Qs.prototype.Ba=function(){pt(this.g,"a")};Qs.prototype.Aa=function(t){pt(this.g,new Uy(t))};Qs.prototype.za=function(t){pt(this.g,new $y)};Qs.prototype.ya=function(){pt(this.g,"b")};function rP(){this.blockSize=-1}function un(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(un,rP);un.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sc(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}un.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Sc(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Sc(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Sc(this,r),s=0;break}}this.h=s,this.i+=e};un.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ke(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var sP={};function jh(t){return-128<=t&&128>t?dR(t,function(e){return new ke([e|0],0>e?-1:0)}):new ke([t|0],0>t?-1:0)}function En(t){if(isNaN(t)||!isFinite(t))return Ss;if(0>t)return ht(En(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=_u;return new ke(e,0)}function jy(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ht(jy(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=En(Math.pow(e,8)),r=Ss,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=En(Math.pow(e,i)),r=r.R(i).add(En(o))):(r=r.R(n),r=r.add(En(o)))}return r}var _u=4294967296,Ss=jh(0),yu=jh(1),gp=jh(16777216);q=ke.prototype;q.ea=function(){if(Jt(this))return-ht(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:_u+r)*e,e*=_u}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if($n(this))return"0";if(Jt(this))return"-"+ht(this).toString(t);for(var e=En(Math.pow(t,6)),n=this,r="";;){var s=Na(n,e).g;n=Da(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,$n(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function $n(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Jt(t){return t.h==-1}q.X=function(t){return t=Da(this,t),Jt(t)?-1:$n(t)?0:1};function ht(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ke(n,~t.h).add(yu)}q.abs=function(){return Jt(this)?ht(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ke(n,n[n.length-1]&-2147483648?-1:0)};function Da(t,e){return t.add(ht(e))}q.R=function(t){if($n(this)||$n(t))return Ss;if(Jt(this))return Jt(t)?ht(this).R(ht(t)):ht(ht(this).R(t));if(Jt(t))return ht(this.R(ht(t)));if(0>this.X(gp)&&0>t.X(gp))return En(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,jo(n,2*r+2*s),n[2*r+2*s+1]+=i*l,jo(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,jo(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,jo(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ke(n,0)};function jo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function oi(t,e){this.g=t,this.h=e}function Na(t,e){if($n(e))throw Error("division by zero");if($n(t))return new oi(Ss,Ss);if(Jt(t))return e=Na(ht(t),e),new oi(ht(e.g),ht(e.h));if(Jt(e))return e=Na(t,ht(e)),new oi(ht(e.g),e.h);if(30<t.g.length){if(Jt(t)||Jt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=yu,r=e;0>=r.X(t);)n=_p(n),r=_p(r);var s=hs(n,1),i=hs(r,1);for(r=hs(r,2),n=hs(n,2);!$n(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=hs(r,1),n=hs(n,1)}return e=Da(t,s.R(e)),new oi(s,e)}for(s=Ss;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=En(n),o=i.R(e);Jt(o)||0<o.X(t);)n-=r,i=En(n),o=i.R(e);$n(i)&&(i=yu),s=s.add(i),t=Da(t,o)}return new oi(s,t)}q.gb=function(t){return Na(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ke(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ke(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ke(n,this.h^t.h)};function _p(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ke(n,t.h)}function hs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ke(s,t.h)}ka.prototype.createWebChannel=ka.prototype.g;Qt.prototype.send=Qt.prototype.u;Qt.prototype.open=Qt.prototype.m;Qt.prototype.close=Qt.prototype.close;Il.NO_ERROR=0;Il.TIMEOUT=8;Il.HTTP_ERROR=6;sy.COMPLETE="complete";iy.EventType=_o;_o.OPEN="a";_o.CLOSE="b";_o.ERROR="c";_o.MESSAGE="d";ot.prototype.listen=ot.prototype.O;We.prototype.listenOnce=We.prototype.P;We.prototype.getLastError=We.prototype.Sa;We.prototype.getLastErrorCode=We.prototype.Ia;We.prototype.getStatus=We.prototype.da;We.prototype.getResponseJson=We.prototype.Wa;We.prototype.getResponseText=We.prototype.ja;We.prototype.send=We.prototype.ha;We.prototype.setWithCredentials=We.prototype.Oa;un.prototype.digest=un.prototype.l;un.prototype.reset=un.prototype.reset;un.prototype.update=un.prototype.j;ke.prototype.add=ke.prototype.add;ke.prototype.multiply=ke.prototype.R;ke.prototype.modulo=ke.prototype.gb;ke.prototype.compare=ke.prototype.X;ke.prototype.toNumber=ke.prototype.ea;ke.prototype.toString=ke.prototype.toString;ke.prototype.getBits=ke.prototype.D;ke.fromNumber=En;ke.fromString=jy;var iP=function(){return new ka},oP=function(){return bl()},Rc=Il,aP=sy,lP=ss,yp={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Bo=iy,cP=We,uP=un,Rs=ke;const vp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ys="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new ah("@firebase/firestore");function ai(){return Xr.logLevel}function B(t,...e){if(Xr.logLevel<=we.DEBUG){const n=e.map(Bh);Xr.debug(`Firestore (${Ys}): ${t}`,...n)}}function Cn(t,...e){if(Xr.logLevel<=we.ERROR){const n=e.map(Bh);Xr.error(`Firestore (${Ys}): ${t}`,...n)}}function Vs(t,...e){if(Xr.logLevel<=we.WARN){const n=e.map(Bh);Xr.warn(`Firestore (${Ys}): ${t}`,...n)}}function Bh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+t;throw Cn(e),new Error(e)}function Le(t,e){t||ue()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class dP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fP{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new By(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new wt(e)}}class pP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _P{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new gP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=yP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function Ms(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new et(0,0))}static max(){return new de(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Xi{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const vP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Xi{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return vP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Be.fromString(e))}static fromName(e){return new ee(Be.fromString(e).popFirst(5))}static empty(){return new ee(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Be(e.slice()))}}function wP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new wr(s,ee.empty(),e)}function EP(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(de.min(),ee.empty(),-1)}static max(){return new wr(de.max(),ee.empty(),-1)}}function TP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==bP)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(s=>s?x.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new x((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new x((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Bn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Si(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=zh(r.target.error);this.V.reject(new Si(e,s))}}static open(e,n,r,s){try{return new qh(n,e.transaction(s,r))}catch(i){throw new Si(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SP(n)}}class Ur{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Ur.S(Xe())===12.2&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return B("SimpleDb","Removing database:",e),Nr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Zg())return!1;if(Ur.C())return!0;const e=Xe(),n=Ur.S(e),r=0<n&&n<10,s=Ur.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Si(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Si(e,o))},s.onupgradeneeded=i=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=qh.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),x.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(B("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class AP{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Nr(this.k.delete())}}class Si extends K{constructor(e,n){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function bo(t){return t.name==="IndexedDbTransactionError"}class SP{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(B("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nr(r)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),Nr(this.store.add(e))}get(e){return Nr(this.store.get(e)).next(n=>(n===void 0&&(n=null),B("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),Nr(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),Nr(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new x((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new x((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){B("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new x((r,s)=>{n.onerror=i=>{const o=zh(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new x((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new AP(a),c=n(a.primaryKey,a.value,l);if(c instanceof x){const u=c.catch(h=>(l.done(),x.reject(h)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Nr(t){return new x((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=zh(r.target.error);n(s)}})}let wp=!1;function zh(t){const e=Ur.S(Xe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wp||(wp=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Hh._e=-1;function Dl(t){return t==null}function Va(t){return t===0&&1/t==-1/0}function RP(t){return typeof t=="number"&&Number.isInteger(t)&&!Va(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qo(this.root,e,this.comparator,!0)}}class qo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ct.RED,this.left=s??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ct(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tp(this.data.getIterator())}getIteratorFrom(e){return new Tp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Tp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new mt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hy("Invalid base64 string: "+i):i}}(e);return new St(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const PP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(Le(!!t),typeof t=="string"){let e=0;const n=PP.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Kh(t){const e=t.mapValue.fields.__previous_value__;return Wh(e)?Kh(e):e}function Zi(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wh(t)?4:xP(t)?9007199254740991:10:ue()}function xn(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zi(t).isEqual(Zi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Er(s.timestampValue),a=Er(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zr(s.bytesValue).isEqual(Zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),a=Ye(i.doubleValue);return o===a?Va(o)===Va(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ms(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Ep(o)!==Ep(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!xn(o[l],a[l])))return!1;return!0}(t,e);default:return ue()}}function to(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=es(t),r=es(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return bp(t.timestampValue,e.timestampValue);case 4:return bp(Zi(t),Zi(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Zr(i),l=Zr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Pe(a[c],l[c]);if(u!==0)return u}return Pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Pe(Ye(i.latitude),Ye(o.latitude));return a!==0?a:Pe(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Ls(a[c],l[c]);if(u)return u}return Pe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===zo.mapValue&&o===zo.mapValue)return 0;if(i===zo.mapValue)return 1;if(o===zo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Pe(l[h],u[h]);if(d!==0)return d;const f=Ls(a[l[h]],c[u[h]]);if(f!==0)return f}return Pe(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ue()}}function bp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Er(t),r=Er(e),s=Pe(n.seconds,r.seconds);return s!==0?s:Pe(n.nanos,r.nanos)}function Fs(t){return vu(t)}function vu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=vu(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${vu(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function Ip(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wu(t){return!!t&&"integerValue"in t}function Gh(t){return!!t&&"arrayValue"in t}function Ap(t){return!!t&&"nullValue"in t}function Sp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oa(t){return!!t&&"mapValue"in t}function Ri(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ri(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ri(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ri(n)}setAll(e){let n=ft.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ri(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());oa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];oa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(Ri(this.value))}}function Wy(t){const e=[];return is(t.fields,(n,r)=>{const s=new ft([n]);if(oa(r)){const i=Wy(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Et(e,0,de.min(),de.min(),de.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,de.min(),de.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,de.min(),de.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.position=e,this.inclusive=n}}function Rp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n="asc"){this.field=e,this.dir=n}}function OP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{}class Je extends Ky{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DP(e,n,r):n==="array-contains"?new MP(e,r):n==="in"?new LP(e,r):n==="not-in"?new FP(e,r):n==="array-contains-any"?new UP(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NP(e,r):new VP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends Ky{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new hn(e,n)}matches(e){return Gy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Gy(t){return t.op==="and"}function Qy(t){return kP(t)&&Gy(t)}function kP(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Eu(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(Qy(t))return t.filters.map(e=>Eu(e)).join(",");{const e=t.filters.map(n=>Eu(n)).join(",");return`${t.op}(${e})`}}function Yy(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Yy(o,s.filters[a]),!0):!1}(t,e):void ue()}function Jy(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(Jy).join(" ,")+"}"}(t):"Filter"}class DP extends Je{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class NP extends Je{constructor(e,n){super(e,"in",n),this.keys=Xy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VP extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Xy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xy(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class MP extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gh(n)&&to(n.arrayValue,this.value)}}class LP extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&to(this.value.arrayValue,n)}}class FP extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!to(this.value.arrayValue,n)}}class UP extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>to(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Cp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $P(t,e,n,r,s,i,o)}function Qh(t){const e=pe(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eu(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ce=n}return e.ce}function Yh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pp(t.startAt,e.startAt)&&Pp(t.endAt,e.endAt)}function Tu(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function jP(t,e,n,r,s,i,o,a){return new Io(t,e,n,r,s,i,o,a)}function Zy(t){return new Io(t)}function xp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ev(t){return t.collectionGroup!==null}function Pi(t){const e=pe(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mt(ft.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new La(i,r))}),n.has(ft.keyField().canonicalString())||e.le.push(new La(ft.keyField(),r))}return e.le}function An(t){const e=pe(t);return e.he||(e.he=BP(e,Pi(t))),e.he}function BP(t,e){if(t.limitType==="F")return Cp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new La(s.field,i)});const n=t.endAt?new Ma(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ma(t.startAt.position,t.startAt.inclusive):null;return Cp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bu(t,e){const n=t.filters.concat([e]);return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Iu(t,e,n){return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nl(t,e){return Yh(An(t),An(e))&&t.limitType===e.limitType}function tv(t){return`${Qh(An(t))}|lt:${t.limitType}`}function ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Jy(s)).join(", ")}]`),Dl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fs(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Vl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Rp(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Pi(r),s)||r.endAt&&!function(o,a,l){const c=Rp(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Pi(r),s))}(t,e)}function qP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nv(t){return(e,n)=>{let r=!1;for(const s of Pi(t)){const i=zP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zP(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ls(l,c):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return zy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new He(ee.comparator);function Hn(){return HP}const rv=new He(ee.comparator);function fi(...t){let e=rv;for(const n of t)e=e.insert(n.key,n);return e}function sv(t){let e=rv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $r(){return Ci()}function iv(){return Ci()}function Ci(){return new Js(t=>t.toString(),(t,e)=>t.isEqual(e))}const WP=new He(ee.comparator),KP=new mt(ee.comparator);function _e(...t){let e=KP;for(const n of t)e=e.add(n);return e}const GP=new mt(Pe);function QP(){return GP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Va(e)?"-0":e}}function av(t){return{integerValue:""+t}}function YP(t,e){return RP(e)?av(e):ov(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this._=void 0}}function JP(t,e,n){return t instanceof Fa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wh(i)&&(i=Kh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof no?cv(t,e):t instanceof ro?uv(t,e):function(s,i){const o=lv(s,i),a=Op(o)+Op(s.Ie);return wu(o)&&wu(s.Ie)?av(a):ov(s.serializer,a)}(t,e)}function XP(t,e,n){return t instanceof no?cv(t,e):t instanceof ro?uv(t,e):n}function lv(t,e){return t instanceof Ua?function(r){return wu(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fa extends Ml{}class no extends Ml{constructor(e){super(),this.elements=e}}function cv(t,e){const n=hv(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ro extends Ml{constructor(e){super(),this.elements=e}}function uv(t,e){let n=hv(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Ua extends Ml{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Op(t){return Ye(t.integerValue||t.doubleValue)}function hv(t){return Gh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof no&&s instanceof no||r instanceof ro&&s instanceof ro?Ms(r.elements,s.elements,xn):r instanceof Ua&&s instanceof Ua?xn(r.Ie,s.Ie):r instanceof Fa&&s instanceof Fa}(t.transform,e.transform)}class eC{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ll{}function dv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pv(t.key,Sn.none()):new Ao(t.key,t.data,Sn.none());{const n=t.data,r=jt.empty();let s=new mt(ft.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Pr(t.key,r,new Wt(s.toArray()),Sn.none())}}function tC(t,e,n){t instanceof Ao?function(s,i,o){const a=s.value.clone(),l=Dp(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pr?function(s,i,o){if(!aa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Dp(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(fv(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xi(t,e,n,r){return t instanceof Ao?function(i,o,a,l){if(!aa(i.precondition,o))return a;const c=i.value.clone(),u=Np(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pr?function(i,o,a,l){if(!aa(i.precondition,o))return a;const c=Np(i.fieldTransforms,l,o),u=o.data;return u.setAll(fv(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return aa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function nC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=lv(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function kp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ms(r,s,(i,o)=>ZP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ao extends Ll{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pr extends Ll{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Dp(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,XP(o,a,n[s]))}return r}function Np(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,JP(i,o,e))}return r}class pv extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=dv(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,r)=>kp(n,r))&&Ms(this.baseMutations,e.baseMutations,(n,r)=>kp(n,r))}}class Jh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return WP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,be;function aC(t){switch(t){default:return ue();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function mv(t){if(t===void 0)return Cn("GRPC error has no .code"),C.UNKNOWN;switch(t){case Qe.OK:return C.OK;case Qe.CANCELLED:return C.CANCELLED;case Qe.UNKNOWN:return C.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return C.INTERNAL;case Qe.UNAVAILABLE:return C.UNAVAILABLE;case Qe.UNAUTHENTICATED:return C.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case Qe.NOT_FOUND:return C.NOT_FOUND;case Qe.ALREADY_EXISTS:return C.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return C.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case Qe.ABORTED:return C.ABORTED;case Qe.OUT_OF_RANGE:return C.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return C.UNIMPLEMENTED;case Qe.DATA_LOSS:return C.DATA_LOSS;default:return ue()}}(be=Qe||(Qe={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Rs([4294967295,4294967295],0);function Vp(t){const e=lC().encode(t),n=new uP;return n.update(e),new Uint8Array(n.digest())}function Mp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([s,i],0)]}class Xh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pi(`Invalid padding: ${n}`);if(r<0)throw new pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Rs.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(Rs.fromNumber(r)));return s.compare(cC)===1&&(s=new Rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Vp(e),[r,s]=Mp(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xh(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Vp(e),[r,s]=Mp(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,So.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fl(de.min(),s,new He(Pe),Hn(),_e())}}class So{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new So(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class gv{constructor(e,n){this.targetId=e,this.fe=n}}class _v{constructor(e,n,r=St.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lp{constructor(){this.ge=0,this.pe=Up(),this.ye=St.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=_e(),n=_e(),r=_e();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new So(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Up()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Le(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class uC{constructor(e){this.Be=e,this.ke=new Map,this.qe=Hn(),this.Qe=Fp(),this.Ke=new He(Pe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Tu(i))if(r===0){const o=new ee(i.path);this.We(n,o,Et.newNoDocument(o,de.min()))}else Le(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Zr(r).toUint8Array()}catch(l){if(l instanceof Hy)return Vs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xh(o,s,i)}catch(l){return Vs(l instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Tu(a.target)){const l=new ee(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Et.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=_e();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Fl(e,n,this.Ke,this.qe,r);return this.qe=Hn(),this.Qe=Fp(),this.Ke=new He(Pe),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Lp,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new mt(Pe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Lp),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Fp(){return new He(ee.comparator)}function Up(){return new He(ee.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},dC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class pC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Au(t,e){return t.useProto3Json||Dl(e)?e:{value:e}}function $a(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mC(t,e){return $a(t,e.toTimestamp())}function Rn(t){return Le(!!t),de.fromTimestamp(function(n){const r=Er(n);return new et(r.seconds,r.nanos)}(t))}function Zh(t,e){return Su(t,e).canonicalString()}function Su(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vv(t){const e=Be.fromString(t);return Le(Iv(e)),e}function Ru(t,e){return Zh(t.databaseId,e.path)}function Pc(t,e){const n=vv(e);if(n.get(1)!==t.databaseId.projectId)throw new K(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(Ev(n))}function wv(t,e){return Zh(t.databaseId,e)}function gC(t){const e=vv(t);return e.length===4?Be.emptyPath():Ev(e)}function Pu(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ev(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $p(t,e,n){return{name:Ru(t,e),fields:n.value.mapValue.fields}}function _C(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Le(u===void 0||typeof u=="string"),St.fromBase64String(u||"")):(Le(u===void 0||u instanceof Uint8Array),St.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?C.UNKNOWN:mv(c.code);return new K(u,c.message||"")}(o);n=new _v(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Pc(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):de.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=Et.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new la(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Pc(t,r.document),i=r.readTime?Rn(r.readTime):de.min(),o=Et.newNoDocument(s,i),a=r.removedTargetIds||[];n=new la([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Pc(t,r.document),i=r.removedTargetIds||[];n=new la([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new oC(s,i),a=r.targetId;n=new gv(a,o)}}return n}function yC(t,e){let n;if(e instanceof Ao)n={update:$p(t,e.key,e.value)};else if(e instanceof pv)n={delete:Ru(t,e.key)};else if(e instanceof Pr)n={update:$p(t,e.key,e.data),updateMask:RC(e.fieldMask)};else{if(!(e instanceof rC))return ue();n={verify:Ru(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Fa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof no)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ro)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:mC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function vC(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(de.min())&&(o=Rn(i)),new eC(o,s.transformResults||[])}(n,e))):[]}function wC(t,e){return{documents:[wv(t,e.path)]}}function EC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wv(t,s);const i=function(c){if(c.length!==0)return bv(hn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:ms(d.field),direction:IC(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Au(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function TC(t){let e=gC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const d=Tv(h);return d instanceof hn&&Qy(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(y){return new La(gs(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Dl(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Ma(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Ma(f,d)}(n.endAt)),jP(e,s,o,i,a,"F",l,c)}function bC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Tv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gs(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gs(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gs(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gs(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(gs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>Tv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function IC(t){return hC[t]}function AC(t){return dC[t]}function SC(t){return fC[t]}function ms(t){return{fieldPath:t.canonicalString()}}function gs(t){return ft.fromServerFormat(t.fieldPath)}function bv(t){return t instanceof Je?function(n){if(n.op==="=="){if(Sp(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(Ap(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sp(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(Ap(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:AC(n.op),value:n.value}}}(t):t instanceof hn?function(n){const r=n.getFilters().map(s=>bv(s));return r.length===1?r[0]:{compositeFilter:{op:SC(n.op),filters:r}}}(t):ue()}function RC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Iv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,s,i=de.min(),o=de.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.ct=e}}function CC(t){const e=TC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this._n=new OC}addToCollectionParentIndex(e,n){return this._n.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(wr.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class OC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Us(0)}static Ln(){return new Us(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.changes=new Js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xi(r.mutation,s,Wt.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const s=$r();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=fi();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Hn();const o=Ci(),a=function(){return Ci()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Pr)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),xi(u.mutation,c,u.mutation.getFieldMask(),et.now())):o.set(c.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new DC(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ci();let s=new He((o,a)=>o-a),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Wt.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||_e()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=iv();u.forEach(d=>{if(!i.has(d)){const f=dv(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ev(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):x.resolve($r());let a=-1,l=i;return o.next(c=>x.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?x.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,_e())).next(u=>({batchId:a,changes:sv(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=fi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=fi();return this.indexManager.getCollectionParents(e,i).next(a=>x.forEach(a,l=>{const c=function(h,d){return new Io(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Et.newInvalidDocument(u)))});let a=fi();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&xi(u.mutation,c,Wt.empty(),et.now()),Vl(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return x.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:CC(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.overlays=new He(ee.comparator),this.hr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$r();return x.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const s=$r(),i=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return x.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new He((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=$r(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=$r(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return x.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iC(n,r));let i=this.hr.get(n);i===void 0&&(i=_e(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.Pr=new mt(st.Ir),this.Tr=new mt(st.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new st(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ee(new Be([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ee(new Be([])),r=new st(n,e),s=new st(n,e+1);let i=_e();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new st(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ee.comparator(e.key,n.key)||Pe(e.pr,n.pr)}static Er(e,n){return Pe(e.pr,n.pr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new mt(st.Ir)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sC(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new st(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(Pe);return n.forEach(s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new st(new ee(i),0);let a=new mt(Pe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),x.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new st(n,0),s=this.wr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.vr=e,this.docs=function(){return new He(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hn();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||TP(EP(u),r)<=0||(s.has(u.key)||Vl(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Fr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UC(this)}getSize(e){return x.resolve(this.size)}}class UC extends kC{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.persistence=e,this.Mr=new Js(n=>Qh(n),Yh),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ed,this.targetCount=0,this.Lr=Us.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),x.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.qn(n),x.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),x.waitFor(i).next(()=>s)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),x.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.Br={},this.overlays={},this.kr=new Hh(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new $C(this),this.indexManager=new xC,this.remoteDocumentCache=function(s){return new FC(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new PC(n),this.$r=new VC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new LC(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const s=new BC(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class BC extends IP{constructor(e){super(),this.currentSequenceNumber=e}}class td{constructor(e){this.persistence=e,this.zr=new ed,this.jr=null}static Hr(e){return new td(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),x.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{const s=ee.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return x.or([()=>x.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Sb()?8:Ur.v(Xe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new qC;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(ai()<=we.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(ai()<=we.DEBUG&&B("QueryEngine","Query:",ps(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(ai()<=we.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):x.resolve())}ji(e,n){if(xp(n))return x.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Iu(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=_e(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Iu(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return xp(n)||s.isEqual(de.min())?x.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?x.resolve(null):(ai()<=we.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ps(n)),this.es(e,o,n,wP(s,-1)).next(a=>a))})}Zi(e,n){let r=new mt(nv(e));return n.forEach((s,i)=>{Vl(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return ai()<=we.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ps(n)),this.zi.getDocumentsMatchingQuery(e,n,wr.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new He(Pe),this.rs=new Js(i=>Qh(i),Yh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NC(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function WC(t,e,n,r){return new HC(t,e,n,r)}async function Av(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=_e();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function KC(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=x.resolve();return d.forEach(y=>{f=f.next(()=>u.getEntry(l,y)).next(T=>{const E=c.docVersions.get(y);Le(E!==null),T.version.compareTo(E)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),u.addEntry(T)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Sv(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function GC(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(St.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),s=s.insert(h,f),function(T,E,R){return T.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(i,f))});let l=Hn(),c=_e();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(QC(i,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(de.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return x.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function QC(t,e,n){let r=_e(),s=_e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Hn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function YC(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JC(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,x.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Cu(t,e,n){const r=pe(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!bo(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function jp(t,e,n){const r=pe(t);let s=de.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=pe(l),d=h.rs.get(u);return d!==void 0?x.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,An(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:_e())).next(a=>(XC(r,qP(e),a),{documents:a,hs:i})))}function XC(t,e,n){let r=t.ss.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class Bp{constructor(){this.activeTargetIds=QP()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZC{constructor(){this.no=new Bp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Bp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho=null;function Cc(){return Ho===null?Ho=function(){return 268435456+Math.round(2147483648*Math.random())}():Ho++,"0x"+Ho.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class r1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Cc(),l=this.bo(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(B("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Vs("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ys}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=t1[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=Cc();return new Promise((o,a)=>{const l=new cP;l.setWithCredentials(!0),l.listenOnce(aP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rc.NO_ERROR:const u=l.getResponseJson();B(vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Rc.TIMEOUT:B(vt,`RPC '${e}' ${i} timed out`),a(new K(C.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const h=l.getStatus();if(B(vt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const y=function(E){const R=E.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(R)>=0?R:C.UNKNOWN}(f.status);a(new K(y,f.message))}else a(new K(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(C.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{B(vt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);B(vt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=Cc(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iP(),a=oP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");B(vt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const y=new n1({lo:E=>{f?B(vt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(d||(B(vt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),B(vt,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},ho:()=>h.close()}),T=(E,R,O)=>{E.listen(R,L=>{try{O(L)}catch(z){setTimeout(()=>{throw z},0)}})};return T(h,Bo.EventType.OPEN,()=>{f||B(vt,`RPC '${e}' stream ${s} transport opened.`)}),T(h,Bo.EventType.CLOSE,()=>{f||(f=!0,B(vt,`RPC '${e}' stream ${s} transport closed`),y.Vo())}),T(h,Bo.EventType.ERROR,E=>{f||(f=!0,Vs(vt,`RPC '${e}' stream ${s} transport errored:`,E),y.Vo(new K(C.UNAVAILABLE,"The operation could not be completed")))}),T(h,Bo.EventType.MESSAGE,E=>{var R;if(!f){const O=E.data[0];Le(!!O);const L=O,z=L.error||((R=L[0])===null||R===void 0?void 0:R.error);if(z){B(vt,`RPC '${e}' stream ${s} received error:`,z);const G=z.status;let N=function(M){const Y=Qe[M];if(Y!==void 0)return mv(Y)}(G),Z=z.message;N===void 0&&(N=C.INTERNAL,Z="Unknown error status: "+G+" with message "+z.message),f=!0,y.Vo(new K(N,Z)),h.close()}else B(vt,`RPC '${e}' stream ${s} received:`,O),y.mo(O)}}),T(a,lP.STAT_EVENT,E=>{E.stat===yp.PROXY?B(vt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===yp.NOPROXY&&B(vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function xc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){return new pC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&B("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Rv(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new K(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s1 extends Pv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=_C(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Rn(o.readTime):de.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Pu(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Tu(l)?{documents:wC(i,l)}:{query:EC(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yv(i,o.resumeToken);const c=Au(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=$a(i,o.snapshotVersion.toTimestamp());const c=Au(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=bC(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Pu(this.serializer),n.removeTarget=e,this.t_(n)}}class i1 extends Pv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=vC(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.T_(r,n)}return Le(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Pu(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yC(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new K(C.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Su(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(C.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Su(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(C.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class a1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Cn(n),this.g_=!1):B("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{os(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.v_.add(4),await Ro(c),c.x_.set("Unknown"),c.v_.delete(4),await $l(c)}(this))})}),this.x_=new a1(r,s)}}async function $l(t){if(os(t))for(const e of t.F_)await e(!0)}async function Ro(t){for(const e of t.F_)await e(!1)}function Cv(t,e){const n=pe(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),od(n)?id(n):Xs(n).Jo()&&sd(n,e))}function rd(t,e){const n=pe(t),r=Xs(n);n.C_.delete(e),r.Jo()&&xv(n,e),n.C_.size===0&&(r.Jo()?r.Xo():os(n)&&n.x_.set("Unknown"))}function sd(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xs(t).c_(e)}function xv(t,e){t.O_.Oe(e),Xs(t).l_(e)}function id(t){t.O_=new uC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Xs(t).start(),t.x_.p_()}function od(t){return os(t)&&!Xs(t).Ho()&&t.C_.size>0}function os(t){return pe(t).v_.size===0}function Ov(t){t.O_=void 0}async function c1(t){t.C_.forEach((e,n)=>{sd(t,e)})}async function u1(t,e){Ov(t),od(t)?(t.x_.S_(e),id(t)):t.x_.set("Unknown")}async function h1(t,e,n){if(t.x_.set("Online"),e instanceof _v&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ja(t,r)}else if(e instanceof la?t.O_.$e(e):e instanceof gv?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(de.min()))try{const r=await Sv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(St.EMPTY_BYTE_STRING,u.snapshotVersion)),xv(i,l);const h=new ar(u.target,l,c,u.sequenceNumber);sd(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){B("RemoteStore","Failed to raise snapshot:",r),await ja(t,r)}}async function ja(t,e,n){if(!bo(e))throw e;t.v_.add(1),await Ro(t),t.x_.set("Offline"),n||(n=()=>Sv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await $l(t)})}function kv(t,e){return e().catch(n=>ja(t,n,e))}async function jl(t){const e=pe(t),n=Tr(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;d1(e);)try{const s=await YC(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,f1(e,s)}catch(s){await ja(e,s)}Dv(e)&&Nv(e)}function d1(t){return os(t)&&t.D_.length<10}function f1(t,e){t.D_.push(e);const n=Tr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Dv(t){return os(t)&&!Tr(t).Ho()&&t.D_.length>0}function Nv(t){Tr(t).start()}async function p1(t){Tr(t).d_()}async function m1(t){const e=Tr(t);for(const n of t.D_)e.I_(n.mutations)}async function g1(t,e,n){const r=t.D_.shift(),s=Jh.from(r,e,n);await kv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jl(t)}async function _1(t,e){e&&Tr(t).P_&&await async function(r,s){if(function(o){return aC(o)&&o!==C.ABORTED}(s.code)){const i=r.D_.shift();Tr(r).Zo(),await kv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await jl(r)}}(t,e),Dv(t)&&Nv(t)}async function zp(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const r=os(n);n.v_.add(3),await Ro(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await $l(n)}async function y1(t,e){const n=pe(t);e?(n.v_.delete(2),await $l(n)):e||(n.v_.add(2),await Ro(n),n.x_.set("Unknown"))}function Xs(t){return t.N_||(t.N_=function(n,r,s){const i=pe(n);return i.R_(),new s1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:c1.bind(null,t),To:u1.bind(null,t),u_:h1.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),od(t)?id(t):t.x_.set("Unknown")):(await t.N_.stop(),Ov(t))})),t.N_}function Tr(t){return t.L_||(t.L_=function(n,r,s){const i=pe(n);return i.R_(),new i1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:p1.bind(null,t),To:_1.bind(null,t),E_:m1.bind(null,t),T_:g1.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await jl(t)):(await t.L_.stop(),t.D_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ad(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),bo(t))return new K(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=fi(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new Ps(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.B_=new He(ee.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ue():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $s{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $s(e,n,Ps.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class w1{constructor(){this.queries=new Js(e=>tv(e),Nl),this.onlineState="Unknown",this.W_=new Set}}async function E1(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new v1,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ld(o,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&cd(n)}async function T1(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function b1(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&cd(n)}function I1(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function cd(t){t.W_.forEach(e=>{e.next()})}var xu,Wp;(Wp=xu||(xu={})).j_="default",Wp.Cache="cache";class A1{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==xu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.key=e}}class Mv{constructor(e){this.key=e}}class S1{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=_e(),this.mutatedKeys=_e(),this.ha=nv(e),this.Pa=new Ps(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new Hp,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=Vl(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),T=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;d&&f?d.data.isEqual(f.data)?y!==T&&(r.track({type:3,doc:f}),E=!0):this.da(d,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),E=!0):d&&!f&&(r.track({type:1,doc:d}),E=!0,(l||c)&&(a=!0)),E&&(f?(o=o.add(f),i=T?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,y){const T=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return T(f)-T(y)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new $s(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Hp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=_e(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Mv(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Vv(r))}),n}fa(e){this.ua=e.hs,this.la=_e();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return $s.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class R1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class P1{constructor(e){this.key=e,this.pa=!1}}class C1{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Js(a=>tv(a),Nl),this.Sa=new Map,this.ba=new Set,this.Da=new He(ee.comparator),this.Ca=new Map,this.va=new ed,this.Fa={},this.Ma=new Map,this.xa=Us.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function x1(t,e,n=!0){const r=Bv(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await Lv(r,e,n,!0),s}async function O1(t,e){const n=Bv(t);await Lv(n,e,!0,!1)}async function Lv(t,e,n,r){const s=await JC(t.localStore,An(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await k1(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Cv(t.remoteStore,s),a}async function k1(t,e,n,r,s){t.Na=(h,d,f)=>async function(T,E,R,O){let L=E.view.Ta(R);L.Xi&&(L=await jp(T.localStore,E.query,!1).then(({documents:Z})=>E.view.Ta(Z,L)));const z=O&&O.targetChanges.get(E.targetId),G=O&&O.targetMismatches.get(E.targetId)!=null,N=E.view.applyChanges(L,T.isPrimaryClient,z,G);return Gp(T,E.targetId,N.Va),N.snapshot}(t,h,d,f);const i=await jp(t.localStore,e,!0),o=new S1(e,i.hs),a=o.Ta(i.documents),l=So.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Gp(t,n,c.Va);const u=new R1(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function D1(t,e,n){const r=pe(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!Nl(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&rd(r.remoteStore,s.targetId),Ou(r,s.targetId)}).catch(To)):(Ou(r,s.targetId),await Cu(r.localStore,s.targetId,!0))}async function N1(t,e){const n=pe(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rd(n.remoteStore,r.targetId))}async function V1(t,e,n){const r=B1(t);try{const s=await function(o,a){const l=pe(o),c=et.now(),u=a.reduce((f,y)=>f.add(y.key),_e());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let y=Hn(),T=_e();return l.os.getEntries(f,u).next(E=>{y=E,y.forEach((R,O)=>{O.isValidDocument()||(T=T.add(R))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,y)).next(E=>{h=E;const R=[];for(const O of a){const L=nC(O,h.get(O.key).overlayedDocument);L!=null&&R.push(new Pr(O.key,L,Wy(L.value.mapValue),Sn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,R,a)}).next(E=>{d=E;const R=E.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(f,E.batchId,R)})}).then(()=>({batchId:d.batchId,changes:sv(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new He(Pe)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Po(r,s.changes),await jl(r.remoteStore)}catch(s){const i=ld(s,"Failed to persist write");n.reject(i)}}async function Fv(t,e){const n=pe(t);try{const r=await GC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?Le(o.pa):s.removedDocuments.size>0&&(Le(o.pa),o.pa=!1))}),await Po(n,r,e)}catch(r){await To(r)}}function Kp(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&cd(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M1(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new He(ee.comparator);o=o.insert(i,Et.newNoDocument(i,de.min()));const a=_e().add(i),l=new Fl(de.min(),new Map,new He(Pe),o,a);await Fv(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),ud(r)}else await Cu(r.localStore,e,!1).then(()=>Ou(r,e,n)).catch(To)}async function L1(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await KC(n.localStore,e);$v(n,r,null),Uv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Po(n,s)}catch(s){await To(s)}}async function F1(t,e,n){const r=pe(t);try{const s=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);$v(r,e,n),Uv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Po(r,s)}catch(s){await To(s)}}function Uv(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function $v(t,e,n){const r=pe(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function Ou(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||jv(t,r)})}function jv(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(rd(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),ud(t))}function Gp(t,e,n){for(const r of n)r instanceof Vv?(t.va.addReference(r.key,e),U1(t,r)):r instanceof Mv?(B("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||jv(t,r.key)):ue()}function U1(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(B("SyncEngine","New document in limbo: "+n),t.ba.add(r),ud(t))}function ud(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new ee(Be.fromString(e)),r=t.xa.next();t.Ca.set(r,new P1(n)),t.Da=t.Da.insert(n,r),Cv(t.remoteStore,new ar(An(Zy(n.path)),r,"TargetPurposeLimboResolution",Hh._e))}}async function Po(t,e,n){const r=pe(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=nd.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const u=pe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>x.forEach(c,d=>x.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>x.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!bo(h))throw h;B("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),y=f.snapshotVersion,T=f.withLastLimboFreeSnapshotVersion(y);u.ns=u.ns.insert(d,T)}}}(r.localStore,i))}async function $1(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const r=await Av(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new K(C.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(n,r.us)}}function j1(t,e){const n=pe(t),r=n.Ca.get(e);if(r&&r.pa)return _e().add(r.key);{let s=_e();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function Bv(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M1.bind(null,e),e.ya.u_=b1.bind(null,e.eventManager),e.ya.La=I1.bind(null,e.eventManager),e}function B1(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,e),e}class Qp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ul(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return WC(this.persistence,new zC,e.initialUser,this.serializer)}createPersistence(e){return new jC(td.Hr,this.serializer)}createSharedClientState(e){return new ZC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class q1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$1.bind(null,this.syncEngine),await y1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w1}()}createDatastore(e){const n=Ul(e.databaseInfo.databaseId),r=function(i){return new r1(i)}(e.databaseInfo);return function(i,o,a,l){return new o1(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new l1(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Kp(this.syncEngine,n,0),function(){return qp.D()?new qp:new e1}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new C1(s,i,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=pe(r);B("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Ro(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=wt.UNAUTHENTICATED,this.clientId=qy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{B("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(B("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ld(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Oc(t,e){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Av(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K1(t);B("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>zp(e.remoteStore,s)),t._onlineComponents=e}function W1(t){return t.name==="FirebaseError"?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function K1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await Oc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!W1(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await Oc(t,new Qp)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await Oc(t,new Qp);return t._offlineComponents}async function qv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await Yp(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await Yp(t,new q1))),t._onlineComponents}function G1(t){return qv(t).then(e=>e.syncEngine)}async function Q1(t){const e=await qv(t),n=e.eventManager;return n.onListen=x1.bind(null,e.syncEngine),n.onUnlisten=D1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=O1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=N1.bind(null,e.syncEngine),n}function Y1(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new z1({next:d=>{o.enqueueAndForget(()=>T1(i,h)),d.fromCache&&l.source==="server"?c.reject(new K(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new A1(a,u,{includeMetadataChanges:!0,ta:!0});return E1(i,h)}(await Q1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){if(!n)throw new K(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J1(t,e,n,r){if(e===!0&&r===!0)throw new K(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xp(t){if(!ee.isDocumentKey(t))throw new K(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zp(t){if(ee.isDocumentKey(t))throw new K(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bl(t);throw new K(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(C.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(C.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(C.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ql{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new em({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new em(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hP;switch(r.type){case"firstParty":return new mP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jp.get(n);r&&(B("ComponentProvider","Removing Datastore"),Jp.delete(n),r.terminate())}(this),Promise.resolve()}}function X1(t,e,n,r={}){var s;const i=(t=js(t,ql))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=wb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(c)}t._authCredentials=new dP(new By(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zs(this.firestore,e,this._query)}}class Gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class pr extends Zs{constructor(e,n,r){super(e,n,Zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ee(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function tm(t,e,...n){if(t=_t(t),Hv("collection","path",e),t instanceof ql){const r=Be.fromString(e,...n);return Zp(r),new pr(t,null,r)}{if(!(t instanceof Gt||t instanceof pr))throw new K(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Zp(r),new pr(t.firestore,null,r)}}function Wv(t,e,...n){if(t=_t(t),arguments.length===1&&(e=qy.newId()),Hv("doc","path",e),t instanceof ql){const r=Be.fromString(e,...n);return Xp(r),new Gt(t,null,new ee(r))}{if(!(t instanceof Gt||t instanceof pr))throw new K(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Xp(r),new Gt(t.firestore,t instanceof pr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Rv(this,"async_queue_retry"),this.cu=()=>{const n=xc();n&&B("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=xc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=xc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Bn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!bo(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Cn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=ad.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&ue()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}class zl extends ql{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new Z1}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gv(this),this._firestoreClient.terminate()}}function ex(t,e){const n=typeof t=="object"?t:r_(),r=typeof t=="string"?t:e||"(default)",s=ch(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yb("firestore");i&&X1(s,...i)}return s}function Kv(t){return t._firestoreClient||Gv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Gv(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new CP(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,zv(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new H1(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bs(St.fromBase64String(e))}catch(n){throw new K(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bs(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=/^__.*__$/;class nx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ao(e,this.data,n,this.fieldTransforms)}}class Qv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class fd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new fd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Ba(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Yv(this.Vu)&&tx.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class rx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ul(e)}Cu(e,n,r,s=!1){return new fd({Vu:e,methodName:n,Du:r,path:ft.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(t){const e=t._freezeSettings(),n=Ul(t._databaseId);return new rx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sx(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);md("Data must be an object, but it was:",o,r);const a=Jv(r,o);let l,c;if(i.merge)l=new Wt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=ku(e,h,n);if(!o.contains(d))throw new K(C.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Zv(u,d)||u.push(d)}l=new Wt(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new nx(new jt(a),l,c)}class Wl extends hd{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wl}}function ix(t,e,n,r){const s=t.Cu(1,e,n);md("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();is(r,(l,c)=>{const u=gd(e,l,n);c=_t(c);const h=s.yu(u);if(c instanceof Wl)i.push(u);else{const d=Co(c,h);d!=null&&(i.push(u),o.set(u,d))}});const a=new Wt(i);return new Qv(o,a,s.fieldTransforms)}function ox(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[ku(e,r,n)],l=[s];if(i.length%2!=0)throw new K(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(ku(e,i[d])),l.push(i[d+1]);const c=[],u=jt.empty();for(let d=a.length-1;d>=0;--d)if(!Zv(c,a[d])){const f=a[d];let y=l[d];y=_t(y);const T=o.yu(f);if(y instanceof Wl)c.push(f);else{const E=Co(y,T);E!=null&&(c.push(f),u.set(f,E))}}const h=new Wt(c);return new Qv(u,h,o.fieldTransforms)}function ax(t,e,n,r=!1){return Co(n,t.Cu(r?4:3,e))}function Co(t,e){if(Xv(t=_t(t)))return md("Unsupported field value:",e,t),Jv(t,e);if(t instanceof hd)return function(r,s){if(!Yv(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Co(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:$a(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$a(s.serializer,i)}}if(r instanceof dd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bs)return{bytesValue:yv(s.serializer,r._byteString)};if(r instanceof Gt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zh(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${Bl(r)}`)}(t,e)}function Jv(t,e){const n={};return zy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,s)=>{const i=Co(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Xv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof dd||t instanceof Bs||t instanceof Gt||t instanceof hd)}function md(t,e,n){if(!Xv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Bl(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function ku(t,e,n){if((e=_t(e))instanceof Hl)return e._internalPath;if(typeof e=="string")return gd(t,e);throw Ba("Field path arguments must be of type string or ",t,!1,void 0,n)}const lx=new RegExp("[~\\*/\\[\\]]");function gd(t,e,n){if(e.search(lx)>=0)throw Ba(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hl(...e.split("."))._internalPath}catch{throw Ba(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ba(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(C.INVALID_ARGUMENT,a+t+l)}function Zv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_d("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cx extends e0{data(){return super.data()}}function _d(t,e){return typeof e=="string"?gd(t,e):e instanceof Hl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yd{}class hx extends yd{}function dx(t,e,...n){let r=[];e instanceof yd&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof vd).length,a=i.filter(l=>l instanceof Kl).length;if(o>1||o>0&&a>0)throw new K(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kl extends hx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kl(e,n,r)}_apply(e){const n=this._parse(e);return t0(e._query,n),new Zs(e.firestore,e.converter,bu(e._query,n))}_parse(e){const n=pd(e.firestore);return function(i,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new K(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){rm(h,u);const f=[];for(const y of h)f.push(nm(l,i,y));d={arrayValue:{values:f}}}else d=nm(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||rm(h,u),d=ax(a,o,h,u==="in"||u==="not-in");return Je.create(c,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fx(t,e,n){const r=e,s=_d("where",t);return Kl._create(s,r,n)}class vd extends yd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)t0(o,l),o=bu(o,l)}(e._query,n),new Zs(e.firestore,e.converter,bu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nm(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new K(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ev(e)&&n.indexOf("/")!==-1)throw new K(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ee.isDocumentKey(r))throw new K(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ip(t,new ee(r))}if(n instanceof Gt)return Ip(t,n._key);throw new K(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bl(n)}.`)}function rm(t,e){if(!Array.isArray(t)||t.length===0)throw new K(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t0(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class px{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new dd(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zi(e));default:return null}}convertTimestamp(e){const n=Er(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Le(Iv(r));const s=new eo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Cn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gx extends e0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_d("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ca extends gx{data(e={}){return super.data(e)}}class _x{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ca(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ca(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ca(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:yx(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}class vx extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function wx(t){t=js(t,Zs);const e=js(t.firestore,zl),n=Kv(e),r=new vx(e);return ux(t._query),Y1(n,t._query).then(s=>new _x(e,r,t,s))}function Ex(t,e,n,...r){t=js(t,Gt);const s=js(t.firestore,zl),i=pd(s);let o;return o=typeof(e=_t(e))=="string"||e instanceof Hl?ox(i,"updateDoc",t._key,e,n,r):ix(i,"updateDoc",t._key,e),n0(s,[o.toMutation(t._key,Sn.exists(!0))])}function Tx(t,e){const n=js(t.firestore,zl),r=Wv(t),s=mx(t.converter,e);return n0(n,[sx(pd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function n0(t,e){return function(r,s){const i=new Bn;return r.asyncQueue.enqueueAndForget(async()=>V1(await G1(r),s,i)),i.promise}(Kv(t),e)}(function(e,n=!0){(function(s){Ys=s})(rs),Qr(new vr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new zl(new fP(r.getProvider("auth-internal")),new _P(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Tn(vp,"4.5.0",e),Tn(vp,"4.5.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="firebasestorage.googleapis.com",bx="storageBucket",Ix=2*60*1e3,Ax=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Dn{constructor(e,n,r=0){super(kc(e),`Firebase Storage: ${n} (${kc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var On;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(On||(On={}));function kc(t){return"storage/"+t}function Sx(){const t="An unknown error occurred, please check the error payload for server response.";return new Nn(On.UNKNOWN,t)}function Rx(){return new Nn(On.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Px(){return new Nn(On.CANCELED,"User canceled the upload/download.")}function Cx(t){return new Nn(On.INVALID_URL,"Invalid URL '"+t+"'.")}function xx(t){return new Nn(On.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sm(t){return new Nn(On.INVALID_ARGUMENT,t)}function s0(){return new Nn(On.APP_DELETED,"The Firebase app was deleted.")}function Ox(t){return new Nn(On.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw xx(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(z){z.path_=decodeURIComponent(z.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${s}/o${d}`,"i"),y={bucket:1,path:3},T=n===r0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",R=new RegExp(`^https?://${T}/${s}/${E}`,"i"),L=[{regex:a,indices:l,postModify:i},{regex:f,indices:y,postModify:c},{regex:R,indices:{bucket:1,path:2},postModify:c}];for(let z=0;z<L.length;z++){const G=L[z],N=G.regex.exec(e);if(N){const Z=N[G.indices.bucket];let ne=N[G.indices.path];ne||(ne=""),r=new sn(Z,ne),G.postModify(r);break}}if(r==null)throw Cx(e);return r}}class kx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...E){c||(c=!0,e.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,t(f,l())},E)}function d(){i&&clearTimeout(i)}function f(E,...R){if(c){d();return}if(E){d(),u.call(null,E,...R);return}if(l()||o){d(),u.call(null,E,...R);return}r<64&&(r*=2);let L;a===1?(a=2,L=0):L=(r+Math.random())*1e3,h(L)}let y=!1;function T(E){y||(y=!0,d(),!c&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function Nx(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t){return t!==void 0}function im(t,e,n,r){if(r<e)throw sm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sm(`Invalid value for '${t}'. Expected ${n} or less.`)}function Mx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qa||(qa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,s,i,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,y)=>{this.resolve_=f,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ko(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===qa.NO_ERROR,l=i.getStatus();if(!a||Lx(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===qa.ABORT;r(!1,new Ko(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ko(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Vx(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Sx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?s0():Px();o(l)}else{const l=Rx();o(l)}};this.canceled_?n(!1,new Ko(!1,null,!0)):this.backoffId_=Dx(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ko{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ux(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $x(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jx(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Bx(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qx(t,e,n,r,s,i,o=!0){const a=Mx(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return jx(c,e),Ux(c,n),$x(c,i),Bx(c,r),new Fx(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Hx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wx=class Du{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Du(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hx(this._location.path)}get storage(){return this._service}get parent(){const e=zx(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new Du(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Ox(e)}};function om(t,e){const n=e==null?void 0:e[bx];return n==null?null:sn.makeFromBucketSpec(n,t)}class Kx{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=r0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ix,this._maxUploadRetryTime=Ax,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=om(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=om(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){im("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){im("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wx(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new kx(s0());{const o=qx(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const am="@firebase/storage",lm="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="storage";function Qx(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Kx(n,r,s,e,rs)}function Yx(){Qr(new vr(Gx,Qx,"PUBLIC").setMultipleInstances(!0)),Tn(am,lm,""),Tn(am,lm,"esm2017")}Yx();const Jx={apiKey:"AIzaSyD7n8E7b0wtFEwSBS8oa5wVwshLXkOyvNY",authDomain:"todoautos.firebaseapp.com",projectId:"todoautos",storageBucket:"todoautos.appspot.com",messagingSenderId:"627443339943",appId:"1:627443339943:web:113de9723a94056e54c182",measurementId:"G-TXE1ZH392N"},i0=n_(Jx),qs=rR(i0),Dc=ex(i0);/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function nn(t){return typeof t=="function"}function o0(t){return t==null}const zs=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function wd(t){return Number(t)>=0}function Xx(t){return typeof t=="object"&&t!==null}function Zx(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function cm(t){if(!Xx(t)||Zx(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function so(t,e){return Object.keys(e).forEach(n=>{if(cm(e[n])&&cm(t[n])){t[n]||(t[n]={}),so(t[n],e[n]);return}t[n]=e[n]}),t}function Go(t){const e=t.split(".");if(!e.length)return"";let n=String(e[0]);for(let r=1;r<e.length;r++){if(wd(e[r])){n+=`[${e[r]}]`;continue}n+=`.${e[r]}`}return n}const eO={};function tO(t){return eO[t]}function um(t,e,n){typeof n.value=="object"&&(n.value=ze(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function ze(t){if(typeof t!="object")return t;var e=0,n,r,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(ze(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,a){s.set(ze(a),ze(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor(ze(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)um(s,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(s,n=r[e])&&s[n]===t[n]||um(s,n,Object.getOwnPropertyDescriptor(t,n))}return s||t}const nO=Symbol("vee-validate-form"),rO=typeof window<"u";function sO(t){return nn(t)&&!!t.__locatorRef}function lr(t){return!!t&&nn(t.parse)&&t.__type==="VVTypedSchema"}function a0(t){return!!t&&nn(t.validate)}function iO(t){return t==="checkbox"||t==="radio"}function oO(t){return zs(t)||Array.isArray(t)}function aO(t){return Array.isArray(t)?t.length===0:zs(t)&&Object.keys(t).length===0}function xo(t){return/^\[.+\]$/i.test(t)}function lO(t){return l0(t)&&t.multiple}function l0(t){return t.tagName==="SELECT"}function cO(t){return c0(t)&&t.target&&"submit"in t.target}function c0(t){return t?!!(typeof Event<"u"&&nn(Event)&&t instanceof Event||t&&t.srcElement):!1}function Oi(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Oi(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;for(r of t.entries())if(!Oi(r[1],e.get(r[0])))return!1;return!0}if(hm(t)&&hm(e))return!(t.size!==e.size||t.name!==e.name||t.lastModified!==e.lastModified||t.type!==e.type);if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();for(s=Object.keys(t),n=s.length,r=n;r--!==0;){var i=s[r];if(!Oi(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function hm(t){return rO?t instanceof File:!1}function Gl(t){return xo(t)?t.replace(/\[|\]/gi,""):t}function Ln(t,e,n){return t?xo(e)?t[Gl(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>oO(s)&&i in s?s[i]:n,t):n}function Zn(t,e,n){if(xo(e)){t[Gl(e)]=n;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<r.length;i++){if(i===r.length-1){s[r[i]]=n;return}(!(r[i]in s)||o0(s[r[i]]))&&(s[r[i]]=wd(r[i+1])?[]:{}),s=s[r[i]]}}function Nc(t,e){if(Array.isArray(t)&&wd(e)){t.splice(Number(e),1);return}zs(t)&&delete t[e]}function dm(t,e){if(xo(e)){delete t[Gl(e)];return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=t;for(let i=0;i<n.length;i++){if(i===n.length-1){Nc(r,n[i]);break}if(!(n[i]in r)||o0(r[n[i]]))break;r=r[n[i]]}const s=n.map((i,o)=>Ln(t,n.slice(0,o).join(".")));for(let i=s.length-1;i>=0;i--)if(aO(s[i])){if(i===0){Nc(t,n[0]);continue}Nc(s[i-1],n[i-1])}}function Yt(t){return Object.keys(t)}function fm(t,e=0){let n=null,r=[];return function(...s){return n&&clearTimeout(n),n=setTimeout(()=>{const i=t(...s);r.forEach(o=>o(i)),r=[]},e),new Promise(i=>r.push(i))}}function uO(t,e){let n;return async function(...s){const i=t(...s);n=i;const o=await i;return i!==n?o:(n=void 0,e(o,s))}}function pm(t){return Array.isArray(t)?t:t?[t]:[]}function Qo(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function hO(t){let e=null,n=[];return function(...r){const s=Ut(()=>{if(e!==s)return;const i=t(...r);n.forEach(o=>o(i)),n=[],e=null});return e=s,new Promise(i=>n.push(i))}}function Vc(t){if(u0(t))return t._value}function u0(t){return"_value"in t}function dO(t){return t.type==="number"||t.type==="range"?Number.isNaN(t.valueAsNumber)?t.value:t.valueAsNumber:t.value}function mm(t){if(!c0(t))return t;const e=t.target;if(iO(e.type)&&u0(e))return Vc(e);if(e.type==="file"&&e.files){const n=Array.from(e.files);return e.multiple?n:n[0]}if(lO(e))return Array.from(e.options).filter(n=>n.selected&&!n.disabled).map(Vc);if(l0(e)){const n=Array.from(e.options).find(r=>r.selected);return n?Vc(n):e.value}return dO(e)}function fO(t){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t?zs(t)&&t._$$isNormalized?t:zs(t)?Object.keys(t).reduce((n,r)=>{const s=pO(t[r]);return t[r]!==!1&&(n[r]=gm(s)),n},e):typeof t!="string"?e:t.split("|").reduce((n,r)=>{const s=mO(r);return s.name&&(n[s.name]=gm(s.params)),n},e):e}function pO(t){return t===!0?[]:Array.isArray(t)||zs(t)?t:[t]}function gm(t){const e=n=>typeof n=="string"&&n[0]==="@"?gO(n.slice(1)):n;return Array.isArray(t)?t.map(e):t instanceof RegExp?[t]:Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{})}const mO=t=>{let e=[];const n=t.split(":")[0];return t.includes(":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}};function gO(t){const e=n=>Ln(n,t)||n[t];return e.__locatorRef=t,e}const _O={generateMessage:({field:t})=>`${t} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let yO=Object.assign({},_O);const mi=()=>yO;async function vO(t,e,n={}){const r=n==null?void 0:n.bails,s={name:(n==null?void 0:n.name)||"{field}",rules:e,label:n==null?void 0:n.label,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await wO(s,t)).errors;return{errors:o,valid:!o.length}}async function wO(t,e){if(lr(t.rules)||a0(t.rules))return TO(e,t.rules);if(nn(t.rules)||Array.isArray(t.rules)){const o={field:t.label||t.name,name:t.name,label:t.label,form:t.formData,value:e},a=Array.isArray(t.rules)?t.rules:[t.rules],l=a.length,c=[];for(let u=0;u<l;u++){const h=a[u],d=await h(e,o);if(!(typeof d!="string"&&!Array.isArray(d)&&d)){if(Array.isArray(d))c.push(...d);else{const y=typeof d=="string"?d:d0(o);c.push(y)}if(t.bails)return{errors:c}}}return{errors:c}}const n=Object.assign(Object.assign({},t),{rules:fO(t.rules)}),r=[],s=Object.keys(n.rules),i=s.length;for(let o=0;o<i;o++){const a=s[o],l=await bO(n,e,{name:a,params:n.rules[a]});if(l.error&&(r.push(l.error),t.bails))return{errors:r}}return{errors:r}}function EO(t){return!!t&&t.name==="ValidationError"}function h0(t){return{__type:"VVTypedSchema",async parse(n){var r;try{return{output:await t.validate(n,{abortEarly:!1}),errors:[]}}catch(s){if(!EO(s))throw s;if(!(!((r=s.inner)===null||r===void 0)&&r.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const i=s.inner.reduce((o,a)=>{const l=a.path||"";return o[l]||(o[l]={errors:[],path:l}),o[l].errors.push(...a.errors),o},{});return{errors:Object.values(i)}}}}}async function TO(t,e){const r=await(lr(e)?e:h0(e)).parse(t),s=[];for(const i of r.errors)i.errors.length&&s.push(...i.errors);return{errors:s}}async function bO(t,e,n){const r=tO(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=IO(n.params,t.formData),i={field:t.label||t.name,name:t.name,label:t.label,value:e,form:t.formData,rule:Object.assign(Object.assign({},n),{params:s})},o=await r(e,s,i);return typeof o=="string"?{error:o}:{error:o?void 0:d0(i)}}function d0(t){const e=mi().generateMessage;return e?e(t):"Field is invalid"}function IO(t,e){const n=r=>sO(r)?r(e):r;return Array.isArray(t)?t.map(n):Object.keys(t).reduce((r,s)=>(r[s]=n(t[s]),r),{})}async function AO(t,e){const r=await(lr(t)?t:h0(t)).parse(ze(e)),s={},i={};for(const o of r.errors){const a=o.errors,l=(o.path||"").replace(/\["(\d+)"\]/g,(c,u)=>`[${u}]`);s[l]={valid:!a.length,errors:a},a.length&&(i[l]=a[0])}return{valid:!r.errors.length,results:s,errors:i,values:r.value}}async function SO(t,e,n){const s=Yt(t).map(async c=>{var u,h,d;const f=(u=n==null?void 0:n.names)===null||u===void 0?void 0:u[c],y=await vO(Ln(e,c),t[c],{name:(f==null?void 0:f.name)||c,label:f==null?void 0:f.label,values:e,bails:(d=(h=n==null?void 0:n.bailsMap)===null||h===void 0?void 0:h[c])!==null&&d!==void 0?d:!0});return Object.assign(Object.assign({},y),{path:c})});let i=!0;const o=await Promise.all(s),a={},l={};for(const c of o)a[c.path]={valid:c.valid,errors:c.errors},c.valid||(i=!1,l[c.path]=c.errors[0]);return{valid:i,results:a,errors:l}}let RO=0;const Yo=["bails","fieldsCount","id","multiple","type","validate"];function f0(t){const e=Object.assign({},xt((t==null?void 0:t.initialValues)||{})),n=A(t==null?void 0:t.validationSchema);return n&&lr(n)&&nn(n.cast)?ze(n.cast(e)||{}):ze(e)}function Ed(t){var e;const n=RO++;let r=0;const s=Ie(!1),i=Ie(!1),o=Ie(0),a=[],l=on(f0(t)),c=Ie([]),u=Ie({}),h=Ie({}),d=hO(()=>{h.value=c.value.reduce((g,_)=>(g[Go(xt(_.path))]=_,g),{})});function f(g,_){const S=ae(g);if(!S){typeof g=="string"&&(u.value[Go(g)]=pm(_));return}if(typeof g=="string"){const j=Go(g);u.value[j]&&delete u.value[j]}S.errors=pm(_),S.valid=!S.errors.length}function y(g){Yt(g).forEach(_=>{f(_,g[_])})}t!=null&&t.initialErrors&&y(t.initialErrors);const T=Ne(()=>{const g=c.value.reduce((_,S)=>(S.errors.length&&(_[S.path]=S.errors),_),{});return Object.assign(Object.assign({},u.value),g)}),E=Ne(()=>Yt(T.value).reduce((g,_)=>{const S=T.value[_];return S!=null&&S.length&&(g[_]=S[0]),g},{})),R=Ne(()=>c.value.reduce((g,_)=>(g[_.path]={name:_.path||"",label:_.label||""},g),{})),O=Ne(()=>c.value.reduce((g,_)=>{var S;return g[_.path]=(S=_.bails)!==null&&S!==void 0?S:!0,g},{})),L=Object.assign({},(t==null?void 0:t.initialErrors)||{}),z=(e=t==null?void 0:t.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:G,originalInitialValues:N,setInitialValues:Z}=CO(c,l,t),ne=PO(c,l,N,E),M=Ne(()=>c.value.reduce((g,_)=>{const S=Ln(l,_.path);return Zn(g,_.path,S),g},{})),Y=t==null?void 0:t.validationSchema;function re(g,_){var S,j;const se=Ne(()=>Ln(G.value,xt(g))),J=h.value[xt(g)],ve=(_==null?void 0:_.type)==="checkbox"||(_==null?void 0:_.type)==="radio";if(J&&ve){J.multiple=!0;const tn=r++;return Array.isArray(J.id)?J.id.push(tn):J.id=[J.id,tn],J.fieldsCount++,J.__flags.pendingUnmount[tn]=!1,J}const Te=Ne(()=>Ln(l,xt(g))),Re=xt(g),rt=ge.findIndex(tn=>tn===Re);rt!==-1&&ge.splice(rt,1);const Ue=Ne(()=>{var tn,ti,Zl,Dd,ec,tc;return lr(Y)?(Zl=(ti=(tn=Y).describe)===null||ti===void 0?void 0:ti.call(tn,xt(g)).required)!==null&&Zl!==void 0?Zl:!1:lr(_==null?void 0:_.schema)&&(tc=(ec=(Dd=_==null?void 0:_.schema).describe)===null||ec===void 0?void 0:ec.call(Dd).required)!==null&&tc!==void 0?tc:!1}),yt=r++,Mt=on({id:yt,path:g,touched:!1,pending:!1,valid:!0,validated:!!(!((S=L[Re])===null||S===void 0)&&S.length),required:Ue,initialValue:se,errors:Jm([]),bails:(j=_==null?void 0:_.bails)!==null&&j!==void 0?j:!1,label:_==null?void 0:_.label,type:(_==null?void 0:_.type)||"default",value:Te,multiple:!1,__flags:{pendingUnmount:{[yt]:!1},pendingReset:!1},fieldsCount:1,validate:_==null?void 0:_.validate,dirty:Ne(()=>!Oi(A(Te),A(se)))});return c.value.push(Mt),h.value[Re]=Mt,d(),E.value[Re]&&!L[Re]&&Ut(()=>{F(Re,{mode:"silent"})}),Ke(g)&&zr(g,tn=>{d();const ti=ze(Te.value);h.value[tn]=Mt,Ut(()=>{Zn(l,tn,ti)})}),Mt}const De=fm(H,5),Ge=fm(H,5),Pt=uO(async g=>await(g==="silent"?De():Ge()),(g,[_])=>{const S=Yt(Ve.errorBag.value),se=[...new Set([...Yt(g.results),...c.value.map(J=>J.path),...S])].sort().reduce((J,ve)=>{var Te;const Re=ve,rt=ae(Re)||Ce(Re),Ue=((Te=g.results[Re])===null||Te===void 0?void 0:Te.errors)||[],yt=xt(rt==null?void 0:rt.path)||Re,Mt=xO({errors:Ue,valid:!Ue.length},J.results[yt]);return J.results[yt]=Mt,Mt.valid||(J.errors[yt]=Mt.errors[0]),rt&&u.value[yt]&&delete u.value[yt],rt?(rt.valid=Mt.valid,_==="silent"||_==="validated-only"&&!rt.validated||f(rt,Mt.errors),J):(f(yt,Ue),J)},{valid:g.valid,results:{},errors:{}});return g.values&&(se.values=g.values),Yt(se.results).forEach(J=>{var ve;const Te=ae(J);Te&&_!=="silent"&&(_==="validated-only"&&!Te.validated||f(Te,(ve=se.results[J])===null||ve===void 0?void 0:ve.errors))}),se});function nt(g){c.value.forEach(g)}function ae(g){const _=typeof g=="string"?Go(g):g;return typeof _=="string"?h.value[_]:_}function Ce(g){return c.value.filter(S=>g.startsWith(S.path)).reduce((S,j)=>S?j.path.length>S.path.length?j:S:j,void 0)}let ge=[],Vt;function dn(g){return ge.push(g),Vt||(Vt=Ut(()=>{[...ge].sort().reverse().forEach(S=>{dm(l,S)}),ge=[],Vt=null})),Vt}function qt(g){return function(S,j){return function(J){return J instanceof Event&&(J.preventDefault(),J.stopPropagation()),nt(ve=>ve.touched=!0),s.value=!0,o.value++,D().then(ve=>{const Te=ze(l);if(ve.valid&&typeof S=="function"){const Re=ze(M.value);let rt=g?Re:Te;return ve.values&&(rt=ve.values),S(rt,{evt:J,controlledValues:Re,setErrors:y,setFieldError:f,setTouched:w,setFieldTouched:ye,setValues:$,setFieldValue:b,resetForm:I,resetField:P})}!ve.valid&&typeof j=="function"&&j({values:Te,evt:J,errors:ve.errors,results:ve.results})}).then(ve=>(s.value=!1,ve),ve=>{throw s.value=!1,ve})}}}const fn=qt(!1);fn.withControlled=qt(!0);function Gn(g,_){const S=c.value.findIndex(se=>se.path===g&&(Array.isArray(se.id)?se.id.includes(_):se.id===_)),j=c.value[S];if(!(S===-1||!j)){if(Ut(()=>{F(g,{mode:"silent",warn:!1})}),j.multiple&&j.fieldsCount&&j.fieldsCount--,Array.isArray(j.id)){const se=j.id.indexOf(_);se>=0&&j.id.splice(se,1),delete j.__flags.pendingUnmount[_]}(!j.multiple||j.fieldsCount<=0)&&(c.value.splice(S,1),V(g),d(),delete h.value[g])}}function cs(g){Yt(h.value).forEach(_=>{_.startsWith(g)&&delete h.value[_]}),c.value=c.value.filter(_=>!_.path.startsWith(g)),Ut(()=>{d()})}const Ve={formId:n,values:l,controlledValues:M,errorBag:T,errors:E,schema:Y,submitCount:o,meta:ne,isSubmitting:s,isValidating:i,fieldArrays:a,keepValuesOnUnmount:z,validateSchema:A(Y)?Pt:void 0,validate:D,setFieldError:f,validateField:F,setFieldValue:b,setValues:$,setErrors:y,setFieldTouched:ye,setTouched:w,resetForm:I,resetField:P,handleSubmit:fn,useFieldModel:le,defineInputBinds:me,defineComponentBinds:xe,defineField:X,stageInitialValue:U,unsetInitialValue:V,setFieldInitialValue:k,createPathState:re,getPathState:ae,unsetPathValue:dn,removePathState:Gn,initialValues:G,getAllPathStates:()=>c.value,destroyPath:cs,isFieldTouched:Me,isFieldDirty:p,isFieldValid:m};function b(g,_,S=!0){const j=ze(_),se=typeof g=="string"?g:g.path;ae(se)||re(se),Zn(l,se,j),S&&F(se)}function W(g,_=!0){Yt(l).forEach(S=>{delete l[S]}),Yt(g).forEach(S=>{b(S,g[S],!1)}),_&&D()}function $(g,_=!0){so(l,g),a.forEach(S=>S&&S.reset()),_&&D()}function Q(g,_){const S=ae(xt(g))||re(g);return Ne({get(){return S.value},set(j){var se;const J=xt(g);b(J,j,(se=xt(_))!==null&&se!==void 0?se:!1)}})}function ye(g,_){const S=ae(g);S&&(S.touched=_)}function Me(g){const _=ae(g);return _?_.touched:c.value.filter(S=>S.path.startsWith(g)).some(S=>S.touched)}function p(g){const _=ae(g);return _?_.dirty:c.value.filter(S=>S.path.startsWith(g)).some(S=>S.dirty)}function m(g){const _=ae(g);return _?_.valid:c.value.filter(S=>S.path.startsWith(g)).every(S=>S.valid)}function w(g){if(typeof g=="boolean"){nt(_=>{_.touched=g});return}Yt(g).forEach(_=>{ye(_,!!g[_])})}function P(g,_){var S;const j=_&&"value"in _?_.value:Ln(G.value,g),se=ae(g);se&&(se.__flags.pendingReset=!0),k(g,ze(j),!0),b(g,j,!1),ye(g,(S=_==null?void 0:_.touched)!==null&&S!==void 0?S:!1),f(g,(_==null?void 0:_.errors)||[]),Ut(()=>{se&&(se.__flags.pendingReset=!1)})}function I(g,_){let S=ze(g!=null&&g.values?g.values:N.value);S=_!=null&&_.force?S:so(N.value,S),S=lr(Y)&&nn(Y.cast)?Y.cast(S):S,Z(S),nt(j=>{var se;j.__flags.pendingReset=!0,j.validated=!1,j.touched=((se=g==null?void 0:g.touched)===null||se===void 0?void 0:se[j.path])||!1,b(j.path,Ln(S,j.path),!1),f(j.path,void 0)}),_!=null&&_.force?W(S,!1):$(S,!1),y((g==null?void 0:g.errors)||{}),o.value=(g==null?void 0:g.submitCount)||0,Ut(()=>{D({mode:"silent"}),nt(j=>{j.__flags.pendingReset=!1})})}async function D(g){const _=(g==null?void 0:g.mode)||"force";if(_==="force"&&nt(J=>J.validated=!0),Ve.validateSchema)return Ve.validateSchema(_);i.value=!0;const S=await Promise.all(c.value.map(J=>J.validate?J.validate(g).then(ve=>({key:J.path,valid:ve.valid,errors:ve.errors})):Promise.resolve({key:J.path,valid:!0,errors:[]})));i.value=!1;const j={},se={};for(const J of S)j[J.key]={valid:J.valid,errors:J.errors},J.errors.length&&(se[J.key]=J.errors[0]);return{valid:S.every(J=>J.valid),results:j,errors:se}}async function F(g,_){var S;const j=ae(g);if(j&&(_==null?void 0:_.mode)!=="silent"&&(j.validated=!0),Y){const{results:se}=await Pt((_==null?void 0:_.mode)||"validated-only");return se[g]||{errors:[],valid:!0}}return j!=null&&j.validate?j.validate(_):(!j&&(S=_==null?void 0:_.warn),Promise.resolve({errors:[],valid:!0}))}function V(g){dm(G.value,g)}function U(g,_,S=!1){k(g,_),Zn(l,g,_),S&&!(t!=null&&t.initialValues)&&Zn(N.value,g,ze(_))}function k(g,_,S=!1){Zn(G.value,g,ze(_)),S&&Zn(N.value,g,ze(_))}async function H(){const g=A(Y);if(!g)return{valid:!0,results:{},errors:{}};i.value=!0;const _=a0(g)||lr(g)?await AO(g,l):await SO(g,l,{names:R.value,bailsMap:O.value});return i.value=!1,_}const te=fn((g,{evt:_})=>{cO(_)&&_.target.submit()});rl(()=>{if(t!=null&&t.initialErrors&&y(t.initialErrors),t!=null&&t.initialTouched&&w(t.initialTouched),t!=null&&t.validateOnMount){D();return}Ve.validateSchema&&Ve.validateSchema("silent")}),Ke(Y)&&zr(Y,()=>{var g;(g=Ve.validateSchema)===null||g===void 0||g.call(Ve,"validated-only")}),vi(nO,Ve);function X(g,_){const S=nn(_)||_==null?void 0:_.label,j=ae(xt(g))||re(g,{label:S}),se=()=>nn(_)?_(Qo(j,Yo)):_||{};function J(){var Ue;j.touched=!0,((Ue=se().validateOnBlur)!==null&&Ue!==void 0?Ue:mi().validateOnBlur)&&F(j.path)}function ve(){var Ue;((Ue=se().validateOnInput)!==null&&Ue!==void 0?Ue:mi().validateOnInput)&&Ut(()=>{F(j.path)})}function Te(){var Ue;((Ue=se().validateOnChange)!==null&&Ue!==void 0?Ue:mi().validateOnChange)&&Ut(()=>{F(j.path)})}const Re=Ne(()=>{const Ue={onChange:Te,onInput:ve,onBlur:J};return nn(_)?Object.assign(Object.assign({},Ue),_(Qo(j,Yo)).props||{}):_!=null&&_.props?Object.assign(Object.assign({},Ue),_.props(Qo(j,Yo))):Ue});return[Q(g,()=>{var Ue,yt,Mt;return(Mt=(Ue=se().validateOnModelUpdate)!==null&&Ue!==void 0?Ue:(yt=mi())===null||yt===void 0?void 0:yt.validateOnModelUpdate)!==null&&Mt!==void 0?Mt:!0}),Re]}function le(g){return Array.isArray(g)?g.map(_=>Q(_,!0)):Q(g)}function me(g,_){const[S,j]=X(g,_);function se(){j.value.onBlur()}function J(Te){const Re=mm(Te);b(xt(g),Re,!1),j.value.onInput()}function ve(Te){const Re=mm(Te);b(xt(g),Re,!1),j.value.onChange()}return Ne(()=>Object.assign(Object.assign({},j.value),{onBlur:se,onInput:J,onChange:ve,value:S.value}))}function xe(g,_){const[S,j]=X(g,_),se=ae(xt(g));function J(ve){S.value=ve}return Ne(()=>{const ve=nn(_)?_(Qo(se,Yo)):_||{};return Object.assign({[ve.model||"modelValue"]:S.value,[`onUpdate:${ve.model||"modelValue"}`]:J},j.value)})}return Object.assign(Object.assign({},Ve),{values:Gu(l),handleReset:()=>I(),submitForm:te})}function PO(t,e,n,r){const s={touched:"some",pending:"some",valid:"every"},i=Ne(()=>!Oi(e,A(n)));function o(){const l=t.value;return Yt(s).reduce((c,u)=>{const h=s[u];return c[u]=l[h](d=>d[u]),c},{})}const a=on(o());return Zu(()=>{const l=o();a.touched=l.touched,a.valid=l.valid,a.pending=l.pending}),Ne(()=>Object.assign(Object.assign({initialValues:A(n)},a),{valid:a.valid&&!Yt(r.value).length,dirty:i.value}))}function CO(t,e,n){const r=f0(n),s=Ie(r),i=Ie(ze(r));function o(a,l=!1){s.value=so(ze(s.value)||{},ze(a)),i.value=so(ze(i.value)||{},ze(a)),l&&t.value.forEach(c=>{if(c.touched)return;const h=Ln(s.value,c.path);Zn(e,c.path,ze(h))})}return{initialValues:s,originalInitialValues:i,setInitialValues:o}}function xO(t,e){return e?{valid:t.valid&&e.valid,errors:[...t.errors,...e.errors]}:t}/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const za=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function OO(t){return Number(t)>=0}function kO(t){return typeof t=="object"&&t!==null}function DO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function _m(t){if(!kO(t)||DO(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function p0(t,e){return Object.keys(e).forEach(n=>{if(_m(e[n])&&_m(t[n])){t[n]||(t[n]={}),p0(t[n],e[n]);return}t[n]=e[n]}),t}function m0(t,e={abortEarly:!1}){return{__type:"VVTypedSchema",async parse(r){var s;try{return{value:await t.validate(r,Object.assign({},e)),errors:[]}}catch(i){const o=i;if(o.name!=="ValidationError")throw i;if(!(!((s=o.inner)===null||s===void 0)&&s.length)&&o.errors.length)return{errors:[{path:o.path,errors:o.errors}]};const a=o.inner.reduce((l,c)=>{const u=c.path||"";return l[u]||(l[u]={errors:[],path:u}),l[u].errors.push(...c.errors),l},{});return{errors:Object.values(a)}}},cast(r){try{return t.cast(r)}catch{const i=t.getDefault();return za(i)&&za(r)?p0(i,r):r}},describe(r){if(!r)return ym(t.spec);const s=NO(r,t);return s?ym(s):{required:!1,exists:!1}}}}function ym(t){return{required:!t.optional,exists:!0}}function NO(t,e){if(!vm(e))return null;if(xo(t)){const s=e.fields[Gl(t)];return(s==null?void 0:s.spec)||null}const n=(t||"").split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let s=0;s<n.length;s++){const i=n[s];if(vm(r)&&i in r.fields?r=r.fields[i]:OO(i)&&VO(r)&&(r=r.innerType),s===n.length-1)return r.spec}return null}function vm(t){return za(t)&&t.type==="object"}function VO(t){return za(t)&&t.type==="array"}function MO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function as(t){this._maxSize=t,this.clear()}as.prototype.clear=function(){this._size=0,this._values=Object.create(null)};as.prototype.get=function(t){return this._values[t]};as.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var LO=/[^.^\]^[]+|(?=\[\]|\.\.)/g,g0=/^\d+$/,FO=/^\d/,UO=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,$O=/^\s*(['"]?)(.*?)(\1)\s*$/,Td=512,wm=new as(Td),Em=new as(Td),Tm=new as(Td),Kr={Cache:as,split:Nu,normalizePath:Mc,setter:function(t){var e=Mc(t);return Em.get(t)||Em.set(t,function(r,s){for(var i=0,o=e.length,a=r;i<o-1;){var l=e[i];if(l==="__proto__"||l==="constructor"||l==="prototype")return r;a=a[e[i++]]}a[e[i]]=s})},getter:function(t,e){var n=Mc(t);return Tm.get(t)||Tm.set(t,function(s){for(var i=0,o=n.length;i<o;)if(s!=null||!e)s=s[n[i++]];else return;return s})},join:function(t){return t.reduce(function(e,n){return e+(bd(n)||g0.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){jO(Array.isArray(t)?t:Nu(t),e,n)}};function Mc(t){return wm.get(t)||wm.set(t,Nu(t).map(function(e){return e.replace($O,"$2")}))}function Nu(t){return t.match(LO)||[""]}function jO(t,e,n){var r=t.length,s,i,o,a;for(i=0;i<r;i++)s=t[i],s&&(zO(s)&&(s='"'+s+'"'),a=bd(s),o=!a&&/^\d+$/.test(s),e.call(n,s,a,o,i,t))}function bd(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function BO(t){return t.match(FO)&&!t.match(g0)}function qO(t){return UO.test(t)}function zO(t){return!bd(t)&&(BO(t)||qO(t))}const HO=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Ql=t=>t.match(HO)||[],Yl=t=>t[0].toUpperCase()+t.slice(1),Id=(t,e)=>Ql(t).join(e).toLowerCase(),_0=t=>Ql(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),WO=t=>Yl(_0(t)),KO=t=>Id(t,"_"),GO=t=>Id(t,"-"),QO=t=>Yl(Id(t," ")),YO=t=>Ql(t).map(Yl).join(" ");var Lc={words:Ql,upperFirst:Yl,camelCase:_0,pascalCase:WO,snakeCase:KO,kebabCase:GO,sentenceCase:QO,titleCase:YO},Ad={exports:{}};Ad.exports=function(t){return y0(JO(t),t)};Ad.exports.array=y0;function y0(t,e){var n=t.length,r=new Array(n),s={},i=n,o=XO(e),a=ZO(t);for(e.forEach(function(c){if(!a.has(c[0])||!a.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||l(t[i],i,new Set);return r;function l(c,u,h){if(h.has(c)){var d;try{d=", node was:"+JSON.stringify(c)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!a.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!s[u]){s[u]=!0;var f=o.get(c)||new Set;if(f=Array.from(f),u=f.length){h.add(c);do{var y=f[--u];l(y,a.get(y),h)}while(u);h.delete(c)}r[--n]=c}}}function JO(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var s=t[n];e.add(s[0]),e.add(s[1])}return Array.from(e)}function XO(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var s=t[n];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}function ZO(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}var ek=Ad.exports;const tk=MO(ek),nk=Object.prototype.toString,rk=Error.prototype.toString,sk=RegExp.prototype.toString,ik=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",ok=/^Symbol\((.*)\)(.*)$/;function ak(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function bm(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return ak(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return ik.call(t).replace(ok,"Symbol($1)");const r=nk.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+rk.call(t)+"]":r==="RegExp"?sk.call(t):null}function mr(t,e){let n=bm(t,e);return n!==null?n:JSON.stringify(t,function(r,s){let i=bm(this[r],e);return i!==null?i:s},2)}function v0(t){return t==null?[]:[].concat(t)}let w0,E0,T0,lk=/\$\{\s*(\w+)\s*\}/g;w0=Symbol.toStringTag;class Im{constructor(e,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[w0]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],v0(e).forEach(i=>{if($t.isError(i)){this.errors.push(...i.errors);const o=i.inner.length?i.inner:[i];this.inner.push(...o)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}E0=Symbol.hasInstance;T0=Symbol.toStringTag;class $t extends Error{static formatError(e,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof e=="string"?e.replace(lk,(s,i)=>mr(n[i])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,s,i){const o=new Im(e,n,r,s);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[T0]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,$t)}static[E0](e){return Im[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let mn={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${mr(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${mr(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${mr(n,!0)}\``+s}},Lt={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ck={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Vu={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},uk={isValue:"${path} field must be ${value}"},Mu={noUnknown:"${path} field has unspecified keys: ${unknown}"},hk={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},dk={notType:t=>{const{path:e,value:n,spec:r}=t,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${mr(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${mr(n,!0)}\``}return $t.formatError(mn.notType,t)}};Object.assign(Object.create(null),{mixed:mn,string:Lt,number:ck,date:Vu,object:Mu,array:hk,boolean:uk,tuple:dk});const Sd=t=>t&&t.__isYupSchema__;class Ha{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:i}=n,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);return new Ha(e,(a,l)=>{var c;let u=o(...a)?s:i;return(c=u==null?void 0:u(l))!=null?c:l})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(i=>i.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,e,n);if(s===void 0||s===e)return e;if(!Sd(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const Jo={context:"$",value:"."};class ls{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Jo.context,this.isValue=this.key[0]===Jo.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Jo.context:this.isValue?Jo.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Kr.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let s=this.isContext?r:this.isValue?e:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}ls.prototype.__isYupRef=!0;const jr=t=>t==null;function ds(t){function e({value:n,path:r="",options:s,originalValue:i,schema:o},a,l){const{name:c,test:u,params:h,message:d,skipAbsent:f}=t;let{parent:y,context:T,abortEarly:E=o.spec.abortEarly,disableStackTrace:R=o.spec.disableStackTrace}=s;function O(re){return ls.isRef(re)?re.getValue(n,y,T):re}function L(re={}){const De=Object.assign({value:n,originalValue:i,label:o.spec.label,path:re.path||r,spec:o.spec,disableStackTrace:re.disableStackTrace||R},h,re.params);for(const Pt of Object.keys(De))De[Pt]=O(De[Pt]);const Ge=new $t($t.formatError(re.message||d,De),n,De.path,re.type||c,De.disableStackTrace);return Ge.params=De,Ge}const z=E?a:l;let G={path:r,parent:y,type:c,from:s.from,createError:L,resolve:O,options:s,originalValue:i,schema:o};const N=re=>{$t.isError(re)?z(re):re?l(null):z(L())},Z=re=>{$t.isError(re)?z(re):a(re)};if(f&&jr(n))return N(!0);let M;try{var Y;if(M=u.call(G,n,G),typeof((Y=M)==null?void 0:Y.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${G.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(M).then(N,Z)}}catch(re){Z(re);return}N(M)}return e.OPTIONS=t,e}function fk(t,e,n,r=n){let s,i,o;return e?(Kr.forEach(e,(a,l,c)=>{let u=l?a.slice(1,a.length-1):a;t=t.resolve({context:r,parent:s,value:n});let h=t.type==="tuple",d=c?parseInt(u,10):0;if(t.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&d>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[d],t=h?t.spec.types[d]:t.innerType}if(!c){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t.type}")`);s=n,n=n&&n[u],t=t.fields[u]}i=u,o=l?"["+a+"]":"."+a}),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class Wa extends Set{describe(){const e=[];for(const n of this.values())e.push(ls.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new Wa(this.values())}merge(e,n){const r=this.clone();return e.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function ys(t,e=new Map){if(Sd(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=ys(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,s]of t.entries())n.set(r,ys(s,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(ys(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,s]of Object.entries(t))n[r]=ys(s,e)}else throw Error(`Unable to clone ${t}`);return n}class kn{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Wa,this._blacklist=new Wa,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(mn.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=ys(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(i=>{e.tests.forEach(o=>{i.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,i)=>i.resolve(s,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,s,i;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),s=n.assert==="ignore-optionality",i=r._cast(e,n);if(n.assert!==!1&&!r.isType(i)){if(s&&jr(i))return i;let o=mr(e),a=mr(i);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return i}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,s){let{path:i,originalValue:o=e,strict:a=this.spec.strict}=n,l=e;a||(l=this._cast(l,Object.assign({assert:!1},n)));let c=[];for(let u of Object.values(this.internalTests))u&&c.push(u);this.runTests({path:i,value:l,originalValue:o,options:n,tests:c},r,u=>{if(u.length)return s(u,l);this.runTests({path:i,value:l,originalValue:o,options:n,tests:this.tests},r,s)})}runTests(e,n,r){let s=!1,{tests:i,value:o,originalValue:a,path:l,options:c}=e,u=T=>{s||(s=!0,n(T,o))},h=T=>{s||(s=!0,r(T,o))},d=i.length,f=[];if(!d)return h([]);let y={value:o,originalValue:a,path:l,options:c,schema:this};for(let T=0;T<i.length;T++){const E=i[T];E(y,u,function(O){O&&(Array.isArray(O)?f.push(...O):f.push(O)),--d<=0&&h(f)})}}asNestedTest({key:e,index:n,parent:r,parentPath:s,originalParent:i,options:o}){const a=e??n;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let c=r[a];const u=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:i[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${s||""}[${l?a:`"${a}"`}]`:(s?`${s}.`:"")+e});return(h,d,f)=>this.resolve(u)._validate(c,u,d,f)}validate(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((o,a)=>s._validate(e,n,(l,c)=>{$t.isError(l)&&(l.value=c),a(l)},(l,c)=>{l.length?a(new $t(l,c,void 0,void 0,i)):o(c)}))}validateSync(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i,o=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},n,{sync:!0}),(a,l)=>{throw $t.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new $t(a,e,void 0,void 0,o);i=l}),i}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if($t.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if($t.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):ys(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=ds({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=ds({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=mn.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=mn.notNull){return this.nullability(!1,e)}required(e=mn.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=mn.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=ds(n),i=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(i||o.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),s=v0(e).map(i=>new ls(i));return s.forEach(i=>{i.isSibling&&r.deps.push(i.key)}),r.conditions.push(typeof n=="function"?new Ha(s,n):Ha.fromOptions(s,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=ds({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=mn.oneOf){let r=this.clone();return e.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=ds({message:n,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,o=i.resolveAll(this.resolve);return o.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:o}})}}),r}notOneOf(e,n=mn.notOneOf){let r=this.clone();return e.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=ds({message:n,name:"notOneOf",test(s){let i=this.schema._blacklist,o=i.resolveAll(this.resolve);return o.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:i,nullable:o}=n.spec;return{meta:s,label:r,optional:i,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,c,u)=>u.findIndex(h=>h.name===l.name)===c)}}}kn.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])kn.prototype[`${t}At`]=function(e,n,r={}){const{parent:s,parentPath:i,schema:o}=fk(this,e,n,r.context);return o[t](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const t of["equals","is"])kn.prototype[t]=kn.prototype.oneOf;for(const t of["not","nope"])kn.prototype[t]=kn.prototype.notOneOf;const pk=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function mk(t){const e=Lu(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function Lu(t){var e,n;const r=pk.exec(t);return r?{year:Mn(r[1]),month:Mn(r[2],1)-1,day:Mn(r[3],1),hour:Mn(r[4]),minute:Mn(r[5]),second:Mn(r[6]),millisecond:r[7]?Mn(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Mn(r[10]),minuteOffset:Mn(r[11])}:null}function Mn(t,e=0){return Number(t)||e}let gk=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_k=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,yk=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,vk="^\\d{4}-\\d{2}-\\d{2}",wk="\\d{2}:\\d{2}:\\d{2}",Ek="(([+-]\\d{2}(:?\\d{2})?)|Z)",Tk=new RegExp(`${vk}T${wk}(\\.\\d+)?${Ek}$`),bk=t=>jr(t)||t===t.trim(),Ik={}.toString();function Cs(){return new b0}class b0 extends kn{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===Ik?e:s})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||mn.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=Lt.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=Lt.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=Lt.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,s,i;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:i}=n:s=n),this.test({name:i||"matches",message:s||Lt.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=Lt.email){return this.matches(gk,{name:"email",message:e,excludeEmptyString:!0})}url(e=Lt.url){return this.matches(_k,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Lt.uuid){return this.matches(yk,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,s;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=e:n=e),this.matches(Tk,{name:"datetime",message:n||Lt.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Lt.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:i=>{if(!i||r)return!0;const o=Lu(i);return o?!!o.z:!1}}).test({name:"datetime_precision",message:n||Lt.datetime_precision,params:{precision:s},skipAbsent:!0,test:i=>{if(!i||s==null)return!0;const o=Lu(i);return o?o.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Lt.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:bk})}lowercase(e=Lt.lowercase){return this.transform(n=>jr(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>jr(n)||n===n.toLowerCase()})}uppercase(e=Lt.uppercase){return this.transform(n=>jr(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>jr(n)||n===n.toUpperCase()})}}Cs.prototype=b0.prototype;let Ak=new Date(""),Sk=t=>Object.prototype.toString.call(t)==="[object Date]";class Jl extends kn{constructor(){super({type:"date",check(e){return Sk(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=mk(e),isNaN(e)?Jl.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(ls.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,n=Vu.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(e,n=Vu.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}Jl.INVALID_DATE=Ak;Jl.prototype;function Rk(t,e=[]){let n=[],r=new Set,s=new Set(e.map(([o,a])=>`${o}-${a}`));function i(o,a){let l=Kr.split(o)[0];r.add(l),s.has(`${a}-${l}`)||n.push([a,l])}for(const o of Object.keys(t)){let a=t[o];r.add(o),ls.isRef(a)&&a.isSibling?i(a.path,o):Sd(a)&&"deps"in a&&a.deps.forEach(l=>i(l,o))}return tk.array(Array.from(r),n).reverse()}function Am(t,e){let n=1/0;return t.some((r,s)=>{var i;if((i=e.path)!=null&&i.includes(r))return n=s,!0}),n}function I0(t){return(e,n)=>Am(t,e)-Am(t,n)}const Pk=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function ua(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=ua(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=ua(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(ua)}):"optional"in t?t.optional():t}const Ck=(t,e)=>{const n=[...Kr.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),s=Kr.getter(Kr.join(n),!0)(t);return!!(s&&r in s)};let Sm=t=>Object.prototype.toString.call(t)==="[object Object]";function xk(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const Ok=I0([]);function Rd(t){return new A0(t)}class A0 extends kn{constructor(e){super({type:"object",check(n){return Sm(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=Ok,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let s=super._cast(e,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let i=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(s).filter(h=>!this._nodes.includes(h))),l={},c=Object.assign({},n,{parent:l,__validating:n.__validating||!1}),u=!1;for(const h of a){let d=i[h],f=h in s;if(d){let y,T=s[h];c.path=(n.path?`${n.path}.`:"")+h,d=d.resolve({value:T,context:n.context,parent:l});let E=d instanceof kn?d.spec:void 0,R=E==null?void 0:E.strict;if(E!=null&&E.strip){u=u||h in s;continue}y=!n.__validating||!R?d.cast(s[h],c):s[h],y!==void 0&&(l[h]=y)}else f&&!o&&(l[h]=s[h]);(f!==h in l||l[h]!==s[h])&&(u=!0)}return u?l:s}_validate(e,n={},r,s){let{from:i=[],originalValue:o=e,recursive:a=this.spec.recursive}=n;n.from=[{schema:this,value:o},...i],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(l,c)=>{if(!a||!Sm(c)){s(l,c);return}o=o||c;let u=[];for(let h of this._nodes){let d=this.fields[h];!d||ls.isRef(d)||u.push(d.asNestedTest({options:n,key:h,parent:c,parentPath:n.path,originalParent:o}))}this.runTests({tests:u,value:c,originalValue:o,options:n},r,h=>{s(h.sort(this._sortErrors).concat(l),c)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[s,i]of Object.entries(this.fields)){const o=r[s];r[s]=o===void 0?i:o}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const i=this.fields[r];let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=i&&"getDefault"in i?i.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=Rk(e,n),r._sortErrors=I0(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return ua(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>e.includes(r)&&e.includes(s)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let s=Kr.getter(e,!0);return this.transform(i=>{if(!i)return i;let o=i;return Ck(i,e)&&(o=Object.assign({},i),r||delete o[e],o[n]=s(i)),o})}json(){return this.transform(Pk)}noUnknown(e=!0,n=Mu.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const i=xk(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=Mu.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[e(s)]=n[s];return r})}camelCase(){return this.transformKeys(Lc.camelCase)}snakeCase(){return this.transformKeys(Lc.snakeCase)}constantCase(){return this.transformKeys(e=>Lc.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[i,o]of Object.entries(n.fields)){var s;let a=e;(s=a)!=null&&s.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[i]})),r.fields[i]=o.describe(a)}return r}}Rd.prototype=A0.prototype;const kk=m0(Rd({firstName:Cs().required(),lastName:Cs().required(),phone:Cs().required()})),Kn=Ws("user",()=>{const{errors:t,defineField:e,handleSubmit:n,meta:r,isSubmitting:s}=Ed({validationSchema:kk}),[i,o]=e("firstName"),[a,l]=e("lastName"),[c,u]=e("phone"),h=Ie(""),d=Ie(""),f=on({latitude:"",longitude:""}),y=on({country:"",administrative_area_level_1:"",administrative_area_level_2:"",locality:"",sublocality:"",route:"",street_number:"",postal_code:""}),T=on([{brand:"",model:"",year:"",mileage:"",fuelType:"gasolina",soatExpiry:null,annualInspection:null,technicalInspection:null}]),E=M=>{Object.assign(y,{country:M.country||"",administrative_area_level_1:M.administrative_area_level_1||"",administrative_area_level_2:M.administrative_area_level_2||"",locality:M.locality||"",sublocality:M.sublocality||"",route:M.route||"",street_number:M.street_number||"",postal_code:M.postal_code||""})},R=M=>{Object.assign(f,{latitude:M.latitude||"",longitude:M.longitude||""})};function O(){T.push({brand:"",model:"",year:"",mileage:"",fuelType:"gasolina",soatExpiry:null,annualInspection:null,technicalInspection:null})}function L(M){T.splice(M,1)}function z(M){d.value=M.uid||"",i.value=M.firstName||"",a.value=M.lastName||"",c.value=M.phone||"",Object.assign(T,M.cars||[{brand:"",model:"",year:"",mileage:"",fuelType:"",soatExpiry:"",annualInspection:"",technicalInspection:""}])}function G(){d.value="",i.value="",a.value="",c.value="",Object.assign(T,[{brand:"",model:"",year:"",mileage:"",fuelType:"",soatExpiry:"",annualInspection:"",technicalInspection:""}])}async function N(M){if(M){const Y=tm(Dc,"users"),re=dx(Y,fx("uid","==",M));(await wx(re)).docs.map(Ge=>{const Pt=Ge.data();h.value=Ge.id,z(Pt)})}else return[]}async function Z(M){try{const Y=tm(Dc,"users"),re={id:"",uid:M,firstName:"",lastName:"",phone:"",cars:[{brand:"",model:"",year:"",mileage:"",fuelType:"gasolina",soatExpiry:"",annualInspection:"",technicalInspection:""}]};return z(re),await Tx(Y,re)}catch(Y){throw Y}}async function ne(M){try{const Y=Wv(Dc,"users",h.value);await Ex(Y,M)}catch(Y){throw Y}}return{id:h,uid:d,handleSubmit:n,isSubmitting:s,errors:t,meta:r,firstName:i,firstNameProps:o,lastName:a,lastNameProps:l,phone:c,phoneProps:u,cars:T,setUser:z,getUserByUid:N,createUser:Z,updateUser:ne,resetUser:G,addCar:O,removeCar:L,location:y,setUserLocation:E,coordinates:f,setUserCoordinates:R}}),ei=Ws("auth",()=>{const t=Ie(""),e=Ie(""),n=Ie(""),r=Ie(!1),s=Ie(!1);function i(a){r.value=a}async function o(){return new Promise((a,l)=>{try{qs.onAuthStateChanged(c=>{s.value=!!c,c&&(e.value=c.email,n.value=c.uid,t.value=c.displayName),a()})}catch(c){l(c)}})}return{isLoading:r,setIsLoading:i,email:e,uid:n,displayName:t,getFirebaseUser:o,isAuthenticated:s}}),S0=m0(Rd({email:Cs().required().email(),password:Cs().min(6).required()})),Pd=Ws("loginModal",()=>{const{errors:t,defineField:e,handleSubmit:n,meta:r,isSubmitting:s}=Ed({validationSchema:S0}),i=Ie(!1),o=Ie(!1),[a,l]=e("email"),[c,u]=e("password");function h(y){i.value=y}function d(y){o.value=y}function f(){d(!0)}return{email:a,password:c,emailProps:l,passwordProps:u,errors:t,defineField:e,handleSubmit:n,meta:r,isSubmitting:s,isLoading:i,showModal:o,setIsLoading:h,setShowModal:d,handleShowLoginModal:f}}),Cd=Ws("registerModal",()=>{const{errors:t,defineField:e,handleSubmit:n,meta:r,isSubmitting:s}=Ed({validationSchema:S0}),i=Ie(!1),o=Ie(!1),[a,l]=e("email"),[c,u]=e("password");function h(y){i.value=y}function d(y){o.value=y}function f(){d(!0)}return{email:a,password:c,emailProps:l,passwordProps:u,errors:t,defineField:e,handleSubmit:n,meta:r,isSubmitting:s,isLoading:i,showModal:o,setIsLoading:h,setShowModal:d,handleShowRegisterModal:f}}),xd=Ws("locationModal",()=>{const t=Ie(!1),e=Ie(!1);function n(i){t.value=i}function r(i){e.value=i}function s(){r(!0)}return{isLoading:t,showModal:e,setIsLoading:n,setShowModal:r,handleShowRegisterModal:s}}),Dk=Rt({__name:"App",setup(t){const e=xd(),n=Kn(),r=ei();async function s(){navigator.geolocation?await new Promise((i,o)=>{navigator.geolocation.getCurrentPosition(async a=>{n.setUserCoordinates(a.coords);const{Geocoder:l}=await google.maps.importLibrary("geocoding");new l().geocode({location:{lat:a.coords.latitude,lng:a.coords.longitude}},function(u,h){if(h==="OK"){const d={country:"",administrative_area_level_1:"",administrative_area_level_2:"",locality:"",sublocality:"",route:"",street_number:"",postal_code:""};u[0].address_components.map(f=>{f.types.includes("country")?d.country=f.long_name:f.types.includes("administrative_area_level_1")?d.administrative_area_level_1=f.long_name:f.types.includes("administrative_area_level_2")?d.administrative_area_level_2=f.long_name:f.types.includes("locality")?d.locality=f.long_name:f.types.includes("sublocality")?d.sublocality=f.long_name:f.types.includes("route")?d.route=f.long_name:f.types.includes("street_number")?d.street_number=f.long_name:f.types.includes("postal_code")&&(d.postal_code=f.long_name)}),n.setUserLocation(d)}else console.error("Error al geocodificar la dirección:",h)}),i()},a=>{a.code===a.PERMISSION_DENIED&&e.setShowModal(!0),o()})}):console.error("Geolocalización no es compatible con este navegador.")}return rl(async()=>{r.setIsLoading(!0),await r.getFirebaseUser().then(async()=>{await n.getUserByUid(r==null?void 0:r.uid).then(()=>{r.setIsLoading(!1),s()})})}),(i,o)=>A(r).isLoading?(ie(),At(ub,{key:0})):(ie(),At(A(Hg),{key:1}))}}),Nk="/assets/location-DpZDhNKF.svg",Vk="/assets/profile-DfsRXmBN.png",Mk={class:"flex sm:flex-row flex-col justify-between items-center bg-white w-full px-4 py-4 drop-shadow-xl sticky"},Lk={class:"flex flex-row justify-start items-center sm:mb-0 mb-5"},Fk=v("p",{class:"cursor-default text-blue-700 border-blue-700 text-4xl font-bold border-4 rounded-xl px-1 hidden sm:block"},"TODOAUTOS",-1),Uk={class:"flex flex-col justify-center items-center sm:mx-7"},$k={class:"cursor-default flex flex-row px-2 rounded-sm"},jk=v("p",{class:"text-blue-900 font-bold"},"Ubicación",-1),Bk=["src"],qk={class:"flex flex-row items-center"},zk={class:"cursor-default w-fit px-4 text-center text-blue-700 font-black py-1"},Hk=v("path",{d:"M22.853,1.148a3.626,3.626,0,0,0-5.124,0L1.465,17.412A4.968,4.968,0,0,0,0,20.947V23a1,1,0,0,0,1,1H3.053a4.966,4.966,0,0,0,3.535-1.464L22.853,6.271A3.626,3.626,0,0,0,22.853,1.148ZM5.174,21.122A3.022,3.022,0,0,1,3.053,22H2V20.947a2.98,2.98,0,0,1,.879-2.121L15.222,6.483l2.3,2.3ZM21.438,4.857,18.932,7.364l-2.3-2.295,2.507-2.507a1.623,1.623,0,1,1,2.295,2.3Z"},null,-1),Wk=[Hk],Kk={class:"flex flex-row justify-between items-center"},Gk={class:"flex flex-row justify-between items-center"},Qk={class:"flex flex-row justify-between items-center"},Yk=["src"],Jk={class:"text-blue-700 font-bold"},Xk=v("div",{class:"absolute w-0 h-0",style:{top:"-10px",left:"75px","border-left":"10px solid transparent","border-right":"10px solid transparent","border-bottom":"10px solid #1e3a8a"}},null,-1),Zk=Rt({__name:"TopBar",setup(t){const{handleShowLoginModal:e}=Pd(),{handleShowRegisterModal:n}=Cd(),r=Kn(),s=ei(),i=xd(),o=Ie(!1);async function a(){try{await WA(qs),r.resetUser()}catch(l){console.error("Error al cerrar sesión:",l)}}return(l,c)=>(ie(),Ee("div",Mk,[v("div",Lk,[Fk,v("div",Uk,[v("span",$k,[jk,v("img",{src:A(Nk),alt:"LOCATION",class:"h-6"},null,8,Bk)]),v("span",qk,[v("p",zk,[A(r).location.postal_code?(ie(),Ee(ut,{key:0},[Kt(Ht(A(r).location.administrative_area_level_2)+", "+Ht(A(r).location.administrative_area_level_1),1)],64)):(ie(),Ee(ut,{key:1},[Kt("Seleccionar una ubicación")],64))]),(ie(),Ee("svg",{onClick:c[0]||(c[0]=u=>A(i).setShowModal(!0)),class:"cursor-pointer w-8 h-6 py-1 rounded-md bg-white",xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"512",height:"512"},Wk))])])]),v("div",Kk,[v("div",Gk,[A(s).isAuthenticated?(ie(),Ee("div",{key:0,class:"cursor-default bg-white rounded-md h-12 min-w-fit px-2 flex flex-col justify-center items-center",onMouseenter:c[1]||(c[1]=u=>o.value=!0),onMouseleave:c[2]||(c[2]=u=>o.value=!1)},[v("div",Qk,[v("img",{src:A(Vk),alt:"AVATAR",class:"w-8 mr-2"},null,8,Yk),v("p",Jk,Ht(A(s).displayName||A(s).email||"-"),1)]),o.value?(ie(),Ee("button",{key:0,onClick:a,class:"cursor-pointer py-1 font-normal rounded-md border-blue-100 border-2 hover:bg-blue-100 text-blue-900 hover:border-blue-900 bg-white w-44 top-[4.3em] absolute flex flex-col justify-between items-center"},[Xk,Kt(" Cerrar sesión ")])):Dt("",!0)],32)):(ie(),Ee(ut,{key:1},[v("button",{onClick:c[3]||(c[3]=(...u)=>A(e)&&A(e)(...u)),class:"font-bold w-40 px-5 py-2 rounded-lg hover:border-blue-700 border-2 text-blue-700 bg-blue-100 mr-3"},"INGRESAR"),v("button",{onClick:c[4]||(c[4]=(...u)=>A(n)&&A(n)(...u)),class:"font-bold w-40 px-5 py-2 rounded-lg hover:border-blue-700 border-2 text-blue-700 bg-blue-100"},"REGISTRARSE")],64))])])]))}}),eD={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 bg-white"},tD=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),nD=[tD],rD={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 bg-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},sD=v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1),iD=[sD],oD=Rt({__name:"SideBar",setup(t){const e=hl(),n=Ie(!1),r=ei(),s=Kn();function i(){n.value=!n.value}function o(a){return Object.is(e.currentRoute.value.name,a)}return(a,l)=>{const c=ag("router-link");return ie(),Ee("div",null,[v("div",{onClick:i,class:it([{"w-44":n.value,"w-6.5":!n.value},"bg-white cursor-pointer sm:hidden flex fixed top-0"])},[n.value?(ie(),Ee("svg",eD,nD)):(ie(),Ee("svg",rD,iD))],2),v("div",{class:it([{"flex top-[1.5rem]":n.value,"hidden sm:flex top-[5.5rem]":!n.value},"flex-col justify-start items-center h-full w-44 bg-white drop-shadow-xl fixed bottom-0"])},[A(s).location.administrative_area_level_2=="Trujillo"?(ie(),At(c,{key:0,class:it([{"font-bold bg-blue-100":o("AllServices"),"font-semibold bg-white":!o("AllServices")},"text-blue-700 hover:font-bold drop-shadow-xl py-1 mb-1 w-full text-left pl-3"]),to:{name:"AllServices"}},{default:Zt(()=>[Kt("Todos los servicios")]),_:1},8,["class"])):Dt("",!0),qe(c,{class:it([{"font-bold bg-blue-100":o("CarWashServices"),"font-semibold bg-white":!o("CarWashServices")},"text-blue-700 hover:font-bold drop-shadow-xl py-1 mb-1 w-full text-left pl-3"]),to:{name:"CarWashServices"}},{default:Zt(()=>[Kt("Todo Lavado")]),_:1},8,["class"]),A(r).isAuthenticated?(ie(),At(c,{key:1,class:it([{"font-bold bg-blue-100":o("Profile"),"font-semibold bg-white":!o("Profile")},"text-blue-700 hover:font-bold drop-shadow-xl py-1 mb-1 w-full text-left pl-3"]),to:{name:"Profile"}},{default:Zt(()=>[Kt("Mi perfil")]),_:1},8,["class"])):Dt("",!0)],2)])}}}),aD={class:"fixed w-screen h-screen top-0 left-0 flex flex-row justify-center items-center bg-black bg-opacity-80 z-20"},lD={key:0,class:"w-full flex flex-row justify-end items-center mb-1"},cD={class:"w-full h-full flex flex-col justify-center items-center mt-0 mb-5"},Xl=Rt({__name:"Modal",props:{width:{default:"w-1/2"},height:{default:"h-3/4"},showCloseIcon:{type:Boolean,default:!0}},emits:["closeModal"],setup(t,{emit:e}){const n=t;return(r,s)=>(ie(),Ee("div",aD,[v("div",{class:it(["flex flex-col justify-start items-center bg-white rounded-lg pt-2 px-4",n.width+" "+n.height])},[r.showCloseIcon?(ie(),Ee("div",lD,[v("p",{class:"text-lg font-bold cursor-pointer",onClick:s[0]||(s[0]=i=>r.$emit("closeModal"))},"X")])):Dt("",!0),v("div",cD,[dg(r.$slots,"default",{},()=>[Kt("MODAL")])])],2)]))}}),uD={key:1,class:"w-full flex flex-col justify-center items-center"},hD={key:0,class:"text-sm flex flex-row justify-center items-center mb-10"},dD=v("p",{class:"rounded-xs font-semibold px-4 py-1 bg-red-100 text-red-800 cursor-default mr-1"},"El correo o la contraseña son incorrectos",-1),fD=[dD],pD={key:1,class:"text-sm flex flex-row justify-center items-center mb-10"},mD=v("p",{class:"cursor-default mr-1"},"¿No tienes una cuenta?",-1),gD={class:"flex flex-col rounded-md w-full"},_D={class:"flex flex-col w-full"},yD=["disabled"],vD=v("div",{class:"flex flex-row justify-between items-baseline"},[v("hr",{class:"h-[2px] w-24 bg-[#ededed]"}),v("p",{class:"my-4 mx-2 text-gray-500"},"o"),v("hr",{class:"h-[2px] w-24 bg-[#ededed]"})],-1),wD=v("svg",{class:"h-6",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},[v("g",null,[v("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),v("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),v("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),v("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),v("path",{fill:"none",d:"M0 0h48v48H0z"})])],-1),ED=v("p",{class:"ml-3"},"Iniciar sesión con Google",-1),TD=[wD,ED],bD=Rt({__name:"LoginModal",setup(t){const e=Pd(),n=Cd(),r=Kn(),s=ei(),i=Ie(!1);function o(){e.setShowModal(!1),n.setShowModal(!0)}const a=async()=>{try{i.value=!1;const u=new yn;await L_(qs,u).then(async()=>{await r.getUserByUid(s==null?void 0:s.uid),e.setIsLoading(!1),e.setShowModal(!1)})}catch(u){i.value=!0,console.error("Error al iniciar sesión con Google:",u)}},l=async()=>{try{i.value=!1,e.setIsLoading(!0),await qA(qs,e.email||"",e.password||"").then(async()=>{await r.getUserByUid(s==null?void 0:s.uid),e.setIsLoading(!1),e.setShowModal(!1)})}catch(u){i.value=!0,e.setIsLoading(!1),console.error("Error al iniciar sesión con correo y contraseña:",u)}},c=e.handleSubmit(u=>{l()},({errors:u})=>{s.setIsLoading(!1)});return(u,h)=>A(e).showModal?(ie(),At(Xl,{key:0,onCloseModal:h[3]||(h[3]=d=>A(e).setShowModal(!1)),width:"w-3/4",height:"h-3/4",showCloseIcon:!0},{default:Zt(()=>[A(e).isLoading?(ie(),At(oh,{key:0})):(ie(),Ee("div",uD,[i.value?(ie(),Ee("span",hD,fD)):(ie(),Ee("span",pD,[mD,v("p",{class:"cursor-pointer bg-white font-semibold",onClick:o},"Registrate gratis")])),v("form",{onSubmit:h[2]||(h[2]=Cg((...d)=>A(c)&&A(c)(...d),["prevent"])),class:"rounded-md w-full sm:w-2/5 flex flex-col justify-center items-center"},[v("div",gD,[v("label",{for:"email",class:it(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":A(e).meta.touched&&A(e).errors&&A(e).errors.email}])},"Correo electrónico",2),lt(v("input",Li({class:[{"border-red-400 border-2 rounded-xs":A(e).meta.touched&&A(e).errors&&A(e).errors.email},"h-8 mb-2 pl-2 bg-blue-100 rounded-md"],style:{outline:"none"},type:"email",id:"email","onUpdate:modelValue":h[0]||(h[0]=d=>A(e).email=d)},A(e).emailProps),null,16),[[kt,A(e).email]])]),v("div",_D,[v("label",{for:"password",class:it(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":A(e).meta.touched&&A(e).errors&&A(e).errors.password}])},"Contraseña",2),lt(v("input",Li({class:[{"border-red-400 border-2 rounded-xs":A(e).meta.touched&&A(e).errors&&A(e).errors.password},"h-8 mb-2 pl-2 bg-blue-100 rounded-md"],style:{outline:"none"},type:"password",id:"password","onUpdate:modelValue":h[1]||(h[1]=d=>A(e).password=d)},A(e).passwordProps,{placeholder:"Mínimo 6 carácteres"}),null,16),[[kt,A(e).password]])]),v("button",{disabled:A(e).isSubmitting,type:"submit",class:"w-full flex flex-row justify-center items-center mt-3 py-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},Ht(A(e).isSubmitting?"Cargando":"Iniciar sesión"),9,yD),vD],32),v("button",{type:"button",class:"mt-2 flex flex-row justify-evenly items-center bg-white border-blue-100 border-2 w-fit rounded-md px-3 py-1 hover:opacity-60",onClick:a},TD)]))]),_:1})):Dt("",!0)}}),ID={key:1,class:"w-full flex flex-col justify-center items-center"},AD=v("p",{class:"cursor-default mr-1"},"¿Ya tienes una cuenta?",-1),SD={class:"flex flex-col rounded-md w-full"},RD={class:"flex flex-col w-full"},PD=["disabled"],CD=v("div",{class:"flex flex-row justify-between items-baseline"},[v("hr",{class:"h-[2px] w-24 bg-[#ededed]"}),v("p",{class:"my-4 mx-2 text-gray-500"},"o"),v("hr",{class:"h-[2px] w-24 bg-[#ededed]"})],-1),xD=v("svg",{class:"h-6",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},[v("g",null,[v("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),v("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),v("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),v("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),v("path",{fill:"none",d:"M0 0h48v48H0z"})])],-1),OD=v("p",{class:"ml-3"},"Registrarse con Google",-1),kD=[xD,OD],DD=Rt({__name:"RegisterModal",setup(t){const e=hl(),n=Cd(),r=Pd(),s=Kn(),i=ei();function o(){n.setShowModal(!1),r.setShowModal(!0)}const a=async()=>{try{n.setShowModal(!0),await BA(qs,n.email||"",n.password||"").then(async({user:{uid:u}})=>{await s.createUser(u).then(()=>{n.setShowModal(!1),e.push({name:"Profile"})})})}catch(u){console.error("Error al registrar el usuario:",u)}},l=async()=>{try{const u=new yn;await L_(qs,u).then(async()=>{await s.getUserByUid(i==null?void 0:i.uid),n.setIsLoading(!1),n.setShowModal(!1)})}catch(u){console.error("Error al iniciar sesión con Google:",u)}},c=n.handleSubmit(u=>{a()},({errors:u})=>{i.setIsLoading(!1)});return(u,h)=>A(n).showModal?(ie(),At(Xl,{key:0,onCloseModal:h[3]||(h[3]=d=>A(n).setShowModal(!1)),width:"w-3/4",height:"h-3/4",showCloseIcon:!0},{default:Zt(()=>[A(n).isLoading?(ie(),At(oh,{key:0})):(ie(),Ee("div",ID,[v("span",{class:"text-sm flex flex-row justify-center items-center mb-10"},[AD,v("p",{class:"cursor-pointer bg-white font-semibold",onClick:o},"Inicia sesión")]),v("form",{onSubmit:h[2]||(h[2]=Cg((...d)=>A(c)&&A(c)(...d),["prevent"])),class:"rounded-md w-full sm:w-2/5 flex flex-col justify-center items-center"},[v("div",SD,[v("label",{for:"email",class:it(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":A(n).meta.touched&&A(n).errors&&A(n).errors.email}])},"Correo electrónico",2),lt(v("input",Li({class:["h-8 mb-2 pl-2 bg-blue-100 rounded-md",{"border-red-400 border-2 rounded-xs":A(n).meta.touched&&A(n).errors&&A(n).errors.email}],style:{outline:"none"},type:"email",id:"email","onUpdate:modelValue":h[0]||(h[0]=d=>A(n).email=d)},A(n).emailProps),null,16),[[kt,A(n).email]])]),v("div",RD,[v("label",{for:"password",class:it(["bg-white font-semibold text-xs mb-1",{"text-xs text-red-700 font-medium pl-2":A(n).meta.touched&&A(n).errors&&A(n).errors.password}])},"Contraseña",2),lt(v("input",Li({class:["h-8 mb-2 pl-2 bg-blue-100 rounded-md",{"border-red-400 border-2 rounded-xs":A(n).meta.touched&&A(n).errors&&A(n).errors.password}],style:{outline:"none"},type:"password",id:"password","onUpdate:modelValue":h[1]||(h[1]=d=>A(n).password=d)},A(n).passwordProps,{placeholder:"Mínimo 6 carácteres"}),null,16),[[kt,A(n).password]])]),v("button",{disabled:A(n).isSubmitting,type:"submit",class:"w-full flex flex-row justify-center items-center mt-3 py-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},Ht(A(r).isSubmitting?"Cargando":"Registrarse"),9,PD),CD],32),v("button",{type:"button",class:"mt-2 flex flex-row justify-evenly items-center bg-white border-blue-100 border-2 w-fit rounded-md px-3 py-1 hover:opacity-60",onClick:l},kD)]))]),_:1})):Dt("",!0)}}),ND={id:"address-form",class:"w-full h-full flex flex-col justify-between items-center"},VD={class:"w-full h-full mt-10 px-10 flex flex-col justify-start items-center"},MD=v("label",{for:"autocomplete-input",class:"mb-3"},"Es necesario ingresar una dirección",-1),LD={key:0,class:"w-full bg-blue-50 rounded-xs"},FD=["onClick"],UD={class:"py-2 px-4"},$D={class:"bg-black text-white text-sm py-1 px-2 rounded-lg absolute bottom-40"},jD=Rt({__name:"LocationModal",setup(t){const e=xd(),n=Kn(),r=Ie(""),s=Ie({predictions:[{description:""}]}),i=Ie({description:"",place_id:""}),o=Ie(!1);let a=null;function l(){a&&(clearTimeout(a),i.value={description:"",place_id:""});try{a=setTimeout(async()=>{const{AutocompleteService:h}=await google.maps.importLibrary("places");s.value=await new h().getPlacePredictions({input:r.value})},200)}catch(h){console.log("error",h)}}async function c(h){const{Geocoder:d}=await google.maps.importLibrary("geocoding");new d().geocode({placeId:h},function(y,T){if(T==="OK"){const E=y[0].geometry.location,R={country:"",administrative_area_level_1:"",administrative_area_level_2:"",locality:"",sublocality:"",route:"",street_number:"",postal_code:""};y[0].address_components.map(O=>{O.types.includes("country")?R.country=O.long_name:O.types.includes("administrative_area_level_1")?R.administrative_area_level_1=O.long_name:O.types.includes("administrative_area_level_2")?R.administrative_area_level_2=O.long_name:O.types.includes("locality")?R.locality=O.long_name:O.types.includes("sublocality")?R.sublocality=O.long_name:O.types.includes("route")?R.route=O.long_name:O.types.includes("street_number")?R.street_number=O.long_name:O.types.includes("postal_code")&&(R.postal_code=O.long_name)}),n.setUserLocation(R),n.setUserCoordinates({latitude:E.lat(),longitude:E.lng()})}else console.error("Error al geocodificar la dirección:",T)})}function u(h){i.value=h,r.value=h.description,c(h.place_id)}return(h,d)=>A(e).showModal?(ie(),At(Xl,{key:0,onCloseModal:d[4]||(d[4]=f=>A(e).setShowModal(!1)),showCloseIcon:!1},{default:Zt(()=>[v("form",ND,[v("span",VD,[MD,lt(v("input",{"onUpdate:modelValue":d[0]||(d[0]=f=>r.value=f),onInput:l,class:"pl-2 w-full h-10 bg-white rounded-xs",style:{outline:"none"},type:"text",id:"autocomplete-input",name:"autocomplete-input"},null,544),[[kt,r.value]]),r.value&&!i.value.place_id?(ie(),Ee("ul",LD,[(ie(!0),Ee(ut,null,th(s.value.predictions,(f,y)=>(ie(),Ee("li",{key:y,class:"cursor-pointer text-sm hover:bg-white hover:font-medium",onClick:T=>u(f)},[v("div",UD,Ht(f.description),1)],8,FD))),128))])):Dt("",!0)]),v("button",{class:it(["bg-white px-4 py-2 mb-10 text-blue-100 rounded-xs hover:opacity-70",{"opacity-70":!i.value.place_id}]),type:"button",onClick:d[1]||(d[1]=f=>A(e).setShowModal(!1)),onMouseover:d[2]||(d[2]=f=>o.value=!i.value.place_id),onMouseleave:d[3]||(d[3]=f=>o.value=!1)},[Kt("ACEPTAR "),lt(v("span",$D,"Selecciona un opción sugerida.",512),[[SE,o.value&&!i.value.place_id]])],34)])]),_:1})):Dt("",!0)}}),R0=Ws("alert",()=>{const t=Ie(!1);function e(n){t.value=n,setTimeout(()=>{t.value=!1},1500)}return{showAlert:t,setShowAlert:e}}),BD=v("p",{class:"text-blue-700 font-medium"},"¡Los datos se actualizaron con éxito!",-1),qD=Rt({__name:"Alert",setup(t){const e=R0();return(n,r)=>A(e).showAlert?(ie(),At(Xl,{key:0,onCloseModal:r[0]||(r[0]=s=>A(e).setShowAlert(!1)),width:"w-1/4",height:"h-40",showCloseIcon:!0},{default:Zt(()=>[BD]),_:1})):Dt("",!0)}}),zD={},HD={class:"footer"},WD={class:"pt-10 pb-7 px-10 text-center bg-white font-bold"};function KD(t,e){return ie(),Ee("footer",HD,[v("div",WD,[v("p",null,"© "+Ht(new Date().getFullYear())+" TODOAUTOS. Todos los derechos reservados.",1)])])}const GD=Wg(zD,[["render",KD]]),QD={class:"flex flex-col w-full h-screen overflow-hidden"},YD={class:"flex flex-row w-full h-full overflow-y-auto"},JD={class:"md:container md:mx-auto w-full sm:pl-44"},XD={class:"w-full h-full"},Od=Rt({__name:"Layout",setup(t){return(e,n)=>(ie(),Ee("div",QD,[qe(bD),qe(DD),qe(jD),qe(qD),qe(Zk),v("div",YD,[qe(oD),v("span",JD,[v("div",XD,[dg(e.$slots,"default",{},()=>[Kt("Add view")]),qe(GD)])])])]))}}),ZD="/assets/adjustable-wrench-R0lMtTwB.png",eN="/assets/fan-CsgU8Uvx.png",tN="/assets/brakes-dzGoctIr.png",nN="/assets/oil-CO9vyqw0.png",rN="/assets/spray-vO-oeRxu.png",sN="/assets/whatsapp-Bv3ceAgd.png",iN={class:"md:container md:mx-auto bg-white pt-5"},oN=v("h1",{class:"text-2xl text-left px-5 bg-white text-blue-700 font-black mb-4"},"SERVICIOS PARA AUTOMÓVILES A DOMICILIO",-1),aN=v("p",{class:"text-left px-5 bg-white font-normal mb-6"},[Kt("Lista de servicios de mantenimiento y reparación de automóviles "),v("strong",null,"disponibles a domicilio"),Kt(".")],-1),lN={class:"flex flex-row flex-wrap justify-evenly items-center"},cN={key:0,class:"text-center text-base text-gray-700 py-0 font-black w-ful"},uN=["src"],hN=["innerHTML"],dN={key:2,class:"flex flex-row justify-center items-center mb-3 p-1 w-[15rem] rounded-md bg-white hover:opacity-70 border-2 border-blue-100"},fN={target:"_blank",class:"text-center text-blue-600 text-xl font-bold",href:"https://api.whatsapp.com/send?phone=906841366"},pN=["src"],mN=Rt({__name:"AllServices",setup(t){const e=hl(),n=Kn(),r=Ie([{name:"LAVADO",imageSrc:rN,description:"<span>Encuentra talleres cerca de ti.</span>",CTAtext:"VER TALLERES",isCarWash:!0},{name:"Afinamiento",organization:"Nombre del taller",imageSrc:ZD,description:"<span>Servicio regular para mantener el rendimiento óptimo del vehículo.</span>",price:"Desde S/50",rating:4.5,endedServices:37,mobile:"+51 987654321",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Cambio de Aceite",imageSrc:nN,description:"<span>Cambio de aceite y filtro para garantizar un motor saludable.</span>",price:"Desde S/30 (Incluye filtro)",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Reparación de Frenos",imageSrc:tN,description:"<span>Inspección y reparación de sistemas de frenos para una conducción segura.</span>",price:"Desde S/100",CTAtext:"CONTACTAR",isCarWash:!1},{name:"Revisión de Aire Acondicionado",imageSrc:eN,description:"<span>Recarga y mantenimiento del sistema de aire acondicionado para un clima interior cómodo.</span>",price:"Desde S/60",CTAtext:"CONTACTAR",isCarWash:!1}]);return Zu(()=>{n.location.administrative_area_level_2&&n.location.administrative_area_level_2!="Trujillo"&&e.push({name:"CarWashServices"})}),(s,i)=>{const o=ag("router-link");return ie(),At(Od,null,{default:Zt(()=>[v("div",iN,[oN,aN,v("div",lN,[(ie(!0),Ee(ut,null,th(r.value,a=>(ie(),Ee("div",{key:a.name,class:"w-[21rem] h-[25rem] mb-6 p-2 mr-1 bg-blue-50 flex flex-col justify-center items-center rounded-lg shadow-xl"},[v("p",{class:it(["text-center text-2xl font-black",{"text-orange-600":a.isCarWash,"text-blue-700":!a.isCarWash}])},Ht(a.name),3),a.price?(ie(),Ee("p",cN,Ht(a.price),1)):Dt("",!0),v("img",{src:a.imageSrc,alt:"Car service",class:"my-6 h-20 rounded"},null,8,uN),v("p",{class:"px-1 rounded mb-6 w-[19rem] text-center text-gray-700 text-base font-mono italic font-black",innerHTML:a.description},null,8,hN),a.isCarWash?(ie(),At(o,{key:1,to:{name:"CarWashServices"},class:"hover:opacity-80 mb-3 p-1 w-[15rem] rounded-md text-center text-white text-xl font-bold bg-orange-600"},{default:Zt(()=>[Kt(Ht(a.CTAtext),1)]),_:2},1024)):(ie(),Ee("button",dN,[v("a",fN,Ht(a.CTAtext),1),v("img",{src:A(sN),alt:"whatsapp",class:"ml-4 h-6"},null,8,pN)]))]))),128))])])]),_:1})}}}),gN={class:"px-5"},_N={key:0,class:"relative flex justify-center items-center w-full h-96 text-lg font-bold text-gray-600"},yN=v("div",{id:"map",class:"h-[400px]"},null,-1),vN=Rt({__name:"CarWashMap",setup(t){const e=Ie(!0),n=Kn();let r=null,s=null;const i=[];function o(c,u,h,d){const y=a(c),T=a(h),E=a(h-c),R=a(d-u),O=Math.sin(E/2)*Math.sin(E/2)+Math.cos(y)*Math.cos(T)*Math.sin(R/2)*Math.sin(R/2),z=6371*(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)));return Math.round(z*10)/10}function a(c){return c*Math.PI/180}async function l(){const{latitude:c,longitude:u}=n.coordinates,h=c&&u?{lat:c,lng:u}:{lat:-8.1169477,lng:-79.021662},{Map:d}=await google.maps.importLibrary("maps"),{PlacesService:f}=await google.maps.importLibrary("places"),{AdvancedMarkerView:y,PinView:T}=await google.maps.importLibrary("marker");r=new d(document.getElementById("map"),{zoom:14,center:h,mapId:"f9e9a07281e43ce7"});var E=new google.maps.LatLng(h.lat,h.lng),R={type:"car_wash",location:E,radius:5e3},O=new f(r);await O.nearbySearch(R,async(L,z)=>{if(z===google.maps.places.PlacesServiceStatus.OK)for(var G=0;G<L.length;G++){var N=L[G];const Z=await new T({glyphColor:"#811411",background:"#e94335",borderColor:"#811411"}),ne=new T({glyphColor:"#811411",background:"#e94335",borderColor:"#811411",scale:1.2}),M=await new y({map:r,position:N.geometry.location,content:Z.element,zIndex:G}),Y=new google.maps.InfoWindow({content:`<ul class="py-2">
            <li class="flex flex-row items-center"><p class="mb-2"><span class="font-semibold">Taller:</span> ${N.name||""} <span class="font-semibold">(${o(h.lat,h.lng,N.geometry.location.lat(),N.geometry.location.lng())} Km)</span></p></li>
            <li class="flex flex-row items-center">${N.business_status?'<p class="mb-2"><span class="font-semibold">Estado:</span> Operacional</p>':""}</li>
            <li class="flex flex-row items-center">${N.isOpen?'<p class="mb-2 font-semibold">Abierto ahora</p>':""}</li>
            <li class="flex flex-row items-center">${N.vicinity?`<p class="mb-2"><span class="font-semibold">Dirección: </span>${N.vicinity}</p>`:""}</li>
            <li class="flex flex-row items-center">${N.user_ratings_total?`<p class="mb-2"><span class="font-semibold">Rating: </span>⭐ ${N.rating} (${N.user_ratings_total})</p>`:""}</li>
            <li class="mt-2"><a class="text-sm text-blue-700 font-black rounded-md py-1" href="https://www.google.com/maps/dir/?api=1&destination=${N.geometry.location.lat},${N.geometry.location.lng}" target="_blank" rel="noopener noreferrer">Abrir en Google Maps</a></li>
          </ul>`});M.addListener("gmp-click",()=>{(s==null?void 0:s.zIndex)!=M.zIndex&&(s&&(s.content=Z.element),M.content=ne.element,s=M,i.forEach(re=>re.close()),Y.open({anchor:M,map:r}),i.push(Y))})}}),r.addListener("bounds_changed",async function(){const L=r.getBounds();await O.nearbySearch({radius:5e3,bounds:L,location:E,type:"car_wash"},async(z,G)=>{if(G===google.maps.places.PlacesServiceStatus.OK)for(var N=0;N<z.length;N++){var Z=z[N];const ne=await new T({glyphColor:"#811411",background:"#e94335",borderColor:"#811411"}),M=new T({glyphColor:"#811411",background:"#e94335",borderColor:"#811411",scale:1.2}),Y=await new y({map:r,position:Z.geometry.location,content:ne.element,zIndex:N}),re=new google.maps.InfoWindow({content:`<ul class="py-2">
              <li class="flex flex-row items-center"><p class="mb-2"><span class="font-semibold">Taller:</span> ${Z.name||""} <span class="font-semibold">(${o(h.lat,h.lng,Z.geometry.location.lat(),Z.geometry.location.lng())} Km)</span></p></li>
              <li class="flex flex-row items-center">${Z.business_status?'<p class="mb-2"><span class="font-semibold">Estado:</span> Operacional</p>':""}</li>
              <li class="flex flex-row items-center">${Z.isOpen?'<p class="mb-2 font-semibold">Abierto ahora</p>':""}</li>
              <li class="flex flex-row items-center">${Z.vicinity?`<p class="mb-2"><span class="font-semibold">Dirección: </span>${Z.vicinity}</p>`:""}</li>
              <li class="flex flex-row items-center">${Z.user_ratings_total?`<p class="mb-2"><span class="font-semibold">Rating: </span>⭐ ${Z.rating} (${Z.user_ratings_total})</p>`:""}</li>
              <li class="mt-2"><a class="text-sm text-blue-700 font-black rounded-md py-1" href="https://www.google.com/maps/dir/?api=1&destination=${Z.geometry.location.lat},${Z.geometry.location.lng}" target="_blank" rel="noopener noreferrer">Abrir en Google Maps</a></li>
            </ul>`});Y.addListener("gmp-click",()=>{(s==null?void 0:s.zIndex)!=Y.zIndex&&(s&&(s.content=ne.element),Y.content=M.element,s=Y,i.forEach(De=>De.close()),re.open({anchor:Y,map:r}),i.push(re))})}})})}return Zu(async()=>{n.location.postal_code&&(await l(),e.value=!1)}),(c,u)=>(ie(),Ee("div",gN,[e.value?(ie(),Ee("div",_N,"Cargando el mapa...")):Dt("",!0),yN]))}}),wN={class:"md:container md:mx-auto pt-5"},EN=v("h1",{class:"text-2xl text-left px-5 bg-white font-black text-blue-700 mb-4"},"LAVADO DE AUTOMÓVILES",-1),TN=v("p",{class:"text-left px-5 bg-white font-normal text-black mb-6"},"Encuentra talleres de lavado cerca de ti.",-1),bN=Rt({__name:"CarWashServices",setup(t){return(e,n)=>(ie(),At(Od,null,{default:Zt(()=>[v("div",wN,[EN,TN,qe(vN)])]),_:1}))}}),IN={class:"md:container md:mx-auto pt-5 mb-11"},AN=v("h1",{class:"text-left pl-5 text-2xl text-blue-700 font-black mb-4"},"CONFIGURACIÓN",-1),SN=v("p",{class:"text-left pl-5 bg-white font-normal mb-6"},"Administra tus datos personales y de tus autos.",-1),RN={class:"mb-4 rounded-md w-11/12 mx-5 p-5 flex flex-col justify-center items-start bg-white"},PN=v("h2",{class:"text-lg text-left bg-white font-bold mb-6"},"Información de contacto",-1),CN={class:"mb-4 field flex flex-col w-full"},xN=v("label",{for:"first-name",class:"bg-white font-bold text-xs mb-1"},"Nombres*",-1),ON={key:0,class:"text-xs text-red-700 font-medium pl-2"},kN={class:"mb-4 field flex flex-col w-full"},DN=v("label",{for:"last-name",class:"bg-white font-bold text-xs mb-1"},"Apellidos*",-1),NN={key:0,class:"text-xs text-red-700 font-medium pl-2"},VN={class:"field flex flex-col w-full"},MN=v("label",{for:"phone",class:"bg-white font-bold text-xs mb-1"},"Teléfono*",-1),LN={key:0,class:"text-xs text-red-700 font-medium pl-2"},FN={class:"mb-4 rounded-md w-11/12 mx-5 p-5 flex flex-col justify-center items-start bg-white"},UN={class:"flex flex-row justify-between items-center w-full mb-6"},$N=v("h2",{class:"text-lg text-left bg-white font-bold mb-4"},"Información de tus automóviles",-1),jN={class:"w-full flex flex-row justify-between items-center mb-4"},BN={class:"text-xl text-left text-blue-700 font-black"},qN=["onClick"],zN={class:"w-full flex flex-row justify-between items-center"},HN={class:"field flex flex-col mb-2 w-full mr-1"},WN=v("label",{for:"brand",class:"bg-white font-bold text-xs mb-1"},"Marca",-1),KN=["onUpdate:modelValue"],GN={class:"field flex flex-col mb-2 w-full ml-1"},QN=v("label",{for:"model",class:"bg-white font-bold text-xs mb-1"},"Modelo",-1),YN=["onUpdate:modelValue"],JN={class:"w-full flex flex-row justify-between items-center"},XN={class:"field flex flex-col mb-2 w-full mr-1"},ZN=v("label",{for:"year",class:"bg-white font-bold text-xs mb-1"},"Año",-1),eV=["onUpdate:modelValue"],tV={class:"field flex flex-col mb-2 w-full mr-1 ml-1"},nV=v("label",{for:"mileage",class:"bg-white font-bold text-xs mb-1"},"Kilometraje Actual",-1),rV=["onUpdate:modelValue"],sV={class:"field flex flex-col mb-2 w-full ml-1"},iV=v("label",{for:"fuel-type",class:"bg-white font-bold text-xs mb-1"},"Tipo de Combustible",-1),oV=["onUpdate:modelValue"],aV=v("option",{value:"gasolina"},"Gasolina",-1),lV=v("option",{value:"gnv"},"GNV",-1),cV=v("option",{value:"glp"},"GLP",-1),uV=v("option",{value:"diesel"},"Diésel",-1),hV=v("option",{value:"hibrido"},"Híbrido",-1),dV=[aV,lV,cV,uV,hV],fV={class:"w-full flex flex-row justify-between items-center"},pV={class:"field flex flex-col mb-2 w-full mr-1"},mV=v("label",{for:"soat-expiry",class:"bg-white font-bold text-xs mb-1"},"Fecha vencimiento SOAT",-1),gV=["onUpdate:modelValue"],_V={class:"field flex flex-col mb-2 w-full mr-1 ml-1"},yV=v("label",{for:"annual-inspection",class:"bg-white font-bold text-xs mb-1"},"Fecha revisión técnica anual",-1),vV=["onUpdate:modelValue"],wV={class:"field flex flex-col mb-2 w-full ml-1"},EV=v("label",{for:"technical-inspection",class:"bg-white font-bold text-xs mb-1"},"Fecha inspección técnica anual",-1),TV=["onUpdate:modelValue"],bV={key:0,class:"h-0.5 w-full mb-8 bg-white"},IV=["disabled"],AV=Rt({__name:"Profile",setup(t){const e=ei(),n=Kn(),r=R0(),s=hl();rl(()=>{e.isAuthenticated||s.push({name:"Home"})});async function i(){n.handleSubmit(async o=>(e.setIsLoading(!0),await n.updateUser({firstName:o.firstName,lastName:o.lastName,phone:o.phone}).then(()=>{e.setIsLoading(!1),r.setShowAlert(!0)})),()=>{e.setIsLoading(!1)})()}return(o,a)=>(ie(),At(Od,null,{default:Zt(()=>[v("div",IN,[AN,SN,v("form",RN,[PN,v("div",CN,[xN,lt(v("input",{id:"first-name","onUpdate:modelValue":a[0]||(a[0]=l=>A(n).firstName=l),type:"text",placeholder:"Ingresa tu nombre",class:it(["pl-2 bg-blue-100",{"border-red-400 border-2 rounded-xs":A(n).meta.touched&&A(n).errors&&A(n).errors.firstName}]),style:{outline:"none"}},null,2),[[kt,A(n).firstName]]),A(n).meta.touched&&A(n).errors&&A(n).errors.firstName?(ie(),Ee("p",ON,"Los nombres son requeridos")):Dt("",!0)]),v("div",kN,[DN,lt(v("input",{id:"last-name","onUpdate:modelValue":a[1]||(a[1]=l=>A(n).lastName=l),type:"text",placeholder:"Ingresa tus apellidos",class:it(["pl-2 bg-blue-100",{"border-red-400 border-2 rounded-xs":A(n).meta.touched&&A(n).errors&&A(n).errors.lastName}]),style:{outline:"none"}},null,2),[[kt,A(n).lastName]]),A(n).meta.touched&&A(n).errors&&A(n).errors.lastName?(ie(),Ee("p",NN,"Los apellidos son requeridos")):Dt("",!0)]),v("div",VN,[MN,lt(v("input",{id:"phone","onUpdate:modelValue":a[2]||(a[2]=l=>A(n).phone=l),type:"tel",placeholder:"Ingresa tu número de teléfono",class:it(["mb-1 pl-2 bg-blue-100",{"border-red-400 border-2 rounded-xs":A(n).meta.touched&&A(n).errors&&A(n).errors.phone}]),style:{outline:"none"}},null,2),[[kt,A(n).phone]]),A(n).meta.touched&&A(n).errors&&A(n).errors.phone?(ie(),Ee("p",LN,"El teléfono es requerido")):Dt("",!0)])]),v("form",FN,[v("span",UN,[$N,v("button",{type:"button",onClick:a[3]||(a[3]=(...l)=>A(n).addCar&&A(n).addCar(...l)),class:"pointer-default bg-white hover:opacity-80 text-blue-100 font-bold rounded-md px-4 py-1"},"Agregar automóvil +")]),(ie(!0),Ee(ut,null,th(A(n).cars,(l,c)=>(ie(),Ee("span",{key:c,class:"flex flex-col justify-between items-center w-full"},[v("span",jN,[v("p",BN,"AUTO N° "+Ht(c+1),1),v("button",{type:"button",onClick:u=>A(n).removeCar(c),class:"ml-4 px-2 rounded-md hover:bg-white hover:text-white font-bold text-blue-700 bg-white"},"Quitar auto",8,qN)]),v("span",zN,[v("div",HN,[WN,lt(v("input",{id:"brand","onUpdate:modelValue":u=>l.brand=u,type:"text",placeholder:"Ejemplo: Toyota, Honda, etc.",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,KN),[[kt,l.brand]])]),v("div",GN,[QN,lt(v("input",{id:"model","onUpdate:modelValue":u=>l.model=u,type:"text",placeholder:"Ejemplo: Corolla, Civic, etc.",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,YN),[[kt,l.model]])])]),v("span",JN,[v("div",XN,[ZN,lt(v("input",{id:"year","onUpdate:modelValue":u=>l.year=u,type:"number",placeholder:"Ejemplo: 2022",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,eV),[[kt,l.year]])]),v("div",tV,[nV,lt(v("input",{id:"mileage","onUpdate:modelValue":u=>l.mileage=u,type:"number",placeholder:"Ejemplo: 50000",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,rV),[[kt,l.mileage]])]),v("div",sV,[iV,lt(v("select",{id:"fuel-type","onUpdate:modelValue":u=>l.fuelType=u,class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},dV,8,oV),[[qE,l.fuelType]])])]),v("span",fV,[v("div",pV,[mV,lt(v("input",{id:"soat-expiry","onUpdate:modelValue":u=>l.soatExpiry=u,type:"date",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,gV),[[kt,l.soatExpiry]])]),v("div",_V,[yV,lt(v("input",{id:"annual-inspection","onUpdate:modelValue":u=>l.annualInspection=u,type:"date",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,vV),[[kt,l.annualInspection]])]),v("div",wV,[EV,lt(v("input",{id:"technical-inspection","onUpdate:modelValue":u=>l.technicalInspection=u,type:"date",class:"mb-4 pl-2 bg-blue-100",style:{outline:"none"}},null,8,TV),[[kt,l.technicalInspection]])])]),c!=A(n).cars.length-1&&A(n).cars.length>0?(ie(),Ee("div",bV)):Dt("",!0)]))),128))]),v("button",{disabled:A(n).isSubmitting,type:"button",onClick:i,class:"w-11/12 flex flex-row justify-center items-center mx-5 mb-3 p-1 rounded-md bg-blue-600 hover:opacity-80 text-blue-100 font-bold"},Ht(A(n).isSubmitting?"ENVIANDO...":"GUARDAR"),9,IV)])]),_:1}))}}),SV=sb({history:NT("/"),routes:[{path:"/",name:"Home",redirect:"/all-services"},{path:"/all-services",name:"AllServices",component:mN},{path:"/car-wash-services",name:"CarWashServices",component:bN},{path:"/profile",name:"Profile",component:AV}]}),kd=GE(Dk);kd.use(XE());kd.use(SV);kd.mount("#app");
